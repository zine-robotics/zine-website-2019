if (self.CavalryLogger) { CavalryLogger.start_js(["HIxev"]); }

__d("ComposedEntityMutabilityToName",[],(function(a,b,c,d,e,f){e.exports={0:"MUTABLE",1:"IMMUTABLE",2:"SEGMENTED"}}),null);
__d("ComposedEntityTypeToName",[],(function(a,b,c,d,e,f){e.exports={0:"MENTION",1:"LINK",2:"IMAGE",3:"VIDEO",4:"EMOTICON",5:"TOKEN",6:"HASHTAG",7:"IMPLICIT_LINK",8:"EMBED",9:"EMOJI",10:"MATH",11:"HIGHLIGHT",12:"DELIGHT",13:"TEMPLATE_VARIABLE",14:"ASSISTANT_TYPEAHEAD"}}),null);
__d("MessengerDotComPromotionActionURL",[],(function(a,b,c,d,e,f){e.exports={turn_on_notification:"TurnOnNotification",messengerdotcom_cell_cutover_qp:"messengerdotcomCellCutoverQp"}}),null);
__d("SRDevModeParams",[],(function(a,b,c,d,e,f){e.exports={items:["__spin_r","__spin_b","__spin_t","__spin_dev_mhenv"],escapeParam:"reset_spin"}}),null);
__d("MessengerMuteUtils.bs",["fbt","formatDate","DateStrings"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();if(a>0)if(a<86401)return void 0;else{var c=new Date(a*1e3).getDay(),d=c===new Date().getDay(),e=c===new Date().getDay()+1;if(e)return g._("Off until {time} tomorrow",[g._param("time",b("formatDate")(a,"g:ia"))]);else if(d)return g._("Off until {time}",[g._param("time",b("formatDate")(a,"g:ia"))]);else return g._("Off until {time} on {weekday name}",[g._param("time",b("formatDate")(a,"g:ia")),g._param("weekday name",b("DateStrings").getWeekdayName(c))])}else if(a===-1)return g._("Off indefinitely");else return void 0}f.mutedUntilLabel=a}),null);
__d("MeasurePeopleTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={time:!0,weight:!0};e.exports=a}),null);
__d("MessengerBotsWebTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCount=function(a){this.$1.count=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setIndex=function(a){this.$1.index=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPayload=function(a){this.$1.payload=a;return this};c.setQrContentType=function(a){this.$1.qr_content_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTitle=function(a){this.$1.title=a;return this};c.setTitles=function(a){this.$1.titles=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setType=function(a){this.$1.type=a;return this};c.setURL=function(a){this.$1.url=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={count:!0,event:!0,index:!0,page_id:!0,payload:!0,qr_content_type:!0,time:!0,title:!0,titles:!0,type:!0,url:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerPlatformClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClientUserID=function(a){this.$1.client_userid=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setDeviceid=function(a){this.$1.deviceid=a;return this};c.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};c.setIsemployee=function(a){this.$1.isemployee=a;return this};c.setLoggingToken=function(a){this.$1.logging_token=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setRawclienttime=function(a){this.$1.rawclienttime=a;return this};c.setSessionid=function(a){this.$1.sessionid=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={appid:!0,appversion:!0,client_userid:!0,clienttime:!0,country:!0,deviceid:!0,extra_client_data:!0,isemployee:!0,logging_token:!0,name:!0,rawclienttime:!0,sessionid:!0,thread_id:!0,time:!0,weight:!0};e.exports=a}),null);
__d("WorkChatActivityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.app_id=a;return this};c.setAppVersion=function(a){this.$1.app_version=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setGroupID=function(a){this.$1.group_id=a;return this};c.setHscrollPosition=function(a){this.$1.hscroll_position=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setThreadIds=function(a){this.$1.thread_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={app_id:!0,app_version:!0,event:!0,group_id:!0,hscroll_position:!0,message_id:!0,thread_ids:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("WorkDoNotDisturbSettingsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WorkDoNotDisturbSettingsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkDoNotDisturbSettingsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkDoNotDisturbSettingsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setOption=function(a){this.$1.option=a;return this};c.setSource=function(a){this.$1.source=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event:!0,option:!0,source:!0,time:!0,weight:!0};e.exports=a}),null);
__d("WorkQuickChatTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WorkQuickChatLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkQuickChatLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkQuickChatLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setActionType=function(a){this.$1.action_type=a;return this};c.setLocation=function(a){this.$1.location=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={action_type:!0,location:!0,message_id:!0,thread_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("ChatFlyoutPlaceholder.react",["React","XUISpinner.react"],(function(a,b,c,d,e,f){"use strict";var g={padding:"30px",textAlign:"center"};a=function(){return b("React").createElement("div",{style:g},b("React").createElement(b("XUISpinner.react"),{size:"large"}))};e.exports=a}),null);
__d("QuickPromotionActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NONE:"none",CLOSE:"close",CUSTOM_URL:"custom",DIALOG_URL:"dialog_url",INSTALL_APP:"install_app",FACEWEB_URL:"faceweb_url",ITEMS_LIST:"items_list"})}),null);
__d("MessengerNotificationBanner.react",["cx","ix","AsyncRequest","Bootloader","CurrentUser","Image.react","MessengerButtonReact.bs","MessengerDotComPromotionActionURL","MessengerSettingsActions","MessengerSignals.bs","QuickPromotionActionType","React","XMessengerDotComNUXLoggingController","XQuickPromotionSimpleLoggingController","goURI","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerButtonReact.bs").jsComponent;a=b("React").PropTypes;var j=h("86832"),k=h("86833"),l=h("600634");c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={bannerClosed:!1},d.$5=function(){d.$6(),d.props.promotionID?(new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",d.props.promotionID).setEnum("qp_action","primary").setStringToStringMap("qp_instance_log_data",d.props.instanceLogData).getURI()).send(),d.props.primaryActionURI===b("MessengerDotComPromotionActionURL").turn_on_notification?b("MessengerSettingsActions").changeDesktopNotifs(!0):d.props.primaryActionType===b("QuickPromotionActionType").DIALOG_URL?b("Bootloader").loadModules(["AsyncDialog"],function(a){a.send(new(b("AsyncRequest"))().setURI(b("nullthrows")(d.props.primaryActionURI)))},"MessengerNotificationBanner.react"):window.open(d.props.primaryActionURI)):d.props.primaryActionURI?b("goURI")(d.props.primaryActionURI,!0):d.props.primaryActionCallback&&d.props.primaryActionCallback()},d.$2=function(){d.$6(),d.props.promotionID&&new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",d.props.promotionID).setEnum("qp_action","dismiss").setStringToStringMap("qp_instance_log_data",d.props.instanceLogData).getURI()).send()},d.$6=function(){d.setState({bannerClosed:!0},function(){b("MessengerSignals.bs").resize()})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.promotionID||this.setState({bannerClosed:!1})};d.componentDidMount=function(){if(this.$1()||!this.props.promotionID||b("CurrentUser").isWorkUser())return;new(b("AsyncRequest"))().setURI(b("XMessengerDotComNUXLoggingController").getURIBuilder().setInt("promotion_id",this.props.promotionID).setStringToStringMap("instance_log_data",this.props.instanceLogData).getURI()).send()};d.componentDidUpdate=function(){window.dispatchEvent(new Event("resize"))};d.render=function(){return this.$1()?null:b("React").createElement("div",{className:"_2cij"},b("React").createElement(b("Image.react"),{className:"_2cik",onClick:this.$2,src:j}),b("React").createElement(b("Image.react"),{className:"_2cil",src:this.$3()}),this.props.promotionContent," ",this.$4())};d.$1=function(){return this.state.bannerClosed};d.$3=function(){return(this.props.primaryActionURI||"").indexOf("/privacy/response")>-1?l:k};d.$4=function(){return b("React").createElement(i,{className:"_2cim",label:this.props.primaryActionTitle,onClick:this.$5,type:"primary"})};return c}(b("React").Component);c.propTypes={promotionID:a.number,promotionContent:a.string,primaryActionTitle:a.string,primaryActionType:a.string,primaryActionURI:a.string,primaryActionCallback:a.func,instanceLogData:a.object};e.exports=c}),null);
__d("MessengerPromotionDataDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,{strict:!0})||this}return b}(b("ExplicitRegistrationReactDispatcher"));e.exports=new a()}),null);
__d("MessengerPromotionDataStore",["FluxStore","MessengerPromotionDataDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("MessengerPromotionDataDispatcher"))||this;c.$MessengerPromotionDataStore1=null;return c}var d=c.prototype;d.getPromotionData=function(){return this.$MessengerPromotionDataStore1};d.__onDispatch=function(a){switch(a.type){case"SET_PROMOTION_DATA":this.$MessengerPromotionDataStore1!==a.promotionData&&(this.$MessengerPromotionDataStore1=a.promotionData,this.__emitChange());break}};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("MessengerPromotionDataActions",["MessengerPromotionDataDispatcher"],(function(a,b,c,d,e,f){"use strict";a={setPromotionData:function(a){b("MessengerPromotionDataDispatcher").dispatch({type:"SET_PROMOTION_DATA",promotionData:a})}};e.exports=a}),null);
__d("MessengerRefreshPrompt",["fbt","CurrentUser","MessengerPromotionDataActions","Visibility","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=1e3*60*60,i=1e3*60*60*24*3;a=function(){var a=Date.now();b("setIntervalAcrossTransitions")(function(){var c=b("CurrentUser").isWorkUser()?g._("A new version of Workplace Chat is available."):g._("A new version of Messenger is available.");Date.now()-a>i&&b("Visibility").once(b("Visibility").VISIBLE,function(){b("MessengerPromotionDataActions").setPromotionData({promotionID:null,promotionContent:c,primaryActionTitle:g._("Refresh"),instanceLogData:{},primaryActionURI:window.location.href}),a=Date.now()})},h)};e.exports=a}),null);
__d("WorkNuxID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DO_NOT_DISTURB_PROMOTION_NUX_ID:6237,WORK_CHAT_DOWNLOAD_UPSELL_BANNER:5468})}),null);
__d("WorkOnboardingLogAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT_THREAD_CREATED_WITH_INVITER:"CHAT_THREAD_CREATED_WITH_INVITER",CLICKED_HOWTO_GUIDE:"CLICKED_HOWTO_GUIDE",CREATE_SECRET_GROUP:"CREATE_SECRET_GROUP",CREATE_SECRET_GROUP_FAILED:"CREATE_SECRET_GROUP_FAILED",LANDED_IN_GROUP_START_AFTER_SIGNUP:"LANDED_IN_GROUP_START_AFTER_SIGNUP",NEW_USER_CREATED:"NEW_USER_CREATED",SHOWN_HOWTO_RHC:"SHOWN_HOWTO_RHC",SURVEY_COMPLETED:"SURVEY_COMPLETED",SURVEY_SHOWN:"SURVEY_SHOWN",SURVEY_SKIPPED:"SURVEY_SKIPPED",SURVEY_JOB_TITLE_COMPLETED:"SURVEY_JOB_TITLE_COMPLETED",SURVEY_COMPANY_SIZE_COMPLETED:"SURVEY_COMPANY_SIZE_COMPLETED",SURVEY_ROLLOUT_COMPLETED:"SURVEY_ROLLOUT_COMPLETED",GROUP_BOT_RESPONSE:"GROUP_BOT_RESPONSE",ADD_FEEDBACK_TO_GROUP_NUX_DISSMISSED:"ADD_FEEDBACK_TO_GROUP_NUX_DISSMISSED",ADD_FEEDBACK_TO_GROUP_NUX_SHOWN:"ADD_FEEDBACK_TO_GROUP_NUX_SHOWN",ADD_NEW_MEMBER_NUX_SHOWN:"ADD_NEW_MEMBER_NUX_SHOWN",ADD_NEW_MEMBER_NUX_DISMISSED:"ADD_NEW_MEMBER_NUX_DISMISSED",CREATE_GROUP_NUX_SHOWN:"CREATE_GROUP_NUX_SHOWN",CREATE_GROUP_NUX_DISMISSED:"CREATE_GROUP_NUX_DISMISSED",DEMO_GROUP_NUX_SHOWN:"DEMO_GROUP_NUX_SHOWN",DEMO_GROUP_NUX_DISMISSED:"DEMO_GROUP_NUX_DISMISSED",GROUP_EMPTY_POST_NUX_SHOWN:"GROUP_EMPTY_POST_NUX_SHOWN",GROUP_EMPTY_POST_NUX_DISMISSED:"GROUP_EMPTY_POST_NUX_DISMISSED",LANDING_NUX_SHOWN:"LANDING_NUX_SHOWN",LANDING_NUX_DISSMISSED:"LANDING_NUX_DISSMISSED",POST_TO_GROUP_NUX_DISSMISSED:"POST_TO_GROUP_NUX_DISSMISSED",POST_TO_GROUP_NUX_SHOWN:"POST_TO_GROUP_NUX_SHOWN",GROUP_MODAL_NUX_SHOWN:"GROUP_MODAL_NUX_SHOWN",GROUP_MODAL_NUX_DISMISSED:"GROUP_MODAL_NUX_DISMISSED",CHAT_APP_UPSELL_BANNER_SHOWN:"CHAT_APP_UPSELL_BANNER_SHOWN",CHAT_APP_UPSELL_BANNER_BUTTON_CLICKED:"CHAT_APP_UPSELL_BANNER_BUTTON_CLICKED",CHAT_APP_UPSELL_BANNER_DISMISSED:"CHAT_APP_UPSELL_BANNER_DISMISSED",INSTANCE_ACTIVE_CONDITION_CHECK:"INSTANCE_ACTIVE_CONDITION_CHECK",GROUP_EMPTY_UI_SHOWN:"GROUP_EMPTY_UI_SHOWN",GROUP_EMPTY_POST_CLICKED:"GROUP_EMPTY_POST_CLICKED",NEWSFEED_EMPTY_UI_SHOWN:"NEWSFEED_EMPTY_UI_SHOWN",NEWSFEED_EMPTY_UI_CLICKED:"NEWSFEED_EMPTY_UI_CLICKED",ADD_MEMBER_TO_NEW_GROUP_BUTTON_SHOWN:"ADD_MEMBER_TO_NEW_GROUP_BUTTON_SHOWN",ADD_NEW_MEMBER_TO_SMALL_GROUP_CLICKED:"ADD_MEMBER_TO_NEW_GROUP_CLICKED",GROUP_START_CREATE_GROUP_CLICKED:"GROUP_START_CREATE_GROUP_CLICKED",GROUP_START_FIX_GROUP_SUGGESTIONS:"GROUP_START_FIX_GROUP_SUGGESTIONS",GROUP_START_GROUP_CLICKED:"GROUP_START_GROUP_CLICKED",GROUP_START_JOIN_GROUP_CLICKED:"GROUP_START_JOIN_GROUP_CLICKED",GROUP_START_NAVIGATED_TO:"GROUP_START_NAVIGATED_TO",GROUP_START_SUGGESTED_GROUP_CLICKED:"GROUP_START_SUGGESTED_GROUP_CLICKED",GROUP_START_WATERMARK_SHOWN:"GROUP_START_WATERMARK_SHOWN",GROUP_DASH_NAVIGATED_TO:"GROUP_DASH_NAVIGATED_TO"})}),null);
__d("XWorkplaceDesktopDownloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/desktop/download/{?file}/",{build:{type:"String"},file:{type:"String"},ref:{type:"String"}})}),null);
__d("WorkplaceChatUpsellBanner.react",["ix","cx","fbt","Promise","BasicFBNux","Bootloader","Event","Image.react","Link.react","React","SubscriptionsHandler","UserAgent","WorkNuxID","WorkOnboardingLogAction","XUIButton.react","XWorkplaceDesktopDownloadController","asset","promiseDone","suiMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j="https://play.google.com/store/apps/details?id=com.facebook.workchat",k="https://itunes.apple.com/app/work-chat/id958124798";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.state={xOutAppUpsell:!1};c.$2=new(b("SubscriptionsHandler"))();return c}var d=c.prototype;d.componentDidMount=function(){this.$3()};d.componentWillUnmount=function(){this.$2.release()};d.render=function(){return b("React").createElement("div",{className:"_3ej0"+(this.state.xOutAppUpsell?" _3ej2":"")},i._("Get the app and chat anywhere, at any time"),this.$4(),this.$5())};d.$4=function(){var a=null;b("UserAgent").isPlatform("Mac OS X")?a=b("XWorkplaceDesktopDownloadController").getURIBuilder().setString("file","mac").setString("ref","chat_upsell").getURI():b("UserAgent").isPlatform("Windows")&&(a=b("XWorkplaceDesktopDownloadController").getURIBuilder().setString("file","win").setString("ref","chat_upsell").getURI());return b("React").createElement("div",{className:"_3-9a"},a?this.$6(a.toString(),i._("Desktop App")):null,this.$6(k,i._("iOS")),this.$6(j,i._("Android")))};d.$6=function(a,c){var d=this;return b("React").createElement(b("XUIButton.react"),{target:"_blank",className:"_3ej4",label:c,href:a,onClick:function(){return d.$7(c)}})};d.$5=function(){var a=this;return b("React").createElement(b("Link.react"),{className:"_7fxb",onClick:function(){return a.$8()}},b("React").createElement(b("Image.react"),{alt:"X",src:g("480720")}))};d.$8=function(){this.$9(),this.setState({xOutAppUpsell:!0}),window.setTimeout(function(){return b("Event").fire(window,"resize")},300)};d.$7=function(a){b("promiseDone")(this.$10(),function(c){c=c.logger;c.clear();c.setAction(b("WorkOnboardingLogAction").CHAT_APP_UPSELL_BANNER_BUTTON_CLICKED).addToExtraData("button",a.toString()).log()})};d.$9=function(){b("promiseDone")(this.$10(),function(a){a=a.logger;a.clear();a.setAction(b("WorkOnboardingLogAction").CHAT_APP_UPSELL_BANNER_DISMISSED).log()})};d.$3=function(){b("BasicFBNux").onView(b("WorkNuxID").WORK_CHAT_DOWNLOAD_UPSELL_BANNER),b("promiseDone")(this.$10(),function(a){a=a.logger;a.clear();a.setAction(b("WorkOnboardingLogAction").CHAT_APP_UPSELL_BANNER_SHOWN).log()})};d.$10=function(){var a=this;this.$1||(this.$1=new(b("Promise"))(function(c,d){a.$2.addSubscriptions(b("Bootloader").loadModules(["WorkOnboardingTypedLogger"],function(a,b){b=new a();c({logger:b})},"WorkplaceChatUpsellBanner.react"))}));return this.$1};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerBanner.react",["MessengerNotificationBanner.react","MessengerPromotionDataDispatcher","MessengerPromotionDataStore","MessengerRefreshPrompt","React","SubscriptionsHandler","WorkplaceChatUpsellBanner.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={promotionData:b("MessengerPromotionDataStore").getPromotionData()},d.subscriptions=new(b("SubscriptionsHandler"))(),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;b("MessengerRefreshPrompt")();b("MessengerPromotionDataDispatcher").explicitlyRegisterStores([b("MessengerPromotionDataStore")]);this.subscriptions.addSubscriptions(b("MessengerPromotionDataStore").addListener(function(){a.setState({promotionData:b("MessengerPromotionDataStore").getPromotionData()})}))};d.componentWillUnmount=function(){this.subscriptions.release()};d.render=function(){var a=this.state.promotionData;if(this.props.showWorkchatUpsellBanner)return b("React").createElement(b("WorkplaceChatUpsellBanner.react"),null);return a?b("React").createElement(b("MessengerNotificationBanner.react"),{promotionID:a.promotionID,promotionContent:a.promotionContent,primaryActionTitle:a.primaryActionTitle,primaryActionType:a.primaryActionType,primaryActionURI:a.primaryActionURI,primaryActionCallback:a.primaryActionCallback,instanceLogData:a.instanceLogData}):null};return c}(b("React").PureComponent);c.propTypes={showWorkchatUpsellBanner:a.bool,isFirstRedirect:a.bool};e.exports=c}),null);
__d("MessengerEagerThreadLoader",["MercuryThreadInformer","MessengerConfig","MessengerState.re","Run"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=10,h=b("MessengerConfig").MessageLoadCount,i=!1,j=null;function k(a,c){if(b("MessengerState.re").hasLoadedNMessages(a,c,2))return;b("MessengerState.re").getThreadMessagesRange(a,c,0,h,function(){})}a={subscribe:function(a){__p&&__p();var c=b("MercuryThreadInformer").get();j=c.subscribe("threadlist-updated",function(c,d){if(!i)b("Run").onAfterLoad(function(){d.slice(0,g).concat(b("MessengerState.re").getPinnedThreadlist(a)).map(function(b){k(a,b)})}),i=!0;else if(d.length>0){c=b("MessengerState.re").getThreadMetaNow(a,d[0]);c&&c.unread_count>0&&k(a,d[0])}})},unsubscribe:function(){var a=b("MercuryThreadInformer").get();a.unsubscribe(j);j=null}};e.exports=a}),null);
__d("ComposedEntityMutability",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MUTABLE:0,IMMUTABLE:1,SEGMENTED:2})}),null);
__d("MessengerEditorStateManager",["CacheStorage","ComposedEntityMutability","ComposedEntityMutabilityToName","ComposedEntityTypeToName","CurrentUser","DraftEntityInstance","EditorState","FBLogger","LogHistory","MessengerConstants","SelectionState","decodeBlocks","encodeBlocks","mapObject"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ComposedEntityMutability").IMMUTABLE,h=b("LogHistory").getInstance("messenger_editor_state_manager"),i=new(b("CacheStorage"))("localstorage","msgdraft:"),j=new(b("CacheStorage"))("memory"),k=!1,l;a={get:function(a){__p&&__p();if(!a)return this._getEmptyEditorState();if(a===b("MessengerConstants").NEW_THREAD_KEY)return l||this._getEmptyEditorState();var c=i.get(this._getKey(a),!1);k&&(c?(j.set(a,c),i.remove(this._getKey(a))):c=j.get(a,!1));if(!c)return this._getEmptyEditorState();a=c.encodedBlocks;var d=b("mapObject")(a.entityMap,function(a,c){return new(b("DraftEntityInstance"))({type:b("ComposedEntityTypeToName")[a.type],mutability:b("ComposedEntityMutabilityToName")[g],data:a.data})});a=b("decodeBlocks")(a.blocks,d);d=b("EditorState").createWithContent(a);return b("EditorState").acceptSelection(d,new(b("SelectionState"))(c.selection))},set:function(a,c){if(a===b("MessengerConstants").NEW_THREAD_KEY){l=c;return}var d=b("encodeBlocks")(c.getCurrentContent());c=c.getSelection();var e=c.toJS(),f=k?j:i;f=f.set(this._getKey(a),{encodedBlocks:d,selection:e});f||(this._logWriteError(a),this._switchToMemoryStore(a,d,c))},_getKey:function(a){return b("CurrentUser").getID()+":"+a},_logWriteError:function(a){var c=i.getLastSetExceptionMessage(),d=i.getStorageKeyCount();b("FBLogger")("messenger_dot_com").warn("Fail to write to MessengerEditorState %s  %s",c,d);h.debug("set_editor_state_fail",JSON.stringify({threadID:a,error:c,keysCount:d}))},_switchToMemoryStore:function(a,c,d){if(!k){b("FBLogger")("messenger_dot_com").warn("Switching to MemoryStorage");h.debug("Switching to memoryStorage");k=!0;d=d.toJS();j.set(a,{encodedBlocks:c,selection:d})}},_getEmptyEditorState:function(){var a=b("EditorState").createEmpty();return b("EditorState").forceSelection(a,a.getSelection())}};e.exports=a}),null);
__d("MessengerWorkContextInformationWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2100811943310675"};b.getQueryID=function(){return"282206062494175"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MercuryWorkContextInformation",["EventEmitter","KeyedCallbackManager","MercuryDispatcher","MercurySingletonProvider","MessengerWorkContextInformationWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("EventEmitter"))();a=function(){__p&&__p();function a(a){__p&&__p();var c=this;this.$4=new Map();this.$6=function(a){__p&&__p();if(a&&a.user!=null&&a.user.id!=null&&a.user.scim_company_user){var b=a.user.id;a=a.user.scim_company_user;var d=a.work_phone_numbers!=null?a.work_phone_numbers.nodes.filter(function(a){return a.is_primary_number===!0&&a.user_phone_number_type}).shift():null,e=a.work_location!=null?a.work_location.nodes[0]:null,f={};f[b]={phone:d?[d.user_phone_number_for_display]:null,email:a.email!=null&&a.is_emailless!==!0?[a.email]:null,location:e?[e.user_formatted_address]:null};c.$3.addResourcesAndExecute(f);c.$4.set(b,!1);g.emit("change")}};this.$1=a;this.$2=b("MercuryDispatcher").getForFBID(this.$1);this.$3=new(b("KeyedCallbackManager"))();this.$4=new Map()}a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};var c=a.prototype;c.getTopThreads=function(){return this.$3.getAllResources()};c.getOrFetch=function(a){if(a==null)return null;var b=this.$3.getResource(a);if(b)return b;this.$5(a);return null};c.$5=function(a){if(this.$4.get(a))return;this.$4.set(a,!0);b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerWorkContextInformationWebGraphQLQuery"))({id:a})),this.$6)};a.addListener=function(a,b){return g.addListener(a,b)};return a}();var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerComposerActions",["MessengerDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null,MOVE_DRAFT:null});a={Types:g,addToken:function(a){b("MessengerDispatcher").dispatch({type:g.ADD_TOKEN,entry:a})},moveDraftToNextThread:function(a){b("MessengerDispatcher").dispatch({type:g.MOVE_DRAFT,threadID:a})},removeToken:function(a){b("MessengerDispatcher").dispatch({type:g.REMOVE_TOKEN,entry:a})},focusComposer:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_COMPOSER})},focusTypeahead:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_TYPEAHEAD})},exitComposeState:function(){b("MessengerDispatcher").dispatch({type:g.EXIT_COMPOSE_STATE})},exitComposeStateAbandonSearch:function(){b("MessengerDispatcher").dispatch({type:g.EXIT_COMPOSE_STATE,abandon_search:!0})}};e.exports=a}),null);
__d("MessengerComposerState",["immutable"],(function(a,b,c,d,e,f){"use strict";a=b("immutable").Record({step:null,recipients:b("immutable").List()});a.__TCmeta={type:"MessengerComposerState"};e.exports=a}),null);
__d("MessengerComposerSteps",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({NULL:null,SELECT_RECIPIENTS:null,COMPOSE:null});e.exports=a}),null);
__d("MessengerComposerStore",["EditorState","MessengerActions","MessengerBootloadedSecondarySearchLogger","MessengerComposerActions","MessengerComposerState","MessengerComposerSteps","MessengerConstants","MessengerDispatcher","MessengerEditorStateManager","MessengerSecondarySearchFunnelConstants","MessengerStore","MessengerURIStore","MessengerView","immutable","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("MessengerComposerState"))({step:b("MessengerComposerSteps").NULL,recipients:b("immutable").List()});a=b("MessengerSecondarySearchFunnelConstants").EVENTS;var h=a.CLICK_OTHER_THREAD,i=a.END,j=a.START,k=a.RESULT_SELECTED,l=a.TOKEN_REMOVED;c=b("MessengerSecondarySearchFunnelConstants").END_ACTIONS;var m=c.ABANDON,n=c.ENTER_THREAD,o=b("MessengerSecondarySearchFunnelConstants").CLIENTS.MESSENGER_DOT_COM,p=b("MessengerSecondarySearchFunnelConstants").SELECTION_TYPES.ADD,q=b("MessengerSecondarySearchFunnelConstants").ENTRY_SURFACES.COMPOSER,r=b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$MessengerComposerStore1=g;return b}var d=c.prototype;d.getState=function(){return this.$MessengerComposerStore1};d.__onDispatch=function(a){__p&&__p();b("MessengerDispatcher").waitFor([b("MessengerURIStore").getDispatchToken()]);var c=b("MessengerURIStore").getState().detailView,d=this.$MessengerComposerStore1.recipients,e=this.$MessengerComposerStore1.step,f=null,g=null;switch(a.type){case b("MessengerComposerActions").Types.ADD_TOKEN:if(d.some(function(b){return b.getUniqueID()===a.entry.getUniqueID()}))break;b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:k,id:a.entry.getUniqueID(),query:null,surface:q,loggingID:r,selectionType:p});f=d.push(a.entry);break;case b("MessengerComposerActions").Types.REMOVE_TOKEN:var s=a.entry.getUniqueID(),t=d.findIndex(function(a){return a.getUniqueID()===s});t!==-1&&(f=d["delete"](t),b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:l,clearedAll:!1,deletedIDs:[a.entry.getUniqueID()],loggingID:r}));break;case b("MessengerComposerActions").Types.FOCUS_COMPOSER:e===b("MessengerComposerSteps").SELECT_RECIPIENTS&&(g=b("MessengerComposerSteps").COMPOSE);break;case b("MessengerComposerActions").Types.FOCUS_TYPEAHEAD:e===b("MessengerComposerSteps").COMPOSE&&(g=b("MessengerComposerSteps").SELECT_RECIPIENTS);break;case b("MessengerActions").Types.REPLACE_STATE:t=b("MessengerURIStore").getPrevState().detailView;t!==b("MessengerView").DETAIL.COMPOSE&&c===b("MessengerView").DETAIL.COMPOSE?(g=b("MessengerComposerSteps").SELECT_RECIPIENTS,b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:j,client:o,surface:q,loggingID:r})):t===b("MessengerView").DETAIL.COMPOSE&&c!==b("MessengerView").DETAIL.COMPOSE&&b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:h,loggingID:r});break;case b("MessengerComposerActions").Types.MOVE_DRAFT:t=a.threadID.split(":");c=t.length>1?t[1]:"";b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:i,surface:q,loggingID:r,end_reason:n,threadID:c,isNewThread:!1});b("MessengerEditorStateManager").set(a.threadID,b("MessengerEditorStateManager").get(b("MessengerConstants").NEW_THREAD_KEY));break;case b("MessengerComposerActions").Types.EXIT_COMPOSE_STATE:var u=b("EditorState").createEmpty();b("setTimeout")(function(){b("MessengerEditorStateManager").set(b("MessengerConstants").NEW_THREAD_KEY,b("EditorState").forceSelection(u,u.getSelection()))},0);a.abandon_search?b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:i,surface:q,loggingID:r,end_reason:m}):b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:i,surface:q,loggingID:r,end_reason:n,threadID:a.threadID,isNewThread:!1});g=b("MessengerComposerSteps").NULL;f=b("immutable").List();break}(f||g)&&(this.$MessengerComposerStore1=new(b("MessengerComposerState"))({step:g||e,recipients:f||d}),this.emitChange())};return c}(b("MessengerStore"));e.exports=new d()}),null);
__d("MessengerInitialDataTransformer.bs",["bs_array","bs_caml_array","MercuryThreadlistConstants","MessengerGraphQLThreadlistFetcher.bs","MessengerServerPayloadTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.viewer,d=a.is_page,e=a.additional_participant,f;if(e==null)f=[];else{var g=[];b("bs_array").iter(function(a){if(a==null)return 0;else{g.push(b("MessengerServerPayloadTransformer.bs").transformParticipant(a));return 0}},e.messaging_actors);f=g}e=a.thread_list;e=e==null?null:b("MessengerGraphQLThreadlistFetcher.bs").transform(c,[{limit:b("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT+1|0,folder:"inbox",timestamp:null,filter:null,onlyPinnedThreads:null}],d,[e]);var h=a.pinned_threads;h=h==null?null:b("MessengerGraphQLThreadlistFetcher.bs").transform(c,[{limit:b("MercuryThreadlistConstants").MAX_PINNED_THREADS+1|0,folder:"inbox",timestamp:null,filter:null,onlyPinnedThreads:null}],!1,[h]);var i=a.current_thread,j;if(i==null)j=null;else{i=i.message_thread;j=i==null?null:b("MessengerServerPayloadTransformer.bs").transformThread(c,i,d)}c=e==null?[[],0,[],{},[],[]]:[e.ordered_threadlists,e.pending_folder_unseen_count,e.threads,e.roger,e.participants,e.delivery_receipts];i=c[2];d=a.thread_key;e=d==null?i.filter(function(a){return a.unread_count===0}):[];if(e.length){d=b("bs_caml_array").caml_array_get(e,0).is_canonical;d=d?b("bs_caml_array").caml_array_get(e,0).other_user_fbid:b("bs_caml_array").caml_array_get(e,0).thread_fbid}else d=null;j==null||i.push(j);e=h==null?[]:h.threads;j=e.map(function(b){var a=b.is_canonical;a=a?b.other_user_fbid:b.thread_fbid;if(a==null)return null;else return a});h=i.concat(e);return[{ordered_threadlists:c[0],threads:h,roger:c[3],participants:c[4].concat(f),pending_folder_unseeen_count:c[1],delivery_receipts:c[5],payload_source:"server_initial_data",pinned_thread_ids:j,current_montage_thread:a.current_montage_thread},d]}f.transform=a}),null);
__d("MessengerSearchConfirmationDialogReact.bs",["fbt","bs_block","bs_curry","ReasonReact.bs","MessengerDialogReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").reducerComponent("MessengerSearchConfirmationDialog");function i(a,c,d){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(a){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,a[1][0],void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,g._("Search for \"{term}\"?",[g._param("term",c)]))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](2,g._("OK"),void 0,void 0,function(){return b("bs_curry")._1(a[3],0)},0,void 0,void 0,void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[]))]))]))},function(){return[!0]},h[10],function(c,d){return b("bs_block").__(2,[[!1],function(){return b("bs_curry")._1(a,0)}])},h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.onSearch,a.term,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerSearchStore",["MessengerActions","MessengerDispatcher","MessengerSearchWebGraphQLFetcher","MessengerStore","MessengerUniversalSearchFunnelLoggerConstants","MessengerURIStore","MessengerView","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("immutable").List;var g=b("MessengerUniversalSearchFunnelLoggerConstants").TYPE,h={activeThreadID:null,loading:!1,query:null,results:a(),threadID:null,totalCount:0,threads:null,threadsExhausted:null};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var b;b=a.call(this)||this;b.$MessengerSearchStore5=function(a,c){b.$MessengerSearchStore3=babelHelpers["extends"]({},b.$MessengerSearchStore3,{query:b.$MessengerSearchStore3.query,loading:!1,threads:a});b.emitChange();return};b.$MessengerSearchStore6=function(a,c){b.$MessengerSearchStore3=babelHelpers["extends"]({},b.$MessengerSearchStore3,{query:b.$MessengerSearchStore3.query,loading:!1,threads:[]})};b.$MessengerSearchStore3=h;return b}var d=c.prototype;d.getForFBID=function(a){this.$MessengerSearchStore1=a};d.$MessengerSearchStore4=function(){return this.$MessengerSearchStore2};d.getState=function(){return this.$MessengerSearchStore3};d.__onDispatch=function(a){__p&&__p();var c=this;b("MessengerDispatcher").waitFor([b("MessengerURIStore").getDispatchToken()]);var d=b("MessengerURIStore").getState(),e=d.activeThreadID,f=d.masterView;d=d.sa;var h=f===b("MessengerView").MASTER.SEE_ALL_PEOPLE||f===b("MessengerView").MASTER.SEE_ALL_GROUPS||f===b("MessengerView").MASTER.SEE_ALL_PAGES;d=d;this.$MessengerSearchStore2=d||"";switch(a.type){case b("MessengerActions").Types.REPLACE_STATE:if(this.$MessengerSearchStore3.query!==d||this.$MessengerSearchStore3.threadID!==e){if(h){this.$MessengerSearchStore3=babelHelpers["extends"]({},this.$MessengerSearchStore3,{query:d,loading:!0});a=new(b("MessengerSearchWebGraphQLFetcher"))(function(){return c.$MessengerSearchStore4()},g);a.fetchMSSAQEntries(this.$MessengerSearchStore2,f||"",10,this.$MessengerSearchStore5,this.$MessengerSearchStore6)}else this.$MessengerSearchStore7();this.emitChange()}break}};d.$MessengerSearchStore7=function(){this.$MessengerSearchStore8(["threads","threadsExhausted","loading"])};d.$MessengerSearchStore8=function(a){a=a.reduce(function(a,b){a[b]=h[b];return a},{});this.$MessengerSearchStore3=babelHelpers["extends"]({},this.$MessengerSearchStore3,a)};return c}(b("MessengerStore"));e.exports=new c()}),null);
__d("MercurySearchContextResults",["KeyedCallbackManager","MercuryAPIArgsSource","MercuryIDs","MercuryPayloadSource","MercuryThreadlistConstants","MercuryThreadIDMap","RangedCallbackManager","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MessengerMessageTransformer.bs","WebMessengerConstants"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MercuryThreadIDMap").get(),h=b("MercuryServerPayloadPreprocessor").get(),i=new(b("KeyedCallbackManager"))(),j=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_COUNT,k=b("WebMessengerConstants").MORE_SEARCH_CONTEXT_COUNT;a={getSearchContext:function(a,c,d){__p&&__p();if(a){var e=i.executeOrEnqueue(a,function(b){b=m(b,a);d(b)}),f=i.getUnavailableResources(e);if(f.length){var h={message_id:a,limit:j+1};g.getServerIDFromClientID(c,function(a){var d=b("MercuryIDs").tokenize(c);d.type=="user"?h.other_user_fbid=a:h.thread_fbid=a;n(h)})}return e}},getMoreSearchContext:function(a,c,d,e){__p&&__p();if(a){var f=i.getResource(a);if(f){var h=d==b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP?f.up_message_ids:f.down_message_ids,j=h.getCurrentArraySize()+k,l=h.executeOrEnqueue(0,j,function(){var b=m(f,a);e(b)});h=h.getUnavailableResources(l);if(h.length){h={message_id:a,limit:j,direction:d};j=g.getServerIDFromClientIDNow(c);d=b("MercuryIDs").tokenize(c);d.type=="user"?h.other_user_fbid=j:h.thread_fbid=j;n(h)}return l}}},handleUpdate:function(a){__p&&__p();if(a.graphql_payload){var c=a.graphql_payload.map(function(c){return b("MessengerMessageTransformer.bs").transformMessage(a.viewer,c,a.thread_data,a.for_page)});h.handleUpdate({actions:c,payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}c=a.search_context||{};for(var d in c){var e=c[d],f=e.other_user_fbid||e.thread_fbid;f=g.getClientIDFromServerIDNow(f.toString());var m=!i.getResource(d);f=m?{thread_id:f,up_message_ids:new(b("RangedCallbackManager"))(),down_message_ids:new(b("RangedCallbackManager"))()}:i.getResource(d);var n=m?j+1:k;e.up_message_ids&&(f.up_message_ids.getCurrentArraySize()===0||e.up_message_ids.length>=f.up_message_ids.getCurrentArraySize())&&l(f.up_message_ids,e.up_message_ids,n);e.down_message_ids&&(f.down_message_ids.getCurrentArraySize()===0||e.down_message_ids.length>=f.down_message_ids.getCurrentArraySize())&&l(f.down_message_ids,e.down_message_ids,n);m&&i.setResource(d,f)}},unsubscribe:function(a,c,d){if(c){c=i.getResource(c);c?d==b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP?c.up_message_ids.unsubscribe(a):c.down_message_ids.unsubscribe(a):i.unsubscribe(a)}}};function l(a,b,c){var d=a.getCurrentArraySize();d=b.length<d+c;b.length&&(a.removeAllResources(),a.addResourcesWithoutSorting(b,0));d&&a.setReachedEndOfArray()}function m(a,b){var c=a.up_message_ids.hasReachedEndOfArray(),d=a.up_message_ids.getAllResources();c||d.shift();var e=a.down_message_ids.hasReachedEndOfArray(),f=a.down_message_ids.getAllResources();e||f.pop();return{thread_id:a.thread_id,message_id:b,up_message_ids:d,up_exhausted:c,down_message_ids:f,down_exhausted:e}}function n(a){a.client=b("MercuryAPIArgsSource").WEBMESSENGER,b("MercuryServerDispatcher").trySend("/ajax/mercury/search_context.php",a)}b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_context.php":{mode:b("MercuryServerDispatcher").IMMEDIATE,handler:a.handleUpdate}});e.exports=a}),null);
__d("MercurySearchSnippetResults",["MercuryAPIArgsSource","MercuryPayloadSource","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercurySingletonMixin","MercuryThreadIDMap","MercuryThreadlistConstants","MessengerEnvironment","MessengerServerPayloadTransformer.bs","RangedCallbackManager"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MessengerEnvironment").messengerui?b("MercuryAPIArgsSource").MESSENGER:b("MercuryAPIArgsSource").WEBMESSENGER,h={},i={},j=null,k=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_COUNT,l=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_LIMIT,m=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_MORE;a=function(){"use strict";__p&&__p();function a(a){var c=this;this.$1=a;this.$2=b("MercuryServerPayloadPreprocessor").getForFBID(a);b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_snippets.php":{request_user_id:a,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a){c.handleUpdate(a)}}});this.$3=b("MercuryThreadIDMap").getForFBID(a)}var c=a.prototype;c.getFBID=function(){return this.$1};c.getThreadIDMap=function(){return this.$3};c.getAllThreadSearchResults=function(a,b){a&&n(this.$1,a,l,0,b)};c.getAllLocalThreadSearchResults=function(a,b){if(a){var c=h[a];if(c){c=c.getCurrentArraySize();n(this.$1,a,0,c,b)}}};c.getAllThreadSearchMoreResults=function(a,b){if(a){var c=h[a];if(c){c=c.getCurrentArraySize();n(this.$1,a,m,c,b)}}};c.getSingleThreadSearchResults=function(a,b,c){if(!a||!b)return;o.call(this,a,b,k,0,c)};c.getSingleThreadSearchMoreResults=function(a,b,c){__p&&__p();if(!a||!b)return;if(!i[b])return;var d=i[b][a];if(d){var e=d.num_total_snippets;d=d.snippets_cbm.getCurrentArraySize();e=e-d;if(e>0){e=e>m?m:e;o.call(this,a,b,e,d,c)}}};c.countSnippetsMatchingQueryInThread=function(a,b){b=i[b][a];if(b)return b.num_total_snippets};c.findIndexOfSnippet=function(a,b,c,d){d=t(a,b);a=d.getAllResources();for(var b=0;b<a.length;b++)if(c===a[b].message_id)return b};c.findSnippetAtIndex=function(a,b,c,d){q(a,b,c),r.call(this,a,b,c,d)};c.handleUpdate=function(a){__p&&__p();var c=this;if(a.graphql_payload){var d=(a.graphql_payload.message_threads||[]).map(function(d){return b("MessengerServerPayloadTransformer.bs").transformThread(c.$1,d,a.is_page)});this.$2.handleUpdate({threads:d,payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}else a.mercury_payload&&this.$2.handleUpdate(a.mercury_payload);var e=a.search_snippets||{};Object.keys(e).filter(function(a){return!!e[a]}).forEach(function(a){Object.keys(e[a]).forEach(function(b){if(!e[a][b].snippets)return;e[a][b].snippets.forEach(function(a){a.matched_keywords=p(a.matched_keywords)})})});d=a.offset;var f=[];for(var g in e){var h=e[g];for(var j in h){var k=h[j],l=a.other_user_fbid||a.thread_fbid,m=this.$3.getClientIDFromServerIDNow(j),n=k.snippets,o=t(g,m),q=o.getCurrentArraySize();if(!l){f.push(m);if(q)continue}else if(d!=q)continue;m=i[m][g];m.num_total_snippets=k.num_total_snippets;k=n?n.length:0;k>0&&o.addResourcesWithoutSorting(n,q);(!l||a.limit>k)&&(o.getCurrentArraySize()==m.num_total_snippets&&o.setReachedEndOfArray())}if(!l){n=s(g);q=n.getCurrentArraySize();d==q&&(n.addResourcesWithoutSorting(f,q),a.limit>f.length&&n.setReachedEndOfArray())}}};return a}();function n(a,b,c,d,e){__p&&__p();if(j&&!j.thread_id){var f=s(j.query);f.unsubscribe(j.subscriber_id);j=null}var f=s(b),g=d+c;g=f.executeOrEnqueue(0,g,function(a){var c={};for(var d=0;d<a.length;d++){var g=a[d],h=i[g][b];c[g]={num_total_snippets:h.num_total_snippets,snippets:h.snippets_cbm.getAllResources()}}f.getCurrentArraySize()===l&&f.setReachedEndOfArray();g=f.hasReachedEndOfArray();e(c,g)});var h=f.getUnavailableResources(g);if(h.length){j={query:b,thread_id:null,subscriber_id:g};h={query:b,offset:d,limit:c+1,snippetLimit:k};h.identifier="thread_fbid";u(h,a)}}function o(a,b,c,d,e){__p&&__p();var f=this;if(j&&j.thread_id){var g=t(j.query,j.thread_id);g.unsubscribe(j.subscriber_id);j=null}var g=t(a,b),h=d+c;h=g.executeOrEnqueue(0,h,function(){var d=g.getAllResources(),c=i[b][a].num_total_snippets;e(d,c)});if(!g.getUnavailableResources(h).length)return;j={query:a,thread_id:b,subscriber_id:h};this.getThreadIDMap().getServerIDFromClientID(b,function(b){b={query:a,snippetOffset:d,snippetLimit:c,thread_fbid:b,identifier:"thread_fbid"};u(b,f.getFBID())})}function p(a){if(a instanceof Array){var b={};for(var c=0;c<a.length;c++)b[c.toString()]=a[c];return b}else return a}function q(a,b,c){}function r(a,b,c,d){__p&&__p();var e=i[b][a],f=e.snippets_cbm.getAllResources();e=e.num_total_snippets;var g=f.length;if(c<g){d(f[c].message_id);return}f=e-g;e=f>m?m:f;o.call(this,a,b,e,g,function(e,f){r.call(this,a,b,c,d)})}function s(a){h[a]||(h[a]=new(b("RangedCallbackManager"))());return h[a]}function t(a,c){i[c]||(i[c]={});var d=i[c][a];d||(d={num_total_snippets:-1,snippets_cbm:new(b("RangedCallbackManager"))()},i[c][a]=d);return d.snippets_cbm}function u(a,c){a.client=g,b("MercuryServerDispatcher").trySend("/ajax/mercury/search_snippets.php",a,null,c)}Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("MessengerThreadSearchActions",["MessengerDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g=b("keyMirror")({CHANGE_RESULT_INDEX:null,GET_MORE_CONTEXT:null,GET_MORE_THREADS:null,UPDATE_THREAD_STATE:null});a={Types:g,selectPrevious:function(){b("MessengerDispatcher").dispatch({type:g.CHANGE_RESULT_INDEX,delta:1})},selectNext:function(){b("MessengerDispatcher").dispatch({type:g.CHANGE_RESULT_INDEX,delta:-1})},getMoreSearchContext:function(a,c){b("MessengerDispatcher").dispatch({type:g.GET_MORE_CONTEXT,direction:a,threadID:c})},updateThreadState:function(a,c){b("MessengerDispatcher").dispatch({type:g.UPDATE_THREAD_STATE,threadID:a,mid:c})},loadMoreThreads:function(){b("MessengerDispatcher").dispatch({type:g.GET_MORE_THREADS})}};e.exports=a}),null);
__d("MessengerThreadSearchStore",["cx","Bootloader","ImmutableObject","MercurySearchContextResults","MercurySearchSnippetResults","MessengerActions","MessengerComposerSteps","MessengerComposerStore","MessengerContentSearchFunnelLoggerConstants","MessengerDispatcher","MessengerState.bs","MessengerStore","MessengerThreadSearchActions","MessengerURIStore","MessengerView","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").List;a=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_EVENTS;var i=a.BROWSE_CONTEXT,j=a.BROWSE_MESSAGE_IN_THREAD,k=a.LOAD_MORE_THREADS,l=a.LOAD_MESSAGE_IN_THREAD,m=a.SELECT_THREAD,n=a.THREAD_IMPRESSIONS,o={activeThreadID:null,downExhausted:null,loading:!1,messages:null,query:null,results:h(),selectedIndex:0,threadID:null,totalCount:0,upExhausted:null,threads:null,threadsExhausted:null,mid:null};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$MessengerThreadSearchStore2=o;return b}var d=c.prototype;d.getForFBID=function(a){this.$MessengerThreadSearchStore1=a,this.$MessengerThreadSearchStore3=new(b("MercurySearchSnippetResults"))(a)};d.getState=function(){return this.$MessengerThreadSearchStore2};d.__onDispatch=function(a){__p&&__p();var c=this;if(!this.$MessengerThreadSearchStore3)return;b("MessengerDispatcher").waitFor([b("MessengerURIStore").getDispatchToken()]);var d=b("MessengerURIStore").getState(),e=d.activeThreadID,f=d.masterView,g=d.mid,p=d.query;d=f===b("MessengerView").MASTER.SEARCH;switch(a.type){case b("MessengerActions").Types.REPLACE_STATE:if(g!=this.$MessengerThreadSearchStore2.mid&&e!=this.$MessengerThreadSearchStore2.activeThreadID){g&&e?(this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{threadID:e,mid:g}),b("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore6(),this.$MessengerThreadSearchStore2.threadID,function(a){return c.setMessages(a)})):(this.$MessengerThreadSearchStore7(),this.$MessengerThreadSearchStore2=o);return}else(this.$MessengerThreadSearchStore2.query!==p||this.$MessengerThreadSearchStore2.threadID!==e)&&(p&&!g?b("MessengerComposerStore").getState().step!==b("MessengerComposerSteps").NULL?this.$MessengerThreadSearchStore8():(this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{loading:!0}),this.$MessengerThreadSearchStore3.getSingleThreadSearchResults(p,e,function(a,b){c.$MessengerThreadSearchStore9({name:m,thread_id:e,has_results:b?b>0:!1}),c.accumulateSearchResultsAndEmitChange(p,e,0,a,b)})):this.$MessengerThreadSearchStore8(),d?(this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{loading:!0}),p!==this.$MessengerThreadSearchStore2.query?(this.$MessengerThreadSearchStore5=Date.now(),this.$MessengerThreadSearchStore3.getAllThreadSearchResults(p,function(a,b){c.setAllThreadResults(a,b);b=Object.keys(a);c.$MessengerThreadSearchStore9({name:n,threads:b})}),p&&p.length==1&&(this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{query:p,selectedIndex:0,results:h(),totalCount:0}))):(this.$MessengerThreadSearchStore5=Date.now(),this.$MessengerThreadSearchStore3.getAllLocalThreadSearchResults(p,function(a,b){return c.setAllThreadResults(a,b)}))):this.$MessengerThreadSearchStore10(),this.emitChange());break;case b("MessengerThreadSearchActions").Types.CHANGE_RESULT_INDEX:var q=Math.max(Math.min(this.$MessengerThreadSearchStore2.totalCount-1,this.$MessengerThreadSearchStore2.selectedIndex+a.delta),0);if(q===this.$MessengerThreadSearchStore2.selectedIndex)break;q>=this.$MessengerThreadSearchStore2.results.size?(this.$MessengerThreadSearchStore9({name:j,thread_id:this.$MessengerThreadSearchStore2.threadID}),this.$MessengerThreadSearchStore5=Date.now(),this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{loading:!0}),this.$MessengerThreadSearchStore3.getSingleThreadSearchMoreResults(p,e,function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];c.accumulateSearchResultsAndEmitChange.apply(c,[p,e,q].concat(b))})):(this.$MessengerThreadSearchStore5=Date.now(),this.$MessengerThreadSearchStore9({name:j,thread_id:this.$MessengerThreadSearchStore2.threadID}),this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{loading:!0,selectedIndex:q}),b("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore6(),this.$MessengerThreadSearchStore2.threadID,function(a){return c.setMessages(a)}));this.emitChange();f=this.$MessengerThreadSearchStore2.results.get(q);this.$MessengerThreadSearchStore9({name:l,mid:f==null?void 0:f.message_id,thread_id:this.$MessengerThreadSearchStore2.threadID,latency:Date.now()-this.$MessengerThreadSearchStore5});break;case b("MessengerThreadSearchActions").Types.GET_MORE_CONTEXT:this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{loading:!0});b("MercurySearchContextResults").getMoreSearchContext(this.$MessengerThreadSearchStore6(),this.$MessengerThreadSearchStore2.threadID,a.direction,function(a){c.setMessages(a),c.$MessengerThreadSearchStore9({name:i})});this.emitChange();break;case b("MessengerThreadSearchActions").Types.GET_MORE_THREADS:this.$MessengerThreadSearchStore4=Date.now();this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{loading:!0});this.$MessengerThreadSearchStore3.getAllThreadSearchMoreResults(p,function(a,b){c.$MessengerThreadSearchStore9({name:k,threads:Object.keys(a),latency:Date.now()-c.$MessengerThreadSearchStore4}),c.setAllThreadResults(a,b)});this.emitChange();break}};d.setAllThreadResults=function(a,c){__p&&__p();var d=this,e=Object.keys(a);e=e.map(function(c){c=b("MessengerState.bs").getThreadMetaNow(d.$MessengerThreadSearchStore1,c);if(!c)return;var e=a[c.thread_id];if(!e)return;return new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{snippetCount:e.num_total_snippets}))}).filter(Boolean);this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{threads:e,threadsExhausted:c,loading:!1});this.emitChange()};d.$MessengerThreadSearchStore10=function(){this.$MessengerThreadSearchStore11(["threads","threadsExhausted","loading"])};d.accumulateSearchResultsAndEmitChange=function(a,c,d,e,f){__p&&__p();var g=this;this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{query:a,threadID:c,selectedIndex:d||0,results:h(e),totalCount:f||0});if(this.$MessengerThreadSearchStore2.results.size){b("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore6(),this.$MessengerThreadSearchStore2.threadID,function(a){return g.setMessages(a)});a=this.$MessengerThreadSearchStore2.results.get(this.$MessengerThreadSearchStore2.selectedIndex);this.$MessengerThreadSearchStore9({name:l,mid:a.message_id,thread_id:this.$MessengerThreadSearchStore2.threadID,latency:Date.now()-this.$MessengerThreadSearchStore5})}else this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{messages:null});this.emitChange()};d.$MessengerThreadSearchStore8=function(){this.$MessengerThreadSearchStore7(),this.$MessengerThreadSearchStore11(["query","threadID","selectedIndex","results","totalCount","downExhausted","loading","messages","upExhausted"])};d.$MessengerThreadSearchStore11=function(a){a=a.reduce(function(a,b){a[b]=o[b];return a},{});this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,a)};d.setMessages=function(a){__p&&__p();var c=this,d=b("MessengerState.bs").getMessagesFromIDs(this.$MessengerThreadSearchStore1,[].concat(a.up_message_ids,a.message_id,a.down_message_ids)).map(function(d){if(d&&d.message_id===a.message_id)if(!c.$MessengerThreadSearchStore2.results.isEmpty()){var e=c.$MessengerThreadSearchStore2.results.get(c.$MessengerThreadSearchStore2.selectedIndex),f=e.matched_keywords,g=d.body.indexOf(e.body);e=Object.keys(e.matched_keywords).map(function(a){return{offset:g+Number(a),length:f[a].length,entity:{url:""},className:"__in"}});return new(b("ImmutableObject"))(babelHelpers["extends"]({},d,{ranges:d.ranges?d.ranges.concat(e):e}))}else return new(b("ImmutableObject"))(babelHelpers["extends"]({},d,{isSelected:!0}));return d}).map(function(a){return new(b("ImmutableObject"))(a)});this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{downExhausted:a.down_exhausted,loading:!1,messages:h(d),upExhausted:a.up_exhausted});this.emitChange()};d.$MessengerThreadSearchStore6=function(){return this.$MessengerThreadSearchStore2.mid||this.$MessengerThreadSearchStore2.results.get(this.$MessengerThreadSearchStore2.selectedIndex).message_id};d.$MessengerThreadSearchStore7=function(){if(this.$MessengerThreadSearchStore2.messages){var a=this.$MessengerThreadSearchStore2.messages.map(function(a){return a.message_id}).toArray();b("MessengerState.bs").invalidateSearchedMessages(this.$MessengerThreadSearchStore1,a)}};d.$MessengerThreadSearchStore9=function(a){__p&&__p();b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger"],function(b){__p&&__p();if(b&&a)switch(a.name){case j:b.browseMessageInThread(a.thread_id);break;case k:b.logLoadMoreThreads(a.threads,a.latency);break;case m:b.logThreadSelect(a.thread_id,a.has_results);break;case l:b.loadMessageInThread(a.mid,a.thread_id,a.latency);break;case n:b.logThreadImpressions(a.threads);break;case i:b.logContextBrowse();break}},"MessengerThreadSearchStore")};return c}(b("MessengerStore"));e.exports=new c()}),null);
__d("MessengerNonMount",["ChannelConnection","ChannelManager","CurrentUser","MercuryDeliveryState","MercuryServerPayloadPreprocessor","MercurySyncEnvironment","MercuryThreadIDMap","MercuryWorkContextInformation","MessengerActions","MessengerAttributionTagsStore","MessengerBrowserAlerts","MessengerComposerActions","MessengerComposerStore","MessengerDialogs.bs","MessengerEagerThreadLoader","MessengerInitialDataTransformer.bs","MessengerMDotMeReferralStore","MessengerParticipants.bs","MessengerRTCMessageHandler","MessengerSearchConfirmationDialogReact.bs","MessengerSearchStore","MessengerSettingsStore","MessengerState.bs","MessengerThreadSearchStore","MessengerURIConstants","MessengerURISerializer","MessengerURIStore","MessengerView","MNPlatformTagsDataManager","React","URI","gkx","goURI","PageHooks"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerSearchConfirmationDialogReact.bs").jsComponent;b("PageHooks");b("ChannelManager").startChannelManager();d={initStoresAndListeners:a,dispatchInitialData:c,seedInitialData:j,triggerInitialURI:k};function a(a){h(a),i(a)}function h(a){b("MercuryDeliveryState").getForFBID(a),b("MessengerParticipants.bs"),b("MessengerState.bs"),b("CurrentUser").isWorkUser()&&b("MercuryWorkContextInformation").getForFBID(a),b("MessengerAttributionTagsStore"),b("MessengerComposerStore"),b("MessengerMDotMeReferralStore"),b("MessengerSearchStore").getForFBID(a),b("MessengerSettingsStore"),b("MessengerURIStore"),b("MessengerThreadSearchStore").getForFBID(a)}function i(a){b("MercurySyncEnvironment").setUp(),b("MessengerBrowserAlerts").init(a),b("MessengerRTCMessageHandler").init(),b("ChannelConnection"),b("gkx")("811069")&&b("MessengerEagerThreadLoader").subscribe(a)}function j(a,c){a=b("MercuryServerPayloadPreprocessor").getForFBID(a);if(c.graphqlPayload){var d=b("MessengerInitialDataTransformer.bs").transform(c.graphqlPayload);d=d[0];d.message_blocked_ids=c.mercuryPayload.message_blocked_ids;d.message_ignored_ids=c.mercuryPayload.message_ignored_ids;a.handleUpdate(d)}else a.handleUpdate(c.mercuryPayload)}function k(a,c){__p&&__p();a=c.lastReadThreadKey;if(c.graphqlPayload){var d=b("MessengerInitialDataTransformer.bs").transform(c.graphqlPayload);a=d[1]}d=new(b("URI"))(window.location.href);var e=b("MessengerURISerializer").deserialize(d);if(e.query){var f=e.masterView===b("MessengerView").MASTER.SEARCH,h=e.query;e.query=null;e.masterView=b("MessengerView").MASTER.RECENT;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(g,{term:h,onSearch:function(){f?b("MessengerActions").changeQueryAll(h):b("MessengerActions").changeQuery(h)}})})}b("goURI")(b("MessengerURISerializer").serialize(e),!1,!0);if(d.getPath().match(b("MessengerURIConstants").COMPOSE_SUBPATH+"/?$"))return;if(e.masterView===b("MessengerView").MASTER.PAYMENT)return;b("MessengerActions").changeMDotMeReferral(c.mDotMeReferral,c.mDotMeReferralThreadKey);var i=b("MercuryThreadIDMap").get();e=e.threadKey?i.getClientIDFromServerIDNow(e.threadKey):i.getClientIDFromServerIDNow(a);e?(b("MessengerComposerActions").exitComposeState(),b("MessengerActions").selectThread(e)):d.getPath()==="/"&&b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(c.messagingSource,c.mDotMeReferralThreadKey&&c.mDotMeReferralThreadKey.toString())}function c(a,b){j(a,b),k(a,b)}e.exports=d}),null);
__d("FBPaymentsDialogContainerReact.bs",["ReasonReact.bs","FBPaymentsDialogContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("FBPaymentsDialogContainer.react"),{},a)}f.make=a}),null);
__d("MNCommerceDialogContainerReact.bs",["ReasonReact.bs","MNCommerceDialogContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("MNCommerceDialogContainer.react"),{},a)}f.make=a}),null);
__d("MessengerBannerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerBanner.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerBanner.react"),{showWorkchatUpsellBanner:a,isFirstRedirect:b("bs_js_null_undefined").fromOption(c)},d)}f.make=a}),null);
__d("MessengerBugNubReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerBugNub.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerBugNub.react"),{isBetaEnabled:b("bs_js_null_undefined").fromOption(a),unixName:b("bs_js_null_undefined").fromOption(c)},d)}f.make=a}),null);
__d("MercuryCanonicalGroupThreadActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({THREAD_SEARCH_UPDATED:null})}),null);
__d("MercuryCanonicalGroupThreadStore",["FluxStore","MercuryCanonicalGroupThreadActionTypes","MercuryCanonicalGroupThreadManager","MessengerDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("MessengerDispatcher"))||this;c.$MercuryCanonicalGroupThreadStore1=b("MercuryCanonicalGroupThreadManager").get();return c}var d=c.prototype;d.__onDispatch=function(a){a=a.type;switch(a){case b("MercuryCanonicalGroupThreadActionTypes").THREAD_SEARCH_UPDATED:this.__emitChange();break;default:break}};d.getOrFetch=function(a){var c=this.$MercuryCanonicalGroupThreadStore1.getNow(a);c||this.$MercuryCanonicalGroupThreadStore1.getCanonicalGroupThreadIDForParticipants(a,function(){b("MessengerDispatcher").dispatch({type:b("MercuryCanonicalGroupThreadActionTypes").THREAD_SEARCH_UPDATED})});return c};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("MercurySendMessageHandler",["MercuryMessageActions","MercuryMessageObject","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};function a(a){this.$1=a,this.$2=b("MercuryMessageActions").getForFBID(this.$1),this.$3=b("MercuryMessageObject").getForFBID(this.$1)}var c=a.prototype;c.sendPlainTextMessage=function(a,b,c){b=this.$3.constructUserGeneratedMessageObject(b,c,a);this.$2.send(b)};c.sendSticker=function(a,b,c){b=this.$3.constructStickerMessageObject(b,c,a);this.$2.send(b)};c.sendAttachment=function(a,b,c){c=this.$3.constructAttachmentMessageObject(c,a);this.$2.addAttachmentPlaceholder(c,b.upload_id,b)};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1570574486349284"};b.getQueryID=function(){return"389945858066688"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("MNPlatformClickSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:"UNKNOWN",ATTACHMENT_ATTRIBUTION_ICON:"ATTACHMENT_ATTRIBUTION_ICON",GAMES_SCREENSHOT_ATTACHMENT:'GAMES_SCREENSHOT_ATTACHMENT"',GAMES_SEARCH:"GAMES_SEARCH",GAMES_SHARE_ATTACHMENT:"GAMES_SHARE_ATTACHMENT",GIF_ATTRIBUTION:"GIF_ATTRIBUTION",LANDING_PAGE_GETTING_STARTED:"LANDING_PAGE_GETTING_STARTED",M_SUGGESTION:"M_SUGGESTION",MORE_DRAWER_CHAT_EXTENSION:"MORE_DRAWER_CHAT_EXTENSION",MORE_DRAWER_CHAT_EXTENSION_SEEMORE:"MORE_DRAWER_CHAT_EXTENSION_SEEMORE",MORE_DRAWER_PAGES_CHAT_EXTENSION:"MORE_DRAWER_PAGES_CHAT_EXTENSION",MUSIC_ATTACHMENT:"MUSIC_ATTACHMENT",PLATFORM_GENERIC_ATTACHMENT:"PLATFORM_GENERIC_ATTACHMENT",PLATFORM_MEDIA_ATTACHMENT:"PLATFORM_MEDIA_ATTACHMENT",PLATFORM_MENU:"PLATFORM_MENU",QUICK_REPLY:"QUICK_REPLY",THREAD_SETTING:"THREAD_SETTING",THREAD_VIEW_MESSAGE:"THREAD_VIEW_MESSAGE",UNSUPPORTED_OR_NOT_RECOGNIZED:"UNSUPPORTED_OR_NOT_RECOGNIZED"})}),null);
__d("XMNCommerceCTAPostProcessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/cta/postprocess/",{cta_id:{type:"String",required:!0},message_id:{type:"String"}})}),null);
__d("MNCommerceCTAProcessor",["AsyncRequest","CurrentUser","GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation","MessengerPlatformClientTypedLogger","MNPlatformClickSource","PopupWindow","XMNCommerceCTAPostProcessController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.process=function(a,c){c===void 0&&(c=null);var d=b("PopupWindow").open("",500,1024);a=b("XMNCommerceCTAPostProcessController").getURIBuilder().setString("cta_id",a).setString("message_id",c).getURI();new(b("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(function(a){return d.location=a.payload}).send()};c.postHandle=function(a,c){a=b("GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation").getURI({cta_id:a,message_id:c});new(b("AsyncRequest"))().setURI(a).send()};c.logCTAClick=function(a){var c,d;d=(d=a)!=null?d.logging_token:d;var e=d?JSON.parse(d).click_source:b("MNPlatformClickSource").UNKNOWN;e={action_id:(c=a)!=null?c.id:c,action_title:((c=a)!=null?c.action_title:c)||((c=a)!=null?c.title:c)||((c=a)!=null?c.translated_title:c),action_type:(c=a)!=null?c.action_type:c,action_url:((c=a)!=null?c.action_url:c)||((c=a)!=null?c.action_link:c),click_source:e,page_id:(c=a)!=null?c.page_id:c};new(b("MessengerPlatformClientTypedLogger"))().setClientUserID(b("CurrentUser").getID()).setName("did_tap_call_to_action").setExtraClientData(JSON.stringify(e)).setLoggingToken(d).log()};return a}();e.exports=new a()}),null);
__d("XMNCommercePostbackCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/postback/",{cta_id:{type:"String",required:!0},message_id:{type:"String"},ref:{type:"String"},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1},should_ignore:{type:"Bool",defaultValue:!1}})}),null);
__d("MNCommercePostbackCTADataManager",["AsyncRequest","BanzaiODS","CurrentUser","getPageIDFromThreadID","MercuryMessageActions","MercuryMessageObject","MercurySourceType","MNPlatformTagsDataManager","XMNCommercePostbackCTAController","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryMessageActions").get();a=function(){__p&&__p();function a(){}var c=a.prototype;c.send=function(a,c,d,e,f){c===void 0&&(c=null);d===void 0&&(d=null);e===void 0&&(e=null);f===void 0&&(f=null);b("BanzaiODS").bumpEntityKey(2966,"messenger_commerce","postback_send_clicked");a=b("XMNCommercePostbackCTAController").getURIBuilder().setString("cta_id",a).setString("ref",d).setString("message_id",e).setEnum("ref_source",f).getURI();!c?new(b("AsyncRequest"))().setURI(a).setMethod("POST").send():new(b("AsyncRequest"))().setURI(a).setMethod("POST").setErrorHandler(c).send()};c.sendAndConfirm=function(a,c,d,e,f,g,h,i,j,k){f===void 0;g===void 0&&(g=null);h===void 0&&(h=[]);i===void 0&&(i=null);j===void 0&&(j=null);k===void 0&&(k=b("MercurySourceType").TITAN_WEB);f={cta_id:a,prev_message_id:i,ref:g,force_handle:!0,postback_cta_ref_source:j?j.toString():null};this.sendConfirmationText(c,d,e,h,f,k)};c.sendConfirmationText=function(a,c,d,e,f,h){e===void 0&&(e=[]);if(!c)b("BanzaiODS").bumpEntityKey(2966,"messenger_commerce","confirm_message_failed.empty_threadID");else{var i=new(b("MercuryMessageObject"))(b("CurrentUser").getID()),j=b("getPageIDFromThreadID")(c);b("MNPlatformTagsDataManager").hasThreadTags(j)&&e.concat(b("MNPlatformTagsDataManager").getThreadTags());g.send(i.constructCTAConfirmationMessageObject(a,h,c,d,e,f));e&&e.length>0&&b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread()}};return a}();e.exports=new a()}),null);
__d("XMNCommercePostbackRefSendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/postback_ref/",{page_id:{type:"String",required:!0},ref:{type:"String",required:!0},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackRefSendManager",["AsyncRequest","MessengerActions","MessengerMDotMeReferralStore","XMNCommercePostbackRefSendController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.sendMDotMeRef=function(a,c){var d=this.getMdotMeRef();if(this.shouldSendRef(c,a)){c=b("XMNCommercePostbackRefSendController").getURIBuilder().setString("page_id",a).setString("ref",d).getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").send();b("MessengerActions").changeMDotMeReferral()}};c.shouldSendRef=function(a,b){return!b||!a?!1:this.hasMDotMeRef(b)};c.hasMDotMeRef=function(a){var c=b("MessengerMDotMeReferralStore").getState();return!!(c.refCode&&a&&c.refThreadID&&c.refThreadID===a)};c.getMdotMeRef=function(){var a=b("MessengerMDotMeReferralStore").getState();return a.refCode};return a}();e.exports=new a()}),null);
__d("MercuryReadOnlyReason",["fbt","Link.react","MercuryConfig","React","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getReason:function(a){__p&&__p();a===void 0&&(a=!1);if(a){a=b("MercuryConfig").DYIDeepLink;return g._("Sorry, this conversation isn't active any more because messages can no longer be sent to email addresses. After 1 May 2016, conversations with email addresses will only be available in a copy of your Facebook data. {download your information}",[g._param("download your information",b("React").createElement("a",{href:a},g._("Learn more")))])}else if(b("MercuryConfig").ViewerIsReadOnly)return g._("You've been temporarily blocked from sending messages. {learn more about blocks}",[g._param("learn more about blocks",b("React").createElement(b("Link.react"),{href:new(b("URI"))("https://www.facebook.com/help/181183045316843"),target:"_blank"},"Learn more"))]);else if(b("MercuryConfig").ColdOpenBlock)return g._("You're temporarily blocked from starting new conversations. {learn more about blocks}",[g._param("learn more about blocks",b("React").createElement(b("Link.react"),{href:new(b("URI"))("https://www.facebook.com/help/181183045316843"),target:"_blank"},"Learn more"))]);else return g._("You cannot reply to this conversation.")}};e.exports=a}),null);
__d("MessengerBlockDialogReact.bs",["cx","fbt","bs_block","bs_curry","React","LinkReact.bs","bs_belt_Option","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","IgnoreMessagesTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerBlockDialogReact");function j(a,c){return b("React").createElement("div",{className:"_1q73"},h._("If you want, you can also {link}",[h._param("link",b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"_blank",void 0,h._("block {short_name_or_description} on Facebook.",[h._param("short_name_or_description",b("bs_belt_Option").getWithDefault(a,h._("this person")))]))))]))}function k(a,c,d,e){__p&&__p();return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(a){__p&&__p();if(c!==void 0){var e=b("bs_js_primitive").valFromOption(c),f=b("CurrentUser").isMessengerOnlyUser()||b("CurrentUser").isWorkUser();f=[e.short_name,f?void 0:b("bs_js_primitive").nullable_to_opt(e.href)]}else f=[void 0,void 0];e=f[1];f=f[0];if(!(d==null)){var g=new(b("IgnoreMessagesTypedLogger"))().setEvent("block_clicked").setThreadID(d).setPlatform("messengerdotcom");g.log()}g=b("CurrentUser").isWorkUser();g=g?"https://www.facebook.com/help/work/2201185726805642":"https://www.facebook.com/help/389645087895231";var i=b("CurrentUser").isWorkUser();return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,a[1][0],void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,h._("Block messages"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[b("React").createElement("div",{className:"_1q73"},h._({"Workplace Chat":"Stop getting messages and calls from {short_name_or_description} in Workplace Chat.","Messenger":"Stop getting messages and calls from {short_name_or_description} in Messenger."},[h._param("short_name_or_description",b("bs_belt_Option").getWithDefault(f,h._("this person"))),h._enum(i?"Workplace Chat":"Messenger",{"Workplace Chat":"Workplace Chat",Messenger:"Messenger"})])),e!==void 0?j(f,e):null,b("React").createElement("div",void 0,b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,g,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"_blank",void 0,h._("Learn more"))))])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,h._("Block messages"),void 0,"danger",function(){return b("bs_curry")._1(a[3],0)},0,void 0,void 0,void 0,[]))]))]))},function(){return[!0]},i[10],function(c,d){return b("bs_block").__(2,[[!1],function(){return b("bs_curry")._1(a,0)}])},i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return k(a.onBlock,b("bs_js_primitive").nullable_to_opt(a.contact),a.threadID,[])});c=b("bs_belt_Option").getWithDefault;f.$pipe$unknown=c;f.component=i;f.renderBlockOnFacebook=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerComposerButtonLabels",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={QuickCamButtonLabel:g._("Take a picture using quick cam"),VoiceClipButtonLabel:g._("Send a voice clip"),EmojiButtonLabel:g._("Choose an emoji"),StickerButtonLabel:g._("Choose a sticker"),GroupPollingButtonLabel:g._("Create a poll"),ContentSearchButtonLabel:g._("Choose a GIF")};e.exports=a}),null);
__d("DebouncedMentionsTextEditor.react",["AbstractMentionsTextEditor.react","clearImmediate","debounce","setImmediate"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.__maybeSearch=function(){var a=d.props.editorState,c=a.getSelection();if(c.getHasFocus()&&c.isCollapsed()){var e=a.getCurrentContent();a=d.props;var f=a.mentionsSource,g=a.assistantTypeaheadSource;(f||g)&&(d.$DebouncedMentionsTextEditor1&&b("clearImmediate")(d.$DebouncedMentionsTextEditor1),d.$DebouncedMentionsTextEditor1=b("setImmediate")(function(){f&&f.search(e,c,d.__onShowMentions),g&&g.search(e,c,d.__onShowMentions)}))}};d.__debouncedSearch=b("debounce")(d.__maybeSearch,50);return d}var d=c.prototype;d.componentDidUpdate=function(a){this.props.editorState!==a.editorState&&this.__debouncedSearch()};d.componentWillUnmount=function(){this.$DebouncedMentionsTextEditor1&&b("clearImmediate")(this.$DebouncedMentionsTextEditor1),a.prototype.componentWillUnmount.call(this)};return c}(b("AbstractMentionsTextEditor.react"));e.exports=a}),null);
__d("MNBotsLoggerEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BOT_COMPOSER_MENU_ICON_DISPLAYED:"bot_composer_menu_icon_displayed",BOT_COMPOSER_MENU_ICON_TAPPED:"bot_composer_menu_icon_tapped",BOT_COMPOSER_MENU_ITEM_DID_SELECT:"bot_composer_menu_item_did_select",BOT_COMPOSER_QUICK_REPLY_DISPLAYED:"bot_composer_quick_reply_displayed",BOT_COMPOSER_QUICK_REPLY_TAPPED:"bot_composer_quick_reply_tapped"})}),null);
__d("MessengerBotMenuButton.react",["AutoFocusableLink.react","BootloadOnRender.react","ChatFlyoutPlaceholder.react","JSResource","LazyComponent.react","MessengerBotMenuDataFetcher","MessengerBotsWebTypedLogger","MessengerContextualDialog.react","MessengerEnvironment","MNBotsLoggerEvents","React","XUIContextualDialog.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;var g=302,h=280;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,c.state={flyoutOpen:!!c.props.clicked,isLoading:!1,menuItems:null},c.$3=function(){c.setState({flyoutOpen:!1})},c.$7=function(){c.state.flyoutOpen&&c.$3()},c.$5=function(){c.$1=c.state.flyoutOpen},c.$4=function(a){a.stopPropagation();if(c.state.flyoutOpen||c.$1)return;c.state.menuItems===null&&(c.setState({isLoading:!0}),c.$2());c.setState({flyoutOpen:!c.state.flyoutOpen})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.state.flyoutOpen&&this.state.menuItems===null&&(this.setState({isLoading:!0}),this.$2())};d.componentDidMount=function(){new(b("MessengerBotsWebTypedLogger"))().setEvent(b("MNBotsLoggerEvents").BOT_COMPOSER_MENU_ICON_DISPLAYED).setPageID(this.props.pageID).log()};d.componentWillUnmount=function(){this.state.flyoutOpen&&this.$3()};d.render=function(){return b("React").createElement("span",null,b("React").createElement(b("AutoFocusableLink.react"),{autoFocus:this.props.autoFocus,className:this.props.className,href:"#",onClick:this.$4,onMouseDown:this.$5,role:"button",ref:"link"}),this.$6())};d.$6=function(){var a=this;if(!this.state.flyoutOpen)return null;var c=b("MessengerEnvironment").messengerui,d=c?g:h;c=c?b("MessengerContextualDialog.react"):b("XUIContextualDialog.react");return b("React").createElement(c,babelHelpers["extends"]({alignment:this.props.flyoutAlignment,width:d,position:"above",contextRef:function(){return a.refs.link},onBeforeHide:this.$7,onBlur:this.$3,shown:this.state.flyoutOpen},this.props,{key:"contextualDialog"}),b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{onEscKeyDown:this.$3,shown:this.state.flyoutOpen,isLoading:this.state.isLoading,menuItems:this.state.menuItems,pageID:this.props.pageID,threadID:this.props.threadID,onClick:this.$3}),loader:b("JSResource")("MessengerBotMenuDialog.react").__setRef("MessengerBotMenuButton.react"),placeholder:b("React").createElement(b("ChatFlyoutPlaceholder.react"),null)}))};d.$2=function(){var a=this;b("MessengerBotMenuDataFetcher").getMenuItems(this.props.pageID,function(b){a.setState({menuItems:b,isLoading:!1})},function(){a.setState({menuItems:[],isLoading:!1})})};return c}(b("React").Component);c.propTypes={autoFocus:a.bool,className:a.string,clicked:a.bool,flyoutAlignment:a.string.isRequired,threadID:a.string.isRequired,pageID:a.string.isRequired};e.exports=c}),null);
__d("MessengerComposerInputStore",["FluxStore","MessengerUserInputAppDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=0;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("MessengerUserInputAppDispatcher"))||this;c.$MessengerComposerInputStore1={isUserInputRequested:!1,requestNumResults:g,requestType:null};return c}var d=c.prototype;d.getState=function(){return this.$MessengerComposerInputStore1};d.__onDispatch=function(a){var b=a.type;a=a.data;switch(b){case"UPDATE_USER_INPUT_REQUESTED":this.$MessengerComposerInputStore1={isUserInputRequested:a.isUserInputRequested,requestNumResults:a.requestNumResults,requestType:a.requestType};this.__emitChange();break}};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("MessengerSingleSectionContactList.react",["cx","MessengerContactAdapters","MessengerContactList.react","MessengerTypeaheadUtils","React","TypeaheadViewPropTypes","joinClasses","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.entries;a=a.viewProps;var d=(c.length?"":"_599s")+" _29hl _8i1 _11_d _4p-s";return b("React").createElement(b("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:b("joinClasses")(this.props.className,d,a.className),contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,hasHoverState:!0,highlightedEntry:b("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!1,listSections:b("MessengerTypeaheadUtils").buildSingleSection(c),onRenderHighlight:this.props.onRenderHighlight,onHighlight:this.props.onHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,viewer:a.viewer})};return c}(b("React").PureComponent);a.propTypes=b("TypeaheadViewPropTypes");a.defaultProps={role:"listbox"};e.exports=a}),null);
__d("MessengerURLUploader",["Event","MessengerActions","SubscriptionsHandler","URLMatcher","requireCond","cr:988286","debounce"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c,d){__p&&__p();var e=this;this.handleInputValueChange=function(a){a=e.$1();a=b("URLMatcher").match(a)||(b("cr:988286")!=null?b("cr:988286").matchTaskNumber(a)||b("cr:988286").matchDiffNumber(a):null);a&&(e.$3!==a&&(e.$3=a,b("MessengerActions").loadingPreview(e.$5,a)))};this.$1=a;this.$4=new(b("SubscriptionsHandler"))();this.$5=d;this.$2=b("debounce")(this.handleInputValueChange,200);this.initInput(c)}var c=a.prototype;c.getMatchedURL=function(){return this.$3};c.initInput=function(a){this.$4.addSubscriptions(b("Event").listen(a,"keyup",this.$2),b("Event").listen(a,"paste",this.$2))};c.setThreadID=function(a){this.$5=a};c.clearShareData=function(){this.$3=null};return a}();e.exports=a}),null);
__d("FourLetterMentionsStrategy",["DocumentMentionsRegex"],(function(a,b,c,d,e,f){"use strict";a=3;c="\\b[a-z][^\\s"+b("DocumentMentionsRegex").PUNCTUATION+"]";var g=new RegExp("(^|[^#])((?:"+c+"{"+a+",})$)");d={name:"FourLetterMentionsStrategy",findMentionableString:function(a){a=g.exec(a);return a!==null?{matchingString:a[2],leadOffset:a[2].length}:null}};e.exports=d}),null);
__d("createMentionsSearchSourceFromParticipants",["fbt","ix","AtSignAllowEmptyMentionsStrategy","CapitalizedNameMentionsStrategy","DocumentCompositeMentionsSource","DocumentMentionsSource","FilteredSearchSource","FourLetterMentionsStrategy","LogHistory","SearchableEntry","StaticSearchSource","filterCapitalizedNames","gkx","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("LogHistory").getInstance("messenger_mentions"),j=h("91674").uri,k=171602870233241;function a(a,c,d,e,f){__p&&__p();if(!a||!c)return null;var g=null,h=[];c.length<=2?f&&(g=[o()]):(g=c.reduce(function(c,e){if(!e||e.fbid===a)return c;var f=d&&d.custom_nickname&&d.custom_nickname[e.fbid]?d.custom_nickname[e.fbid]:"";c.push(new(b("SearchableEntry"))({uniqueID:e.fbid,type:"user",title:"@"+e.name,subtitle:f,photo:e.image_src,keywordString:f,auxiliaryData:{workForeignEntityInfo:e.work_foreign_entity_info}}));return c},[]),h=[].concat(g),f&&g.push(o()),e&&d&&d.thread_fbid&&(g.push(m(d.thread_fbid)),g.push(n(d.thread_fbid))));if(g===null)return null;f=new(b("StaticSearchSource"))(g);e=new(b("StaticSearchSource"))(h);b("gkx")("846032")&&(e=new(b("FilteredSearchSource"))(l("@"),e));i.debug("constructed_search_source",JSON.stringify({participants:c.map(function(a){return a&&a.fbid})}));return new(b("DocumentCompositeMentionsSource"))([new(b("DocumentMentionsSource"))(b("AtSignAllowEmptyMentionsStrategy"),f),new(b("DocumentMentionsSource"))(b("CapitalizedNameMentionsStrategy"),e),new(b("DocumentMentionsSource"))(b("FourLetterMentionsStrategy"),e)])}function l(a){return function(c,d){return b("filterCapitalizedNames")(c,d,a)}}function m(a){var c=g._("everyone").toString(),d=g._("Mention everyone in this chat").toString();return new(b("SearchableEntry"))({photo:j,title:"@"+c,uniqueID:b("nullthrows")(a),subtitle:d})}function n(a){var c=g._("here").toString(),d=g._("Mention everyone in this chat who is active").toString();return new(b("SearchableEntry"))({photo:j,title:"@"+c,uniqueID:b("nullthrows")(a)+"-active",subtitle:d})}function o(){var a=g._("M").toString(),c=g._("Messenger Assistant").toString();return new(b("SearchableEntry"))({photo:h("581082").uri,title:"@"+a,uniqueID:k,subtitle:c})}e.exports=a}),null);
__d("createMessengerMentionTypeaheadDraftEntity",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.createEntity("ASSISTANT_TYPEAHEAD","SEGMENTED",{mid:b.getUniqueID()})}e.exports=a}),null);
__d("MessengerComposerInput.react",["cx","fbt","AutocompleteSearchSource","AutocompleteStrategy","Bootloader","CompositeDraftDecorator","DebouncedMentionsTextEditor.react","DocumentCompositeMentionsSource","DocumentMentionsSource","DOMDimensions","DraftModifier","EditorState","EmojiFormat.bs","Event","LogHistory","MentionsLayer.react","MercuryIDs","MercuryThreadIDMap","MercuryThreadSnippet.react","MercuryThreadTitleSafe.react","MercuryTimestamp","MessengerActions","MessengerBotMenuButton.react","MessengerComposerInputStore","MessengerConstants","MessengerDomIDs.bs","MessengerDotComAndInboxM4Check.bs","MessengerEditorStateManager","MessengerEmojiSpan.react","MessengerEmoticonSpan.react","MessengerMentionsEntityDecorator.react","MessengerMentionSource","MessengerSingleSectionContactList.react","MessengerTabIndices","MessengerUploadFilesUtil.bs","MessengerURLUploader","MessengerUserInputAppDispatcher","MessengerUserInputUtils","React","ReactDOM","Run","TypingDetectorController","WorkGalahadSettings","clearImmediate","createMentionsSearchSourceFromParticipants","createMessengerMentionDraftEntity","createMessengerMentionTypeaheadDraftEntity","debounce","getEntityMatcher","getProfileRangesForContentState","getThreadTypeNameFromThreadType","getVisibleValueForContentStateWithMessengerEmoji","gkx","handleBeforeInputForMessengerEmoji","handleBeforeInputForMessengerEmoticon","handleSoftNewlineForMessengerEmoticon","immutable","insertEmoticonIntoEditorState","insertMessengerEmojiIntoContentState","isSoftNewlineEvent","joinClasses","replaceMentionedTextInEditorState","setImmediate","shouldNotRenderSegoe","throttle","withMessengerSource"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDomIDs.bs").ids;a=b("React").PropTypes;var j=1,k=/^image\//,l="handled",m=8,n="not-handled",o=b("LogHistory").getInstance("MessengerComposerInput"),p={};p[b("MessengerConstants").NEW_THREAD_KEY]={version:0,editorState:b("EditorState").createEmpty()};function q(a,c){var d=c.editorState,e=c.version;if(!a||a&&e<p[a].version)return;p[a]=c;a!==b("MessengerConstants").NEW_THREAD_KEY&&b("MessengerEditorStateManager").set(a,d)}function r(a){p[a]||(p[a]={version:0,editorState:b("EditorState").createEmpty()});return p[a]}function s(a,b){if(!a)return null;var c=r(a);c.editorState=b;p[a]=c;return c}function t(a,b){if(a){var c=r(a);c.version+=1;c.editorState=b;q(a,c)}}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$10=!1;d.$20=function(a){if(d.$10&&a!==d.state.editorState){d.setState({editorState:a});a=s(d.props.threadID,a);a&&d.$5(d.props.threadID,a);d.props.onResize&&d.props.onResize()}};d.$21=function(a,c){if(b("isSoftNewlineEvent")(a)){a=b("handleSoftNewlineForMessengerEmoticon");a=a(c);d.setState({editorState:a});s(d.props.threadID,a);return l}d.setState({},d.triggerSend);return l};d.getValue=function(){return b("getVisibleValueForContentStateWithMessengerEmoji")(d.state.editorState.getCurrentContent())};d.focus=function(){d.refs.input&&d.refs.input.focus()};d.$29=function(a,b){d.props.onBeforeInput&&d.props.onBeforeInput(a,b);var c=d.$33(a,b);a=d.$34(a,b);return c||a?l:n};d.$12=function(a){a=d.props.handleOnlyImageUploads?a.filter(function(a){return a&&k.test(a.type)}):a;var c=d.$24();if(a.length){b("MessengerActions").prepareFilesForSend(c,a,"Copy");return l}return n};d.$17=function(){var a=d.props.threadID;if(!a)return;q(a,r(a))};d.$18=function(){d.setState(d.$13(!0))};d.triggerSend=function(){d.$22()&&d.$25();if(d.getValue().trim().length>0||d.$35())if(d.props.thread){var a=d.getMentions(d.props.thread.thread_fbid);d.$26(a)}else d.$26();d.props.onWorkChatContentAppsSend!=null&&d.props.onWorkChatContentAppsSend()};d.$30=function(){var a=(d.state.addedMentionsCount||0)+1;d.setState({addedMentionsCount:a})};d.$31=function(a,c){a=(d.state.mentionsTriggeredCount||0)+1;a={mentionsTriggeredCount:a};d.state.mentionsTriggerSource||(a.mentionsTriggerSource=c===j?b("MessengerMentionSource").ATSIGN:b("MessengerMentionSource").TYPEAHEAD);d.setState(a)};d.$12=d.$12.bind(babelHelpers.assertThisInitialized(d));d.$11=c;d.state=d.$13();d.$6=b("debounce")(function(a){d.$11||(d.$11=a),u(d.props,d.$11)&&d.$14(),d.$11=a},300);d.$7=b("throttle")(function(){if(d.$10){var a=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d))).height;d.$1!==a&&(d.props.onResize&&d.props.onResize());d.$1=a}},100);return d}var d=c.prototype;d.$13=function(a){var c;this.props.threadID===b("MessengerConstants").NEW_THREAD_KEY?c=r(b("MessengerConstants").NEW_THREAD_KEY).editorState:c=b("MessengerEditorStateManager").get(this.props.threadID);c=this.$15(c,a);a=b("createMessengerMentionDraftEntity");return{editorState:c,mentionCreationForContentStateFn:a}};d.componentDidMount=function(){__p&&__p();this.$10=!0;var a=b("gkx")("964442");a&&b("MessengerUserInputAppDispatcher").explicitlyRegisterStore(b("MessengerComposerInputStore"));this.$1=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(this)).height;this.$16();this.$2=new(b("MessengerURLUploader"))(this.getValue,b("ReactDOM").findDOMNode(this.refs.input),this.props.threadID);b("Run").onUnload(this.$17);this.$3=b("Event").listen(window,"blur",this.$17);this.$4=b("Event").listen(window,"focus",this.$18);this.$5=b("debounce")(function(a,b){q(a,b)},1e3)};d.componentDidUpdate=function(a,c){this.$9=b("setImmediate")(this.$7);if(c.editorState!==this.state.editorState){this.props.onChange&&this.props.onChange(this.getValue());c=b("gkx")("964442");c&&this.$19(this.getValue())}this.props.threadID!==a.threadID?this.$16():this.$6(a)};d.componentWillUnmount=function(){var a=this.props.threadID;a&&q(a,r(a));this.$10=!1;this.$8&&this.$8.destroy();this.$9&&b("clearImmediate")(this.$9);this.$3&&this.$3.remove();this.$4&&this.$4.remove()};d.insertEmoticon=function(a){a=b("insertEmoticonIntoEditorState")(a,this.state.editorState);a!==this.state.editorState&&this.$20(a)};d.insertEmoji=function(a){var c=this.state.editorState;a=b("insertMessengerEmojiIntoContentState")(b("EmojiFormat.bs").codeArrayToCodeString(a),c.getCurrentContent(),c.getSelection(),c.getCurrentInlineStyle());c=b("EditorState").push(c,a,"insert-characters");c!==this.state.editorState&&this.$20(b("EditorState").forceSelection(c,a.getSelectionAfter()))};d.$22=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};d.$16=function(){if(!this.$10)return;this.setState(this.$13(!1));this.$23();this.$2&&(this.$2.setThreadID(this.props.threadID),this.$2.clearShareData());this.$14()};d.$14=function(a){__p&&__p();var c=this;if(a){var d=this.props,e=d.participants,f=d.viewer;b("Bootloader").loadModules(["createAssistantTypeaheadSearchSource"],function(a){c.setState({assistantTypeaheadSource:a(f,e&&e.toArray(),c.props.thread,c.props.pageID)})},"MessengerComposerInput.react")}if(this.props.mentionsEnabled){d=this.props;var g=d.participants,h=d.viewer;d=d.thread;this.setState({isUserInputAutocomplete:!1,mentionCreationForContentStateFn:b("createMessengerMentionDraftEntity"),mentionsSource:b("createMentionsSearchSourceFromParticipants")(h,g&&g.toArray(),d,b("gkx")("678578"),a)})}};d.$23=function(){this.$8&&this.$8.destroy();this.$8=null;var a=this.props.viewer;if(!a)return;var c=b("ReactDOM").findDOMNode(this.refs.input);this.props.threadID!==b("MessengerConstants").NEW_THREAD_KEY&&c&&(this.$8=new(b("TypingDetectorController"))(this.props.thread,b("MercuryIDs").getUserIDFromThreadID(this.props.threadID),c,this.props.source,null,b("MercuryThreadIDMap").getForFBID(a).getServerIDFromClientIDNow(this.props.threadID),this.getValue))};d.$24=function(){var a=this.props,c=a.threadID;a=a.thread;if(!b("MercuryIDs").isValidThreadID(c)){if(a)return a.thread_id;o.debug("Invalid threadID ",c)}return c};d.$19=function(a){__p&&__p();if(!this.$10)return;a=b("MessengerComposerInputStore").getState();var c=a.requestNumResults,d=a.requestType;if(a.isUserInputRequested&&c&&d){a=new(b("AutocompleteSearchSource"))(this.getValue(),c,d);c=new(b("DocumentMentionsSource"))(b("AutocompleteStrategy"),a);d=new(b("DocumentCompositeMentionsSource"))([c]);this.setState({isUserInputAutocomplete:!0,mentionCreationForContentStateFn:b("MessengerUserInputUtils"),mentionsSource:d})}else if(this.state.isUserInputAutocomplete){a=this.props;c=a.participants;d=a.viewer;a=a.thread;this.setState({isUserInputAutocomplete:!1,mentionCreationForContentStateFn:b("createMessengerMentionDraftEntity"),mentionsSource:b("createMentionsSearchSourceFromParticipants")(d,c&&c.toArray(),a,b("gkx")("678578"))})}};d.$25=function(){var a=this.props.fileUploader,c=this.$24();a&&(o.debug("Before send files to thread ",c),b("MessengerUploadFilesUtil.bs").sendAttchments(a,this.props.onFileUpload),o.debug("Before clean files for thread ",c),b("MessengerActions").cleanFiles(c))};d.$26=function(a){__p&&__p();var c=this;if(this.props.onMessageSend&&this.props.onMessageSend(this.getValue(),{shareable_attachment:this.getShareData(),profile_ranges:a},function(d){b("MessengerActions").removeSharePreview(c.props.threadID);if(d&&c.props.mentionsEnabled&&(a&&a.length||c.state.addedMentionsCount||c.state.mentionsTriggeredCount||c.state.mentionsTriggerSource)){var e=c.state,f=e.addedMentionsCount,g=e.mentionsTriggeredCount,h=e.mentionsTriggerSource;e=c.props;var i=e.thread,j=e.participants,k=d;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(c,d){new c().setEvent(d.MENTION).setGroupSize(j&&j.size).setNumDelivered(a&&a.length||0).setNumSelects(f).setNumTriggers(g).setThreadid(i&&i.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(i&&i.thread_type)).setOfflineThreadid(k.offline_threading_id).updateExtraData({source:h}).log()},"MessengerComposerInput.react")}})){var d=this.$15(b("EditorState").createEmpty());this.$2&&this.$2.clearShareData();this.setState({editorState:d,addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null});t(this.props.threadID,d);this.$8&&this.$8.resetState()}};d.getMentions=function(a){return b("getProfileRangesForContentState")(this.state.editorState.getCurrentContent(),a)};d.getInput=function(){return this.refs.input};d.render=function(){__p&&__p();var a=this.props,c=a.participants,d=a.thread;a=a.viewer;var e=null;c&&d&&a?e=h._("Conversation with {participantListAsShownInThreadList}. Updated {lastUpdatedTime} by {recentUpdateStringAsShownInThreadList}",[h._param("participantListAsShownInThreadList",this.$27(d,a)),h._param("lastUpdatedTime",b("MercuryTimestamp").getAbsoluteTimestamp(d.timestamp)),h._param("recentUpdateStringAsShownInThreadList",this.$28(c,d,a))]):e=h._("Composing a new message");c=null;this.props.threadID&&this.props.pageID&&(c=b("React").createElement("div",{ref:"botsMenuContainer",className:"_3km1"},b("React").createElement(b("MessengerBotMenuButton.react"),{flyoutAlignment:"left",threadID:this.props.threadID,pageID:this.props.pageID,className:"_3km2"})));d="";this.props.disableInput?d=h._("Composer is disabled for this thread.").toString():this.props.thread&&!this.props.thread.is_canonical?d=h._("Type a message, \u0040name...").toString():d=h._("Type a message...").toString();a=b("gkx")("678612");return b("React").createElement("div",{className:b("joinClasses")("_kmc"+(b("gkx")("834752")&&b("MessengerDotComAndInboxM4Check.bs").yes?" _7kpg":"")+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyx":"")+(this.props.smallerEqual640?" _2swd":"")+(b("shouldNotRenderSegoe")(this.state.editorState.getCurrentContent().getPlainText())?" _2por":"")+" navigationFocus",this.props.className),onClick:this.focus,role:"presentation"},this.props.showMenu?c:null,b("React").createElement("div",{className:b("joinClasses")((b("gkx")("834752")&&b("MessengerDotComAndInboxM4Check.bs").yes?"":"_3-8x")+(b("WorkGalahadSettings").isGalahadEnabled?" _7q9o":"")+(this.props.showMenu?" _3km3":"")+(a?"":" _3oh-"),this.props.inputContainerClassName)},b("React").createElement(b("DebouncedMentionsTextEditor.react"),{autoHighlight:!0,ariaControls:i.CONVERSATION,ariaDescribedBy:i.COMPOSER_INPUT_DESCRIPTION,ariaLabel:d,editorState:this.state.editorState,handleBeforeInput:this.$29,handleContentReturn:this.$21,handlePastedFiles:this.$12,handleReturn:this.$21,maxResults:m,readOnly:this.props.disableInput,mentionCreationForContentStateFn:this.state.mentionCreationForContentStateFn,mentionTypeaheadCreationForContentStateFn:b("createMessengerMentionTypeaheadDraftEntity"),mentionResultsComponent:b("MentionsLayer.react"),mentionResultsProps:{typeaheadView:b("MessengerSingleSectionContactList.react"),typeaheadViewProps:{className:"_13iv",viewer:this.props.viewer},position:"above",autoflip:!0},mentionsSource:this.state.mentionsSource,assistantTypeaheadSource:this.state.assistantTypeaheadSource,onChange:this.$20,placeholder:d,ref:"input",spellCheck:!0,stripPastedStyles:!0,tabIndex:this.props.threadID===b("MessengerConstants").NEW_THREAD_KEY?b("MessengerTabIndices").COMPOSER_INPUT:0,textAlignment:"left",onAddMention:this.$30,onShowMentions:this.$31}),b("React").createElement("div",{className:"_5ca7",id:i.COMPOSER_INPUT_DESCRIPTION},e)))};d.$27=function(a,c){return b("React").createElement(b("MercuryThreadTitleSafe.react"),{thread:a,viewer:c})};d.$28=function(a,c,d){return b("React").createElement(b("MercuryThreadSnippet.react"),{participants:a,shouldAlwaysRenderSender:!0,shouldRenderYou:!0,thread:c,viewer:d})};d.$15=function(a,c){var d=this.$32(a);a=b("EditorState").set(a,{decorator:d});return c||this.props.disableAutofocus?a:b("EditorState").moveFocusToEnd(a)};d.$32=function(a){var c=b("MessengerEmoticonSpan.react");a=a.getCurrentContent();c=[{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOTICON"},a.getEntity),component:c}];c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOJI"},a.getEntity),component:b("MessengerEmojiSpan.react")});c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="MENTION"},a.getEntity),component:b("MessengerMentionsEntityDecorator.react")});return new(b("CompositeDraftDecorator"))(c)};d.$33=function(a,c){a=b("handleBeforeInputForMessengerEmoticon")(c,a);if(a===c)return!1;this.setState({editorState:a});s(this.props.threadID,a);return!0};d.$34=function(a,c){a=b("handleBeforeInputForMessengerEmoji")(c,a);if(a===c)return!1;this.setState({editorState:a});s(this.props.threadID,a);return!0};d.handleTextDropped=function(a){var c=this.state.editorState,d=c.getSelection();if(d.get("hasFocus"))return;d=b("DraftModifier").replaceText(c.getCurrentContent(),d,a,c.getCurrentInlineStyle());a=b("EditorState").push(c,d,"insert-fragment");this.$20(a)};d.getShareData=function(){var a=this.props.sharePreview;return a&&a.type&&a.params?{share_type:a.type,share_params:a.params.get("data")}:null};d.exitCurrentMode=function(){this.refs.input&&this.refs.input.exitCurrentMode()};d.$35=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};d.addMention=function(a){a=b("replaceMentionedTextInEditorState")(a,this.state.editorState,0,b("createMessengerMentionDraftEntity"));this.state.mentionsTriggerSource||this.setState({mentionsTriggerSource:b("MessengerMentionSource").REPLY});this.$20(a);this.$30()};return c}(b("React").PureComponent);c.propTypes={disableAutofocus:a.bool,fileUploader:a.object,handleOnlyImageUploads:a.bool.isRequired,isComposing:a.bool,mentionsEnabled:a.bool,pageID:a.string,participants:a.instanceOf(b("immutable").Map),sharePreview:a.object,showMenu:a.bool,disableInput:a.bool,smallerEqual640:a.bool,thread:a.object,threadID:a.string,viewer:a.string,onBeforeInput:a.func,onChange:a.func,onFileUpload:a.func,onResize:a.func,onMessageSend:a.func,onWorkChatContentAppsSend:a.func};function u(a,b){a=a.participants;b=b.participants;if(!a||!b)return!0;if(a===b)return!1;a=a.filter(Boolean);b=b.filter(Boolean);return a.size!==b.size||!a.equals(b)}e.exports=b("withMessengerSource")(c,!0)}),null);
__d("MessengerComposerPendingActions.react",["Bootloader","CurrentUser","JSResource","MercuryIDs","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerDialogs.bs","MessengerMessageRequestsTypedLogger","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("lazyLoadComponent")(b("JSResource")("MessengerPendingActions.react").__setRef("MessengerComposerPendingActions.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.$2=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentWillUnmount=function(){this.$1&&this.$1.remove(),this.$2&&this.$2.remove()};d.render=function(){__p&&__p();var a=this,c=this.props.thread,d=!!c&&b("MessageRequestUtils").isFiltered(c);c=b("CurrentUser").getID();var e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c),f=b("MercuryThreadActions").getForFBID(this.props.viewer);return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",{style:{height:51}})},b("React").createElement(g,{folder:this.props.thread&&this.props.thread.folder,onAcceptClick:function(){f.changeFolder(a.props.threadID,b("MessagingTag").INBOX),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType(d?"other":"pending").setThreadKey(e).setEntryPoint(null).log()},onDeclineClick:function(){var c=b("MercuryIDs").isGroupChat(a.props.threadID);a.$1=b("Bootloader").loadModules(["MessengerDeclineDialogReact.bs"],function(d){var f=d.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(f,{onBlock:a.props.onIgnoreBlock,onDelete:a.props.onDeleteDialogDeleteClick,onToggle:a.props.onDeleteDialogToggleClick,isGroupChat:c})});new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType("pending").setThreadKey(e).setEntryPoint("inbox_banner").log()},"MessengerComposerPendingActions.react")},onDeleteClick:function(){a.$2=b("Bootloader").loadModules(["MessengerFilteredDeleteDialogReact.bs"],function(c){var d=c.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(d,{onDelete:a.props.onDeleteDialogDeleteClick,onToggle:a.props.onDeleteDialogToggleClick})})},"MessengerComposerPendingActions.react"),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType("other").setThreadKey(e).setEntryPoint("inbox_banner").log()}}))};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerConfirmBlockThreadDialogReact.bs",["fbt","bs_curry","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerConfirmBlockThreadDialogReact");function i(a,c){var d=function(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(void 0,0)},e=function(){return d(!1)};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,d,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,g._("You have blocked {sender name}",[g._param("sender name",a)]))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[g._("You can access people you've blocked by going to the 'Filtered messages' list.")])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,g._("OK"),void 0,void 0,e,1,void 0,void 0,void 0,[]))]))]))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.participantName,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerConfirmLeaveGroupDialogReact.bs",["bs_curry","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerConfirmLeaveGroupDialogReact");function h(a,c,d,e){var f=function(a,d){b("bs_curry")._1(c,0);return b("MessengerDialogs.bs").removeDialog(void 0,0)};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(c){var e=b("MessengerAdminGroupUtils").getLeaveGroupBodyText(a,d),g=b("MessengerAdminGroupUtils").getLeaveGroupButtonText(a,d),h=b("MessengerAdminGroupUtils").getLeaveGroupTitleText(a,d);return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,h)),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[e])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,g,void 0,"danger",b("bs_curry")._1(c[0],f),0,void 0,void 0,void 0,[]))]))]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.isViewerAdmin,a.onLeave,a.thread,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerFileSizeErrorDialogReact.bs",["fbt","bs_curry","ReasonReact.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){switch(a){case"size-exceeded":return 1;case"wrong-type":return 0;default:return 2}}var i=b("ReasonReact.bs").statelessComponent("MessengerFileSizeErrorDialogReact");function j(a){switch(a){case 0:return g._("The type of file you're trying to attach isn't allowed. Please try again with a different format.");case 1:return g._("The file you have selected is too large. The maximum size is 25 MB.");case 2:return null}}function k(a,c){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,g._("Failed to upload files"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[j(a)])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](0,g._("OK"),void 0,void 0,void 0,0,void 0,void 0,void 0,[]))]))]))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return k(h(a.error),[])});f.errorOfString=h;f.component=i;f.renderDialogBody=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerResponsiveBlock.react",["React","createCancelableFunction","requestAnimationFrame","shallowEqual","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;var g={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,visibility:"hidden",zIndex:-1},h={left:0,position:"absolute",top:0,transition:"0s"},i={height:"200%",left:0,position:"absolute",top:0,transition:"0s",width:"200%"};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.dirty=!1,d.lastWidth=null,d.lastHeight=null,d.lastBreakpointsToggles=null,d.setupWeirdScrollTracking=function(){d.refs.expandChild.style.width="10000px",d.refs.expandChild.style.height="10000px",d.refs.expand.scrollLeft=1e5,d.refs.expand.scrollTop=1e5,d.refs.shrink.scrollLeft=1e5,d.refs.shrink.scrollTop=1e5},d.$2=function(){__p&&__p();var a=d.refs.outer.offsetWidth,c=d.refs.outer.offsetHeight;if((a!=d.lastWidth||c!=d.lastHeight)&&!d.dirty){if(Math.abs(a-(d.lastWidth||0))<10&&Math.abs(c-(d.lastHeight||0))<16)return;d.dirty=!0;d.lastWidth=a;d.lastHeight=c;a=d.props.breakpointsToggles(a,c);b("shallowEqual")(d.lastBreakpointsToggles,a)?d.dirty=!1:d.forceUpdate(function(){b("requestAnimationFrame")(function(){d.dirty=!1})});d.lastBreakpointsToggles=a}d.setupWeirdScrollTracking()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1=b("createCancelableFunction")(this.$2),this.onScroll=b("throttle")(this.$1,50),this.setupWeirdScrollTracking(),this.onScroll()};d.componentWillUnmount=function(){this.$1.cancel()};d.render=function(){return b("React").createElement("div",{ref:"outer"},this.props.children(this.props.breakpointsToggles(this.lastWidth,this.lastHeight)),b("React").createElement("div",{style:g,onScroll:this.onScroll,ref:"expand"},b("React").createElement("div",{style:h,ref:"expandChild"})),b("React").createElement("div",{style:g,onScroll:this.onScroll,ref:"shrink"},b("React").createElement("div",{style:i})))};return c}(b("React").Component);c.propTypes={children:a.func.isRequired,breakpointsToggles:a.func.isRequired};e.exports=c}),null);
__d("MessengerSendIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").createElement("svg",{height:"36px",width:"36px",viewBox:"0 0 36 36"},b("React").createElement("g",{fill:"none",fillRule:"evenodd"},b("React").createElement("g",void 0,b("React").createElement("polygon",{points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{d:"M31.1059281,19.4468693 L10.3449666,29.8224462 C8.94594087,30.5217547 7.49043432,29.0215929 8.17420251,27.6529892 C8.17420251,27.6529892 10.7473302,22.456697 11.4550902,21.0955966 C12.1628503,19.7344961 12.9730756,19.4988922 20.4970248,18.5264632 C20.7754304,18.4904474 21.0033531,18.2803547 21.0033531,17.9997309 C21.0033531,17.7196073 20.7754304,17.5095146 20.4970248,17.4734988 C12.9730756,16.5010698 12.1628503,16.2654659 11.4550902,14.9043654 C10.7473302,13.5437652 8.17420251,8.34697281 8.17420251,8.34697281 C7.49043432,6.9788693 8.94594087,5.47820732 10.3449666,6.1775158 L31.1059281,16.553593 C32.298024,17.1488555 32.298024,18.8511065 31.1059281,19.4468693",fill:a}))))}f.make=a}),null);
__d("bs_marshal",["bs_caml_string","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.to_buffer: substring out of bounds"];else return b("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_buffer")}function g(a,c){if(c<0||c>(a.length-20|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.data_size"];else return b("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size")}function c(a,b){return 20+g(a,b)|0}function h(a,c){if(c<0||c>(a.length-20|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else{var d=b("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size");if(c>(a.length-(20+d|0)|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else return b("bs_caml_missing_polyfill").not_implemented("caml_input_value_from_string")}}function d(a,c){return h(b("bs_caml_string").bytes_of_string(a),c)}function e(a,c,d){return b("bs_caml_missing_polyfill").not_implemented("caml_output_value")}function i(){return b("bs_caml_missing_polyfill").not_implemented("caml_input_value")}var j=20;f.to_channel=e;f.to_buffer=a;f.from_channel=i;f.from_bytes=h;f.from_string=d;f.header_size=j;f.data_size=g;f.total_size=c}),null);
__d("bs_obj",["bs_marshal","bs_caml_array","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("bs_caml_array").caml_array_get,h=b("bs_caml_array").caml_array_set;function a(){return b("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_string")}function c(a,c){return[b("bs_marshal").from_bytes(a,c),c+b("bs_marshal").total_size(a,c)|0]}function i(a){a=a.length!==void 0&&(a.tag|0)!==248&&a.length>=1?a[0]:a;var c;if(a.length!==void 0&&a.tag===248)c=a[0];else throw b("bs_caml_builtin_exceptions").not_found;if(c.tag===252)return a;else throw b("bs_caml_builtin_exceptions").not_found}function d(a){try{a=i(a);return a[0]}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_name"];else throw a}}function e(a){try{a=i(a);return a[1]}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_id"];else throw a}}function j(a){try{return i(a)}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_slot"];else throw a}}var k=0,l=245,m=246,n=247,o=248,p=249,q=250,r=251,s=251,t=252,u=253,v=254,w=255,x=255,y=1e3,z=1001,A=1002;f.double_field=g;f.set_double_field=h;f.first_non_constant_constructor_tag=k;f.last_non_constant_constructor_tag=l;f.lazy_tag=m;f.closure_tag=n;f.object_tag=o;f.infix_tag=p;f.forward_tag=q;f.no_scan_tag=r;f.abstract_tag=s;f.string_tag=t;f.double_tag=u;f.double_array_tag=v;f.custom_tag=w;f.final_tag=x;f.int_tag=y;f.out_of_heap_tag=z;f.unaligned_tag=A;f.extension_name=d;f.extension_id=e;f.extension_slot=j;f.marshal=a;f.unmarshal=c}),null);
__d("bs_camlinternalLazy",["bs_obj","bs_curry","bs_caml_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("bs_caml_exceptions").create("CamlinternalLazy.Undefined");function h(){throw g}function i(a){__p&&__p();var c=a[0];a[0]=h;try{c=b("bs_curry")._1(c,0);a[0]=c;a.tag=b("bs_obj").forward_tag;return c}catch(b){a[0]=function(){throw b};throw b}}function j(a){var c=a[0];a[0]=h;c=b("bs_curry")._1(c,0);a[0]=c;a.tag=b("bs_obj").forward_tag;return c}function a(a){var c=a.tag|0;if(c===b("bs_obj").forward_tag)return a[0];else if(c!==b("bs_obj").lazy_tag)return a;else return i(a)}function c(a){var c=a.tag|0;if(c===b("bs_obj").forward_tag)return a[0];else if(c!==b("bs_obj").lazy_tag)return a;else return j(a)}f.Undefined=g;f.force_lazy_block=i;f.force_val_lazy_block=j;f.force=a;f.force_val=c}),null);
__d("MessengerSendButtonReact.bs",["fbt","bs_block","LinkReact.bs","bs_belt_Option","ReasonReact.bs","bs_camlinternalLazy","MessengerCustomColorUtils.bs","MessengerSendIconSVGM4React.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("bs_block").__(246,[function(){return g._("Press Enter to send")+("\n"+g._("Press Shift + Enter to add a new paragraph"))}]);function a(a){var c=a.className,d=a.customColor,e=a.onClick;a=a.useIcon;var f=d!==void 0?{color:d}:void 0;a=b("bs_belt_Option").getWithDefault(a,!1);var i=h.tag|0;return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,c,void 0,"tooltip",i===250?h[0]:i===246?b("bs_camlinternalLazy").force_lazy_block(h):h,void 0,void 0,void 0,void 0,e,void 0,void 0,"button",void 0,f,void 0,void 0,void 0,[a?b("MessengerSendIconSVGM4React.bs").make(b("bs_belt_Option").getWithDefault(d,b("MessengerCustomColorUtils.bs").defaultColor(0))):g._("Send")]))}c=a;f.title=h;f.make=c}),null);
__d("MessengerSendButtonReact.re",["MessengerSendButtonReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerSendButtonReact.bs").make;f.make=a}),null);
__d("ReasonBootloadOnInteraction.react",["React","ReasonBootloadOnRender.react"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hadUserInteraction:!1},c.$1=function(){c.setState({hadUserInteraction:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){if(!this.state.hadUserInteraction)return b("React").cloneElement(this.props.placeholder,{onFocus:this.$1,onMouseOver:this.$1,onClick:this.$1});var a=this.props,c=a.loader,d=a.component;a=a.placeholder;return b("React").createElement(b("ReasonBootloadOnRender.react"),{placeholder:a,loader:c,component:d})};return c}(b("React").Component);e.exports=a}),null);
__d("MercuryMessageBodyReact.bs",["ReasonReact.bs","MercuryMessageBody.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MercuryMessageBody.react"),{body:a},c)}f.make=a}),null);
__d("ReplyingToMessageReact.bs",["ix","cx","fbt","Image.bs","React","asset","ReasonReact.bs","bs_js_primitive","XUICloseButtonReact.bs","MercuryAttachmentType","MercuryMessageBodyReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").statelessComponent("ReplyingToMessageReact");function k(a,c,d,e,f,h){__p&&__p();return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){__p&&__p();var f,j=0;if(c!==void 0){var k=c;k===""?j=1:f=[b("ReasonReact.bs").element(void 0,void 0,b("MercuryMessageBodyReact.bs").make(k,[])),null]}else j=1;if(j===1){if(d.length!==1)k=[i._({"*":"{number of attachments in message being replied to} attachments","_1":"{number of attachments in message being replied to} attachment"},[i._param("number of attachments in message being replied to",String(d.length)),i._plural(d.length)]),g("596865")];else{j=d[0];var l=j.attach_type===b("MercuryAttachmentType").PHOTO;if(l)k=[i._("Photo"),g("596858")];else{l=j.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE;if(l)k=[i._("GIF"),g("596858")];else{l=j.attach_type===b("MercuryAttachmentType").VIDEO;if(l)k=[i._("Video"),g("596874")];else{l=j.attach_type===b("MercuryAttachmentType").STICKER||j.attach_type===b("MercuryAttachmentType").THIRDPARTYSTICKER;k=l?[i._("Sticker"),g("596858")]:[i._("Attachment"),g("596852")]}}}}f=[k[0],b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make("_6ees",void 0,void 0,void 0,k[1],void 0,void 0,void 0,void 0,[]))]}return b("React").createElement("div",{className:(h?"_692o":"")+" _67tu"},b("ReasonReact.bs").element(void 0,void 0,b("XUICloseButtonReact.bs").make("_67tv",1,h?1:2,e,void 0,[])),i._("Replying to")," ",b("React").createElement("strong",void 0,i._("{name}",[i._param("name",a)])),b("React").createElement("div",{className:"_67tw _1nc6 ellipsis"},f[0],f[1]))},j[9],j[10],j[11],j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.name,b("bs_js_primitive").nullable_to_opt(a.body),a.attachments,a.onCancelReplyingToMessage,[],a.isChatTab)});f.component=j;f.make=k;f.jsComponent=a}),null);
__d("WorkGalahadChatSendButton.react",["cssVar","cx","fbt","Link.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";function a(a){var c=a.customColor,d=a.onClick;a=a.className;c=c!==null?c:"#373e4c";return b("React").createElement(b("Link.react"),{href:"#",role:"button",onClick:d,className:b("joinClasses")(a,"_7dch")},b("React").createElement("span",{className:"accessible_elem"},i._(["Send","6d497ac7e131fadc63dceeb8dc6a7e55",1])),b("React").createElement("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",version:"1.1"},b("React").createElement("g",{id:"workplace-chat-send",stroke:"none",strokeWidth:"1",fill:c,fillRule:"evenodd"},b("React").createElement("path",{d:"M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z",id:"Path",fill:c}))))}e.exports=a}),null);
__d("XMNCommercePageNullStateCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/page/nullstate/",{})}),null);
__d("MessengerComposer.react",["cssVar","cx","fbt","invariant","requireCond","AsyncRequest","AutoFocusableLink.react","BootloadOnRender.react","ChatPhotoUploader.react","CurrentUser","FBLogger","JSResource","LazyComponent.react","MercuryBootloadOnInteraction.react","MercuryConfig","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryReadOnlyReason","MercuryShareAttachmentRenderLocations","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerBlockDialogReact.bs","MessengerBotMenuDataFetcher","MessengerButtonReact.bs","MessengerComposerButtonLabels","MessengerComposerInput.react","MessengerComposerPendingActions.react","MessengerConfirmBlockThreadDialogReact.bs","MessengerConfirmLeaveGroupDialogReact.bs","MessengerConstants","MessengerContextualDialog.react","MessengerDialogs.bs","MessengerDotComAndInboxM4Check.bs","MessengerFileSizeErrorDialogReact.bs","MessengerHotLikeButton.react","MessengerHotLikeUtils","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerQuickCamOrigins","MessengerResponsiveBlock.react","MessengerSendButtonReact.re","MessengerState.bs","MessengerURIStore","MessengerView","MNCommerceCallToActionType","MNCommerceCTAProcessor","MNCommercePageSetting","MNCommercePostbackCTADataManager","MNCommercePostbackRefSendManager","P2PGKValues","React","ReasonBootloadOnInteraction.react","ReasonResource","ReplyingToMessageReact.bs","ShareDataType","URI","WorkBotLandingPageHelper","cr:996042","WorkChatExtensionAvailabilityFetcher","WorkFileUploadsGating","WorkGalahadChatSendButton.react","WorkGalahadSettings","XMessagingUnblockMessagesController","XMNCommercePageNullStateCTAController","XUISpinner.react","getPageIDFromThreadID","gkx","immutable","isWebGLEnabled","lazyLoadComponent","nullthrows","promiseDone","cr:996047"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("MessengerBlockDialogReact.bs").jsComponent,l=b("MessengerButtonReact.bs").jsComponent,m=b("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,n=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent,o=b("MessengerFileSizeErrorDialogReact.bs").jsComponent,p=b("MessengerSendButtonReact.re").make,q=b("ReplyingToMessageReact.bs").jsComponent,r=b("WorkBotLandingPageHelper").shouldShowBotLandingPage,s=b("lazyLoadComponent")(b("JSResource")("WorkChatPostButtonReact").__setRef("MessengerComposer.react")),t=b("lazyLoadComponent")(b("JSResource")("MercuryStageFilePreviewReactComponent").__setRef("MessengerComposer.react")),u=b("lazyLoadComponent")(b("JSResource")("MessengerUnconnectedThreadInfoTextReact").__setRef("MessengerComposer.react")),v=b("lazyLoadComponent")(b("JSResource")("MessengerComposerReJoin.react").__setRef("MessengerComposer.react"));a=b("React").PropTypes;var w=640,x=b("WorkGalahadSettings").isGalahadEnabled?320:360,y=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.refsGifUploader=null;d.handleFileUpload=function(a){d.refsUploader&&d.refsUploader.uploadFiles(a),d.exitCurrentMode()};d.focusInput=function(){d.refsInput&&d.refsInput.focus()};d.$50=function(a){d.refsGifUploader=a};d.$53=function(){var a=b("XMessagingUnblockMessagesController").getURIBuilder().getURI(),c=d.props.threadID;new(b("AsyncRequest"))(a).setMethod("POST").setData({fbid:b("MercuryIDs").getUserIDFromThreadID(c)}).send()};d.$10=function(){var a=d.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,c);d.$57()["delete"](d.props.threadID);b("MessengerActions").selectThread(null);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint("inbox_banner").log()};d.$9=function(){__p&&__p();var a;a=(a=d.props)!=null?(a=a.thread)!=null?a.thread_id:a:a;a=b("MercuryIDs").isGroupChat(a);if(a)d.$58();else{a=(a=d.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a;var c=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null,e=c&&c.short_name;e&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(k,{onBlock:function(){d.$59(e)},contact:c})})}};d.$11=function(a){var c=d.props.thread,e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);a||new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint("inbox_banner").log()};d.$51=function(a,c){a.platformFBID.toString()===b("MercuryConfig").MessengerAppID?d.props.onStickerSelect(a.resultID.toString()):d.refsGifUploader&&d.refsGifUploader.uploadURL&&d.refsGifUploader.uploadURL({attribution_app_id:a.platformFBID,external_image_url:a.source.url,preview_url:a.media.preview?a.media.preview.url:a.media.thumbnail.url,source:a.source})};d.$52=function(a){d.focusInput(),d.refsInput&&d.refsInput.insertEmoji(a)};d.$20=function(a){d.setState({currentValue:a},function(){b("cr:996047")!=null&&b("cr:996047")(d.props.threadID,a)})};d.$18=function(a,b,c){d.refsEmojiButton&&d.refsEmojiButton.hideFlyout();return d.props.onMessageSend&&d.props.onMessageSend(a,b,c)};d.$19=function(){var a=d.props.onMessageSend;d.$23()&&a!=null&&b("cr:996042")!=null&&b("nullthrows")(d.props.workChatContentApps).forEach(function(c,e){c=(c=c.payload)==null?void 0:c.contentAppID;if(c==null)return;a("",{shareable_attachment:{share_type:b("ShareDataType").FB_GENERIC_SHAREABLE,share_params:{oid:c}}},function(){b("cr:996042").removeWorkContentApp(d.props.threadID,e)})})};d.$48=function(a){d.refsInput&&d.refsInput.triggerSend()};d.$49=function(a){return d.props.onStickerSelect(a)};d.$13=function(){if(d.state.nullStateCTA!==null)switch(d.state.nullStateCTA.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:break;case b("MNCommerceCallToActionType").POSTBACK:default:d.setState({disableNullState:!0});b("MNCommercePostbackRefSendManager").hasMDotMeRef(d.$5())?(b("MNCommercePostbackCTADataManager").sendAndConfirm(d.state.nullStateCTA.id,d.state.nullStateCTA.title,d.props.threadID,null,d.$1,b("MNCommercePostbackRefSendManager").getMdotMeRef()),b("MessengerActions").changeMDotMeReferral()):b("MNCommercePostbackCTADataManager").sendAndConfirm(d.state.nullStateCTA.id,d.state.nullStateCTA.title,d.props.threadID,null,d.$1);b("MNCommerceCTAProcessor").logCTAClick(d.state.nullStateCTA);break}};d.$1=function(){d.setState({showNullState:!0,disableNullState:!1})};d.$55=function(){var a;a=(a=d.props.thread)==null?void 0:a.joinable_mode.link;if(a){a=b("URI").tryParseURI(a);a=a&&a.getQueryData().group_hash;a&&(d.setState({requesting_rejoin:!0}),d.$57().chatJoinThroughHash(a,function(a){d.setState({requesting_rejoin:!1})}))}};d.$1=d.$1.bind(babelHelpers.assertThisInitialized(d));d.state=d.$2();return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.threadID!==this.props.threadID||a.thread&&!this.props.thread?(this.setState(this.$2()),a.thread&&this.$3(a.thread,b("getPageIDFromThreadID")(a.threadID))):a.thread&&this.$4(a.thread,b("getPageIDFromThreadID")(a.threadID))&&this.setState({showNullState:!1})};d.componentDidMount=function(){var a=this;this.props.thread&&this.$3(this.props.thread,this.$5());var c=b("gkx")("678608");b("CurrentUser").isWorkUser()&&c&&b("promiseDone")(b("WorkChatExtensionAvailabilityFetcher").checkHasChatExtension(),function(b){return a.setState({hasWorkChatExtension:b})})};d.componentDidUpdate=function(a){(a.canReply!==this.props.canReply||a.replyingToMessage!==this.props.replyingToMessage||a.sharePreview!==this.props.sharePreview||a.fileUploader!==this.props.fileUploader||a.workChatContentApps!==this.props.workChatContentApps)&&(this.props.onResize&&this.props.onResize()),this.props.replyingToMessage&&a.replyingToMessage!==this.props.replyingToMessage&&this.focusInput(),this.props.thread&&(this.$6(),this.$7())};d.render=function(){__p&&__p();var a=this;if(!this.props.canReply)return this.$8();else if(this.props.thread&&this.props.threadID&&this.props.viewer&&b("MessageRequestUtils").shouldShowComposerPendingActions(this.props.thread)&&!this.state.pendingActionsBypassed)return b("React").createElement(b("MessengerComposerPendingActions.react"),{thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer,onAccept:function(){return a.setState({pendingActionsBypassed:!0})},onIgnoreBlock:this.$9,onDeleteDialogDeleteClick:this.$10,onDeleteDialogToggleClick:this.$11});var c=this.props.thread&&this.props.thread.message_count;b("MNCommercePostbackRefSendManager").sendMDotMeRef(this.$5(),c);if(this.state.showNullState&&this.state.nullStateCTA!==null)return b("React").createElement("div",{className:"_2xh0"},this.$12(),b("React").createElement("div",{className:"_2xh4 _59w_"},b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{cta:this.state.nullStateCTA,onClick:this.$13,disabled:this.state.disableNullState,threadID:this.props.threadID}),loader:b("JSResource")("ChatPageComposerNullState.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("XUISpinner.react"),{size:"small"})})));var d=this.$14();c=b("React").createElement(b("MessengerResponsiveBlock.react"),{breakpointsToggles:function(a){return[a!=null&&a<=w,a]}},function(c){var e=c[0];c=c[1];return b("React").createElement("div",{"aria-label":i._("New message"),className:"_4rv3"+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyq":"")+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyv":""),role:"region"},a.props.thread&&b("MessageRequestUtils").shouldShowUnconnectedThreadInfoText(a.props.thread)?a.$15():null,a.props.replyingToMessage&&a.$16(),a.$17(a.props.threadID),b("React").createElement("div",{className:"_5irm"+(e?" _1_73":"")},b("React").createElement(b("MessengerComposerInput.react"),{disableAutofocus:!!a.props.disableAutofocus,fileUploader:a.props.fileUploader,handleOnlyImageUploads:!1,isComposing:d,mentionsEnabled:a.props.mentionsEnabled,ref:function(b){return a.refsInput=b},onBeforeInput:function(){return a.refsEmojiButton&&a.refsEmojiButton.hideFlyout()},onResize:a.props.onResize,onMessageSend:a.$18,participants:a.props.participants,sharePreview:a.props.sharePreview,smallerEqual640:e,thread:a.props.thread,threadID:d?b("MessengerConstants").NEW_THREAD_KEY:a.props.threadID,pageID:a.$5(),viewer:a.props.viewer,onFileUpload:a.handleFileUpload,onWorkChatContentAppsSend:a.$19,onChange:a.$20,showMenu:a.state.showMenu,disableInput:a.state.disableInput}),a.$21(c)))});var e=this.$5(),f=d?b("MessengerConstants").NEW_THREAD_KEY:this.props.threadID;return e&&!b("CurrentUser").isWorkUser()?b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{onResize:this.props.onResize,originalElement:c,pageID:e,playLinkClassName:"_2xh6 _2xh7",showGameImage:!1,threadFBID:this.props.threadFBID,threadID:f}),loader:b("JSResource")("MessengerGameBotPlayButton.react").__setRef("MessengerComposer.react"),placeholder:c}):c};d.$17=function(a){__p&&__p();if(!a)return null;if(!this.$22()&&!this.$23())return null;var c=this.props,d=c.fileUploader,e=c.thread;c=c.workChatContentApps;e=e&&e.footer_color?e.footer_color:"#0084ff";var f=function(c){b("cr:996042")!=null&&c!=null&&b("cr:996042").removeWorkContentApp(a,c)};return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement(b("XUISpinner.react"),{className:"_2qf"})},b("React").createElement(t,{files:d!=null&&d.get("uploadedFiles")!=null?d.get("uploadedFiles"):b("immutable").Map(),workFiles:(d=c)!=null?d:b("immutable").Map(),small:!1,threadID:a,threadCustomColor:e,onClick:this.$24,onWorkFileRemove:f,onResize:this.props.onResize}))};d.$15=function(){var a;a=(a=this.props.thread)==null?void 0:a.other_user_fbid;if(!a)return null;a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a));return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(u,{name:a.short_name,onBlock:this.$9,onDelete:this.$10,onToggle:this.$11}))};d.$16=function(){var a=this.props.replyingToMessage;return!a?null:b("React").createElement(q,{name:this.$25(a),body:a.body,attachments:a.attachments,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage})};d.$25=function(a){a=a.author?b("MessengerParticipants.bs").getNow(a.author):null;return a&&a.short_name};d.$24=function(a,c){b("MessengerActions").cancelFileUpload(a,c)};d.$21=function(a){var c=this;return this.state.disableInput===!0?null:b("React").createElement("div",{ref:function(a){c.refsButtonsContainer=a},className:"_4rv4"+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyw":"")},this.$26(a),this.$27())};d.$26=function(a){if(this.props.hideActions)return null;return a&&a<x?b("React").createElement("div",null,b("React").createElement("ul",{className:"_39bj"},this.$28(),b("CurrentUser").isWorkUser()?this.$29():this.$30(),this.$31(),this.$32(),this.$33()),b("React").createElement("ul",{className:"_39bj"},this.$34(),this.$35(),this.$36(),this.$37(),this.$38())):b("React").createElement("ul",{className:"_39bj"},this.$28(),b("CurrentUser").isWorkUser()?this.$29():null,this.$30(),b("CurrentUser").isWorkUser()?this.$39():null,this.$31(),this.$32(),this.$33(),this.$34(),this.$35(),this.$36(),this.$37(),this.$38())};d.$40=function(a){b("FBLogger")("messenger_upload_file").warn("Uploading file is too large"),b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(o,{error:a.error})})};d.handleTextDropped=function(a){this.refsInput&&this.refsInput.handleTextDropped(a)};d.$35=function(){return b("React").createElement("li",null,this.$41())};d.$41=function(){var a;if(!b("P2PGKValues").P2PVisible||!this.props.threadID||this.$42()||!this.props.p2pPaymentConfig||((a=this.props)!=null?(a=a.participants)!=null?a.size:a:a)===1)return null;a="_30yy _25pc _39bk";return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:a,ContextualDialog:b("MessengerContextualDialog.react"),thread:this.props.thread,threadID:this.props.threadID,p2pPaymentConfig:this.props.p2pPaymentConfig}),loader:b("JSResource")("P2PSendMoneyContainerBootloader.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a,role:"button"})})};d.$38=function(){return b("gkx")("678582")&&this.props.threadID?b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:"_4rv5 _39bk"+(this.state.flyoutOpen?" _5jhb":""),location:b("MessengerQuickCamOrigins").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer}),loader:b("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_4rv5 _39bk",role:"button","aria-label":b("MessengerComposerButtonLabels").QuickCamButtonLabel})}):null};d.$34=function(){return!y||this.$14()?null:b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{onVoiceClipCreate:this.props.onVoiceClipCreate}),loader:b("JSResource")("MessengerVoiceClipButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_4rv7 _39bk _30yy",role:"button","aria-label":b("MessengerComposerButtonLabels").VoiceClipButtonLabel})}))};d.$36=function(){if(b("gkx")("994335"))return null;if(this.props.thread&&this.props.thread.is_canonical)return null;return!this.props.threadFBID||this.$14()?null:b("React").createElement("li",null,b("React").createElement(b("ReasonBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("ReasonResource")(b("JSResource")("MessengerGroupPollingButtonReact.bs").__setRef("MessengerComposer.react")),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _30yy _2o-b",role:"button","aria-label":b("MessengerComposerButtonLabels").GroupPollingButtonLabel})}))};d.$37=function(){var a=b("gkx")("678262")&&b("isWebGLEnabled")();return a&&this.props.threadFBID&&!this.$42()?b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerGamesButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _30yy _4ce_",role:"button"})})):null};d.$28=function(){return this.props.threadFBID&&!this.$42()&&this.state.hasWorkChatExtension?b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerWorkplaceChatExtensionsButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _22k0 _30yy",role:"button"})})):null};d.$43=function(a){var c=this,d=b("CurrentUser").isWorkUser()?!b("WorkFileUploadsGating").canUploadFiles:!1;return b("React").createElement("li",{className:"_39bk"},b("React").createElement(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!(this.props.threadID||this.$44()),ref:function(a){return c.refsUploader=a},imageClassName:(a=="files"?"_5vn8":"")+(a=="attachment"?" _46si":""),imagesOnly:d,inputClassname:"_260t",linkClassName:"_30yy _7hi7 _260u",focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$40,threadID:this.props.threadID}))};d.$30=function(){if(!this.$14())return this.$43("files")};d.$29=function(){return!b("WorkFileUploadsGating").canUploadFiles||this.$14()?null:this.$43("attachment")};d.$39=function(){var a,c=this.props.openPostComposerInSameWindow?"_self":"_blank";a=(a=this.props)!=null?(a=a.thread)!=null?(a=a.associated_object)!=null?a.action_link:a:a:a;if(!a){var d;a=(d=this.props)!=null?(d=d.thread)!=null?(d=d.work_associated_group)!=null?d.url:d:d:d}return a?b("gkx")("808098")?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(s,{composerLink:a,target:c})):null:null};d.$45=function(){return this.state.currentValue.length>0||this.$22()||this.$23()||this.$46()};d.$22=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};d.$23=function(){var a=this.props.workChatContentApps;return a!=null&&a.size>0};d.$46=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};d.$47=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadingFiles").size>0)};d.$27=function(){var a=!(this.props.threadID||this.$44());return!a&&this.$45()&&!this.$47()?b("WorkGalahadSettings").isGalahadEnabled?b("React").createElement(b("WorkGalahadChatSendButton.react"),{customColor:this.props.thread?this.props.thread.solid_color:null,onClick:this.$48,className:(this.props.threadID?"_30yy":"")+" _38lh"}):b("React").createElement(p,{className:(this.props.threadID?"_30yy":"")+" _38lh",customColor:this.props.thread&&this.props.thread.solid_color||void 0,onClick:this.$48}):b("React").createElement(b("MessengerHotLikeButton.react"),{className:"_4rv9"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ymq":"")+(this.props.threadID?" _30yy":""),disabled:a,customColor:this.props.thread&&this.props.thread.solid_color,customLike:b("MessengerHotLikeUtils").getCustomEmojiFromThread(this.props.thread)||void 0,sendSticker:this.$49,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID,renderSize:24,thread:this.props.thread})};d.$31=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _4rv6 _39bk";return b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),disabled:!(this.props.threadID||this.$44()),getInput:function(){return a.refsInput},flyoutAlignment:"right",flyoutClassName:"_293j",flyoutWidth:285,onStickerSelect:this.props.onStickerSelect,threadID:this.props.threadID}),loader:b("JSResource")("ChatStickerButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:c,role:"button","aria-label":b("MessengerComposerButtonLabels").StickerButtonLabel})}))};d.$12=function(){__p&&__p();var a;a=(a=this.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a;a=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null;var c=a&&a.name||"page";if(this.state.nullStateCTA!==null)switch(this.state.nullStateCTA.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:return null;case b("MNCommerceCallToActionType").POSTBACK:if(!b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$5())&&!this.state.nullStateCTA.instantgame_metadata&&!b("CurrentUser").isWorkUser())return b("React").createElement("div",{className:"_3zc8"},i._("When you tap {cta title}, {name} will see your public info.",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c)]));else if(b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$5())){var d=this.$5();a=a&&a.vanity?"m.me/"+a.vanity:d?"m.me/"+d:"m.me";return b("React").createElement("div",{className:"_3zc8"},i._("When you tap {cta title}, {name} will see your public info and that you opened their {link} link.",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c),i._param("link",a)]))}break;default:return null}return null};d.$32=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _yht _39bk";return b("React").createElement("li",null,b("React").createElement("div",{style:{display:"none"}},b("React").createElement(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!1,ref:this.$50,imagesOnly:!1,focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$40})),b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),getInput:function(){return a.refsInput},getQuery:function(){return a.refsInput?a.refsInput.getValue():""},location:b("MercuryShareAttachmentRenderLocations").MESSENGER,onSelect:this.$51}),loader:b("JSResource")("ChatContentSearchButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:c,role:"button","aria-label":b("MessengerComposerButtonLabels").ContentSearchButtonLabel})}))};d.$33=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _5s2p _39bk";return b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),flyoutAlignment:"right",getInput:function(){return a.refsInput},onSelect:this.$52,onMount:function(b){return a.refsEmojiButton=b},sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}),loader:b("JSResource")("ChatEmojiButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:c,role:"button","aria-label":b("MessengerComposerButtonLabels").EmojiButtonLabel})}))};d.$8=function(){__p&&__p();var a=this;if(!this.props.thread||this.props.view===b("MessengerView").DETAIL.COMPOSE)return null;var c=this.props.thread,d=this.props.participants,e=!1,f=!1;if(c.cannot_reply_reason==="blocked"){e=!0;c.is_canonical===!0||j(0,4973);d!=null||j(0,4974);var g=c.other_user_fbid;g!=null||j(0,4975);d=d.get(b("MercuryIDs").getParticipantIDFromUserID(g));d!=null||j(0,4976);b("MessengerState.bs").compute(this.props.viewer,function(d){d=d.blocked_ids;b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(a.props.viewer,d,c)&&(f=!0)})}if(e)if(f)return b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},i._("You've blocked messages from this person. {unblock_now_button}",[i._param("unblock_now_button",b("React").createElement(l,{label:i._("Unblock now"),onClick:this.$53,type:"secondary"}))])));else return b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},i._("This person isn't available at the moment.")));return this.$54()?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(v,{thread:c,onActionClick:this.$55,requesting:this.state.requesting_rejoin})):b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},b("MercuryReadOnlyReason").getReason(c.has_email_participant)))};d.$56=function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)};d.$58=function(){var a=this,c,d=(c=this.props)!=null?(c=c.thread)!=null?c.thread_id:c:c;d&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(n,{onLeave:function(){var c=b("MessengerURIStore").getState().activeThreadID===d;a.$57().leaveGroup(d);c&&b("MessengerActions").selectThread(null)},isViewerAdmin:!1,thread:a.props.thread})})};d.$59=function(a){var c=this,d=this.props.threadID,e=d===b("MessengerURIStore").getState().activeThreadID;this.$56().blockIgnoreOnMessengerDotCom(e,d,function(){c.$60(a)})};d.$60=function(a){var c=this.props,d=c.threadID;c=c.thread;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(m,{participantName:a})});var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint(null).log()};d.exitCurrentMode=function(){this.refsInput&&this.refsInput.exitCurrentMode()};d.$14=function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE};d.$44=function(){return!!(this.$14()&&this.props.recipients&&this.props.recipients.size)};d.$42=function(){return!!this.$5()};d.$5=function(){return b("getPageIDFromThreadID")(this.props.threadID)};d.$6=function(){var a=this,c=this.$5();c?b("MessengerBotMenuDataFetcher").getHasPageSetting(c,function(b){a.setState({showMenu:b})},function(){a.setState({showMenu:!1})},b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED):this.setState({showMenu:!1})};d.$7=function(){var a=this,c=this.$5();c?b("MessengerBotMenuDataFetcher").getHasPageSetting(c,function(b){a.setState({disableInput:b})},function(){a.setState({disableInput:!1})},b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED):this.setState({disableInput:!1})};d.$4=function(a,c){var d=a.message_count;c=!!c;if(b("CurrentUser").isWorkUser()&&c&&d===1&&this.props.viewer){c=b("MessengerState.bs").getThreadMessagesRangeNow(this.props.viewer,a.thread_id,0,1);return!r(b("immutable").List(c))}return d>0};d.$61=function(a,b){b=r(b);var c=!!a;c&&b&&this.$62(a)};d.$62=function(a){var c=b("XMNCommercePageNullStateCTAController").getURIBuilder();new(b("AsyncRequest"))().setURI(c.getURI()).setMethod("POST").setData({page_id:a}).setHandler(function(a){a&&a.payload?this.setState({showNullState:!0,nullStateCTA:a.payload}):this.setState({showNullState:!1,disableNullState:!1})}.bind(this)).send()};d.$3=function(a,c){var d=this,e=a.message_count,f=!!c;if(b("CurrentUser").isWorkUser()&&f&&e===1&&this.props.viewer){b("MessengerState.bs").getThreadMessagesRange(this.props.viewer,a.thread_id,0,1,function(a){return d.$61(c,b("immutable").List(a||[]))});return}a=e===0;f&&a?this.$62(c):this.setState({showNullState:!1,disableNullState:!1})};d.$2=function(){return{pendingActionsBypassed:!1,currentValue:"",nullStateCTA:null,showMenu:!1,disableInput:!1,showNullState:!1,disableNullState:!1}};d.$57=function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)};d.$54=function(){var a=this.props,c=a.thread;a=a.viewer;if(!c||!a)return!1;a=c.participants.includes(b("MercuryIDs").getParticipantIDFromUserID(a));c=b("MessengerAdminGroupUtils").isWorkFroup(c);return c&&!a};d.testUtils_renderRawP2PSendMoneyButton=function(){return this.$41()};d.replyToMention=function(a){this.refsInput&&this.refsInput.addMention&&this.refsInput.addMention(a)};return c}(b("React").PureComponent);c.propTypes={canReply:a.bool,disableAutofocus:a.bool,fileUploader:a.object,hideActions:a.bool,mentionsEnabled:a.bool,onCustomLikeSelect:a.func,onMessageSend:a.func,onPhotoUploadComplete:a.func,onPhotoUploadCancel:a.func,onPhotoUploadFail:a.func,onPhotoUploadSubmit:a.func,onResize:a.func,onStickerSelect:a.func.isRequired,onVoiceClipCreate:a.func,p2pPaymentConfig:a.object,participants:a.instanceOf(b("immutable").Map),recipients:a.instanceOf(b("immutable").List),sharePreview:a.object,threadID:a.string,threadFBID:a.string,thread:a.object,view:a.string,viewer:a.string,replyingToMessage:a.object,workChatContentApps:a.instanceOf(b("immutable").Map),onCancelReplyingToMessage:a.func,openPostComposerInSameWindow:a.bool};e.exports=c}),null);
__d("MessengerEmojiUsageUtils",["MessengerSupportedEmojiUtils","Utf16"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=65039;a={findAllEmojis:function(a){__p&&__p();var c=[];a=b("MessengerSupportedEmojiUtils").parse(a);a.forEach(function(a){var d=[];a.emoji.forEach(function(a){a=b("Utf16").decode(a);a&&d.push(a)});d[d.length-1]===g&&d.pop();c.push(d)});return c}};e.exports=a}),null);
__d("MessengerSimpleDialogReact.bs",["fbt","bs_curry","ReasonReact.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerSimpleDialogReact");function i(a,c,d){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,a)),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[c])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](0,g._("OK"),void 0,void 0,void 0,0,void 0,void 0,void 0,[]))]))]))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.title,a.body,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerComposerContainerImpl.react",["fbt","requireCond","AsyncRequest","AsyncUploadRequest","Bootloader","CurrentUser","EmojiDispatcher","EmojiLikeUtils","EmojiState","KeyEventController","MercuryAttachment","MercuryAttachmentType","MercuryConfig","MercuryIDs","MercuryLocalIDs","MercuryMessageActions","MercuryMessageObject","MercurySendMessageHandler","MercuryThreadActions","MercuryThreadIDMap","MercuryThreadInformer","MessageRequestUtils","MessengerActions","MessengerComposerActions","MessengerDialogs.bs","MessengerDotComAndInboxM4Check.bs","MessengerEmojiUsageUtils","MessengerSimpleDialogReact.bs","MessengerState.bs","MessengerView","MNPlatformTagsDataManager","P2PPaymentConfig","PhotosUploadID","React","ReactDOM","RepliedToMessageStatusForGraphQL","SubscriptionsHandler","XMessagingSetThreadNameController","getPageIDFromThreadID","gkx","immutable","cr:861483","cr:852472","MessengerComposer.react","EmojiStateStore"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerSimpleDialogReact.bs").jsComponent;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$6=function(a,c,e){__p&&__p();d.props.hostProps&&d.props.hostProps.messageSentCallback();b("EmojiState").updateRecentlyUsed(b("MessengerEmojiUsageUtils").findAllEmojis(a));if(!d.props.canReply){e&&e(null);return!1}var f=null,g=!1;d.$13(a,c)||(g=d.$14(function(e){__p&&__p();var g=d.$2.constructUserGeneratedMessageObject(a,d.props.source,e);g=babelHelpers["extends"]({},g);e=b("MercuryIDs").getUserIDFromThreadID(e);if(b("MNPlatformTagsDataManager").hasThreadTags(e)){e=b("MNPlatformTagsDataManager").getThreadTags();g.tags=e||[]}c&&(c.shareable_attachment&&(g.shareable_attachment=c.shareable_attachment),c.profile_ranges&&(g.profile_ranges=g.profile_xmd=c.profile_ranges));f=g;return g}));e&&e(g?f:null);f=null;return g},d.$8=function(a,b){d.$3.cancelAttachmentPlaceholder(b.upload_id,b)},d.$7=function(a,b){d.$3.confirmAttachmentPlaceholder(b.upload_id,b)},d.$9=function(a,b){d.$3.cancelAttachmentPlaceholder(b.upload_id,b);a=g._("Upload failed");var c=g._("Please try again. Make sure that you are uploading a valid file.");b.errorDialogParams&&(a=b.errorDialogParams.title||a,c=b.errorDialogParams.body||c);d.$15(a,c)},d.$10=function(a,b){d.$14(function(a){return d.$2.constructAttachmentMessageObject(d.props.source,a)},function(a){d.$3.addAttachmentPlaceholder(a,b.upload_id,b),d.handleMessageSentToPendingThread()})},d.handleAudioUpload=function(a){var c="upload_"+b("PhotosUploadID").getNewID();d.$1.sendAttachment(d.props.threadID,i(c),d.props.source);var e={};e[c]=a;c=new(b("AsyncUploadRequest"))(b("MercuryConfig").upload_url).setAllowCrossOrigin(!0).setRelativeTo(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d))).setData({voice_clip:!0}).setFiles(e);d.$4.addSubscriptions(c.subscribe("success",function(a,b){return d.$16(b)}));c.send()},d.$11=function(a){return d.$14(function(b){return d.$2.constructStickerMessageObject(a,d.props.source,b)})},d.$12=function(a,c,e){var f=d.props.threadID,g=d.$2.constructUserGeneratedMessageObject(a.emoji,d.props.source,f);g.has_attachment=!1;return d.$14(function(a){b("EmojiLikeUtils").setEmojiSize(g,c);return b("EmojiLikeUtils").setEmojiSource(g,e)})},d.handleMessageSentToPendingThread=function(){d.props.thread&&b("MessageRequestUtils").isMessageRequest(d.props.thread)&&b("MercuryThreadActions").getForFBID(d.props.viewer).movePendingToInbox(d.props.threadID)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this;this.$1=b("MercurySendMessageHandler").getForFBID(this.props.viewer);this.$3=b("MercuryMessageActions").getForFBID(this.props.viewer);this.$2=b("MercuryMessageObject").getForFBID(this.props.viewer);this.$5=b("MercuryThreadInformer").getForFBID(this.props.viewer);this.$4=new(b("SubscriptionsHandler"))();b("EmojiDispatcher").explicitlyRegisterStores([b("EmojiStateStore")]);this.props.onMount&&this.props.onMount(this);this.$4.addSubscriptions(b("KeyEventController").registerKey("ESCAPE",function(){a.props.replyingToMessage&&(a.props.onCancelReplyingToMessage&&a.props.onCancelReplyingToMessage())},function(a,c){return!!(a.key==="Escape"&&b("KeyEventController").filterEventTypes(a,c)&&b("KeyEventController").filterEventModifiers(a,c))}))};d.componentWillUnmount=function(){this.$4.release()};d.focusInput=function(){this.refsComposer&&this.refsComposer.focusInput&&this.refsComposer.focusInput()};d.render=function(){var a=this,c=this.props.hostProps?this.props.hostProps.hideActions:!1;if(b("cr:852472")&&b("MessengerDotComAndInboxM4Check.bs").yes)if(b("cr:861483")&&b("getPageIDFromThreadID")(this.props.threadID))return b("React").createElement(b("cr:861483").make,{canReply:this.props.canReply,disableAutofocus:this.props.disableAutofocus,fileUploader:this.props.fileUploader,hideActions:c,mentionsEnabled:!0,onMessageSend:this.$6,onPhotoUploadComplete:this.$7,onPhotoUploadCancel:this.$8,onPhotoUploadFail:this.$9,onPhotoUploadSubmit:this.$10,onResize:this.props.onResize,onStickerSelect:this.$11,onCustomLikeSelect:this.$12,onVoiceClipCreate:this.handleAudioUpload,replyingToMessage:this.props.replyingToMessage,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage,p2pPaymentConfig:b("P2PPaymentConfig").config,participants:this.props.participants,recipients:this.props.recipients,ref:function(b){return a.refsComposer=b},sharePreview:this.props.sharePreview,thread:this.props.thread,threadId:this.props.threadID,threadFbid:this.props.threadFBID,view:this.props.view,viewer:this.props.viewer});else return b("React").createElement(b("cr:852472").make,{canReply:this.props.canReply,disableAutofocus:this.props.disableAutofocus,fileUploader:this.props.fileUploader,hideActions:c,mentionsEnabled:!0,onMessageSend:this.$6,onPhotoUploadComplete:this.$7,onPhotoUploadCancel:this.$8,onPhotoUploadFail:this.$9,onPhotoUploadSubmit:this.$10,onResize:this.props.onResize,onStickerSelect:this.$11,onCustomLikeSelect:this.$12,onVoiceClipCreate:this.handleAudioUpload,replyingToMessage:this.props.replyingToMessage,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage,p2pPaymentConfig:b("P2PPaymentConfig").config,participants:this.props.participants,recipients:this.props.recipients,ref:function(b){return a.refsComposer=b},sharePreview:this.props.sharePreview,showBotMenu:!1,thread:this.props.thread,threadId:this.props.threadID,threadFbid:this.props.threadFBID,view:this.props.view,viewer:this.props.viewer});else return b("React").createElement(b("MessengerComposer.react"),{canReply:this.props.canReply,disableAutofocus:this.props.disableAutofocus,fileUploader:this.props.fileUploader,hideActions:c,mentionsEnabled:!0,onMessageSend:this.$6,onPhotoUploadComplete:this.$7,onPhotoUploadCancel:this.$8,onPhotoUploadFail:this.$9,onPhotoUploadSubmit:this.$10,onResize:this.props.onResize,onStickerSelect:this.$11,onCustomLikeSelect:this.$12,onVoiceClipCreate:this.handleAudioUpload,replyingToMessage:this.props.replyingToMessage,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage,p2pPaymentConfig:b("P2PPaymentConfig").config,participants:this.props.participants,recipients:this.props.recipients,ref:function(b){return a.refsComposer=b},sharePreview:this.props.sharePreview,threadID:this.props.threadID,threadFBID:this.props.threadFBID,thread:this.props.thread,view:this.props.view,viewer:this.props.viewer,workChatContentApps:this.props.workChatContentApps,openPostComposerInSameWindow:this.props.openPostComposerInSameWindow})};d.$13=function(a,b){return a?!1:!(b&&(b.shareable_attachment||b.profile_ranges.length>0))};d.$16=function(a){var b=a.getName();a=a.getResponse().payload.metadata[0].audio_id;this.$3.confirmAttachmentPlaceholder(b,{upload_id:b,audio_ids:[a]})};d.handleFileUpload=function(a){var b=this;a=a.reduce(function(a,b){var c=b.type.split("/")[0];a[c]?a[c].push(b):a.other.push(b);return a},{audio:[],image:[],other:[]});a.audio.forEach(function(a){return b.handleAudioUpload(a)});this.refsComposer&&this.refsComposer.handleFileUpload(a.image.concat(a.other))};d.handleTextDropped=function(a){this.refsComposer&&this.refsComposer.handleTextDropped(a)};d.$14=function(a,c){__p&&__p();var d=this.props.threadID,e=this.props.recipients,f=!1,g;(!d&&e&&e.size>1||b("gkx")("836564")&&this.props.newGroupName&&this.props.newGroupName!=="")&&(d=b("MercuryLocalIDs").generateThreadID(),f=!0,g=this.props.newGroupName);if(!d)return!1;a=a(d);if(f){f=e.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.getUniqueID())}).toArray();b("MessengerState.bs").createNewLocalThread(this.props.viewer,d,f.concat(b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)));a.offline_threading_id=b("MercuryIDs").tokenize(d).value;a.specific_to_list=f}else this.props.participants!=null&&this.props.participants.size!=0&&(a.participants_to_hash=this.props.participants.map(function(a){return a.id}).toArray());if(this.props.replyingToMessage&&this.props.replyingToMessage.message_id){e=b("MessengerState.bs").getMessagesFromIDs(b("CurrentUser").getID(),[this.props.replyingToMessage.message_id]);e=e.length>0?e[0]:null;a.replied_to_message={status:e?b("RepliedToMessageStatusForGraphQL").VALID:b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE,message:e};this.props.onCancelReplyingToMessage&&this.props.onCancelReplyingToMessage()}c?c(a):this.$3.send(a,this.handleMessageSentToPendingThread);this.props.view===b("MessengerView").DETAIL.COMPOSE&&(b("MercuryAttachment").get(a).length>0&&b("MessengerComposerActions").moveDraftToNextThread(d),b("MessengerComposerActions").exitComposeState(),b("MercuryIDs").isLocalThread(d)?this.$5.subscribeOnce("messages-updated",function(a,c){__p&&__p();a=b("MercuryThreadIDMap").get();if(a.canLinkExternally(d)){if(b("gkx")("836564")&&g&&g!==""){c=b("XMessagingSetThreadNameController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({thread_id:a.getServerIDFromClientIDNow(d),thread_name:g}).send();b("Bootloader").loadModules(["WorkChatActivityTypedLogger","WorkChatActivityEvent"],function(a,b){new a().setEvent(b.NAMED_GROUP_CHAT_CREATION_FROM_SLASH_CHAT).log()},"MessengerComposerContainerImpl.react")}b("MessengerActions").selectThread(d)}}):b("MessengerActions").selectThread(d));this.focusInput();return!0};d.resetDrag=function(){this.refsComposer&&this.refsComposer.exitCurrentMode()};d.$15=function(a,c){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(h,{title:a,body:c})})};return c}(b("React").PureComponent);c.propTypes={canReply:a.bool,disableAutofocus:a.bool,fileUploader:a.object,onMount:a.func,onResize:a.func,participants:a.instanceOf(b("immutable").Map),recipients:a.instanceOf(b("immutable").List),sharePreview:a.object,workChatContentApps:a.instanceOf(b("immutable").Map),hostProps:a.object,threadID:a.string,threadFBID:a.string,thread:a.object,view:a.string,viewer:a.string,replyingToMessage:a.object,onCancelReplyingToMessage:a.func,newGroupName:a.string,openPostComposerInSameWindow:a.bool};function i(a){return{upload_id:a,preview_attachments:[{upload_id:a,attach_type:b("MercuryAttachmentType").PHOTO,preview_uploading:!0}]}}e.exports=c}),null);
__d("MessengerComposerContainer.react",["MessengerComposerContainerImpl.react","withMessengerSource"],(function(a,b,c,d,e,f){"use strict";e.exports=b("withMessengerSource")(b("MessengerComposerContainerImpl.react"))}),null);
__d("MessengerBlockedGroupThreadWarningDialogReact.bs",["fbt","bs_block","bs_curry","bs_caml_array","ReasonReact.bs","CacheStorage","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){if(a.length===0)return g._("People you've blocked are in this conversation. If you see this conversation, you'll get each other's messages to the group.");else if(a.length===1)return g._("You've blocked {name}. If you continue, you and {name} will be able to call one another, chat with video and see each other's messages and activity in this group.",[g._param("name",b("bs_caml_array").caml_array_get(a,0))]);else if(a.length===2)return g._("{person1} and {person2} are in this group. If you continue, you and they will be able to call one another, chat with video and see each other's messages and activity in this group.",[g._param("person1",b("bs_caml_array").caml_array_get(a,0)),g._param("person2",b("bs_caml_array").caml_array_get(a,1))]);else{var c=String(a.length-2|0);return g._("{person1}, {person2} and {number} others are in this group. If you continue, you and they will be able to call one another, chat with video and see each other's messages and activity in this group.",[g._param("person1",b("bs_caml_array").caml_array_get(a,0)),g._param("person2",b("bs_caml_array").caml_array_get(a,1)),g._param("number",c)])}}function i(a){if(a.length===0)return g._("See conversation?");else if(a.length===1)return g._("{name} is in this group",[g._param("name",b("bs_caml_array").caml_array_get(a,0))]);else return g._("People you've blocked are in this group")}var j=g._("Cancel"),k=g._("Leave Group"),l=g._("See Conversation"),m=new(b("CacheStorage"))("localstorage");function a(a){return"see_blocked_group:"+a}function c(a,b){m.set("see_blocked_group:"+a,b,!0);return 0}function d(a){return m.get("see_blocked_group:"+a,!1)}var n=b("ReasonReact.bs").reducerComponent("MessengerBlockedGroupThreadWarningDialogReact");function o(a,c,d,e,f,g){__p&&__p();return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],function(g){__p&&__p();return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,g[1][0],void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._2(b("MessengerDialogReact.bs").Title[0],void 0,i(f))))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[h(f)])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](1,j,void 0,void 0,function(a){a.stopPropagation();b("bs_curry")._1(d,e);return b("bs_curry")._1(g[3],0)},1,void 0,void 0,void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](1,k,void 0,void 0,function(a){a.stopPropagation();b("bs_curry")._1(c,e);return b("bs_curry")._1(g[3],0)},1,void 0,void 0,void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](1,l,void 0,"danger",function(c){c.stopPropagation();b("bs_curry")._1(a,0);return b("bs_curry")._1(g[3],0)},0,void 0,void 0,void 0,[]))]))]))},function(){return[!0]},n[10],function(a,c){return b("bs_block").__(0,[[!1]])},n[12]]}e=b("ReasonReact.bs").wrapReasonForJs(n,function(a){return o(a.onSee,a.onLeave,a.onCancel,a.prevThreadID,a.blockedNames,[])});f.bodyText=h;f.titleText=i;f.cancelText=j;f.leaveText=k;f.seeConvoText=l;f.storage=m;f.getSeeConversationCacheKey=a;f.setWantsToSee=c;f.getWantsToSee=d;f.component=n;f.make=o;f.jsComponent=e}),null);
__d("MessengerIgnoredGroupThreadWarningDialogReact.bs",["cx","fbt","bs_curry","React","gkx","CurrentUser","ReasonReact.bs","CacheStorage","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","IgnoreMessagesTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("People you've ignored are in this group."),j=h._("People you've permanently hidden are in this chat."),k=h._("If you ignore this group, you can find it in Filtered messages."),l=h._("If you permanently hide this chat, you can find it in \"Permanently hidden\"."),m=h._("Ignore group?"),n=h._("Permanently hide chat?"),o=h._("Cancel"),p=h._("Ignore Group"),q=h._("Permanently Hide"),r=h._("See Group"),s=h._("See Chat"),t=new(b("CacheStorage"))("localstorage");function a(a){return"see_ignored_group:"+a}function c(a,b){t.set("see_ignored_group:"+a,b,!0);return 0}function d(a){return t.get("see_ignored_group:"+a,!1)}var u=b("ReasonReact.bs").statelessComponent("MessengerIgnoredGroupThreadWarningDialogReact");function v(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(void 0,0)}function w(a,c,d,e,f,g){__p&&__p();var h=function(c){c.stopPropagation();b("bs_curry")._1(a,0);return b("MessengerDialogs.bs").removeDialog(void 0,0)},t=function(a){a.stopPropagation();b("bs_curry")._1(c,e);return b("MessengerDialogs.bs").removeDialog(void 0,0)},w=function(a){a.stopPropagation();b("bs_curry")._1(d,e);return b("MessengerDialogs.bs").removeDialog(void 0,0)};return[u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],function(){var a=b("CurrentUser").isWorkUser()&&b("gkx")("762398"),c=new(b("IgnoreMessagesTypedLogger"))().setEvent("group_with_ignored_person_warning").setThreadID(f).setPlatform("messengerdotcom");c.log();return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,v,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._2(b("MessengerDialogReact.bs").Title[0],void 0,a?n:m)))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[b("React").createElement("div",void 0,a?j:i),b("React").createElement("div",{className:"_3-8x"},a?l:k)])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](1,o,void 0,void 0,w,1,void 0,void 0,void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](1,a?s:r,void 0,void 0,h,1,void 0,void 0,void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](1,a?q:p,void 0,"danger",t,0,void 0,void 0,void 0,[]))]))]))},u[9],u[10],u[11],u[12]]}e=b("ReasonReact.bs").wrapReasonForJs(u,function(a){return w(a.onSee,a.onIgnore,a.onCancel,a.prevThreadID,a.threadID,[])});f.bodyTextPeopleInGroup=i;f.workBodyTextPeopleInGroup=j;f.bodyTextEffects=k;f.workBodyTextEffects=l;f.titleText=m;f.workTitleText=n;f.cancelText=o;f.ignoreText=p;f.workIgnoreText=q;f.seeConvoText=r;f.workSeeConvoText=s;f.storage=t;f.getSeeConversationCacheKey=a;f.setWantsToSee=c;f.getWantsToSee=d;f.component=u;f.handleToggle=v;f.make=w;f.jsComponent=e}),null);
__d("MessengerLeaveGroupAction",["MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryThreadInfo","MercuryTriodeSourceUtil"],(function(a,b,c,d,e,f){a={leaveGroup:function(a,c){if(b("MercuryThreadInfo").isEmptyLocalThread(a))return;var d=b("MercuryMessageObject").getForFBID(c);d=d.constructLogMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),a.thread_id,b("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(c)]});a=b("MercuryMessageActions").getForFBID(c);a.send(d)}};e.exports=a}),null);
__d("MessengerServerErrorDialogReact.bs",["fbt","bs_curry","ReasonReact.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerServerErrorDialog"),i=g._("An unexpected problem was encountered. Please try again later."),j=g._("Temporary failure");function k(a,c){return[h[0],h[1],h[2],h[3],function(){return b("bs_curry")._1(a,0)},h[5],h[6],h[7],function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,j)),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[i])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](0,g._("OK"),void 0,void 0,void 0,0,void 0,void 0,void 0,[]))]))]))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return k(a.onMount,[])});f.component=h;f.message=i;f.title=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerConversationContainer.react",["Bootloader","ImmutableObject","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryLogMessageType","MercuryMessageStore","gkx","immutable","MercuryThreadActions","MessagingTagConstants","MessengerActions","MessengerBlockedGroupThreadWarningDialogReact.bs","MessengerConfig","MessengerConversation.react","MessengerDialogs.bs","MessengerHotLikePreviewEvents","MessengerIgnoredGroupThreadWarningDialogReact.bs","MessengerLeaveGroupAction","MessengerState.bs","MessengerParticipantUtils.bs","MessengerParticipants.bs","React","SubscriptionsHandler","MessengerServerErrorDialogReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadActions").get(),h=b("MessengerServerErrorDialogReact.bs").jsComponent;a=b("React").PropTypes;var i=b("MessengerBlockedGroupThreadWarningDialogReact.bs").jsComponent,j=b("MessengerIgnoredGroupThreadWarningDialogReact.bs").jsComponent,k=200,l=b("gkx")("833128");c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isLoaded:!1,isLoading:!0,messages:b("immutable").List()},d.$2=void 0,d.$3=!1,d.$4=void 0,d.$5=void 0,d.$6=void 0,d.$7=!1,d.$14=function(){d.refs.conversation&&d.refs.conversation.scrollToBottom&&typeof d.refs.conversation.scrollToBottom==="function"&&d.refs.conversation.scrollToBottom()},d.$16=function(){var a=d.props.thread;if(a==null)return;b("MessengerBlockedGroupThreadWarningDialogReact.bs").setWantsToSee(a.thread_id,!0)},d.$19=function(){var a=d.props.thread;if(a==null)return;b("MessengerIgnoredGroupThreadWarningDialogReact.bs").setWantsToSee(a.thread_id,!0)},d.$17=function(a){var c=d.props.thread;if(c==null)return;b("MessengerLeaveGroupAction").leaveGroup(c,d.props.viewer);d.$21(a)},d.$20=function(a){var c=d.props.thread;if(c==null)return;var e=c.thread_id;g.changeFolder(e,b("MessagingTagConstants").other);b("Bootloader").loadModules(["IgnoreMessagesTypedLogger","IgnoreMessagesLoggingEvent","IgnoreMessagesPlatforms"],function(a,c,d){new a().setEvent(c.IGNORE_CONFIRMED).setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(e)).setPlatform(d.MESSENGERDOTCOM).log()},"MessengerConversationContainer.react");d.$21(a)},d.$18=function(a){d.$21(a)},d.$13=function(){if(d.state.isLoading||d.state.isLoaded)return;d.setState({isLoading:!0});d.$1.fetchMoreMessages()||d.setState({isLoading:!1,isLoaded:!0})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentWillUnmount=function(){this.$2&&this.$2.release(),window.clearTimeout(this.$6)};d.componentDidMount=function(){this.$8(this.props.threadID),this.$9()?this.$10():this.$11()&&this.$12()};d.componentDidUpdate=function(a){var b=this.props.threadID!==a.threadID;b&&(this.$9()?this.$10(a.threadID):this.$11()&&this.$12(a.threadID))};d.UNSAFE_componentWillReceiveProps=function(a){this.props.threadID!==a.threadID&&(this.setState({isLoading:!0,messages:b("immutable").List()}),this.$8(a.threadID))};d.render=function(){var a=this,c=this.state.messages;c=c.some(function(a){return a.log_message_type===b("MercuryLogMessageType").SERVER_ERROR});b("MessengerConfig").ErrorDialog&&c&&!this.$7&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(h,{onMount:function(){return a.$7=!0}})});return b("React").createElement(b("MessengerConversation.react"),{className:this.props.className,contact:this.props.contact,deliveryTimestamp:this.props.deliveryTimestamp,fetchMessages:this.$13,isCanonical:b("MercuryIDs").isCanonical(this.props.threadID),isLoading:this.state.isLoading,isLoaded:this.state.isLoaded,hideContextBanner:this.props.hideContextBanner,messages:this.state.messages,onRead:this.props.onMarkRead,onVoiceClipCreate:this.props.onVoiceClipCreate,onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.props.readReceipts,ref:"conversation",thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer,bottomOffset:this.props.bottomOffset})};d.handleResize=function(){this.refs.conversation.handleResize()};d.isScrolledToBottom=function(){return!!(this.refs.conversation&&this.refs.conversation.isScrolledToBottom())};d.$9=function(){__p&&__p();var a=this,c=this.props.thread;if(c==null)return!1;var d=c.thread_id;if(!this.$15())return!1;var e=!1;b("MessengerState.bs").compute(this.props.viewer,function(d){d=d.blocked_ids;b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(a.props.viewer,d,c)&&(e=!0)});if(!e)return!1;d=b("MessengerBlockedGroupThreadWarningDialogReact.bs").getWantsToSee(d);return d?!1:!0};d.$11=function(){__p&&__p();var a=this.props.thread;if(a==null)return!1;var c=a.thread_id;if(!this.$15())return!1;if(a.folder!=="inbox")return!1;if(!b("MessengerParticipantUtils.bs").areParticipantsInGroupThread(this.props.fbid,this.props.ignoredIds,a))return!1;a=b("MessengerIgnoredGroupThreadWarningDialogReact.bs").getWantsToSee(c);return a?!1:!0};d.$15=function(){var a=this.props.thread;if(a==null)return!1;if(b("MercuryIDs").isCanonical(this.props.threadID))return!1;return!a.is_subscribed?!1:!0};d.$10=function(a){var c=this,d=this.props.thread,e=[];b("MessengerState.bs").compute(this.props.viewer,function(a){a=a.blocked_ids;a=b("MercuryIgnoredBlockedParticipants.bs").participantsInGroupThread(c.props.viewer,a,d);a.length>=1&&a.forEach(function(a){b("MessengerParticipants.bs").get(a,function(a){e.push(a.name)})})});b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(i,{onSee:c.$16,onLeave:c.$17,onCancel:c.$18,prevThreadID:a,blockedNames:e})})};d.$12=function(a){var c=this;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(j,{onSee:c.$19,onIgnore:c.$20,onCancel:c.$18,prevThreadID:a,threadID:b("MercuryIDs").getThreadFBIDFromThreadID(c.props.threadID)})})};d.$21=function(a){a==null&&b("MessengerActions").selectThread(null),b("MessengerActions").selectThread(a)};d.$22=function(){return l&&this.props.thread!=null&&this.props.thread.unread_count!=null&&this.props.thread.unread_count>0&&this.props.thread.unread_count<k?b("MessengerConfig").MessageLoadCount+this.props.thread.unread_count:b("MessengerConfig").MessageLoadCount};d.$8=function(a){__p&&__p();var c=this;if(!a)return;this.setState({isLoaded:!1});this.$1&&this.$1.destroy();this.$7=!1;this.$1=new(b("MercuryMessageStore"))(a,this.$22());window.clearTimeout(this.$6);this.$6=window.setTimeout(function(){c.props.thread&&c.props.thread.message_count<1&&c.setState({isLoaded:!0,isLoading:!1})},6e3);this.$2&&this.$2.release();this.$2=new(b("SubscriptionsHandler"))();this.$2.addSubscriptions(this.$1.subscribe(function(a){c.setState({messages:c.$23(b("immutable").List(a.messages)),isLoading:!1})}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(b){if(a!==b.thread_id)return;c.$3=!0;c.$4=b;c.setState(function(a){return{messages:c.$23(a.messages)}});window.clearInterval(c.$5);c.$5=window.setInterval(c.$14,50)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(a){window.clearInterval(c.$5)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(a){window.clearInterval(c.$5)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,function(){c.$3=!1,c.$4=null}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP_EMOJI,function(){c.$3=!1,c.$4=null}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,function(){window.clearInterval(c.$5),c.$3=!1,c.setState(function(a){return{messages:c.$23(a.messages)}})}))};d.$23=function(a){this.$3?a=a.set(a.size,this.$4):(a=a.filterNot(function(a){return a.is_like_preview}),this.$4=null);return a};return c}(b("React").PureComponent);c.propTypes={contact:a.instanceOf(b("ImmutableObject")),deliveryTimestamp:a.number.isRequired,readReceipts:a.any,fbid:a.string.isRequired,hideContextBanner:a.bool,ignoredIds:a.any,onMarkRead:a.func.isRequired,onVoiceClipCreate:a.func,onReplyToMessage:a.func,thread:a.object,threadID:a.string.isRequired,viewer:a.string.isRequired,bottomOffset:a.number};e.exports=c}),null);
__d("MessengerDetailViewHeaderContainer.react",["ImmutableObject","MercuryIDs","MercuryThreadIDMap","MercuryTypeaheadConstants","MessengerActions","MessengerComposerActions","MessengerComposeViewHeader.react","MessengerDetailViewHeaderReact.bs","MessengerState.bs","MessengerView","React","immutable","shallowEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerDetailViewHeaderReact.bs").jsComponent;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){__p&&__p();var c=a.getUniqueID(),e=a.getType(),f=a.getAuxiliaryData()||{};if(e===b("MercuryTypeaheadConstants").THREAD_TYPE){var g=b("MercuryThreadIDMap").getForFBID(d.props.viewer);g.getClientIDFromServerID(c,function(a){b("MessengerComposerActions").moveDraftToNextThread(a),b("MessengerActions").selectThread(a)});b("MessengerComposerActions").exitComposeState()}else if(c===d.props.viewer&&d.props.recipients.size===0||e===b("MercuryTypeaheadConstants").PAGE_TYPE||e===b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE&&!f.canViewerAddToGroupChat){g=b("MercuryIDs").getThreadIDFromUserID(c);b("MessengerComposerActions").moveDraftToNextThread(g);b("MessengerComposerActions").exitComposeState();b("MessengerActions").selectThread(b("MercuryIDs").getThreadIDFromUserID(c))}else b("MessengerComposerActions").addToken(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a){var c=a.contactData;a=babelHelpers.objectWithoutPropertiesLoose(a,["contactData"]);var d=this.props,e=d.contactData;d=babelHelpers.objectWithoutPropertiesLoose(d,["contactData"]);return!b("shallowEqual")(a,d)||!b("shallowEqual")(c,e)};d.render=function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE?b("React").createElement(b("MessengerComposeViewHeader.react"),{forceHideClearButton:!0,onAddRecipient:this.$1,onRemoveRecipient:this.$2,onResize:this.props.onResize,thread:this.props.thread,recipients:this.props.recipients,viewer:this.props.viewer,isWorkUser:this.props.isWorkUser,shouldShowCreateGroupButton:this.props.shouldShowCreateGroupButton,onCreateGroupButtonClicked:this.props.onCreateGroupButtonClicked}):b("React").createElement(g,{contactData:this.props.contactData,infoPanelCollapsed:this.props.infoPanelCollapsed,onInfoPanelToggle:this.props.onInfoPanelToggle,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer,shouldUseRelay:!1,montageData:b("MessengerState.bs").montage(this.props.messengerState)})};d.$2=function(a){b("MessengerComposerActions").removeToken(a)};return c}(b("React").Component);c.propTypes={contactData:a.object,infoPanelCollapsed:a.bool.isRequired,onInfoPanelToggle:a.func.isRequired,onResize:a.func.isRequired,participants:a.instanceOf(b("immutable").Map).isRequired,recipients:a.instanceOf(b("immutable").List).isRequired,thread:a.instanceOf(b("ImmutableObject")),view:a.string,viewer:a.string.isRequired,isWorkUser:a.bool.isRequired,messengerState:a.array.isRequired,shouldShowCreateGroupButton:a.bool,onCreateGroupButtonClicked:a.func};e.exports=c}),null);
__d("MessengerGalahadGating.bs",["WorkGalahadSettings","MessengerEnvironment"],(function(a,b,c,d,e,f){"use strict";function a(){if(b("WorkGalahadSettings").isGalahadEnabled)return b("MessengerEnvironment").facebookdotcom;else return!1}f.isGalahadUIEnabled=a}),null);
__d("MessengerPresenceStatusUtils",["fbt","AvailableListConstants","CurrentUser","LastActiveTimes","MercuryIDs","PresenceStatus","WorkChatAvailabilityStatusLoader","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getStatusFromCanonicalThread:function(a,c){__p&&__p();var d=null;if(c&&c.is_canonical){a=a.get(b("MercuryIDs").getParticipantIDFromFromThreadID(c.thread_id));if(a){a.is_messenger_user?c=b("CurrentUser").isWorkUser()?g._("Workplace Chat"):g._("Messenger"):c=b("CurrentUser").isWorkUser()?g._("Workplace"):g._("Facebook");var e=null,f=!1;if(b("WorkChatAvailabilityStatusLoader").isLoaded()&&b("CurrentUser").isWorkUser()&&b("gkx")("678573")){var h=b("WorkChatAvailabilityStatusLoader").getStoreEnforce();e={isDoNotDisturb:h.getIsDoNotDisturb(a.fbid),description:h.getDescriptionWithUserName(a.short_name,a.fbid)};f=e.isDoNotDisturb}h=b("PresenceStatus").get(a.fbid);var i,j;h!==b("AvailableListConstants").ACTIVE&&(i=b("LastActiveTimes").get(a.fbid),j=b("LastActiveTimes").getShortDisplay(a.fbid));h=h===b("AvailableListConstants").ACTIVE&&!f;d={contact:a,platform:c,isUserActive:h,availabilityStatusData:e,lastActiveTS:f?null:i,lastActive:f?null:j}}}return d}};e.exports=a}),null);
__d("ChatPinnedThreadsEntryPoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MENU_ITEM_IN_OVERFLOW_MENU:"menu_item_in_overflow_menu",MENU_ITEM_IN_INFO_PANEL:"menu_item_in_info_panel",MENU_ITEM_IN_THREAD_ROW:"menu_item_in_thread_row",INFO_PANEL_SECTION_ITEM:"info_panel_section_item",CHAT_TAB_MENU:"chat_tab_menu",INTEGRATION_TEST:"integration_test",INBOX_THREAD_ROW_SWIPE:"inbox_thread_row_swipe",INBOX_EDIT_ORDER_SCREEN:"inbox_edit_order_screen"})}),null);
__d("MessengerContactListRowActions",["AsyncRequest","FantaFRXUtil","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MessengerContactActions.bs","MessengerContactAdapters","URI","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerContactActions.bs").actions;a=function(a){__p&&__p();var c=a.action,d=a.contact,e=a.viewer,f=a.thread,h=a.participants;a=a.handleContactSelect;d=b("MessengerContactAdapters").fromMercuryParticipant(d);if(b("MercuryIDs").getUserIDFromParticipantID(d.uid)!==e)switch(c){case g.MESSAGE:a(d);break;case g.PROFILE:h=h.get(d.uid);h&&h.href?window.open(h.href):a(d);break;case g.REMOVE:if(!b("MercuryThreadInfo").isEmptyLocalThread(f)){h=new(b("URI"))("/chat/remove_participants/");h.addQueryData({uid:b("MercuryIDs").getUserIDFromParticipantID(d.uid),tid:f.thread_fbid});a=new(b("AsyncRequest"))(h);a.send()}break;case g.REPORT_GROUP_CHAT_USER:b("FantaFRXUtil").FRXClicked(f.thread_id,!0,d.uid);break}switch(c){case g.REMOVE_OWNER:b("MercuryThreadInfo").isEmptyLocalThread(f)||b("MercuryThreadActions").getForFBID(e).changeGroupAdmins(f.thread_fbid,[b("MercuryIDs").getUserIDFromParticipantID(d.uid)],!1);break;case g.ADD_OWNER:b("MercuryThreadInfo").isEmptyLocalThread(f)||b("MercuryThreadActions").getForFBID(e).changeGroupAdmins(f.thread_fbid,[b("MercuryIDs").getUserIDFromParticipantID(d.uid)],!0);break}};e.exports={handleContactActions:a}}),null);
__d("CustomColorHighlightingReact.bs",["ReasonReact.bs","bs_js_null_undefined","CustomColorHighlighting.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("CustomColorHighlighting.react"),{customColor:b("bs_js_null_undefined").fromOption(a)},c)}f.make=a}),null);
__d("MessengerInfoPanelSectionReact.bs",["cx","fbt","Keys","bs_curry","React","Utils.bs","ReasonReact.bs","bs_js_primitive","CustomColorHighlightingReact.bs","MessengerDotComAndInboxM4Check.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("toggle"),j=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelSectionReact");function k(a,c){if(a!==void 0&&a&&c!==void 0)if(c)return b("React").createElement("div",{"aria-label":i,"aria-expanded":!1,className:"_1lj1 _3vo-",role:"button",tabIndex:0});else return b("React").createElement("div",{"aria-label":i,"aria-expanded":!0,className:"_1lj1",role:"button",tabIndex:0});else return null}function l(a,c,d,e){__p&&__p();var f=function(){if(d!==void 0)return b("bs_curry")._1(d,0);else return 0},g=function(a){a.preventDefault();return f(0)},h=function(a){if(a.keyCode===b("Keys").RETURN||a.keyCode===b("Keys").SPACE){a.preventDefault();return f(0)}else return 0},i=a!==void 0&&a&&!(c!==void 0&&c)?!0:!1;if(e!==void 0){var j=b("MessengerDotComAndInboxM4Check.bs").yes?"_1lj0 _6ybm":"_1lj0";return b("React").cloneElement(b("React").createElement("h4",{"aria-expanded":i,className:j,onKeyDown:h,onClick:g},e,k(a,c)),{"aria-pressed":"true"})}else return null}function m(a,c,d,e,f,g){return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){return b("React").createElement("div",{className:"_1lix"+(b("Utils.bs").isSomeTrue(c)?" _1liy":"")+(b("Utils.bs").isSomeTrue(c)&&b("Utils.bs").isSomeTrue(d)?" _1liz":"")},b("React").createElement("div",{className:"_1li-"}),l(c,d,e,f),b("React").createElement("div",{className:"_1li_"},b("ReasonReact.bs").element(void 0,void 0,b("CustomColorHighlightingReact.bs").make(a,g))))},j[9],j[10],j[11],j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return m(b("bs_js_primitive").nullable_to_opt(a.customColor),b("bs_js_primitive").nullable_to_opt(a.isCollapsible),b("bs_js_primitive").nullable_to_opt(a.isCollapsed),b("bs_js_primitive").nullable_to_opt(a.onToggle),b("bs_js_primitive").nullable_to_opt(a.title),a.children)});f.toggleWord=i;f.component=j;f.renderChevron=k;f.renderHeader=l;f.make=m;f.jsComponent=a}),null);
__d("MessengerInfoPanelAssociatedObjectSection.react",["cx","fbt","CurrentUser","Image.react","Link.react","MessageThreadAssociatedObjectKey","MessengerInfoPanelSectionReact.bs","React","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerInfoPanelSectionReact.bs").jsComponent;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a,c=this.props,d=c.isCollapsed,e=c.onToggle,f=c.associatedObject;c=c.customColor;a=(a=f[b("MessageThreadAssociatedObjectKey").VERSE_GROUP_LINK])!=null?a:f[b("MessageThreadAssociatedObjectKey").ACTION_LINK]+"?ref=MessengerInfoPanelAssociatedObjectSection";return b("React").createElement(i,{customColor:c,isCollapsible:!0,isCollapsed:d,onToggle:e,title:h._("Part of")},b("React").createElement(b("Link.react"),{href:a,target:"_blank",style:{textDecoration:"none"},className:"_35-k"},this.$1(),this.$2()))};d.$1=function(){var a=this.props.associatedObject;a=a[b("MessageThreadAssociatedObjectKey").PROFILE_PICTURE];return b("React").createElement("div",null,b("React").createElement(b("Image.react"),{className:"_35-n",src:a}))};d.$2=function(){var a=this.props.associatedObject,c=a[b("MessageThreadAssociatedObjectKey").NAME],d=b("TimeSpentRoomTypeEnum")[a[b("MessageThreadAssociatedObjectKey").ROOM_TYPE]];a=a[b("MessageThreadAssociatedObjectKey").VERSE_GROUP_LINK];var e=b("CurrentUser").isWorkUser()?"Workplace":"Facebook";return b("React").createElement("div",{className:"_35-o"},b("React").createElement("div",{className:"_35-p"},c),b("React").createElement("div",{className:"_35-q"},!a&&h._({"GROUP":"Go to {productName} group","EVENT":"Go to {productName} event"},[h._param("productName",e),h._enum(d,b("TimeSpentRoomTypeEnum$FbtEnum"))]),a&&h._("Go to Facebook chat group")))};return c}(b("React").PureComponent);c.propTypes={isCollapsed:a.bool.isRequired,onToggle:a.func.isRequired,customColor:a.string,associatedObject:a.instanceOf(Object).isRequired};e.exports=c}),null);
__d("MessengerCheckmarkIconSVGM4React.bs",["React","bs_belt_Option"],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.size;a=String(b("bs_belt_Option").getWithDefault(a,36))+"px";return b("React").createElement("svg",{height:a,width:a,viewBox:"0 0 36 36"},b("React").createElement("defs",void 0,b("React").createElement("polygon",{id:"path-1",points:"0 36 36 36 36 0 0 0"})),b("React").createElement("g",void 0,b("React").createElement("g",void 0,b("React").createElement("mask",{id:"mask-2",fill:"white"},b("React").createElement("polygon",{id:"path-1",points:"0 36 36 36 36 0 0 0"})),b("React").createElement("path",{id:"Fill-1",d:"M13.4397101,26.0625 L6.43933525,19.062 C5.85355492,18.476 5.85355492,17.526 6.43933525,16.9405 C7.02511558,16.354 7.97475947,16.354 8.5605398,16.9405 L14.4998126,22.8805 L27.4394602,9.9395 C28.0252405,9.3535 28.9748844,9.3535 29.5606648,9.9395 C30.1464451,10.525 30.1464451,11.4755 29.5606648,12.061 L15.5604148,26.0625 C14.9751343,26.6485 14.0249906,26.6485 13.4397101,26.0625 Z",fill:"#000000",mask:"url(#mask-2)"}))))}c=a;f.make=c}),null);
__d("MessengerCheckmarkIconSVGM4React.re",["MessengerCheckmarkIconSVGM4React.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerCheckmarkIconSVGM4React.bs").make;f.make=a}),null);
__d("MessengerCrossIconSVGM4React.bs",["React","bs_belt_Option"],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.size;a=String(b("bs_belt_Option").getWithDefault(a,36))+"px";return b("React").createElement("svg",{height:a,width:a,viewBox:"0 0 36 36"},b("React").createElement("g",{id:"cross",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Cancel"},b("React").createElement("polygon",{id:"Bounding-Box",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-1",d:"M24.4386402,26.5608358 L18.4998126,20.6218774 L12.5614847,26.5608358 C11.9754458,27.1463881 11.0251934,27.1463881 10.4391545,26.5608358 C9.85361517,25.974784 9.85361517,25.0250103 10.4391545,24.4389584 L16.377982,18.5 L10.4391545,12.5610416 C9.85361517,11.9754893 9.85361517,11.025216 10.4391545,10.4391642 C11.0251934,9.85361194 11.9754458,9.85361194 12.5614847,10.4391642 L18.4998126,16.3786222 L24.4386402,10.4391642 C25.0246791,9.85361194 25.9744319,9.85361194 26.5604708,10.4391642 C27.1465097,11.025216 27.1465097,11.9754893 26.5604708,12.5610416 L20.6211437,18.5 L26.5604708,24.4389584 C27.1465097,25.0250103 27.1465097,25.974784 26.5604708,26.5608358 C25.9744319,27.1463881 25.0246791,27.1463881 24.4386402,26.5608358 Z",fill:"#000000"}))))}c=a;f.make=c}),null);
__d("MessengerCrossIconSVGM4React.re",["MessengerCrossIconSVGM4React.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerCrossIconSVGM4React.bs").make;f.make=a}),null);
__d("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1574519202665847"};b.getQueryID=function(){return"337579896759283"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("MessengerApprovalRequester.react",["cx","fbt","CurrentUser","Link.react","MercuryIDs","MessengerParticipants.bs","MercuryThreadActions","MessengerCheckmarkIconSVGM4React.re","MessengerContactImageReact.bs","MessengerCrossIconSVGM4React.re","MessengerDotComAndInboxM4Check.bs","MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation","MessengerGroupRequestSource","MessengerTextWithEmoticons.react","React","ShimButton.react","WebGraphQL"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryThreadActions").get(),j=b("MessengerCheckmarkIconSVGM4React.re").make,k=b("MessengerContactImageReact.bs").jsComponent,l=b("MessengerCrossIconSVGM4React.re").make,m=32,n=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w _7tla":"_3szo";function o(a,c,d){__p&&__p();if(!c||d===null)return null;var e=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(c));e=e&&e.name;if(!e)return null;if(d===b("MessengerGroupRequestSource").ADD)return b("CurrentUser").isWorkUser()&&a===c?h._("Requested to join"):h._("Added by {inviter}.",[h._param("inviter",e)]);else if(d===b("MessengerGroupRequestSource").JOIN_THROUGH_LINK)return h._("Invited by {inviter}.",[h._param("inviter",e)]);return null}function p(a){var c=a.name,d=a.imageSRC,e=a.inviterFBID,f=a.isMessengerUser,g=a.requestSource;a=a.userFBID;c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c});a=o(a,e,g);e=a?b("React").createElement("span",{className:"_4e87"},b("React").createElement("div",null,c),b("React").createElement("div",{className:"_4egt"},a)):b("React").createElement("span",{className:"_3tkx"},c);return b("React").createElement("div",{className:"_3szq _4fq"},b("React").createElement(k,{className:"_5l39 _5rmm",isMessengerUser:f,size:m,src:d}),e)}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){if(b("MessengerDotComAndInboxM4Check.bs").yes)return this.$1();else return this.$2()};d.$1=function(){var a=this.props,c=a.isAdminRequired,d=a.isMessengerUser,e=a.imageSRC,f=a.name,g=a.inviterFBID,i=a.requestSource;a=a.userFBID;c=c?h._("Approve"):h._("Accept");return b("React").createElement("div",{className:n},b("React").createElement(p,{userFBID:a,name:f,imageSRC:e,inviterFBID:g,isMessengerUser:d,requestSource:i}),b("React").createElement("div",{className:"_4fs _7tlb"},b("React").createElement(b("ShimButton.react"),{"aria-label":h._("Ignore"),className:"_7tlc _3-91",href:"#",onClick:this.$3.bind(this)},b("React").createElement(l,{size:20})),b("React").createElement(b("ShimButton.react"),{"aria-label":c,className:"_7tlc",href:"#",onClick:this.$4.bind(this)},b("React").createElement(j,{size:20}))))};d.$2=function(){var a=this.props,c=a.isAdminRequired,d=a.isMessengerUser,e=a.imageSRC,f=a.name,g=a.inviterFBID,i=a.requestSource;a=a.userFBID;c=c?h._("Approve"):h._("Accept");return b("React").createElement("div",{className:n},b("React").createElement(p,{userFBID:a,name:f,imageSRC:e,inviterFBID:g,isMessengerUser:d,requestSource:i}),b("React").createElement("div",{className:"_3ihq _4fs"},b("React").createElement(b("Link.react"),{className:"_5a73",href:"#",onClick:this.$4.bind(this)},c),b("React").createElement("span",{className:"_1m8c"}),b("React").createElement(b("Link.react"),{className:"_5a73",href:"#",onClick:this.$3.bind(this)},h._("Ignore"))))};d.$4=function(a){a=this.props;var c=a.isAdminRequired,d=a.threadFBID;a=a.userFBID;c?b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:d,user_ids:[a],response:"ACCEPT",surface:"ADMIN_MODEL_APPROVAL_CENTER"}})):i.acceptToJoinableGroup(d,a)};d.$3=function(a){a=this.props;var c=a.isAdminRequired,d=a.threadFBID;a=a.userFBID;c?b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:d,user_ids:[a],response:"DENY",surface:"ADMIN_MODEL_APPROVAL_CENTER"}})):i.rejectToJoinableGroup(d,a)};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerInfoPanelGroupSection.react",["cx","fbt","FBToggleSwitch.react","MessengerApprovalQueueUtils","immutable","MercuryThreadActions","MessengerAdminGroupUtils","MessengerApprovalModeTypes","MessengerApprovalRequester.react","MessengerDotComAndInboxM4Check.bs","MessengerInfoPanelSectionReact.bs","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryThreadActions").get(),j=b("MessengerInfoPanelSectionReact.bs").jsComponent;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.state={approvalQueue:b("immutable").Map()};return c}var d=c.prototype;d.componentDidMount=function(){this.$1(this.props.thread)};d.render=function(){return b("React").createElement("div",null,b("React").createElement(j,{customColor:this.props.thread.solid_color,isCollapsible:!0,isCollapsed:this.props.isOptionsCollapsed,onToggle:this.props.onOptionsToggle,title:h._("Group options")},b("React").createElement("div",{className:"_3iho"},this.$2())),this.$3())};d.UNSAFE_componentWillReceiveProps=function(a){this.$1(a.thread)};d.$1=function(a){var c=this;if(!a)return;b("MessengerApprovalQueueUtils").getApprovalQueueParticipants(a,function(a){return c.setState({approvalQueue:a})})};d.$2=function(){var a=this.props,c=a.viewer,d=a.thread;a=b("MessengerAdminGroupUtils").isApprovalOpenThread(d);if(!b("MessengerAdminGroupUtils").showJoinableApprovalToggle(d,c))return null;c=b("MessengerAdminGroupUtils").isAdminRequired(d);var e=c?h._("Require admin approval"):h._("New member approval");c=c?b("React").createElement("div",{className:"_3ihp"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _87b_":"")},h._("Require an admin to approve all requests to join the group chat")):b("React").createElement("div",{className:"_3ihp"},h._("Approve who can join the group"));return b("React").createElement("div",{className:"_3szo _2ya9"},b("React").createElement("div",{className:"_3szq"},e,c),b("React").createElement(b("FBToggleSwitch.react"),{animate:!0,"aria-label":e,checked:!a,onToggle:function(a){return i.setApprovalMode(a?b("MessengerApprovalModeTypes").APPROVALS:b("MessengerApprovalModeTypes").OPEN,d)}}))};d.$3=function(){var a=this.props,c=a.viewer,d=a.thread,e=d.thread_fbid;if(!e||!b("MessengerAdminGroupUtils").showApprovalQueue(d,c))return null;a=b("MessengerAdminGroupUtils").getPendingRequestNumber(d);c=b("MessengerAdminGroupUtils").isAdminRequired(d)?h._("Member requests ({memberRequestCount})",[h._param("memberRequestCount",a)]):h._("Pending requests ({pendingRequestCount})",[h._param("pendingRequestCount",a)]);return b("React").createElement(j,{customColor:this.props.thread.solid_color,isCollapsible:!0,isCollapsed:this.props.isApprovalsCollapsed,onToggle:this.props.onApprovalToggle,title:c},b("React").createElement("div",{className:"_3iho _3oh-"},this.state.approvalQueue.map(function(a){var c=a.fbid;return c&&b("React").createElement(b("MessengerApprovalRequester.react"),{key:a.id,imageSRC:a.image_src,inviterFBID:a.inviter_id,requestSource:a.request_source,isAdminRequired:b("MessengerAdminGroupUtils").isAdminRequired(d),isMessengerUser:a.is_messenger_user,name:a.name,threadFBID:e,userFBID:c})}).toArray()))};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerEditGroupThreadDescriptionDialogReact.bs",["cx","fbt","bs_curry","React","bs_string","ReasonReact.bs","bs_js_primitive","MessengerDialogs.bs","MessengerDialogReact.bs","MercuryGenericConstants","MessengerDialogBodyReact.bs","MessengerTextWithEmojiInputReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerEditGroupThreadDescriptionDialogReact");function j(a,c){c[1][0][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function a(a,c,d,e){__p&&__p();var f=function(a){if(a)return 0;else{d!==void 0&&b("bs_curry")._1(d,0);return b("MessengerDialogs.bs").removeDialog(void 0,0)}},g=function(d,e){d=e[1][0][0];if(d!==void 0){e=b("bs_string").trim(b("bs_js_primitive").valFromOption(d).getValue());d=e===a;d||c!==void 0&&b("bs_curry")._1(c,e)}return f(!1)};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(c){var d=b("ReasonReact.bs").element(void 0,b("bs_curry")._1(c[0],j),b("MessengerTextWithEmojiInputReact.bs").make("_1n7c",void 0,b("MercuryGenericConstants").MAX_GROUP_THREAD_DESCRIPTION_LENGTH,void 0,h._("What's this group about?"),a,!0,[]));return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0]("_1cyb",f,void 0,void 0,void 0,void 0,500,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,h._("Edit group description"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make("_3yb4",[b("React").createElement("div",{className:"_1cyc"},h._("Anyone with the group link will be able to see this description.")),d])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,h._("Save"),void 0,void 0,b("bs_curry")._1(c[0],g),0,void 0,void 0,void 0,[]))]))]))},function(){return[[void 0]]},i[10],function(a,b){return 0},i[12]]}f.component=i;f.setDescriptionInputRef=j;f.make=a}),null);
__d("MessengerInfoPanelGroupThreadDescriptionSectionReact.bs",["cx","fbt","Keys","bs_curry","React","ReasonReact.bs","bs_js_primitive","MessengerDialogs.bs","LitestandEllipsis","MessengerTextWithEmoticonsReact.bs","MessengerEditGroupThreadDescriptionDialogReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerInfoPanelGroupThreadDescriptionSectionReact");function j(a,c){a=c[1][0][0];if(a!==void 0)return b("bs_js_primitive").valFromOption(a).focus();else return 0}function k(a,c){c[1][0][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function l(a,c){c[1][1][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function a(a,c,d,e){__p&&__p();e=d.description;var f=e==null?"":e,g=function(a){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerEditGroupThreadDescriptionDialogReact.bs").make(f,c,b("bs_curry")._1(a,j),[]))})},m=function(a,b){a.preventDefault();return g(b[0])},n=function(a,c){if(a.keyCode===b("Keys").RETURN){a.preventDefault();return g(c[0])}else return 0};e=d.description;e=e==null?[h._("What's this group about?"),!0]:[b("ReasonReact.bs").element(void 0,void 0,b("MessengerTextWithEmoticonsReact.bs").make(void 0,void 0,e,void 0,[])),!1];var o=e[1],p=e[0];return[i[0],i[1],i[2],i[3],i[4],function(a){a=a[1][1][1][0];if(a!==void 0){b("LitestandEllipsis").add(b("bs_js_primitive").valFromOption(a),65,null);return 0}else return 0},i[6],function(a){var b=a[1],c=b[2];b=b[1];a=a[0];var d=a[2];a=a[1];if(a[0]!==b[0]||a[1]!==b[1]||d[0]!==c[0])return!0;else return d[1]!==c[1]},function(c){return b("React").createElement("div",{className:"_69d_"},b("React").createElement("div",{ref:b("bs_curry")._1(c[0],k),className:"_69e0"+(a?"":" disabled"),role:"button",tabIndex:0,onKeyDown:b("bs_curry")._1(c[0],n),onClick:b("bs_curry")._1(c[0],m)},b("React").createElement("div",{ref:b("bs_curry")._1(c[0],l),className:"_69e1 _69e2"+(o?" _69e3":"")},p)))},function(){return[[void 0],[void 0]]},[a,d],function(a,b){return 0},i[12]]}f.component=i;f.handleDialogClose=j;f.setDescriptionRef=k;f.setDescriptionTextRef=l;f.make=a}),null);
__d("MessengerInfoPanelGroupThreadDescriptionContainerReact.bs",["cx","fbt","bs_curry","React","ReasonReact.bs","bs_js_primitive","MercuryThreadInfo","MessageRequestUtils","MercuryThreadActions","MessengerAdminGroupUtils","MessengerInfoPanelSectionReact.bs","MessagingThreadCustomizationSource","MessengerInfoPanelGroupThreadDescriptionSectionReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelGroupThreadDescriptionContainerReact");function j(a,c,d,e,f){__p&&__p();return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(f){__p&&__p();if(!d.is_subscribed||b("MessageRequestUtils").isMessageRequest(d))return null;else{var g=b("MessengerAdminGroupUtils").canUpdateThreadDescription(d,e),i=function(c,a){if(b("MercuryThreadInfo").isEmptyLocalThread(d))return 0;else{b("MercuryThreadActions").getForFBID(e).changeGroupThreadDescription(d.thread_id,c,b("MessagingThreadCustomizationSource").SETTINGS);return 0}};g=b("React").createElement("div",{className:"_4izw"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelGroupThreadDescriptionSectionReact.bs").make(g,b("bs_curry")._1(f[0],i),d,[])));return b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").nullable_to_opt(d.solid_color),!0,a,c,h._("Group description"),[g]))}},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.isCollapsed,a.onToggle,a.thread,a.viewer,[])});f.component=i;f.make=j;f.jsComponent=a}),null);
__d("WorkMultiCompanyChatBetaNotice.bs",["cx","fbt","React","gkx","CurrentUser","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("WorkMultiCompanyChatBetaNotice");function a(a,c){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){var c=b("gkx")("678587"),d=b("CurrentUser").isWorkUser();if(c&&d&&a)return b("React").createElement("div",{className:"_3eus"},h._("You have early access to multi-company chat"));else return null},i[9],i[10],i[11],i[12]]}f.component=i;f.make=a}),null);
__d("MessengerInfoPanelContactNameSectionM4React.bs",["cx","React","ReasonReact.bs","bs_js_primitive","MessengerProfileLink.bs","WorkForeignEntityInfo.bs","MessengerLocalTimeReact.bs","MessengerPresenceStatusReact.bs","MessengerProfileLinkLocation","WorkMultiCompanyChatBetaNotice.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="_3eur _6ybk",i="_3eus _6_mz",j=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelContactNameSectionM4React");function a(a,c,d,e,f,g){return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){var g=a.title;return b("React").createElement(b("React").Fragment,void 0,f,b("React").createElement("div",{className:"_2jnt _6_m-"},b("React").createElement("div",{className:h},b("React").createElement("span",{className:"_3oh-"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerProfileLink.bs").make(b("bs_js_primitive").nullable_to_opt(a.href),"_blank",b("MessengerProfileLinkLocation").INFOPANEL,a.name,a.fbid,a.is_verified,[])))),g==null?null:b("React").createElement("span",{className:i},g),b("React").createElement("div",{className:i},b("ReasonReact.bs").element(void 0,void 0,b("MessengerPresenceStatusReact.bs").make(void 0,c,d,e,[]))),b("ReasonReact.bs").element(void 0,void 0,b("WorkMultiCompanyChatBetaNotice.bs").make(!b("WorkForeignEntityInfo.bs").isCoworker(a),[])),b("React").createElement("div",void 0,b("ReasonReact.bs").element(void 0,void 0,b("MessengerLocalTimeReact.bs").make("_5uh",b("bs_js_primitive").nullable_to_opt(a.timezone),[])))))},j[9],j[10],j[11],j[12]]}f.nameClasses=h;f.subtextClasses=i;f.component=j;f.make=a}),null);
__d("MessengerGroupThreadTitleWithEmojiInputReact.bs",["cx","fbt","bs_curry","React","EditorState","ReasonReact.bs","getEntityMatcher","DraftEditor.react","MessengerButtonReact.bs","CompositeDraftDecorator","MercuryGenericConstants","MessengerEmojiSpan.react","createContentStateForTextWithMessengerEmoji"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryGenericConstants").MAX_THREAD_NAME_LENGTH,j=h._("Name this conversation");function k(a){return b("EditorState").createWithContent(b("createContentStateForTextWithMessengerEmoji")(a),new(b("CompositeDraftDecorator"))([{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOJI"}),component:b("MessengerEmojiSpan.react")}]))}function a(a){__p&&__p();var c=a.onSubmit,d=a.initialValue;a=a.enabled;var e=b("React").useReducer(function(a,b){if(b){b=b[0];if(b===a[0])return a;else return[b]}else return[k(d)]},[k(d)]),f=e[1],g=e[0];e=function(a,d){b("bs_curry")._1(c,d.getCurrentContent().getPlainText());return"handled"};var l=function(){return b("bs_curry")._1(c,g[0].getCurrentContent().getPlainText())},m=g[0].getCurrentContent().getPlainText(),n=m.length,o=n>i;m=d!==m;var p=a&&m,q=a&&m&&!o;return b("React").createElement(b("React").Fragment,void 0,b("React").createElement("div",{className:"_3oh- _71bm"+(g[0].getSelection().getHasFocus()?" _71bn":"")+(a?" _71bo":"")+(a?"":" _71bp")+(m&&o?" _71bq":"")},b("React").createElement(b("DraftEditor.react"),{editorState:g[0],handleReturn:e,onChange:function(a){return b("bs_curry")._1(f,[a])},placeholder:j,spellCheck:!1,stripPastedStyles:!0,textAlignment:"center",readOnly:!a})),b("React").createElement("div",{className:"_71bs"+(a&&m?" _71bt":"")},b("React").createElement("div",{className:"_71b-"+(p?" _71b_":"")},b("ReasonReact.bs").element(void 0,void 0,b("MessengerButtonReact.bs").make(void 0,!p,"button",void 0,void 0,function(){return b("bs_curry")._1(f,0)},void 0,void 0,void 0,void 0,h._("Cancel"),0,1,void 0,void 0,void 0,[]))),b("React").createElement("div",{className:"_71bz"}),b("React").createElement("div",{className:"_71cq"},b("React").createElement("div",{className:"_71bv"+(a&&m&&o?" _71bw":"")},""+(String(n)+""),"/",""+(String(i)+"")),b("React").createElement("div",{className:"_71cr"+(q?" _71cs":"")},b("ReasonReact.bs").element(void 0,void 0,b("MessengerButtonReact.bs").make(void 0,!q,"button",void 0,void 0,l,!q,void 0,void 0,void 0,h._("Save"),0,void 0,void 0,void 0,void 0,[]))))))}c=a;f.maxLength=i;f.placeholder=j;f.createEditorState=k;f.make=c}),null);
__d("MessengerThreadPhotoUploader.react",["cx","fbt","requireCond","FileInput","FileInputUploader","Link.react","MercuryConfig","MessengerDotComAndInboxM4Check.bs","cr:943115","React","ReactDOM","SubscriptionsHandler"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerThreadPhotoUploader",_fileInput:null,_subscriptions:null,_uploader:null,_uploadIsInProgress:!1,propTypes:{onComplete:a.func.isRequired,onFail:a.func,onStart:a.func,uri:a.string},getDefaultProps:function(){return{uri:b("MercuryConfig").upload_url}},componentDidMount:function(){var a=b("ReactDOM").findDOMNode(this.refs.input),c=new(b("FileInput"))(b("ReactDOM").findDOMNode(this.refs.form),b("ReactDOM").findDOMNode(this.refs.uploadButton),a);a=new(b("FileInputUploader"))(a).setURI(this.props.uri).setAllowCrossOrigin(!0).setAllowCrossPageTransition(!0).setData({images_only:!0});var d=new(b("SubscriptionsHandler"))();d.addSubscriptions(a.subscribe("success",this._handleAllUploadsCompleted),a.subscribe("failure",this._handleLastUploadFailed));this._subscriptions=d;this._uploader=a;this._fileInput=c},componentWillUnmount:function(){this._uploadIsInProgress||this._doUnmountComponents()},render:function(){var a=h._("Click to change the image");return b("React").createElement("form",{action:this.props.uri,method:"post",ref:"form"},b("React").createElement("input",{type:"hidden",name:"attach_id",ref:"attachID"}),b("React").createElement("input",{type:"hidden",name:"images_only",value:"true"}),b("React").createElement("div",{className:"_m _4q60"+(b("MessengerDotComAndInboxM4Check.bs").yes?"":" _2lyy")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _80cm":"")},b("MessengerDotComAndInboxM4Check.bs").yes?b("cr:943115")&&b("cr:943115").make({fill:"#000000",size:24}):null,b("React").createElement(b("Link.react"),{className:"_4q61 _2lyz",ref:"uploadButton"},b("React").createElement("span",{"aria-hidden":"true"},h._("Edit"))),b("React").createElement("input",{"aria-label":h._("Change Group Photo"),type:"file",className:"_n",name:"attachment[]",accept:".jpg,.png,.jpeg,.bmp,.tif,.tiff",ref:"input",onChange:this._handleFileInputChange,title:a})))},_handleAllUploadsCompleted:function(a,b){this._uploadIsInProgress=!1,this.props.onComplete&&this.props.onComplete(b.response.payload),this.isMounted()||this._doUnmountComponents()},_handleLastUploadFailed:function(a,b){this._uploadIsInProgress=!1,this.props.onFail&&this.props.onFail(b),this.isMounted()||this._doUnmountComponents()},_handleFileInputChange:function(a){a.target.value&&this._uploader&&(this._uploader.send(),this._uploadIsInProgress=!0,this.props.onStart&&this.props.onStart())},_doUnmountComponents:function(){this._subscriptions&&this._subscriptions.release(),this._fileInput&&this._fileInput.destroy(),delete this._subscriptions,delete this._uploader}});e.exports=c}),null);
__d("MessengerThreadPhotoUploaderReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerThreadPhotoUploader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadPhotoUploader.react"),{onComplete:a,onFail:b("bs_js_null_undefined").fromOption(c),onStart:b("bs_js_null_undefined").fromOption(d),uri:b("bs_js_null_undefined").fromOption(e)},f)}f.make=a}),null);
__d("MessengerInfoPanelThreadNameSectionM4React.bs",["cx","bs_block","bs_curry","React","bs_caml_obj","ReasonReact.bs","bs_js_primitive","MessengerSpinnerReact.bs","MessengerThreadPhotoUploaderReact.bs","MessengerGroupThreadTitleWithEmojiInputReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelThreadNameSectionM4React");function a(a,c,d,e,f,g){__p&&__p();var i=function(a,c){var e=c[1][1];e!==void 0&&b("bs_curry")._1(d,[b("bs_js_primitive").valFromOption(e),a]);return b("bs_curry")._1(c[3],0)};return[h[0],h[1],h[2],function(a){var c=a[1];if(c!==void 0&&b("bs_caml_obj").caml_notequal(b("bs_js_primitive").valFromOption(c),f.thread_id))return[!1,b("bs_js_primitive").some(f.thread_id)];else return a},h[4],h[5],h[6],h[7],function(d){var g=d[3],h=d[1],j=a&&!h[0],k=h[0];return b("React").createElement(b("React").Fragment,void 0,b("React").createElement("div",{className:"_7101"+(h[0]?" _7102":"")},e,j?b("React").createElement("div",{className:"_80co"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadPhotoUploaderReact.bs").make(b("bs_curry")._1(d[0],i),function(){return b("bs_curry")._1(g,1)},function(){return b("bs_curry")._1(g,[f.thread_id])},void 0,[]))):null,k?b("React").createElement("div",{className:"_7103"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,void 0,void 0,[]))):null),b("React").createElement(b("MessengerGroupThreadTitleWithEmojiInputReact.bs").make,{onSubmit:c,initialValue:f.name,enabled:a}))},function(){return[!1,void 0]},h[10],function(a){if(typeof a==="number")return function(){return b("bs_block").__(0,[[!1,void 0]])};else{var c=a[0];return function(){return b("bs_block").__(0,[[!0,b("bs_js_primitive").some(c)]])}}},h[12]]}f.component=h;f.make=a}),null);
__d("MessengerInfoPanelNameSectionM4React.bs",["cx","bs_curry","React","ReasonReact.bs","bs_js_primitive","MessengerAdminGroupUtils","MessengerThreadImageM4React.bs","MessengerDotComAndInboxM4Check.bs","MessengerInfoPanelThreadNameSectionM4React.bs","MessengerInfoPanelContactNameSectionM4React.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.contact,d=a.isUserActive,e=a.lastActive,f=a.onThreadNameChange,g=a.onThreadPhotoChange,h=a.platform,i=a.thread;a=a.viewer;e=e==null?void 0:b("bs_js_primitive").some(e);if(c!==void 0)c=b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelContactNameSectionM4React.bs").make(b("bs_js_primitive").valFromOption(c),d,e,h,b("React").createElement(b("MessengerThreadImageM4React.bs").make,{expanded:!0,size:100,thread:i,viewer:a}),[]));else{d=b("MessengerAdminGroupUtils").canUpdateThreadCustomization(i,a);e=function(a){return b("bs_curry")._2(g,a[0],a[1])};c=b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelThreadNameSectionM4React.bs").make(d,function(a){if(a!==i.name)return b("bs_curry")._1(f,a);else return 0},e,b("React").createElement(b("MessengerThreadImageM4React.bs").make,{expanded:!0,size:100,thread:i,viewer:a}),i,[]))}return b("React").createElement("div",{className:"_1jt6"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _710_":"")},c)}c=a;f.make=c}),null);
__d("MessengerInfoPanelNameSectionM4React.re",["MessengerInfoPanelNameSectionM4React.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerInfoPanelNameSectionM4React.bs").make;f.make=a}),null);
__d("MessengerInfoPanelContactNameSectionReact.bs",["cx","React","ReasonReact.bs","bs_js_primitive","MessengerProfileLink.bs","WorkForeignEntityInfo.bs","MessengerLocalTimeReact.bs","MessengerPresenceStatusReact.bs","MessengerProfileLinkLocation","WorkMultiCompanyChatBetaNotice.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="_3eur",i="_3eus",j=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelContactNameSectionReact");function a(a,c,d,e,f,g){return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){var g=a.title;return b("React").createElement("div",{className:"_2jnq"},f,b("React").createElement("div",{className:"_2jnt"},b("React").createElement("div",{className:h},b("React").createElement("span",{className:"_3oh-"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerProfileLink.bs").make(b("bs_js_primitive").nullable_to_opt(a.href),"_blank",b("MessengerProfileLinkLocation").INFOPANEL,a.name,a.fbid,!1,[])))),g==null?null:b("React").createElement("span",{className:i},g),b("React").createElement("div",{className:i},b("ReasonReact.bs").element(void 0,void 0,b("MessengerPresenceStatusReact.bs").make(void 0,c,d,e,[]))),b("ReasonReact.bs").element(void 0,void 0,b("WorkMultiCompanyChatBetaNotice.bs").make(!b("WorkForeignEntityInfo.bs").isCoworker(a),[])),b("React").createElement("div",void 0,b("ReasonReact.bs").element(void 0,void 0,b("MessengerLocalTimeReact.bs").make("_5uh",b("bs_js_primitive").nullable_to_opt(a.timezone),[])))))},j[9],j[10],j[11],j[12]]}f.nameClasses=h;f.subtextClasses=i;f.component=j;f.make=a}),null);
__d("MessengerInfoPanelThreadNameSectionReact.bs",["cx","fbt","Keys","bs_curry","React","bs_string","bs_caml_obj","bs_belt_Option","ReasonReact.bs","bs_js_primitive","setImmediate","MessengerButtonReact.bs","MessengerSpinnerReact.bs","MercuryGenericConstants","MercuryThreadTitleReact.bs","WorkMultiCompanyChatBetaNotice.bs","MessengerTextWithEmojiInputReact.bs","MessengerThreadPhotoUploaderReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a,c){c=a.current;if(c!==void 0)return b("bs_js_primitive").valFromOption(c).focusInput();else return 0}var j=b("React").createElement("div",{className:"_2jnw"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,void 0,void 0,[])));function k(a,c){c=a.current;if(c!==void 0)return b("bs_js_primitive").valFromOption(c).focus();else return 0}function l(a,c,d,e){e.stopPropagation();e=a.current;e!==void 0&&b("bs_curry")._1(d,b("bs_string").trim(b("bs_js_primitive").valFromOption(e).getValue()));return b("setImmediate")(function(a){return k(c,a)})}function m(a,c,d){__p&&__p();var e=d.relatedTarget;if(e==null||!d.currentTarget.contains(e))e=1;else{d.stopPropagation();return 0}if(e===1)if(c>=2)return b("bs_curry")._1(a,0);else return b("bs_curry")._1(a,1)}function n(a,c,d,e,f,g){return b("React").createElement("div",{className:"_2jnx",onBlur:function(a){return m(c,d,a)}},b("React").createElement("div",{className:"_2jny"},b("ReasonReact.bs").element(void 0,function(c){a.current=c==null?void 0:b("bs_js_primitive").some(c);return 0},b("MessengerTextWithEmojiInputReact.bs").make("_2jnz",function(b){return l(a,e,f,b)},b("MercuryGenericConstants").MAX_THREAD_NAME_LENGTH,void 0,h._("Name this conversation"),g.name,void 0,[]))),b("React").createElement("div",{className:"_2jn-"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerButtonReact.bs").make(void 0,void 0,"button",void 0,void 0,function(b){return l(a,e,f,b)},void 0,void 0,void 0,void 0,h._("Done"),0,void 0,void 0,void 0,void 0,[]))))}function o(a,c,d,e){e.stopPropagation();if(a&&c===1)return b("bs_curry")._1(d,0);else return 0}function p(a,c,d,e){var f=e.charCode;if(a!==1||!(f===b("Keys").RETURN||f===b("Keys").SPACE))return 0;else{e.preventDefault();e.stopPropagation();if(c)return b("bs_curry")._1(d,0);else return 0}}function a(a,c){__p&&__p();var d=a.actionsEnabled,e=a.onThreadNameChange,f=a.onThreadPhotoChange,g=a.renderedImage,h=a.thread,k=a.toggleIsEditingName,l=a.isEditingName,m=a.viewer;a=a.isMultiCompany;var q=b("React").useReducer(function(a,c){if(typeof c==="number")return[!1,void 0];else return[!0,b("bs_js_primitive").some(c[0])]},[!1,void 0]),r=q[1],s=q[0],t=b("React").useMemo(function(){var a=s[1];if(a!==void 0&&b("bs_caml_obj").caml_notequal(b("bs_js_primitive").valFromOption(a),h.thread_id))return[!1,b("bs_js_primitive").some(h.thread_id)];else return s},[h,s]),u=b("React").useRef(void 0),v=b("React").useRef(void 0);b("React").useEffect(function(){if(l!==1){var a=setTimeout(function(a){return i(v,a)},1);return function(){clearTimeout(a);return 0}}},[l]);q=l!==1;var w={className:"_2jnq"};c=b("bs_belt_Option").map(c==null?void 0:b("bs_js_primitive").some(c),function(a){return a});c!==void 0&&(w.ref=b("bs_js_primitive").valFromOption(c));c=t[0];return b("React").createElement("div",w,b("React").createElement("div",{className:"_2jnr"+(t[0]?" _2jns":"")},g,c?j:null,d?b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadPhotoUploaderReact.bs").make(function(c){var a=t[1];a!==void 0&&b("bs_curry")._1(f,[b("bs_js_primitive").valFromOption(a),c]);return b("bs_curry")._1(r,0)},function(){return b("bs_curry")._1(r,1)},function(){return b("bs_curry")._1(r,[h.thread_id])},void 0,[])):null),b("React").createElement("div",{ref:function(a){u.current=a==null?void 0:b("bs_js_primitive").some(a);return 0},className:"_2jnt"+(q?"":" _1sw_")+(d?"":" disabled"),role:q?"":"button",tabIndex:0,onKeyPress:function(a){return p(l,d,k,a)},onClick:function(a){return o(d,l,k,a)}},b("React").createElement("div",{className:"_2jnu"},q?n(v,k,l,u,e,h):b("ReasonReact.bs").element(void 0,void 0,b("MercuryThreadTitleReact.bs").make("_2jnv",void 0,h,m,void 0,!1,!1,void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("WorkMultiCompanyChatBetaNotice.bs").make(a,[])))))}c=b("React").forwardRef(a);f.focusThreadNameInput=i;f.spinner=j;f.focusEditThreadNameButton=k;f.handleNameEdited=l;f.handleEditAbandoned=m;f.renderNameInput=n;f.handleThreadTitleClick=o;f.handleThreadTitleKeyPress=p;f.make=c}),null);
__d("MNCommerceReportConversationDialogBootloader.react",["JSResource","React","lazyLoadComponent"],(function(a,b,c,d,e,f){__p&&__p();var g=b("lazyLoadComponent")(b("JSResource")("MNCommerceReportConversationDialog.react").__setRef("MNCommerceReportConversationDialogBootloader.react"));a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(g,{pageID:this.props.pageID}))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MNCommerceReportConversationDialogReact.bs",["ReasonReact.bs","MNCommerceReportConversationDialogBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MNCommerceReportConversationDialogBootloader.react"),{pageID:a},c)}f.make=a}),null);
__d("MessengerDeleteDialogReact.bs",["fbt","bs_block","bs_curry","gkx","CurrentUser","ReasonReact.bs","MessagingTag","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").reducerComponent("MessengerDeleteDialogReact");function a(a,c,d,e,f,i,j){__p&&__p();return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(h){__p&&__p();var j=b("CurrentUser").isWorkUser()&&b("gkx")("762398");if(!c&&a===b("MessagingTag").INBOX){var k=b("CurrentUser").isWorkUser()&&b("gkx")("762398");k=b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,k?g._("Hide"):g._("Archive"),void 0,"danger",function(a){b("bs_curry")._1(e,a);return b("bs_curry")._1(h[3],0)},0,void 0,void 0,void 0,[]))}else k=a===b("MessagingTag").PENDING?b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,d?g._("Ignore"):g._("Block"),void 0,"danger",function(){b("bs_curry")._1(f,0);return b("bs_curry")._1(h[3],0)},0,void 0,void 0,void 0,[])):null;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,h[1][0],void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,g._("Delete Conversation"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[j?g._("Deleting message history cannot be undone. You will still receive any new messages in this chat."):g._("This will permanently delete the conversation history.")])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,g._("Delete"),void 0,"danger",function(){b("bs_curry")._1(i,0);return b("bs_curry")._1(h[3],0)},0,void 0,void 0,void 0,[])),k]))]))},function(){return[!0]},h[10],function(a,c){return b("bs_block").__(0,[[!1]])},h[12]]}f.component=h;f.make=a}),null);
__d("MessengerDotsIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"22px",width:"22px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"dots-3-horizontal",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Page-1",fill:"#000000"},b("React").createElement("path",{id:"Fill-1",d:"M7,18 C7,16.4815417 8.23154167,15.25 9.75,15.25 C11.2684583,15.25 12.5,16.4815417 12.5,18 C12.5,19.5189167 11.2684583,20.75 9.75,20.75 C8.23154167,20.75 7,19.5189167 7,18 Z M15.25,18 C15.25,16.4815417 16.4815417,15.25 18,15.25 C19.5184583,15.25 20.75,16.4815417 20.75,18 C20.75,19.5189167 19.5184583,20.75 18,20.75 C16.4815417,20.75 15.25,19.5189167 15.25,18 Z M23.5,18 C23.5,16.4815417 24.7315417,15.25 26.25,15.25 C27.7684583,15.25 29,16.4815417 29,18 C29,19.5189167 27.7684583,20.75 26.25,20.75 C24.7315417,20.75 23.5,19.5189167 23.5,18 Z"}))));f.icon=a}),null);
__d("MessengerFRXBootloaderUtils",["Bootloader"],(function(a,b,c,d,e,f){"use strict";a={bootloadFRXDialog:function(a){b("Bootloader").loadModules(["MessengerFRXUtils"],function(b){b.openFRXDialog(a)},"MessengerFRXBootloaderUtils")},bootloadEmptyThreadFRXDialog:function(a){b("Bootloader").loadModules(["MessengerFRXUtils"],function(b){b.openEmptyThreadFRXDialog(a)},"MessengerFRXBootloaderUtils")}};e.exports=a}),null);
__d("MessengerIgnoreDialogReact.bs",["cx","fbt","bs_curry","React","bs_belt_Option","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","IgnoreMessagesTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerIgnoreDialogReact");function j(a,c,d,e,f,g){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){var g=function(){b("bs_curry")._1(a,0);return b("bs_curry")._1(c,!1)},i=d!==void 0?b("bs_js_primitive").valFromOption(d).short_name:void 0;if(!(e==null)){var j=new(b("IgnoreMessagesTypedLogger"))().setEvent("ignore_clicked").setThreadID(e).setPlatform("messengerdotcom");j.log()}return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,c,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,f?h._("Ignore group?"):h._("Ignore this conversation?"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[b("React").createElement("div",{className:"_1q73"},f?h._("You won't be notified when someone messages this group, and the group will be moved to Filtered messages. We won't tell anyone in the group that the messages have been ignored."):h._("You won't be notified when {short_name_or_description} messages you directly, and the conversation will be moved to 'Filtered messages'. We won't tell {sameParam} that the messages have been ignored.",[h._param("short_name_or_description",b("bs_belt_Option").getWithDefault(i,h._("this person"))),h._param("sameParam",b("bs_belt_Option").getWithDefault(i,h._("this person")))]))])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,h._("Ignore Messages"),void 0,"danger",g,0,void 0,void 0,void 0,[]))]))]))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.onIgnore,a.onToggle,b("bs_js_primitive").nullable_to_opt(a.contact),a.threadID,a.isGroupChat,[])});c=b("bs_belt_Option").getWithDefault;f.$pipe$unknown=c;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerMenuReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerMenu.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMenu.react"),{},a)}e=[a];function c(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMenu.react").Item,{href:b("bs_js_null_undefined").fromOption(a),label:c,onclick:b("bs_js_null_undefined").fromOption(d),target:b("bs_js_null_undefined").fromOption(e)},f)}a=[c];function d(a){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMenu.react").Separator,{},a)}c=[d];f.Menu=e;f.MenuItem=a;f.MenuSeparator=c}),null);
__d("MessengerMuteDialogReact.bs",["cx","fbt","bs_block","bs_curry","React","ReasonReact.bs","MessengerDomIDs.bs","MessengerRadioList.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){if(typeof a==="number")return-1;else if(a.tag)return a[0]*3600;else return a[0]*60}var j=b("bs_block").__(0,[15]),k=b("bs_block").__(1,[1]),l=b("bs_block").__(1,[8]),m=b("bs_block").__(1,[24]),n=b("ReasonReact.bs").reducerComponent("MessengerMuteDialogReact");function a(a,c){__p&&__p();return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],function(a){var c=a[1];return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,c[1],b("MessengerDomIDs.bs").ids.MUTE_DIALOG_TITLE,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,h._("Mute Conversation"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[b("React").createElement("div",{className:"_3-96"},h._("You will continue to receive \u0040mention notifications while muted.")),b("ReasonReact.bs").element(void 0,void 0,b("MessengerRadioList.bs").List[0]("messengerMuteOptions",function(c){return b("bs_curry")._1(a[3],[c])},c[0],[b("ReasonReact.bs").element(void 0,void 0,b("MessengerRadioList.bs").Item[0](void 0,void 0,void 0,void 0,void 0,j,[h._("For 15 minutes")])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerRadioList.bs").Item[0](void 0,void 0,void 0,void 0,void 0,k,[h._("For 1 hour")])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerRadioList.bs").Item[0](void 0,void 0,void 0,void 0,void 0,l,[h._("For 8 hours")])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerRadioList.bs").Item[0](void 0,void 0,void 0,void 0,void 0,m,[h._("For 24 hours")])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerRadioList.bs").Item[0](void 0,void 0,void 0,void 0,void 0,0,[h._("Until I turn it back on")]))]))])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,h._("Mute"),void 0,void 0,function(){return b("bs_curry")._1(a[3],0)},0,void 0,void 0,void 0,[]))]))]))},function(){return[j,!0]},n[10],function(c,d){if(c)return b("bs_block").__(0,[[c[0],d[1]]]);else return b("bs_block").__(2,[[d[0],!1],function(c){return b("bs_curry")._1(a,i(c[1][0]))}])},n[12]]}c=0;f.convertMuteToSeconds=i;f.fifteenMinutes=j;f.oneHour=k;f.eightHours=l;f.twentyFourHours=m;f.always=c;f.component=n;f.make=a}),null);
__d("MessengerP2BFRXBootloaderUtils",["Bootloader"],(function(a,b,c,d,e,f){"use strict";a={bootloadOpenFRXDialog:function(a){b("Bootloader").loadModules(["MessengerP2BFRXUtils","FRXEntryPoint","NFXStoryLocation"],function(b,c,d){b.openFRXDialog(a,d.MESSENGER_P2B_DIRECT_THREAD_DETAILS,c.REPORT_BUTTON)},"MessengerP2BFRXBootloaderUtils")}};e.exports=a}),null);
__d("MessengerPageUtils.bs",["MercuryIDs","CurrentUser","bs_js_primitive","MercuryDispatcher","MercuryThreadActions","MessengerParticipants.bs","MercuryParticipantTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==void 0)return b("bs_js_primitive").valFromOption(a).user_type===b("MercuryParticipantTypes").PAGE;else return!1}function a(a){a=a.other_user_fbid;if(a==null)return!1;else return g(b("bs_js_primitive").nullable_to_opt(b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a))))}function h(a,c,d){c=b("MessengerParticipants.bs").getNow(c);if(c==null)return 0;else{c=Object.assign({},c);b("MercuryDispatcher").getForFBID(d).handleUpdate(Object.assign({},{participants:[Object.assign(c,{is_messenger_blocked:a})],preprocessed:!0}));return 0}}function c(a,c){__p&&__p();var d=b("CurrentUser").getAccountID(),e=a.other_user_fbid;if(e==null)return 0;else if(c){b("MercuryThreadActions").getForFBID(d).unblockOnMessengerDotCom(a.thread_id);return h(!1,b("MercuryIDs").getParticipantIDFromUserID(e),d)}else{b("MercuryThreadActions").getForFBID(d).blockOnMessengerDotCom(a.thread_id);return h(!0,b("MercuryIDs").getParticipantIDFromUserID(e),d)}}f.isPageParticipant=g;f.isPageThread=a;f.changeBlockedStatus=h;f.toggleBlock=c}),null);
__d("MessengerPopoverMenuReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerPopoverMenu.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h){return b("ReasonReact.bs").wrapJsForReason(b("MessengerPopoverMenu.react"),{className:b("bs_js_null_undefined").fromOption(a),disableArrowKeyActivation:b("bs_js_null_undefined").fromOption(c),isOpen:b("bs_js_null_undefined").fromOption(d),menu:e,onHide:b("bs_js_null_undefined").fromOption(f),onShow:b("bs_js_null_undefined").fromOption(g)},h)}f.make=a}),null);
__d("WorkChatHideDialogReactBootloader.bs",["bs_block","bs_curry","Bootload.bs","Bootloader","ReasonReact.bs","MessengerSpinnerReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableWorkChatHideDialogReact.bs"],a,"WorkChatHideDialogReactBootloader.bs");return 0}d=[a];var g=b("Bootload.bs").Create(d),h=b("ReasonReact.bs").reducerComponent("WorkChatHideDialogReactBootloader");function i(a,c){if(a[1][1][0])return b("bs_curry")._1(a[3],[c]);else return 0}function c(a,c,d,e){__p&&__p();return[h[0],h[1],h[2],h[3],function(a){a[1][1][0]=!0;return b("bs_curry")._1(g[0],function(b){return i(a,b)})},h[5],function(a){a[1][1][0]=!1;return 0},h[7],function(e){e=e[1][0];if(e!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._4(e[2],c,a,d,[]));else return b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,void 0,void 0,[]))},function(){return[void 0,[!1]]},h[10],function(a,c){return b("bs_block").__(0,[[a[0],c[1]]])},h[12]]}f.BootloadableWorkChatHideDialogReact=d;f.LoadableWorkChatHideDialogReact=g;f.component=h;f.handleHideDialogLoad=i;f.make=c}),null);
__d("WorkChatReportParticipantDialogReact.bs",["cx","fbt","bs_curry","React","immutable","MercuryIDs","ReasonReact.bs","FantaFRXUtil","ImmutableObject","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs","MessengerContactListReact.re"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){return new(b("ImmutableObject"))({alias:a.vanity,uid:a.id,photo:a.image_src,title:a.name,type:a.user_type,isMessengerUser:a.is_messenger_user,href:a.href,isWorkUser:void 0,timezone:void 0,participants:void 0,thread:void 0})}var j=b("ReasonReact.bs").statelessComponent("WorkChatReportParticipantDialog");function k(a,c,d,e){__p&&__p();var f=function(d,a){b("FantaFRXUtil").FRXClicked(c.thread_id,!0,d.id);return b("MessengerDialogs.bs").removeAllDialogs(0)};return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){__p&&__p();var e=a.filter(function(e,a,f){__p&&__p();if(e==null)return!1;else{a=b("MessengerAdminGroupUtils").isJoinableThread(c);f=b("MercuryIDs").getUserIDFromParticipantID(e.id);if(a)if(f==null)return!1;else return f===d;else return!0}}).toArray(),g=b("React").createElement(b("React").Fragment,void 0,b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._2(b("MessengerDialogReact.bs").Title[0],void 0,h._("Report user"))));return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0]("_84gd",void 0,void 0,void 0,void 0,"default",350,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,g)),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make("_84ge",[b("ReasonReact.bs").element(void 0,void 0,b("MessengerContactListReact.re").make(void 0,void 0,void 0,i,!0,void 0,b("immutable").OrderedMap([[[null],e]]),void 0,f,"_84gf",d,c,[]))]))]))},j[9],j[10],j[11],j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.participants,a.thread,a.viewer,[])});f.fromMercuryParticipant=i;f.component=j;f.make=k;f.jsComponent=a}),null);
__d("WorkGalahadQuickChatActions",["WorkGalahadBeeperActions","WorkGalahadBeeperStore","WorkGalahadDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){b("WorkGalahadDispatcher").dispatch({type:"quickChat/hide"})}function c(){b("WorkGalahadDispatcher").dispatch({type:"quickChat/close"})}function d(){b("WorkGalahadDispatcher").dispatch({type:"quickChat/showCompose"})}function f(a){b("WorkGalahadBeeperStore").getChatBeeps().find(function(b){return b===a})&&b("WorkGalahadBeeperActions").xoutBeeper(a),b("WorkGalahadDispatcher").dispatch({type:"quickChat/openThreadID",threadID:a})}function g(){b("WorkGalahadDispatcher").dispatch({type:"quickChat/showInbox"})}function h(){b("WorkGalahadDispatcher").dispatch({type:"quickChat/hideInbox"})}e.exports={hide:a,close:c,openThreadID:f,showCompose:d,showInbox:g,hideInbox:h}}),null);
__d("MessengerThreadlistRowActionsReact.bs",["cx","fbt","Keys","bs_array","bs_block","bs_curry","React","Utils.bs","gkx","bs_caml_obj","QE2Logger","immutable","MercuryIDs","CurrentUser","ReasonReact.bs","joinClasses","bs_js_primitive","MessagingTag","MessengerDialogs.bs","MessengerMenuReact.bs","MessengerPageUtils.bs","MessengerParticipants.bs","MessengerGalahadGating.bs","MessengerAdminGroupUtils","MessengerMuteDialogReact.bs","MessengerBlockDialogReact.bs","MessengerPopoverMenuReact.bs","MessengerDeleteDialogReact.bs","MessengerIgnoreDialogReact.bs","MessengerDotsIconSVGM4React.bs","MessengerFRXBootloaderUtils","WorkGalahadQuickChatActions","MessengerDotComAndInboxM4Check.bs","MessengerP2BFRXBootloaderUtils","WorkChatHideDialogReactBootloader.bs","WorkChatReportParticipantDialogReact.bs","MNCommerceReportConversationDialogReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a,c,d){if(!(b("CurrentUser").isWorkUser()&&b("gkx")("762398"))&&!c&&!a.is_archived&&a.folder!==b("MessagingTag").OTHER)if(d)return!0;else if(a.folder===b("MessagingTag").INBOX)return b("MercuryIDs").isGroupChat(a.thread_id);else return!1;else return!1}function j(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(void 0,0)}function k(a){a.preventDefault();a.stopPropagation();return 0}var l=b("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerThreadlistRowActionsReact"),m="_5blh"+(b("MessengerDotComAndInboxM4Check.bs").yes?"":" _4-0h")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _8102":""),n="_5blh"+(b("MessengerDotComAndInboxM4Check.bs").yes?"":" _4-0h")+" _4-0i"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _8102":"");function o(a){__p&&__p();if(b("gkx")("956764")){b("MessengerP2BFRXBootloaderUtils").bootloadOpenFRXDialog(a.other_user_fbid);return 0}else{var c=a.other_user_fbid;if(c==null)return 0;else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MNCommerceReportConversationDialogReact.bs").make(c,[]))})}}function p(a){var c=a.is_canonical,d=b("CurrentUser").isWorkUser();if(c||!d){b("MessengerFRXBootloaderUtils").bootloadFRXDialog(a.thread_id);return 0}else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("WorkChatReportParticipantDialogReact.bs").make(b("immutable").OrderedMap(b("bs_array").map(function(a){return[a,b("MessengerParticipants.bs").getNow(a)]},a.participants)),a,b("CurrentUser").getID(),[]))})}function a(a){b("MessengerFRXBootloaderUtils").bootloadEmptyThreadFRXDialog(a.thread_id);return 0}function q(a,c,d,e,f,g,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O){__p&&__p();var P=a!==void 0?a:"",Q=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDeleteDialogReact.bs").make(N.folder,N.is_archived,d,t,F,u,[]))})},R=function(){if(f)return b("bs_curry")._1(C,0);else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMuteDialogReact.bs").make(y,[]))})},S=function(){if(s)if(D!==void 0)return b("bs_curry")._1(D,0);else return 0;else if(z!==void 0)return b("bs_curry")._1(z,0);else return 0},T=function(){if(q)return b("bs_curry")._1(w,0);else return b("bs_curry")._1(x,0)},U=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerIgnoreDialogReact.bs").make(E,j,c,N.thread_fbid,b("MercuryIDs").isGroupChat(N.thread_id),[]))})},V=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("WorkChatHideDialogReactBootloader.bs").make(t,E,j,[]))})},W=function(){if(r)return b("bs_curry")._1(G,0);else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerBlockDialogReact.bs").make(F,c,N.thread_fbid,[]))})},X=function(){return b("MessengerPageUtils.bs").toggleBlock(N,r)},Y=function(){return p(N)},Z=function(){return o(N)},$=function(){return[U,W,X,V,Q,T,R,S,Z,Y]};return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],function(a){var b=a[1];a=a[0];if(b[2]||b[2]!==a[2])return!0;else return b[1]!==a[1]},function(a){__p&&__p();var c=a[1];b("QE2Logger").logExposureForUser("messenger_pin_threads_universe",b("CurrentUser").getID());if(g){var j=s?h._("Unpin"):h._("Pin"),l=b("MessengerAdminGroupUtils").isWorkSyncedGroupChat(N);l=l?N.participants.length===1?h._("Delete group and chat"):h._("Leave group and chat"):e?d?h._("Leave chat"):h._("Leave room"):h._("Leave Group");var o=h._("Ignore messages"),p=r?h._("Unblock messages"):h._("Block messages"),u=r?h._("Turn on messages"):h._("Turn off messages"),w=b("bs_caml_obj").caml_equal(N.other_user_fbid,b("CurrentUser").getID()),x=N.message_count===0,y=N.thread_id,z=b("MessengerGalahadGating.bs").isGalahadUIEnabled(0),B=b("Utils.bs").isSomeTrue(K),C=b("Utils.bs").isSomeTrue(K),D=b("CurrentUser").isWorkUser()&&b("gkx")("762398")||N.is_archived||N.folder!==b("MessagingTag").INBOX,E=!b("CurrentUser").isWorkUser()||!b("gkx")("762398")||N.is_archived||N.folder!==b("MessagingTag").INBOX,F=b("CurrentUser").isWorkUser()&&b("gkx")("762398"),G=N.is_archived;w=w||x||!N.can_viewer_report;if(w)x=null;else{w=b("Utils.bs").isSomeTrue(L);if(w){w=b("gkx")("956764");x=b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,w?h._("Something's wrong"):h._("Report..."),c[8],void 0,[]))}else{w=b("CurrentUser").isWorkUser();x=b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,w?h._("Report chat"):h._("Something's wrong"),c[9],void 0,[]))}}w=i(N,r,I);if(I)p=b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,p,c[1],void 0,[]));else{var O=b("MessengerPageUtils.bs").isPageThread(N);p=O?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,u,c[2],void 0,[])):null}O=b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").Menu[0]([z?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Open quick chat"),function(){b("WorkGalahadQuickChatActions").openThreadID(y);return 0},void 0,[])):null,B?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Rename"),A,void 0,[])):null,C?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])):null,J!==void 0&&J?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,j,c[7],void 0,[])):null,b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,f?h._("Unmute"):h._("Mute"),c[6],void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),H?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,l,v,void 0,[])):null,D?null:b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Archive"),t,void 0,[])),E?null:b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Hide chat"),V,void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,F?h._("Delete message history"):h._("Delete"),c[4],void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),G?null:b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,q?h._("Mark as Read"):h._("Mark as Unread"),c[5],void 0,[])),x,w?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,o,c[0],void 0,[])):null,p]));u=P==="";z=u?n:b("joinClasses")(P,n);return b("React").createElement("div",{className:"_3d85"},b("ReasonReact.bs").element(void 0,function(c){return b("bs_curry")._1(a[3],[c==null?void 0:b("bs_js_primitive").some(c)])},b("MessengerPopoverMenuReact.bs").make(void 0,!0,g,O,function(){return b("bs_curry")._1(a[3],1)},void 0,[b("React").createElement("div",{ref:"button","aria-label":h._("Conversation actions"),className:z,role:"button",tabIndex:0,onClick:k},b("MessengerDotComAndInboxM4Check.bs").yes?b("MessengerDotsIconSVGM4React.bs").icon:null)])))}else{B=P==="";C=B?m:b("joinClasses")(P,m);return b("React").createElement("div",{className:"_3d85"},b("React").createElement("div",{ref:"button","aria-label":h._("Conversation actions"),className:C,role:"button",tabIndex:M,onKeyUp:function(c){c=c.keyCode===b("Keys").RETURN;return b("bs_curry")._1(a[3],c?0:2)},onClick:function(){return b("bs_curry")._1(a[3],0)}},b("MessengerDotComAndInboxM4Check.bs").yes?b("MessengerDotsIconSVGM4React.bs").icon:null))}},$,g,function(c,a){__p&&__p();if(typeof c==="number")switch(c){case 0:return b("bs_block").__(2,[$(0),function(){return b("bs_curry")._1(B,!0)}]);case 1:return b("bs_block").__(1,[function(){return b("bs_curry")._1(B,!1)}]);case 2:return 0}else{a=c[0];if(a!==void 0){var d=b("bs_js_primitive").valFromOption(a);return b("bs_block").__(1,[function(){return d.showPopover()}])}else return 0}},l[12]]}c=b("ReasonReact.bs").wrapReasonForJs(l,function(a){var c=a.tabIndex;return q(b("bs_js_primitive").nullable_to_opt(a.className),b("bs_js_primitive").nullable_to_opt(a.contact),a.isGroupChat,a.isJoinableThread,a.isMuted,a.isOpen,a.isUnread,a.isBlocked,a.isPinned,a.onArchive,a.onDelete,b("bs_js_primitive").nullable_to_opt(a.onLeaveGroup),a.onMarkRead,a.onMarkUnread,a.onMute,a.onPin,b("bs_js_primitive").nullable_to_opt(a.onRename),a.onToggle,a.onUnmute,a.onUnpin,a.onIgnore,a.onBlock,a.onUnblock,a.showLeaveGroup,a.showBlock,b("bs_js_primitive").nullable_to_opt(a.showPin),b("bs_js_primitive").nullable_to_opt(a.showRename),b("bs_js_primitive").nullable_to_opt(a.showReport),c==null?-1:c,a.thread,[])});f.shouldRenderIgnoreMessagesButton=i;f.handleReasonDialogToggle=j;f.handleClick=k;f.component=l;f.actionButtonClassesClosed=m;f.actionButtonClassesOpen=n;f.handleReportPageThread=o;f.handleReportThread=p;f.handleReportEmptyThread=a;f.make=q;f.jsComponent=c}),null);
__d("MessengerInfoPanelNameSectionReact.bs",["cx","bs_block","bs_curry","React","gkx","bs_caml_obj","ReasonReact.bs","bs_js_primitive","MercuryThreadInfo","WorkForeignEntityInfo.bs","MessengerAdminGroupUtils","MessengerThreadImageReact.bs","MessengerProfilePresenceReact.bs","MessengerDotComAndInboxM4Check.bs","MessengerThreadlistRowActionsReact.bs","MessengerInfoPanelThreadNameSectionReact.bs","MessengerInfoPanelContactNameSectionReact.bs","MessengerInfoPanelThreadNameSectionM4React.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelNameSectionReact");function i(a,b){b[1][2][0]=!(a==null);return 0}function j(a,c,d,e,f,g,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){__p&&__p();var D=function(c){var e=c[3],h=A.is_subscribed&&!A.is_canonical&&b("MessengerAdminGroupUtils").canUpdateThreadCustomization(A,B);return b("React").createElement("div",{className:"_3-ne"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadlistRowActionsReact.bs").make(void 0,a,b("MessengerAdminGroupUtils").isGroupChat(A),b("MessengerAdminGroupUtils").isJoinableThread(A),b("MercuryThreadInfo").isMuted(A),c[1][0],A.unread_count>0,d,A.is_pinned,n,f,g,j,k,l,m,function(){return b("bs_curry")._1(e,0)},function(a){return b("bs_curry")._1(e,b("bs_block").__(1,[a]))},q,u,r,s,t,y,v,void 0,h,z,0,A,[])))},E=function(a){return b("bs_curry")._2(p,a[0],a[1])};return[h[0],h[1],h[2],function(a){var c=b("bs_caml_obj").caml_equal(a[3],A.thread_id);if(c)return a;else return[a[0],1,a[2],A.thread_id]},h[4],h[5],h[6],h[7],function(d){__p&&__p();var f=A.is_subscribed||A.is_canonical;if(a!==void 0){var g=b("MessengerDotComAndInboxM4Check.bs").yes&&b("gkx")("863504");g=b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelContactNameSectionReact.bs").make(b("bs_js_primitive").valFromOption(a),c,e,x,g?b("React").createElement(b("MessengerProfilePresenceReact.bs").make,{expanded:!0,size:50,thread:A,viewer:B}):b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadImageReact.bs").make(void 0,void 0,void 0,void 0,50,w,A,B,[])),[]))}else{var h=b("MessengerAdminGroupUtils").canUpdateThreadCustomization(A,B),j=b("gkx")("863504")?b("React").createElement(b("MessengerProfilePresenceReact.bs").make,{expanded:!0,size:50,thread:A,viewer:B}):b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadImageReact.bs").make(void 0,void 0,void 0,void 0,50,w,A,B,[]));g=b("MessengerDotComAndInboxM4Check.bs").yes?b("ReasonReact.bs").element(void 0,b("bs_curry")._1(d[0],i),b("MessengerInfoPanelThreadNameSectionM4React.bs").make(h,function(a){a!==A.name&&b("bs_curry")._1(o,a);return b("bs_curry")._1(d[3],1)},E,j,A,[])):b("React").createElement(b("MessengerInfoPanelThreadNameSectionReact.bs").make,{actionsEnabled:h,onThreadNameChange:function(a){a!==A.name&&b("bs_curry")._1(o,a);return b("bs_curry")._1(d[3],1)},onThreadPhotoChange:E,renderedImage:b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadImageReact.bs").make(void 0,void 0,void 0,void 0,50,w,A,B,[])),thread:A,toggleIsEditingName:function(a){return b("bs_curry")._1(d[3],b("bs_block").__(0,[a]))},isEditingName:d[1][1],viewer:B,isMultiCompany:!b("WorkForeignEntityInfo.bs").areAllCoworkers(w),ref:b("bs_curry")._1(d[0],i)})}return b("React").createElement("div",{className:"_1jt6"},g,f?D(d):null)},function(){return[!1,1,[!1],A.thread_id]},h[10],function(a,c){__p&&__p();if(typeof a==="number")if(a===0){var d=c[2][0];if(d)return b("bs_block").__(0,[[c[0],0,c[2],c[3]]]);else return 0}else return b("bs_block").__(0,[[c[0],1,c[2],c[3]]]);else if(a.tag)return b("bs_block").__(0,[[a[0],c[1],c[2],c[3]]]);else return b("bs_block").__(0,[[c[0],a[0],c[2],c[3]]])},h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return j(b("bs_js_primitive").nullable_to_opt(a.contact),a.isUserActive,a.isBlocked,b("bs_js_primitive").nullable_to_opt(a.lastActive),a.onDelete,b("bs_js_primitive").nullable_to_opt(a.onLeaveGroup),a.onMarkRead,a.onMarkUnread,a.onMute,a.onPin,a.onArchive,a.onThreadNameChange,a.onThreadPhotoChange,a.onUnmute,a.onIgnore,a.onBlock,a.onUnblock,a.onUnpin,a.showBlock,a.participants,b("bs_js_primitive").nullable_to_opt(a.platform),a.showLeaveGroup,a.showReport,a.thread,a.viewer,[])});c=50;f.component=h;f.imageSize=c;f.setThreadSectionRef=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerMakeAsOwnerDialogReact.bs",["bs_curry","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerMakeAsOwnerDialogReact");function h(a,c,d,e,f,h){var i=function(d){b("bs_curry")._1(c,!1);if(a!==void 0)return b("bs_curry")._1(a,d);else return 0};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){var a=b("MessengerAdminGroupUtils").getMakeOwnerTitleText(f,e),g=b("MessengerAdminGroupUtils").getMakeOwnerBodyText(f,e,d),h=b("MessengerAdminGroupUtils").getMakeOwnerButtonText(f,e);return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,c,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,a)),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[g])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,h,void 0,"danger",i,0,void 0,void 0,void 0,[]))]))]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(b("bs_js_primitive").nullable_to_opt(a.onMakeOwner),a.onToggle,a.name,a.isUserViewer,a.isAdminRequired,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerRemoveAsOwnerDialogReact.bs",["bs_curry","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerRemoveAsOwnerDialogReact");function h(a,c,d,e,f,h,i){var j=function(d){b("bs_curry")._1(c,!1);if(a!==void 0)return b("bs_curry")._1(a,d);else return 0};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){var a=b("MessengerAdminGroupUtils").getRemoveOwnerTitleText(h),g=b("MessengerAdminGroupUtils").getRemoveOwnerBodyText(h,e,f,d),i=b("MessengerAdminGroupUtils").getRemoveOwnerButtonText(h);return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,c,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,a)),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[g])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,i,void 0,"danger",j,0,void 0,void 0,void 0,[]))]))]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(b("bs_js_primitive").nullable_to_opt(a.onRemove),a.onToggle,a.name,a.isUserViewer,a.isLastAdminInThread,a.isAdminRequired,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerRemoveFromGroupDialogReact.bs",["fbt","bs_curry","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerRemoveFromGroupDialogReact");function i(a,c,d,e,f){__p&&__p();var i=function(d){b("bs_curry")._1(c,!1);if(a!==void 0)return b("bs_curry")._1(a,d);else return 0};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var a=e&&b("CurrentUser").isWorkUser();a=a?g._("Are you sure that you want to remove this bot from the conversation?"):d?g._("Are you sure that you want to remove this person from the group? They will no longer be able to send or receive new messages. They will also be removed from the group."):g._("Are you sure that you want to remove this person from the conversation? They will no longer be able to send or receive new messages.");var f=d?g._("Remove from group and chat"):g._("Remove from group");return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,c,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,f)),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[a])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,g._("Remove"),void 0,"danger",i,0,void 0,void 0,void 0,[]))]))]))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(b("bs_js_primitive").nullable_to_opt(a.onRemove),a.onToggle,a.isWorkSyncedChat,a.isUserBot,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerInfoPanelContactActions.react",["cx","fbt","ImmutableObject","MercuryIDs","MessengerAdminGroupUtils","MessengerContactActions.bs","MessengerDialogs.bs","MessengerMakeAsOwnerDialogReact.bs","MessengerMenu.react","MessengerParticipants.bs","MessengerPopoverMenu.react","MessengerRemoveAsOwnerDialogReact.bs","MessengerRemoveFromGroupDialogReact.bs","MessengerState.bs","MessengerURIStore","React","ReactComponentWithPureRenderMixin","ShimButton.react","StoreAndPropBasedStateMixin","gkx","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactActions.bs").actions,j=b("MessengerMakeAsOwnerDialogReact.bs").jsComponent,k=b("MessengerRemoveAsOwnerDialogReact.bs").jsComponent,l=b("MessengerRemoveFromGroupDialogReact.bs").jsComponent,m=b("MessengerMenu.react").Item,n=b("MessengerMenu.react").Separator;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerInfoPanelContactActions",mixins:[b("ReactComponentWithPureRenderMixin"),b("StoreAndPropBasedStateMixin")(b("MessengerURIStore"))],propTypes:{admins:a.object,extrasEnabled:a.bool.isRequired,contact:a.instanceOf(b("ImmutableObject")).isRequired,isAdminRequired:a.bool.isRequired,isOpen:a.bool,onAction:a.func.isRequired,onToggle:a.func.isRequired,viewer:a.string.isRequired},statics:{calculateState:function(a){var c=b("MessengerURIStore").getState().activeThreadID;a=c?b("MessengerState.bs").getThreadMetaNow(a.viewer,c):null;return{thread:a}}},render:function(){__p&&__p();var a=this,c=this._isViewerAdmin(),d=b("MessengerAdminGroupUtils").isAdmin(this.props.admins,this.props.contact.uid),e=this._isUserViewer(),f=b("MessengerAdminGroupUtils").canRemoveAdmin(c,d,this._getUserAdminType(),this.state.thread)?b("React").createElement(m,{label:h._("Remove as admin"),onclick:this._handleRemoveAsOwnerClick}):null,g=null;c=b("MessengerAdminGroupUtils").canMakeOthersAdmins(c,d,this.state.thread);d=b("MessengerAdminGroupUtils").canMakeSelfAdmin(e,this.state.thread);(c||d)&&(g=b("React").createElement(m,{label:h._("Make admin"),onclick:this._hanleMakeOwnerClick}));if(e)if(g||f)c=b("React").createElement(b("MessengerMenu.react"),null,g,f);else return null;else c=b("React").createElement(b("MessengerMenu.react"),null,b("React").createElement(m,{label:h._("Message"),onclick:this._makeActionHandler(i.MESSAGE)}),this.props.contact.href?b("React").createElement(m,{label:h._("View Profile"),onclick:this._makeActionHandler(i.PROFILE)}):null,b("gkx")("946333")?b("React").createElement(m,{label:h._("Report user"),onclick:this._makeActionHandler(i.REPORT_GROUP_CHAT_USER)}):null,g,f,this._renderExtras());return b("React").createElement(b("MessengerPopoverMenu.react"),{menu:c,onHide:function(){return a.props.onToggle(!1)},onShow:function(){return a.props.onToggle(!0)}},b("React").createElement(b("ShimButton.react"),{className:b("joinClasses")(this.props.className,"_57gs"+(this.props.isOpen?" _57gt":"")),onClick:this._handleClick}))},_renderExtras:function(){if(!this.props.extrasEnabled)return null;var a=[b("React").createElement(n,{key:"separator"})],c=this._isViewerAdmin();b("MessengerAdminGroupUtils").canRemoveFromGroup(c,this._getUserAdminType(),this.state.thread)&&a.push(b("React").createElement(m,{key:"remove-from-group",label:h._("Remove from group"),onclick:this._handleRemoveClick}));return a.length>=2?a:null},_handleClick:function(a){a.stopPropagation(),a.preventDefault()},_makeActionHandler:function(a){var b=this;return function(c){b._handleClick(c),b.props.onAction(a,c)}},_handleRemoveClick:function(a){var c=this;this._handleClick(a);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(l,{onToggle:c._handleDialogToggle,onRemove:c._handleDialogRemoveClick,isWorkSyncedChat:b("MessengerAdminGroupUtils").isWorkSyncedGroupChat(c.state.thread),isUserBot:c._isUserBot()})})},_handleRemoveAsOwnerClick:function(a){var c=this;this._handleClick(a);var d=b("MessengerParticipants.bs").getNow(this.props.contact.uid);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(k,{isAdminRequired:c.props.isAdminRequired,isLastAdminInThread:c.props.admins&&Object.keys(c.props.admins).length===1,isUserViewer:c._isUserViewer(),name:d&&d.name,onToggle:c._handleDialogToggle,onRemove:c._handleOwnerRemoveClick})})},_handleDialogRemoveClick:function(a){this.props.onAction(i.REMOVE,a)},_handleOwnerRemoveClick:function(a){this.props.onAction(i.REMOVE_OWNER,a)},_hanleMakeOwnerClick:function(a){var c=this;this._handleClick(a);var d=b("MessengerParticipants.bs").getNow(this.props.contact.uid);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(j,{onToggle:c._handleDialogToggle,onMakeOwner:c._handleOwnerAddClick,name:d&&d.name,isAdminRequired:c.props.isAdminRequired,isUserViewer:c._isUserViewer()})})},_handleOwnerAddClick:function(a){this.props.onAction(i.ADD_OWNER,a)},_handleDialogToggle:function(a){a||b("MessengerDialogs.bs").removeDialog()},_isUserViewer:function(){return b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)===this.props.contact.uid},_isUserBot:function(){return this.props.contact.workForeignEntityInfo===null},_isViewerAdmin:function(){return b("MessengerAdminGroupUtils").isAdmin(this.props.admins,this.props.viewer)},_getUserAdminType:function(){var a=b("MercuryIDs").isValid(this.props.contact.uid)&&b("MercuryIDs").getUserIDFromParticipantID(this.props.contact.uid);return this.props.admins&&a?this.props.admins[a]:null}});e.exports=c}),null);
__d("MessengerInfoPanelPeopleSectionReact.bs",["ix","cx","fbt","cssVar","Image.bs","React","gkx","bs_caml_obj","asset","LinkReact.bs","immutable","MercuryIDs","CurrentUser","ReasonReact.bs","bs_js_primitive","MessagingTag","bs_js_null_undefined","MessageRequestUtils","MessengerAddIconSVGReact.bs","MessengerAdminGroupUtils","MessengerSortParticipants","MessengerContactListReact.re","MessengerInfoPanelSectionReact.bs","MessengerInfoPanelContactActions.react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelPeopleSectionReact");function a(a,c,d,e,f,h,j,l,m,n,o,p,q){__p&&__p();var r=function(){__p&&__p();if(!c||b("MessageRequestUtils").isMessageRequest(o)||b("bs_caml_obj").caml_equal(o.group_thread_subtype,13))return null;else{var a=b("MessengerAdminGroupUtils").shouldInvite(o);a=a?i._("Invite"):i._("Add People");var d=o.solid_color;if(d==null){var e=b("CurrentUser").isWorkUser();e=e?"#373e4c":"#0084ff"}else e=d;d=b("CurrentUser").isWorkUser();d=d?b("React").createElement("div",{className:"_3-8n _3-8u"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("461758"),void 0,void 0,void 0,void 0,[]))):b("ReasonReact.bs").element(void 0,void 0,b("MessengerAddIconSVGReact.bs").make("_4rpi",e,[]));return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,"_4rph",void 0,void 0,void 0,void 0,void 0,void 0,void 0,h,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[d,b("React").createElement("div",{className:"_4rpj"},a)]))}};return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],function(){var c=o.folder===b("MessagingTag").PENDING&&b("gkx")("890873")?n["delete"](b("MercuryIDs").getParticipantIDFromUserID(p)):n;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").nullable_to_opt(o.solid_color),!0,e,m,i._("People"),[r(0),b("ReasonReact.bs").element(void 0,void 0,b("MessengerContactListReact.re").make(b("MessengerInfoPanelContactActions.react"),b("bs_js_primitive").option_get(a==null?void 0:b("bs_js_primitive").some(a)),"_4wc-",d,!0,f,b("immutable").OrderedMap([[[null],b("MessengerSortParticipants").sortAlphabeticalWithAdmins(a==null?b("bs_js_null_undefined").fromOption([]):b("bs_js_null_undefined").fromOption(Object.keys(a)),c)]]),j,l,void 0,p,o,[]))]))},k[9],k[10],k[11],k[12]]}f.component=k;f.make=a}),null);
__d("MessengerInfoPanelPeopleSectionReact.re",["bs_curry","MessengerInfoPanelPeopleSectionReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){a=b("ReasonReact.bs").wrapReasonForJs(b("MessengerInfoPanelPeopleSectionReact.bs").component,function(a){return b("bs_curry").app(b("MessengerInfoPanelPeopleSectionReact.bs").make,[a.admins,a.canViewerReply,a.contactAdapter,a.isCollapsed,a.isViewerSubscribed,a.onAddPeopleClick,a.onContactAction,a.onContactSelect,a.onToggle,a.participants,a.thread,a.viewer,a.children])});f.component=a;f["default"]=a}),null);
__d("MessengerBlockIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"22px",width:"22px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"minus-circle",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("polygon",{id:"Fill-1",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-19",d:"M26,16 L10,16 C9.448,16 9,16.448 9,17 L9,19 C9,19.552 9.448,20 10,20 L26,20 C26.552,20 27,19.552 27,19 L27,17 C27,16.448 26.552,16 26,16 M18,30 C11.3725,30 6,24.6275 6,18 C6,11.3725 11.3725,6 18,6 C24.6275,6 30,11.3725 30,18 C30,24.6275 24.6275,30 18,30",fill:"#000000"})));f.icon=a}),null);
__d("MessengerInfoPanelBlockReact.bs",["cx","fbt","Keys","bs_curry","React","ReasonReact.bs","bs_js_primitive","MessengerDialogs.bs","MessengerBlockDialogReact.bs","MessengerBlockIconSVGM4React.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.contact,d=a.isBlocked,e=a.onBlock,f=a.onUnblock,g=a.showBlock,i=a.thread,j=function(){if(d)return b("bs_curry")._1(f,0);else{var a=c!==void 0?b("bs_js_primitive").nullable_to_opt(b("bs_js_primitive").valFromOption(c)):void 0;return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerBlockDialogReact.bs").make(e,a,i.thread_fbid,[]))})}};if(g){a=d?h._("Unblock messages"):h._("Block messages");return b("React").createElement("div",{className:"_3szo _6y4w",role:"button",tabIndex:0,onKeyDown:function(a){a=a;if(a.keyCode===b("Keys").RETURN){a.preventDefault();a.stopPropagation();return j(0)}else return 0},onClick:function(a){a=a;a.preventDefault();a.stopPropagation();return j(0)}},b("React").createElement("div",{className:"_3szp"},b("React").createElement("div",{className:"_7hu1"},b("MessengerBlockIconSVGM4React.bs").icon)),b("React").createElement("div",{className:"_3szq"},a))}else return null}c=a;f.make=c}),null);
__d("MessengerMessageCrossIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"22px",width:"22px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"message-cross",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Page-1",fill:"#000000"},b("React").createElement("path",{id:"Fill-1",d:"M6.01700638,17.4668416 L6.01700638,17.4658421 L6.01700638,17.4648425 C6.01750656,10.8121778 11.0393898,6.0192206 18.0085032,6.0192206 C19.7721646,6.0192206 21.4057772,6.33208726 22.8678254,6.90084485 C23.5320745,7.15873494 23.7126422,8.01536984 23.2089534,8.51965492 L8.43691384,23.2983562 C8.09728648,23.6382114 7.52607228,23.5527478 7.303989,23.1264295 C6.7647868,22.0923702 6.01700638,20.4455721 6.01700638,17.4668416 M29.669376,7.74698423 L27.914718,9.50223614 C27.6101038,9.8071062 27.5725897,10.2879013 27.8286858,10.6342537 C29.2097036,12.5004583 30,14.8349633 30,17.4648425 L30,17.4658421 L30,17.4668416 C29.9994998,24.1195063 24.9781168,28.9904303 18.0085032,28.9904303 C16.8470677,28.9904303 15.7411529,28.8869744 14.7027635,28.6335824 C13.83994,28.423172 12.9391022,28.4446629 12.0977867,28.7315406 L8.73902714,29.7626012 C8.33687633,29.8995428 7.80567713,30 7.26647493,30 C6.55470802,30 6,29.6171632 6,29.023916 C6,28.7640268 6.09453545,28.5026382 6.29310992,28.3042227 L28.2943604,6.29310387 C28.7235213,5.86328706 29.4472927,5.90626874 29.8174315,6.42154913 C30.1085407,6.82637659 30.0215081,7.3946344 29.669376,7.74698423"}))));f.icon=a}),null);
__d("MessengerInfoPanelIgnoreMessagesReact.bs",["cx","fbt","Keys","React","MercuryIDs","ReasonReact.bs","bs_js_primitive","MessengerDialogs.bs","MessengerIgnoreDialogReact.bs","MessengerThreadlistRowActionsReact.bs","MessengerMessageCrossIconSVGM4React.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.contact,d=a.isBlocked,e=a.onIgnore,f=a.showBlock,g=a.thread,i=function(){var a=c==null?void 0:b("bs_js_primitive").some(c);return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerIgnoreDialogReact.bs").make(e,function(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(void 0,0)},a,g.thread_fbid,b("MercuryIDs").isGroupChat(g.thread_id),[]))})};if(b("MessengerThreadlistRowActionsReact.bs").shouldRenderIgnoreMessagesButton(g,d,f))return b("React").createElement("div",{className:"_3szo _6y4w",role:"button",tabIndex:0,onKeyDown:function(a){a=a;if(a.keyCode===b("Keys").RETURN){a.preventDefault();a.stopPropagation();return i(0)}else return 0},onClick:function(a){a=a;a.preventDefault();a.stopPropagation();return i(0)}},b("React").createElement("div",{className:"_3szp"},b("React").createElement("div",{className:"_7hu0"},b("MessengerMessageCrossIconSVGM4React.bs").icon)),b("React").createElement("div",{className:"_3szq"},h._("Ignore messages")));else return null}c=a;f.make=c}),null);
__d("MessengerInfoPanelManageMessagesM4React.bs",["cx","fbt","bs_curry","React","MercuryIDs","bs_belt_Option","bs_js_primitive","MessengerPageUtils.bs","FBToggleSwitch.react","MessengerParticipants.bs","MessengerDotComAndInboxM4Check.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){a=b("MercuryIDs").getParticipantIDFromFromThreadID(a.thread_id);if(a==null)return!1;else{a=b("MessengerParticipants.bs").getNow(a);if(a==null)return!1;else return a.is_business_enabled}}var j=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w":"_3szo";function k(a){if(b("bs_js_primitive").nullable_to_opt(a.other_user_fbid)!==void 0)return i(a);else return!1}function l(a){if(k(a)){a=a.other_user_fbid;if(a==null)return void 0;else return b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a))),function(a){return a.is_messenger_blocked})}}function a(a){__p&&__p();var c=a.thread;a=c.other_user_fbid;var d=b("React").useState(function(){return void 0});if(a==null)return null;else{a=d[0];if(k(c)){var e=l(c);a!==e&&b("bs_curry")._1(d[1],function(){return e});d=function(a){return b("MessengerPageUtils.bs").toggleBlock(c,a)};var f=h._("Receive messages"),g=a===!0;return b("React").createElement("div",{className:j},b("React").createElement("div",{className:"_7lgv"},b("React").createElement(b("FBToggleSwitch.react"),{animate:!0,"aria-label":f,checked:a!==!0,onToggle:d})),b("React").createElement("span",{className:"_3szq _7lgw _7lgx"},f,b("React").createElement("span",{className:"_7lgy"},g?h._("You aren't receiving messages"):h._("You're receiving messages"))))}else return null}}c=b("React").memo(a);d=a;f.isBusinessEnabled=i;f.rowClasses=j;f.shouldDisplay=k;f.getBlocked=l;f.makeNoMemo=d;f.make=c}),null);
__d("MessengerCautionIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"22px",width:"22px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"caution-triangle",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Group"},b("React").createElement("polygon",{id:"Fill-5",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-23",d:"M20.0051526,16.0130814 C20.0051526,16.3394431 19.9651454,16.6653049 19.8856311,16.9816708 L19.1705023,19.8389596 C19.0734848,20.2287943 18.7234217,20.5006791 18.3218494,20.5006791 L17.6877352,20.5006791 C17.2861628,20.5006791 16.9360998,20.2287943 16.8390823,19.8389596 L16.1239535,16.9816708 C16.0444392,16.6653049 16.004432,16.3394431 16.004432,16.0130814 L16.004432,12.258673 C16.004432,11.8443486 16.3404925,11.5094905 16.7545671,11.5094905 L19.2550175,11.5094905 C19.6690921,11.5094905 20.0051526,11.8443486 20.0051526,12.258673 L20.0051526,16.0130814 Z M18.0047923,25.9968492 C16.9000933,25.9968492 16.004432,25.1017286 16.004432,23.9986962 C16.004432,22.8946642 16.9000933,22.0000435 18.0047923,22.0000435 C19.1094913,22.0000435 20.0051526,22.8946642 20.0051526,23.9986962 C20.0051526,25.1017286 19.1094913,25.9968492 18.0047923,25.9968492 Z M30.6590717,24.2660829 L20.1356761,6.22722976 C19.1805041,4.59092341 16.8225793,4.59092341 15.8674073,6.22722976 L5.34401171,24.2660829 C4.37883786,25.919382 5.56755198,28 7.47789609,28 L28.5246872,28 C30.4350313,28 31.6237455,25.919382 30.6590717,24.2660829 Z",fill:"#000000"}))));f.icon=a}),null);
__d("MessengerInfoPanelReportReact.bs",["cx","fbt","Keys","React","gkx","bs_caml_obj","CurrentUser","WorkModeConfig","MessengerCautionIconSVGM4React.bs","MessengerThreadlistRowActionsReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.isPage,d=a.thread,e=d.message_count===0,f=function(){if(c)return b("MessengerThreadlistRowActionsReact.bs").handleReportPageThread(d);else if(e&&b("gkx")("914895")&&!b("CurrentUser").isWorkUser())return b("MessengerThreadlistRowActionsReact.bs").handleReportEmptyThread(d);else return b("MessengerThreadlistRowActionsReact.bs").handleReportThread(d)};a=b("bs_caml_obj").caml_equal(d.other_user_fbid,b("CurrentUser").getID());var g=!c||b("gkx")("956764"),i=g?h._("Something's wrong"):h._("Report...");i=b("React").createElement("div",{className:"_3szo _6y4w",role:"button",tabIndex:0,onKeyDown:function(a){a=a;if(a.keyCode===b("Keys").RETURN){a.preventDefault();a.stopPropagation();return f(0)}else return 0},onClick:function(a){a=a;a.preventDefault();a.stopPropagation();return f(0)}},b("React").createElement("div",{className:"_3szp"},b("React").createElement("div",{className:"_7hty"},b("MessengerCautionIconSVGM4React.bs").icon)),b("React").createElement("div",{className:"_3szq _7htz"+(g?" _7ht-":"")},i,g?b("React").createElement("span",{className:"_7ht_"},h._("Give feedback and report conversation")):null));if(a)return null;else if(b("CurrentUser").isWorkUser()){g=e||b("WorkModeConfig").is_premium;if(g)return null;else return i}else if(c)if(e)return null;else return i;else if(e){a=b("gkx")("914895");if(a)return i;else return null}else return i}c=a;f.make=c}),null);
__d("MessengerCompositeMuteSettingsDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("messengerCompositeMuteSettingsDialogReactComponent").__setRef("MessengerCompositeMuteSettingsDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerCompositeMuteSettingsDialogBootloaderReact.bs",["ReasonReact.bs","MessengerCompositeMuteSettingsDialogBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("MessengerCompositeMuteSettingsDialogBootloader.react"),{isMuted:a,mentionsMuted:c,reactionsMuted:d,showMentions:e,onMentionsMute:f,onReactionsMute:g,onMute:h,onToggle:i},j)}f.make=a}),null);
__d("MessengerMutedIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"22px",width:"22px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"bell-cross",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("path",{id:"Mask",d:"M29.6764631,7.74622879 C30.0291732,7.39372879 30.1157248,6.82622879 29.8250516,6.42172879 C29.4548311,5.90622879 28.7303995,5.86322879 28.301644,6.29322879 L6.29303147,28.2897288 C5.86327542,28.7187288 5.90630105,29.4417288 6.42160807,29.8127288 C6.82584891,30.1032288 7.39368723,30.0172288 7.74589707,29.6652288 L10.8277332,26.5847288 C11.2029568,26.2102288 11.7117599,25.9997288 12.2415756,25.9997288 L27.4856578,25.9997288 C28.3336631,25.9997288 29.0555932,25.3052288 29.0125676,24.4587288 C28.9285175,22.8162288 27.143454,23.3142288 26.8132572,20.9437288 L25.7396176,12.7867288 L25.7381167,12.7772288 C25.6575687,12.1682288 25.8651924,11.5557288 26.2999514,11.1212288 L29.6764631,7.74622879 Z M20.5105021,27.9977288 L15.5100229,27.9977288 C15.1973366,27.9977288 14.944686,28.2727288 15.0042215,28.5727288 C15.2783849,29.9532288 16.5196244,30.9952288 18.0105126,30.9952288 C19.5004003,30.9952288 20.7421401,29.9532288 21.0158032,28.5727288 C21.0763392,28.2727288 20.8231884,27.9977288 20.5105021,27.9977288 Z M10.4465061,21.2792288 L22.7128142,9.01972879 C23.1460724,8.58672879 23.085036,7.86922879 22.5892406,7.50822879 C21.2979713,6.56822879 19.713027,6.01622879 18.0105126,6.01622879 C14.0976814,6.01622879 10.7912114,8.91272879 10.2814077,12.7867288 L9.24028741,20.6847288 C9.15223495,21.3572288 9.96672022,21.7587288 10.4465061,21.2792288 Z",fill:"#ffffff"})));f.iconWhite=a}),null);
__d("MessengerNotificationsIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"22px",width:"22px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"bell",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("polygon",{id:"Fill-19",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-24",d:"M15.5120016,28 L20.4879984,28 C20.7988428,28 21.0505024,28.2755 20.9913177,28.5755 C20.718272,29.957 19.482852,31 18.0002487,31 C16.517148,31 15.281728,29.957 15.0086823,28.5755 C14.9494976,28.2755 15.2011572,28 15.5120016,28 M18,6 C21.910881,6 25.2161675,8.899 25.7263259,12.776 L26.7996071,20.94 C27.1293863,23.312 28.914191,22.814 28.9981348,24.458 C29.0416057,25.305 28.3190896,26 27.4706577,26 L8.5288426,26 C7.68091044,26 6.95839429,25.305 7.00186518,24.458 C7.0853093,22.814 8.87011406,23.312 9.20039288,20.94 L10.2736741,12.776 C10.7838325,8.899 14.089119,6 18,6",fill:"#000000"})));f.icon=a}),null);
__d("MessengerNotificationsIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{height:"24",width:"24",viewBox:"0 0 18 18"},b("React").createElement("defs",void 0,b("React").createElement("circle",{id:"path-1",cx:"1",cy:"1",r:"1"})),b("React").createElement("g",{fill:"none",fillRule:"evenodd"},b("React").createElement("rect",{id:"Bounds",height:"18",width:"18",x:"0",y:"0"}),b("React").createElement("path",{d:"M9,16.5 C9.828,16.5 10.5,15.828 10.5,15 L7.5,15\nC7.5,15.828 8.172,16.5 9,16.5",fill:c}),b("React").createElement("path",{d:"M13,10 L13,7.5 C13,5.562 11.622,3.948 9.793,3.58\nC9.914,3.414 10,3.221 10,3 C10,2.448 9.552,2 9,2 C8.448,2\n8,2.448 8,3 C8,3.221 8.086,3.414 8.207,3.58 C6.378,3.948\n5,5.562 5,7.5 L5,10 C5,11.105 4,12 4,12 L3.70537567,12.2946243\nC3.31580745,12.6841926 3.31640625,13.3164062\n3.70537567,13.7053757 L4,14 L14,14 L14.2946243,13.7053757\nC14.6841926,13.3158074 14.6835937,12.6835938\n14.2946243,12.2946243 L14,12 C14,12 13,11.105 13,10 Z",stroke:c,strokeWidth:"4%"}))))}f.make=a}),null);
__d("MessengerNotificationsButtonReact.bs",["ix","cx","fbt","Keys","bs_curry","Image.bs","React","asset","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerDialogs.bs","MessengerMuteUtils.bs","MessengerCustomColorUtils.bs","MessengerMutedIconSVGM4React.bs","MessengerDotComAndInboxM4Check.bs","MessengerNotificationsIconSVGReact.bs","MessengerNotificationsIconSVGM4React.bs","MessengerCompositeMuteSettingsDialogBootloaderReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,c){if(a)return 0;else{a=c[1][0][0];if(a!==void 0)return b("bs_js_primitive").valFromOption(a).focus();else return 0}}function k(a,c){c[1][0][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}var l=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w":"_3szo",m=b("ReasonReact.bs").reducerComponent("MessengerNotificationsButtonReact");function a(a,c,d,e,f,h,n,o,p){__p&&__p();var q=function(d){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerCompositeMuteSettingsDialogBootloaderReact.bs").make(a,c,e,!o.is_canonical,f,n,h,b("bs_curry")._1(d[0],j),[]))})},r=function(a,b){a.preventDefault();a.stopPropagation();return q(b)},s=function(a,c){if(a.keyCode===b("Keys").RETURN){a.preventDefault();a.stopPropagation();return q(c)}else return 0},t=function(){__p&&__p();if(d!==void 0){var a=d;if(a!==0){a=b("MessengerMuteUtils.bs").mutedUntilLabel(a);if(a!==void 0)return b("React").createElement("span",{className:"_3x6v"},a);else return null}else return null}else return null};return[m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],function(c){return b("React").createElement("div",{ref:b("bs_curry")._1(c[0],k),className:l,role:"button",tabIndex:0,onKeyDown:b("bs_curry")._1(c[0],s),onClick:b("bs_curry")._1(c[0],r)},b("React").createElement("div",{className:"_3szp"},b("CurrentUser").isWorkUser()?b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("470464"),void 0,void 0,void 0,void 0,[])):b("MessengerDotComAndInboxM4Check.bs").yes?b("React").createElement("div",{className:"_6ybz"+(a?" _7ipg":"")},a?b("MessengerMutedIconSVGM4React.bs").iconWhite:b("MessengerNotificationsIconSVGM4React.bs").icon):b("MessengerNotificationsIconSVGReact.bs").make("_3wh2",b("MessengerCustomColorUtils.bs").customColorOrBlue(o))),b("React").createElement("div",{className:"_3szq _6b46"+(d?" _6b47":"")},i._("Notifications"),t(0)))},function(){return[[void 0]]},m[10],function(a,b){return 0},m[12]]}f.handleDialogToggle=j;f.setRef=k;f.rowClasses=l;f.component=m;f.make=a}),null);
__d("MessengerMuteButtonContainerReact.bs",["bs_curry","ReasonReact.bs","bs_js_primitive","MercuryThreadInfo","MercuryThreadActions","MessengerNotificationsButtonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerMuteButtonContainerReact");function a(a,c,d){__p&&__p();var e=function(e,d){b("MercuryThreadActions").getForFBID(c).updateMuteSetting(a.thread_id,e);return 0},f=function(e,d){b("MercuryThreadActions").getForFBID(c).updateMentionsMuteSetting(a.thread_id,e);return 0},h=function(e,d){b("MercuryThreadActions").getForFBID(c).updateReactionsMuteSetting(a.thread_id,e);return 0};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(c){var d=b("MercuryThreadInfo").isMuted(a),g=b("MercuryThreadInfo").getMuteSetting(a);return b("ReasonReact.bs").element(void 0,void 0,b("MessengerNotificationsButtonReact.bs").make(d,b("MercuryThreadInfo").areMentionsMuted(a),g==null?void 0:b("bs_js_primitive").some(g),b("MercuryThreadInfo").areReactionsMuted(a),b("bs_curry")._1(c[0],f),b("bs_curry")._1(c[0],e),b("bs_curry")._1(c[0],h),a,[]))},g[9],g[10],g[11],g[12]]}f.component=g;f.make=a}),null);
__d("MessengerInfoPanelPrivacySupportOptionsContainerReact.bs",["fbt","React","ReasonReact.bs","bs_js_primitive","MessengerInfoPanelBlockReact.bs","MessengerInfoPanelReportReact.bs","MessengerInfoPanelSectionReact.bs","MessengerMuteButtonContainerReact.bs","MessengerInfoPanelIgnoreMessagesReact.bs","MessengerInfoPanelManageMessagesM4React.bs"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.contact,d=a.isBlocked,e=a.isCollapsed,f=a.isPage,h=a.showBlock,i=a.thread,j=a.viewer,k=a.onBlock,l=a.onIgnore,m=a.onUnblock;a=a.onToggle;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").nullable_to_opt(i.solid_color),!0,e,a,g._("Privacy and support"),[b("ReasonReact.bs").element(void 0,void 0,b("MessengerMuteButtonContainerReact.bs").make(i,j,[])),b("React").createElement(b("React").Suspense,{children:b("React").createElement(b("MessengerInfoPanelManageMessagesM4React.bs").make,{thread:i}),fallback:null}),b("React").createElement(b("MessengerInfoPanelIgnoreMessagesReact.bs").make,{contact:c,isBlocked:d,onIgnore:l,showBlock:h,thread:i}),b("React").createElement(b("MessengerInfoPanelBlockReact.bs").make,{contact:c,isBlocked:d,onBlock:k,onUnblock:m,showBlock:h,thread:i}),b("React").createElement(b("MessengerInfoPanelReportReact.bs").make,{isPage:f,thread:i})]))}c=a;f.make=c}),null);
__d("MessengerContentSearchFunnelLogger",["FunnelLogger","MessengerContentSearchFunnelLoggerConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_NAME,h=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_EVENTS,i=null,j=0,k=0,l=new Set(),m=0,n=0;function a(a,c){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),i=null,j=0,k=0,n=0,l.clear(),m=Date.now(),b("FunnelLogger").startFunnel(g),c&&b("FunnelLogger").addFunnelTag(g,c),b("FunnelLogger").setFunnelTimeout(g,86400),b("FunnelLogger").appendActionWithPayloadIfNew(g,h.INITIATE_CONTENT_SEARCH,babelHelpers["extends"]({query:a},c&&{entry_surface:c}))}function c(a){b("FunnelLogger").appendActionWithPayload(g,h.CHANGE_QUERY,{query:a})}function d(a){b("FunnelLogger").appendActionWithPayload(g,h.THREAD_IMPRESSIONS,{impressionList:a,latency:Date.now()-m})}function f(a,c){b("FunnelLogger").appendActionWithPayload(g,h.LOAD_MORE_THREADS,{impressionList:a,latency:c})}function o(){n+=1}function p(a,c){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),i=a,j=0,n=0,l.clear(),b("FunnelLogger").appendActionWithPayload(g,h.SELECT_THREAD,{thread_id:a,has_results:c})}function q(a){j+=1,k+=1}function r(a,c,d){i=c,l.add(a),b("FunnelLogger").appendActionWithPayload(g,h.LOAD_MESSAGE_IN_THREAD,{latency:d})}function s(a){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),a?b("FunnelLogger").appendActionWithTagAndPayloadIfNew(g,h.END_CONTENT_SEARCH,a,{totalBrowseActions:k}):b("FunnelLogger").appendActionWithPayloadIfNew(g,h.END_CONTENT_SEARCH,{totalBrowseActions:k}),b("FunnelLogger").endFunnel(g)}e.exports={browseMessageInThread:q,endFunnel:s,loadMessageInThread:r,logContextBrowse:o,logChangeQuery:c,logLoadMoreThreads:f,logThreadImpressions:d,logThreadSelect:p,startFunnel:a}}),null);
__d("MessengerThreadSearchIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"22px",width:"22px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"magnifying-glass",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Search"},b("React").createElement("polygon",{id:"Bounding-Box",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-1",d:"M15.499,9.000053 C11.909,9.000053 8.9995,11.9106492 8.9995,15.5009175 C8.9995,19.0911858 11.909,22.0022817 15.499,22.0022817 C19.0885,22.0022817 21.998,19.0911858 21.998,15.5009175 C21.998,11.9106492 19.0885,9.000053 15.499,9.000053 Z M25.4875,28.30874 L21.6335,23.8523894 C21.313,23.482068 20.7755,23.4056049 20.355,23.6574834 C18.934,24.5085729 17.276,25.0023347 15.499,25.0023347 C10.253,25.0023347 6,20.7483865 6,15.5009175 C6,10.2539482 10.253,6 15.499,6 C20.7445,6 24.9975,10.2539482 24.9975,15.5009175 C24.9975,17.2770608 24.5045,18.9357608 23.655,20.3565755 C23.4065,20.7708757 23.491,21.3016197 23.8555,21.6184668 L28.3065,25.4841024 L25.4875,28.30874 Z M28.3065,25.4841024 C29.183,26.2452352 29.231,27.5915859 28.4105,28.4131896 C27.591,29.2352931 26.247,29.1873162 25.4875,28.30874 L28.3065,25.4841024 Z",fill:"#000000"}))));f.icon=a}),null);
__d("MessengerThreadSearchIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"8 8 48 48"},b("React").createElement("title",void 0,"search conversation"),b("React").createElement("circle",{cx:"28",cy:"28",fill:"none",r:"14",stroke:c,strokeMiterlimit:"10",strokeWidth:"2"}),b("React").createElement("path",{clipRule:"evenodd",d:"M50,50L37.9,37.9",fill:"none",fillRule:"evenodd",stroke:c,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})))}f.make=a}),null);
__d("MessengerInfoPanelSearchReact.bs",["ix","cx","fbt","Keys","bs_curry","Image.bs","React","Bootload.bs","asset","Bootloader","bs_belt_Option","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerActions","MessengerURIStore","MessengerCustomColorUtils.bs","MessengerDotComAndInboxM4Check.bs","MessengerThreadSearchIconSVGReact.bs","MessengerContentSearchFunnelLogger","MessengerThreadSearchIconSVGM4React.bs","MessengerContentSearchFunnelLoggerConstants"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableMessengerContentSearchFunnelLogger.bs"],a,"MessengerInfoPanelSearchReact.bs");return 0}c=[a];var j=b("Bootload.bs").Create(c);function k(a,c){b("MessengerContentSearchFunnelLogger").startFunnel(a,b("MessengerContentSearchFunnelLoggerConstants").ENTRY_SURFACES.SEARCH_WITHIN_THREAD);return 0}function l(){var a=b("MessengerURIStore").getState().query;a=a==null;b("MessengerActions").changeQuery(a?"":void 0);return 0}function m(a){var c=b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(b("MessengerURIStore").getState().query),"");a.preventDefault();b("bs_curry")._1(j[0],function(a){return k(c,a)});return l(0)}function n(a){if(a.keyCode===b("Keys").RETURN){a.preventDefault();return l(0)}else return 0}var o=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w":"_3szo",p=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelSearchReact");function q(a,c){return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],function(){return b("React").createElement("div",{className:o,tabIndex:0,onKeyDown:n,onClick:m},b("React").createElement("div",{className:"_3szp"},b("CurrentUser").isWorkUser()?b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("465522"),void 0,void 0,void 0,void 0,[])):b("MessengerDotComAndInboxM4Check.bs").yes?b("React").createElement("div",{className:"_6ybv"},b("MessengerThreadSearchIconSVGM4React.bs").icon):b("MessengerThreadSearchIconSVGReact.bs").make("_6b45",b("MessengerCustomColorUtils.bs").customColorOrBlue(a))),b("React").createElement("div",{className:"_3szq"},i._("Search in Conversation")))},p[9],p[10],p[11],p[12]]}d=b("ReasonReact.bs").wrapReasonForJs(p,function(a){return q(a.thread,[])});e=b("bs_belt_Option").getWithDefault;f.$pipe$unknown=e;f.BootloadableMessengerContentSearchFunnelLogger=c;f.LoadableMessengerContentSearchFunnelLoggerRe=j;f.handleLoggerLoad=k;f.showQuery=l;f.handleSearchThreadClick=m;f.handleSearchThreadKeyDown=n;f.rowClasses=o;f.component=p;f.make=q;f.jsComponent=d}),null);
__d("CustomizeChatColorItemReact.bs",["ReasonReact.bs","CustomizeChatColorItem.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("CustomizeChatColorItem.react"),{theme:a},c)}f.make=a}),null);
__d("MessengerChangeColorDialogReact.bs",["ix","cx","fbt","bs_block","bs_curry","Image.bs","React","bs_string","bs_belt_Array","fbglyph","ReasonReact.bs","AARRGGBBColor.bs","MessengerDialogs.bs","MessengerDialogReact.bs","CustomizeThreadThemeUtil","MessengerDialogBodyReact.bs","CustomizeChatColorItemReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").reducerComponent("MessengerChangeColorDialogReact");function k(a,c,d,e){__p&&__p();var f=function(a){if(a)return 0;else{b("bs_curry")._1(d,0);return b("MessengerDialogs.bs").removeDialog(void 0,0)}};return[j[0],j[1],j[2],j[3],function(a){b("CustomizeThreadThemeUtil").fetchThemesForMessenger(function(c){return b("bs_curry")._1(a[3],b("bs_block").__(1,[c]))});return 0},j[5],j[6],j[7],function(c){var d=c[1][1].length===16,e=b("bs_belt_Array").map(c[1][1],function(e){var f=b("AARRGGBBColor.bs").toHex(e.fallback_color),h=b("bs_string").lowercase(f)===b("bs_string").lowercase(a);return b("React").createElement("div",{key:f,className:(d?"_gs0":"")+(d?"":" _7h5m"),onClick:function(){return b("bs_curry")._1(c[3],b("bs_block").__(0,[e]))}},h?b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make("_gs2",void 0,void 0,void 0,g("140201"),void 0,void 0,void 0,void 0,[])):null,b("ReasonReact.bs").element(void 0,void 0,b("CustomizeChatColorItemReact.bs").make(e,[])))});return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0]("_gs3",f,void 0,c[1][0],void 0,void 0,335,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,i._("Pick a colour for this conversation"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make("_7h5n",[b("React").createElement("div",{className:"_28he"},i._("Everyone in this conversation will see this.")),b("React").createElement("div",{className:"_gs4"},e)])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[]))]))]))},function(){return[!0,[]]},j[10],function(d,e){if(d.tag)return b("bs_block").__(0,[[e[0],d[0]]]);else{var f=d[0];if(b("bs_string").lowercase(b("AARRGGBBColor.bs").toHex(f.fallback_color))!==b("bs_string").lowercase(a))return b("bs_block").__(2,[[!1,e[1]],function(){return b("bs_curry")._1(c,f.id)}]);else return b("bs_block").__(0,[[!1,e[1]]])}},j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.currentColor,a.onSave,a.onClose,[])});c="Unknown Color";f.component=j;f.unknownColor=c;f.make=k;f.jsComponent=a}),null);
__d("MessengerChangeColorIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"-1 -1 47 47"},b("React").createElement("title",void 0,"colors@2x"),b("React").createElement("path",{d:"M912,1569a3,3,0,1,1-3,3A3,3,0,0,1,912,1569Z",fill:c,transform:"translate(-895.5 -1561.5)"}),b("React").createElement("path",{d:"M924,1569a3,3,0,1,1-3,3A3,3,0,0,1,924,1569Z",fill:c,transform:"translate(-895.5 -1561.5)"}),b("React").createElement("path",{d:"M931,1579a3,3,0,1,1-3,3A3,3,0,0,1,931,1579Z",fill:c,transform:"translate(-895.5 -1561.5)"}),b("React").createElement("path",{d:"M905,1579a3,3,0,1,1-3,3A3,3,0,0,1,905,1579Z",fill:c,transform:"translate(-895.5 -1561.5)"}),b("React").createElement("path",{d:"M918,1562a22,22,0,0,0,0,44,3.67,3.67,0,0,0,2.71-6.14,3.65,3.65,0,0,1,2.74-6.09h4.33A12.23,12.23,0,0,0,940,1581.56C940,1570.75,930.15,1562,918,1562Z",fill:"transparent",stroke:c,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4%",transform:"translate(-895.5 -1561.5)"})))}f.make=a}),null);
__d("MessengerInfoPanelCustomColorReact.bs",["cx","fbt","Keys","bs_curry","React","ReasonReact.bs","bs_js_primitive","MessengerColors","MessengerDialogs.bs","MessengerCustomColorUtils.bs","MessengerDotComAndInboxM4Check.bs","MessengerChangeColorDialogReact.bs","MessengerChangeColorIconSVGReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w":"_3szo";function j(a,c){a=c[1][0][0];if(a!==void 0)return b("bs_js_primitive").valFromOption(a).focus();else return 0}function k(a,c){c[1][0][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}var l=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelCustomColorReact");function a(a,c,d){__p&&__p();var e=function(d){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerChangeColorDialogReact.bs").make(b("MessengerCustomColorUtils.bs").customColorOrBlue(a),c,b("bs_curry")._1(d,j),[]))})},f=function(a,b){a.preventDefault();return e(b[0])},g=function(a,c){if(a.keyCode===b("Keys").RETURN){a.preventDefault();return e(c[0])}else return 0};return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],function(c){if(a.customization_enabled)return b("React").createElement("div",{ref:b("bs_curry")._1(c[0],k),className:i,tabIndex:0,onKeyDown:b("bs_curry")._1(c[0],g),onClick:b("bs_curry")._1(c[0],f)},b("React").createElement("div",{className:"_3szp"},b("MessengerDotComAndInboxM4Check.bs").yes?b("React").createElement("div",{className:"_6ymp"},b("React").createElement("div",{className:"_6yme",style:b("MessengerColors").makeLinearGradient(a.gradient_colors,a.solid_color,b("MessengerCustomColorUtils.bs").defaultColor(0))},b("React").createElement("div",{className:"_6ymf"}))):b("MessengerChangeColorIconSVGReact.bs").make("_17vc",b("MessengerCustomColorUtils.bs").customColorOrBlue(a))),b("React").createElement("div",{className:"_3szq"},h._("Change Colour")));else return null},function(){return[[void 0]]},l[10],function(a,b){return 0},l[12]]}f.rowClasses=i;f.handleDialogClose=j;f.setTheRef=k;f.component=l;f.make=a}),null);
__d("MessengerInfoPanelEmojiReact.bs",["ReasonReact.bs","MessengerInfoPanelEmoji.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerInfoPanelEmoji.react"),{thread:a,viewer:c,onChange:d},e)}f.make=a}),null);
__d("MNCommercePromotionManageBlockDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("MNCommercePromotionManageBlockDialogContainer.react").__setRef("MNCommercePromotionManageBlockDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("ShimButtonReact.bs",["ReasonReact.bs","ShimButton.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("ShimButton.react"),{className:b("bs_js_null_undefined").fromOption(a),inline:b("bs_js_null_undefined").fromOption(c),onClick:b("bs_js_null_undefined").fromOption(d)},e)}f.make=a}),null);
__d("MessengerInfoPanelManageMessagesReact.bs",["cx","fbt","React","MercuryIDs","ReasonReact.bs","ShimButtonReact.bs","MessengerParticipants.bs","MNCommerceDialogStateActions","MessengerDotComAndInboxM4Check.bs","MNCommercePromotionManageBlockDialogBootloader.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){a=b("MercuryIDs").getParticipantIDFromFromThreadID(a.thread_id);if(a==null)return!1;else{a=b("MessengerParticipants.bs").getNow(a);if(a==null)return!1;else return a.is_business_enabled}}var j=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w":"_3szo",k=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelManageMessagesReact");function a(a,c,d){var e=function(c){c.preventDefault();c.stopPropagation();b("MNCommerceDialogStateActions").showDialog(b("MNCommercePromotionManageBlockDialogBootloader.react"),{pageID:a.other_user_fbid});return 0};return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],function(){if(i(a))return b("React").createElement("div",{className:j},b("React").createElement("div",{className:"_3szp"}),b("ReasonReact.bs").element(void 0,void 0,b("ShimButtonReact.bs").make("_3szq",!0,e,[h._("Manage Messages")])));else return null},k[9],k[10],k[11],k[12]]}f.isBusinessEnabled=i;f.rowClasses=j;f.component=k;f.make=a}),null);
__d("MessengerStarIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"22px",width:"22px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"star",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("polygon",{id:"Fill-6",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-21",d:"M19.6219314,6.18334915 L21.6937028,12.5865038 C21.7726941,12.8308952 22.000169,12.9968214 22.2566407,12.9968214 L29.2913645,12.9968214 C30.9436822,12.9968214 31.6301065,15.119878 30.2937539,16.0949447 L24.7278681,20.442013 C24.520391,20.5934457 24.4339005,20.8618264 24.5128918,21.1062178 L26.4271806,27.7502654 C26.9376242,29.328564 25.1393227,30.640481 23.8024702,29.6649145 L18.347572,25.5587392 C18.1400949,25.4073065 17.8596259,25.4073065 17.6526487,25.5587392 L12.1972506,29.6649145 C10.8608981,30.640481 9.06259648,29.328564 9.57254022,27.7502654 L11.4873289,21.1062178 C11.5663202,20.8618264 11.4798298,20.5934457 11.2723527,20.442013 L5.70646678,16.0949447 C4.36961428,15.119878 5.05653849,12.9968214 6.70885618,12.9968214 L13.74358,12.9968214 C14.0000517,12.9968214 14.2270267,12.8308952 14.3065179,12.5865038 L16.3782893,6.18334915 C16.888733,4.60555028 19.1114877,4.60555028 19.6219314,6.18334915",fill:"#000000"})));f.icon=a}),null);
__d("MessengerInfoPanelManageReview.react",["cx","fbt","Bootloader","ImmutableObject","MercuryIDs","MessengerDotComAndInboxM4Check.bs","MessengerParticipants.bs","MessengerStarIconSVGM4React.bs","MNCommerceDialogStateActions","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w":"_3szo";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a.preventDefault(),b("Bootloader").loadModules(["MNCommerceReviewDialogContainer.react"],function(a){b("MNCommerceDialogStateActions").showDialog(a,{pageID:d.props.thread.other_user_fbid,onConfirmButtonClick:d.$3})},"MessengerInfoPanelManageReview.react")},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return!this.$1()?null:b("React").createElement(b("ShimButton.react"),{className:i,onClick:this.$2},b("React").createElement("div",{className:"_3szp"},b("MessengerDotComAndInboxM4Check.bs").yes&&b("React").createElement("div",{className:"_6yvp"},b("MessengerStarIconSVGM4React.bs").icon)),b("React").createElement("div",{className:"_3szq"},h._("Rate experience")))};d.$1=function(){var a=b("MercuryIDs").getParticipantIDFromFromThreadID(this.props.thread.thread_id);if(!a)return!1;a=b("MessengerParticipants.bs").getNow(a);return!!(a&&a.accepts_messenger_user_feedback)};d.$3=function(a,c,d){if(c===0)return;b("Bootloader").loadModules(["MessengerPlatformBotReviewWriteDataManager"],function(b){b.review(a,c,d.trim())},"MessengerInfoPanelManageReview.react")};return c}(b("React").PureComponent);c.propTypes={thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired};e.exports=c}),null);
__d("MessengerInfoPanelManageReviewReact.bs",["ReasonReact.bs","MessengerInfoPanelManageReview.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerInfoPanelManageReview.react"),{thread:a,viewer:c},d)}f.make=a}),null);
__d("MessengerEditNicknamesIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"22px",width:"22px",version:"1.1",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"pencil-underline",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Group"},b("React").createElement("mask",{id:"mask-2",fill:"white"},b("React").createElement("polygon",{id:"path-1",points:"0 36 36 36 36 0 0 0"})),b("React").createElement("g",{id:"Clip-4"}),b("React").createElement("path",{id:"Fill-1",d:"M18.3042,15.77345 L12.9857,26.39495 C12.7662,26.83245 12.4477,27.21345 12.0552,27.50745 L8.2607,30.34495 C7.7407,30.73395 6.9992,30.36245 6.9992,29.71245 L6.9992,24.98495 C6.9992,24.49545 7.1137,24.01295 7.3332,23.57495 L12.6547,12.94745 C12.8522,12.55245 13.3322,12.39195 13.7272,12.58995 L17.9467,14.69895 C18.3422,14.89645 18.5022,15.37795 18.3042,15.77345 Z M19.9172,12.55245 C19.7192,12.94745 19.2392,13.10745 18.8442,12.90995 L14.6247,10.80095 C14.2292,10.60295 14.0692,10.12145 14.2667,9.72595 L15.4537,7.35495 C16.2287,5.80595 18.0962,5.05145 19.6687,5.77695 C21.2937,6.52695 21.9652,8.46245 21.1697,10.04895 L19.9172,12.55245 Z M28.9882,29.66445 C28.9082,30.15645 28.4462,30.49645 27.9477,30.49645 L12.4167,30.49645 C12.0117,30.49645 11.8392,29.98145 12.1632,29.73845 L13.2767,28.90095 C13.6257,28.63845 14.0507,28.49645 14.4877,28.49645 L28.0012,28.49645 C28.6087,28.49645 29.0902,29.03795 28.9882,29.66445 Z",fill:"#000000",mask:"url(#mask-2)"}))));f.icon=a}),null);
__d("MessengerEditNicknamesIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"0 0 38 37.01"},b("React").createElement("title",void 0,"nicknames"),b("React").createElement("path",{d:"M899,1204h38v2H899v-2Z",fill:c,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),b("React").createElement("path",{d:"M927.57,1172.17l-22.32,22.36-0.72,5,5-.72,22.32-22.36ZM908.8,1196.6l-1.41-1.41L929,1173.61l1.41,1.41Z",fill:c,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),b("React").createElement("path",{d:"M932.93,1175.36l2.07-2.13a6,6,0,0,0-1.33-3,5.72,5.72,0,0,0-2.91-1.28l-2.07,2.13Z",fill:c,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"})))}f.make=a}),null);
__d("MessengerInfoPanelNicknamesReact.bs",["ix","cx","fbt","Keys","bs_curry","Image.bs","React","asset","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerDialogs.bs","MessengerCustomColorUtils.bs","MessengerDotComAndInboxM4Check.bs","MessengerEditNicknamesDialogReact.bs","MessengerEditNicknamesIconSVGReact.bs","MessengerEditNicknamesIconSVGM4React.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,c){a=c[1][0][0];if(a!==void 0)return b("bs_js_primitive").valFromOption(a).focus();else return 0}function k(a,c){c[1][0][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}var l=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w":"_3szo",m=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelNicknamesReact");function a(a,c,d,e,f){__p&&__p();var h=function(f){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerEditNicknamesDialogReact.bs").make(a,c,e,b("bs_curry")._1(f[0],j),d,[]))})},n=function(a,b){a.preventDefault();return h(b)},o=function(a,c){if(a.keyCode===b("Keys").RETURN){a.preventDefault();return h(c)}else return 0};return[m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],function(a){if(c.customization_enabled)return b("React").createElement("div",{ref:b("bs_curry")._1(a[0],k),className:l,role:"button",tabIndex:0,onKeyDown:b("bs_curry")._1(a[0],o),onClick:b("bs_curry")._1(a[0],n)},b("React").createElement("div",{className:"_3szp"},b("CurrentUser").isWorkUser()?b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("461749"),void 0,void 0,void 0,void 0,[])):b("MessengerDotComAndInboxM4Check.bs").yes?b("React").createElement("div",{className:"_6y56"},b("MessengerEditNicknamesIconSVGM4React.bs").icon):b("MessengerEditNicknamesIconSVGReact.bs").make("_5odt",b("MessengerCustomColorUtils.bs").customColorOrBlue(c))),b("React").createElement("div",{className:"_3szq"},i._("Edit Nicknames")));else return null},function(){return[[void 0]]},m[10],function(a,b){return 0},m[12]]}f.handleDialogClose=j;f.setHandleRef=k;f.rowClasses=l;f.component=m;f.make=a}),null);
__d("MessengerInfoPanelThreadOptionsContainerReact.bs",["fbt","bs_block","bs_curry","gkx","Bootload.bs","QE2Logger","Bootloader","ReasonReact.bs","bs_js_primitive","MessengerConfig","MercuryThreadInfo","MessageRequestUtils","MercuryThreadActions","MessengerAdminGroupUtils","MessengerInfoPanelEmojiReact.bs","MessengerInfoPanelSearchReact.bs","MessengerDotComAndInboxM4Check.bs","MessengerInfoPanelSectionReact.bs","MessengerInfoPanelNicknamesReact.bs","MessengerMuteButtonContainerReact.bs","MessagingThreadCustomizationSource","MessengerInfoPanelCustomColorReact.bs","MessengerInfoPanelManageReviewReact.bs","MessengerInfoPanelManageMessagesReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableMessengerInfoPanelPinningThreadReact.bs"],a,"MessengerInfoPanelThreadOptionsContainerReact.bs");return 0}c=[a];var h=b("Bootload.bs").Create(c),i=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelThreadOptionsContainerReact");function j(a,c){return b("bs_curry")._1(a[3],[c])}function k(a,c,d){b("QE2Logger").logExposureForUser("messenger_pin_threads_universe",d);a=a[1][0];if(a!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(a[2],c,d,[]));else return null}function l(a,c,d,e,f,l){__p&&__p();var m=function(c,a){if(b("MercuryThreadInfo").isEmptyLocalThread(d))return 0;else{b("MercuryThreadActions").getForFBID(e).changeThreadTheme(d.thread_id,c,"SETTINGS");return 0}},n=function(c,a){if(b("MercuryThreadInfo").isEmptyLocalThread(d))return 0;else{b("MercuryThreadActions").getForFBID(e).changeThreadEmoji(d.thread_id,c,b("MessagingThreadCustomizationSource").SETTINGS);return 0}},o=function(c,a){if(b("MercuryThreadInfo").isEmptyLocalThread(d))return 0;else{b("MercuryThreadActions").getForFBID(e).changeThreadNicknames(d.thread_id,c[0],c[1],b("MessagingThreadCustomizationSource").SETTINGS);return 0}};return[i[0],i[1],i[2],i[3],function(a){if(b("MessengerConfig").MPT>0)return b("bs_curry")._1(h[0],function(b){return j(a,b)});else return 0},i[5],i[6],i[7],function(h){if(!d.is_subscribed||b("MessageRequestUtils").isMessageRequest(d))return null;else{var i=b("MessengerAdminGroupUtils").canUpdateThreadCustomization(d,e),j=i?b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelCustomColorReact.bs").make(d,b("bs_curry")._1(h[0],m),[])):null;i=i?b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelEmojiReact.bs").make(d,e,b("bs_curry")._1(h[0],n),[])):null;var l=b("gkx")("860320");return b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").nullable_to_opt(d.solid_color),!0,a,f,g._("Options"),[l?null:b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelSearchReact.bs").make(d,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelNicknamesReact.bs").make(c,d,e,b("bs_curry")._1(h[0],o),[])),j,i,b("MessengerDotComAndInboxM4Check.bs").yes?null:b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelManageMessagesReact.bs").make(d,e,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelManageReviewReact.bs").make(d,e,[])),b("MessengerDotComAndInboxM4Check.bs").yes?null:b("ReasonReact.bs").element(void 0,void 0,b("MessengerMuteButtonContainerReact.bs").make(d,e,[])),k(h,d,e)]))}},function(){return[void 0]},i[10],function(c,a){return b("bs_block").__(0,[[c[0]]])},i[12]]}d=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return l(a.isCollapsed,a.participants,a.thread,a.viewer,a.onToggle,[])});f.BootloadableMessengerInfoPanelPinningThreadReact=c;f.LoadableMessengerInfoPanelPinningThreadReact=h;f.component=i;f.handleLoadMessengerOnlyChangePhoneNumberRowReact=j;f.renderMessengerInfoPanelPinningThread=k;f.make=l;f.jsComponent=d}),null);
__d("FBClipboardLinkReact.bs",["bs_js_primitive","ReasonReactCompat.bs","FBClipboardLink.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();return function(){__p&&__p();var n={value:e};c!==void 0&&(n.className=b("bs_js_primitive").valFromOption(c));d!==void 0&&(n.label=b("bs_js_primitive").valFromOption(d));f!==void 0&&(n.tooltip=b("bs_js_primitive").valFromOption(f));g!==void 0&&(n.tooltipSuccess=b("bs_js_primitive").valFromOption(g));h!==void 0&&(n.tooltipSuccessDuration=b("bs_js_primitive").valFromOption(h));i!==void 0&&(n.onComplete=b("bs_js_primitive").valFromOption(i));j!==void 0&&(n.position=b("bs_js_primitive").valFromOption(j));k!==void 0&&(n.alignment=b("bs_js_primitive").valFromOption(k));l!==void 0&&(n.stopPropagation=b("bs_js_primitive").valFromOption(l));m!==void 0&&(n.preventDefaultOnClick=b("bs_js_primitive").valFromOption(m));a!==void 0&&(n.key=b("bs_js_primitive").valFromOption(a));return n}}function a(a,c,d,e,f,h,i,j,k,l,m,n){return b("ReasonReactCompat.bs").wrapReactForReasonReact(b("FBClipboardLink.react"),g(void 0,a,c,d,e,f,h,i,j,k,l,m)(0),n)}f.componentProps=g;f.make=a}),null);
__d("WorkChatActivityTypedLogger.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();switch(a){case 0:return"group_sync_new_post_button_click";case 1:return"notifs_jewel_links_click";case 2:return"nav_tab_click";case 3:return"info_panel_profile_link_click";case 4:return"notifs_jewel_click";case 5:return"info_panel_group_sync_top_link_click";case 6:return"info_panel_group_sync_about_link_click";case 7:return"info_panel_group_sync_posts_link_click";case 8:return"info_panel_group_sync_saved_link_click";case 9:return"info_panel_group_sync_events_link_click"}}f.string_of_event=a}),null);
__d("MessengerInfoPanelWorkContextContainerReact.bs",["cx","fbt","bs_block","bs_curry","React","LinkReact.bs","ReasonReact.bs","bs_js_primitive","FBClipboardLinkReact.bs","SubscriptionsHandler","WorkChatActivityTypedLogger.bs","WorkChatActivityTypedLogger","MercuryWorkContextInformation","MessengerInfoPanelSectionReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryWorkContextInformation").get(),j=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelWorkContextContainerReact"),k={phone:void 0,email:void 0,location:void 0};function l(a,c,d,e,f){__p&&__p();return[j[0],j[1],j[2],function(){var a=c.other_user_fbid;if(a==null)return k;else{a=i.getOrFetch(a);if(a==null)return k;else return a}},function(a){var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("MercuryWorkContextInformation").addListener("change",function(){return b("bs_curry")._1(a[3],0)}));b("bs_curry")._1(a[4],function(){c.release();return 0});return b("bs_curry")._1(a[3],0)},j[5],j[6],j[7],function(f){__p&&__p();var g=f[1].phone,i=f[1].email,j=f[1].location;if(g==null&&i==null&&j==null)return null;else g=1;if(g===1){i=f[1].phone;j=f[1].email;g=f[1].location;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").nullable_to_opt(c.solid_color),!0,a,d,h._("About"),[b("React").createElement("table",{className:"_2dwl",style:{tableLayout:"fixed"}},b("React").createElement("tbody",void 0,i==null?null:b("React").createElement("tr",void 0,b("React").createElement("td",void 0,h._("Phone number")),b("React").createElement("td",void 0,i)),j==null?null:b("React").createElement("tr",void 0,b("React").createElement("td",void 0,h._("Email address")),b("React").createElement("td",void 0,b("ReasonReact.bs").element(void 0,void 0,b("FBClipboardLinkReact.bs").make("_7cys",j,j,h._("Click to copy"),h._("Copied"),void 0,void 0,void 0,void 0,void 0,void 0,[])))),g==null?null:b("React").createElement("tr",void 0,b("React").createElement("td",void 0,h._("Location")),b("React").createElement("td",void 0,g)))),b("React").createElement("div",{className:"_3-8z"},b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,"_2dwm",void 0,void 0,void 0,void 0,void 0,e,void 0,function(){new(b("WorkChatActivityTypedLogger"))().setEvent(b("WorkChatActivityTypedLogger.bs").string_of_event(3)).log();return 0},void 0,void 0,void 0,void 0,void 0,void 0,"_blank",void 0,h._("View profile"))))]))}},function(){return{phone:void 0,email:void 0,location:void 0}},j[10],function(a,d){a=c.other_user_fbid;if(a==null)return 0;else{d=i.getOrFetch(a);if(d==null)return 0;else return b("bs_block").__(0,[d])}},j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return l(a.isCollapsed,a.thread,a.onToggle,a.href,[])});f.mercuryWorkContextInformation=i;f.component=j;f.nullInfo=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerSharedFileReact.bs",["cx","React","LinkReact.bs","ReasonReact.bs","joinClasses","MercuryAttachment"],(function(a,b,c,d,e,f,g){"use strict";var h=b("ReasonReact.bs").statelessComponent("MessengerSharedFile");function a(a,c,d,e){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var e=b("MercuryAttachment").getAttachIconClassByMime(d);return b("React").createElement("li",{className:"_2a42"},b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,b("joinClasses")("_2a43",e),void 0,void 0,void 0,void 0,void 0,c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"_blank",void 0,[b("React").createElement("div",{className:"_2a44"},b("React").createElement("i",{className:"img"}),b("React").createElement("span",{className:"_2a45 _fy2"},a))])))},h[9],h[10],h[11],h[12]]}f.component=h;f.make=a}),null);
__d("MessengerThreadSharedFilesWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2150199688342867"};b.getQueryID=function(){return"1887039681373281"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerSharedFilesReact.bs",["cx","fbt","bs_block","bs_curry","React","bs_js_json","bs_caml_obj","LinkReact.bs","bs_caml_array","WebGraphQL","ReasonReact.bs","promiseDone","bs_js_primitive","bs_js_null_undefined","MercuryAttachment","MercuryMessageStore","MessengerSpinnerReact.bs","MessengerSharedFileReact.bs","MessengerInfoPanelSectionReact.bs","MessengerThreadSharedFilesWebGraphQLQuery"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){__p&&__p();a=a.message_thread;if(a==null)return!1;else{a=a.message_shared_media;if(a==null)return!1;else{a=a.page_info;if(a==null)return!1;else{a=a.has_next_page;if(a==null)return!1;else return a}}}}function j(a){a=a.page_info;if(a==null)return!1;else{a=a.end_cursor;return!(a==null)}}a=b("React").createElement("div",{className:"_omn"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,"gray",void 0,[])));var k=b("ReasonReact.bs").reducerComponent("MessengerSharedFilesReact");function l(a,c,d,e,f){__p&&__p();var g=function(a,d){if(c!==void 0){b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerThreadSharedFilesWebGraphQLQuery"))({threadFBID:c,count:b("bs_js_null_undefined").fromOption(a)})),function(a){return b("bs_curry")._1(d[3],[a])},void 0);return 0}else return 0},l=function(a,c){__p&&__p();a=c[1][1];var d=c[1][2];if(a||d===void 0)return 0;else{a=b("bs_js_primitive").valFromOption(d).message_thread;if(a==null)return 0;else{d=a.message_shared_media;if(d==null)return 0;else{a=d.edges.length;if(a>0){b("bs_curry")._1(c[3],0);return g(a+10|0,c)}else return 0}}}},m=function(a,c){__p&&__p();return a.subscribe(function(a){__p&&__p();var d=a.eventType,e=d===b("MercuryMessageStore").MESSAGES_RECEIVED;d=d===b("MercuryMessageStore").MESSAGES_CHANGED;a=a.messages;if(a.length!==0&&(e||d))e=1;else return 0;if(e===1){d=b("bs_caml_array").caml_array_get(a,a.length-1|0);e=d.attachments;a=e==null?!1:e.some(function(a){return b("MercuryAttachment").isFileAttachment(a)});if(a){var f=setTimeout(function(){return g(void 0,c)},1e3);return b("bs_curry")._1(c[4],function(){clearTimeout(f);return 0})}else return 0}})},n=function(a){if(a[1][1])return b("React").createElement("div",{className:"_2n20"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,"gray",void 0,[])));else return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,"_3oh- _fy2 _2wjv",void 0,void 0,void 0,void 0,void 0,void 0,void 0,b("bs_curry")._1(a[0],l),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[h._("Show all...")]))},o=function(a,c){__p&&__p();a=a.edges;var d=c[1][0];d=d?n(c):null;return b("React").createElement("ul",{className:"_2o39"},a.map(function(c){__p&&__p();c=c.node;if(c==null)return null;else{var a=c.filename,d=c.legacy_attachment_id,e=c.mimetype;c=c.url;if(a==null||d==null||e==null||c==null)return null;else{c=b("bs_js_json").decodeString(c);if(c!==void 0)return b("ReasonReact.bs").element(d,void 0,b("MessengerSharedFileReact.bs").make(a,c,e,[]));else return null}}}),d)};return[k[0],k[1],k[2],function(a){return[a[0],a[1],a[2],c]},function(c){g(void 0,c);var d=new(b("MercuryMessageStore"))(a);m(d,c);return b("bs_curry")._1(c[4],function(){d.destroy();return 0})},function(a){a=a[0];if(b("bs_caml_obj").caml_notequal(a[1][3],c))return b("bs_curry")._1(a[3],1);else return 0},k[6],k[7],function(a){__p&&__p();var f=a[1][2];if(f!==void 0&&c!==void 0&&c!==""){f=b("bs_js_primitive").valFromOption(f).message_thread;if(f==null)return null;else{f=f.message_shared_media;if(!(f==null)&&j(f))return b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelSectionReact.bs").make(void 0,!0,d,e,h._("Shared files"),[o(f,a)]));else return null}}else return null},function(){return[!1,!1,void 0,c]},k[10],function(a,c){if(typeof a==="number")if(a!==0)return b("bs_block").__(2,[[c[0],c[1],void 0,c[3]],function(a){return g(void 0,a)}]);else return b("bs_block").__(0,[[c[0],!0,c[2],c[3]]]);else{a=a[0];return b("bs_block").__(0,[[i(a),!1,b("bs_js_primitive").some(a),c[3]]])}},k[12]]}c=b("ReasonReact.bs").wrapReasonForJs(k,function(a){return l(a.threadID,b("bs_js_primitive").nullable_to_opt(a.threadFBID),a.isCollapsed,a.onToggle,[])});f.hasNextPage=i;f.hasFiles=j;f.spinner=a;f.component=k;f.make=l;f.jsComponent=c}),null);
__d("MessengerThreadSharedLinksWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2289069757800221"};b.getQueryID=function(){return"498775913895223"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerSharedLinks.react",["cx","fbt","Image.react","Layout.react","LayoutColumn.react","LayoutFillColumn.react","Link.react","MercuryMessageStore","MercuryThreadTimestampReact.bs","MercuryTimestamp","MessengerInfoPanelSectionReact.bs","MessengerSpinner.react","MessengerThreadSharedLinksWebGraphQLQuery","React","URI","WebGraphQL","clearTimeout","gkx","isLinkshimURI","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("MercuryThreadTimestampReact.bs").jsComponent,j=b("MessengerInfoPanelSectionReact.bs").jsComponent,k=5,l=36;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=!1,c.state={canShowMore:!1,isFetchingMore:!1,fetchCount:k,messageThread:null},c.$8=function(){c.$4(c.state.fetchCount+k)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$3=!0,this.$4(this.state.fetchCount),this.$5(this.props.threadID)};d.componentWillUnmount=function(){this.$2&&(b("clearTimeout")(this.$2),delete this.$2),this.$1&&this.$1.destroy(),this.$3=!1};d.componentDidUpdate=function(a,b){var c=this;a.threadFBID!==this.props.threadFBID&&this.setState({messageThread:null,fetchCount:k},function(){c.$4(c.state.fetchCount)})};d.render=function(){var a=this,c;if(!b("gkx")("678615"))return null;c=(c=this.state.messageThread)!=null?(c=c.shared_links)!=null?c.length:c:c;return!this.props.threadFBID||!this.state.messageThread||!this.state.messageThread.shared_links||c==null||c==0?null:b("React").createElement(j,{isCollapsible:!0,isCollapsed:this.props.isCollapsed,customColor:this.props.customColor,onToggle:this.props.onToggle,title:h._("Shared links")},b("React").createElement("div",{className:"_2wjt"},this.state.messageThread.shared_links.map(function(b,c){return a.$6(b,c)}),this.$7()))};d.$4=function(a){__p&&__p();var c=this;if(!this.$3)return;var d=this.props.threadFBID;if(!d)return;this.setState({isFetchingMore:!0});b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerThreadSharedLinksWebGraphQLQuery"))({threadFBID:d,count:a})),function(b){var d;if(!c.$3)return!1;var e=(d=b.message_thread)!=null?(d=d.shared_links)!=null?d.length:d:d;c.setState(function(c){return{messageThread:b.message_thread,canShowMore:e?e>=a:!1,isFetchingMore:!1,fetchCount:a}})})};d.$5=function(a){__p&&__p();var c=this;this.$1=new(b("MercuryMessageStore"))(a);this.$1.subscribe(function(a){if(a.messages.length<1)return;var d=a.eventType==b("MercuryMessageStore").MESSAGES_RECEIVED,e=a.eventType==b("MercuryMessageStore").MESSAGES_CHANGED;if(!d&&!e)return;d=a.messages[a.messages.length-1];d.attachments&&d.attachments.length>0&&(c.$2=b("setTimeout")(function(){delete c.$2,c.$4(c.state.fetchCount)},1e3))})};d.$6=function(a,c){var d=a.media&&a.media.image&&a.media.image.uri?b("React").createElement(b("LayoutColumn.react"),null,b("React").createElement(b("Image.react"),{className:"_2wjy",src:a.media.image.uri,style:{height:l,width:l}})):null,e=null;a.sharer&&a.sharer.name?e=b("React").createElement("div",{className:"_2wj_"},h._("Sent by {sender_name}",[h._param("sender_name",a.sharer.name)])):a.description&&a.description.text?e=b("React").createElement("div",{className:"_2wj_"},a.description.text):e=b("React").createElement("div",{className:"_2wj_"},this.$9(a.url));return b("React").createElement("li",{key:c},b("React").createElement(b("Link.react"),{className:"_2pit _2wju",style:{color:this.props.customColor},target:"_blank",href:a.url},b("React").createElement(b("Layout.react"),{className:"_2wjz clearfix"},d,b("React").createElement(b("LayoutFillColumn.react"),{className:"_653d _159d"},b("React").createElement("div",{className:"_2wj-"},a.title_with_entities.text),e),b("React").createElement(b("LayoutColumn.react"),null,a.creation_time?this.$10(a.creation_time*1e3):null))))};d.$10=function(a){return b("React").createElement(i,{className:"_1ht7 _159e",time:a,title:b("MercuryTimestamp").getAbsoluteTimestamp(a),text:b("MercuryTimestamp").getRelativeTimestamp(a)})};d.$9=function(a){if(a==null)return"";var c=new(b("URI"))(a);if(!b("isLinkshimURI")(c))return a;c=c.getQueryData().u;return!c?a:c};d.$7=function(){if(!this.state.canShowMore)return null;return this.state.isFetchingMore?b("React").createElement("div",{className:"_2n20"},b("React").createElement(b("MessengerSpinner.react"),{color:"gray"})):b("React").createElement(b("Link.react"),{className:"_3oh- _fy2 _2wjv",onClick:this.$8},h._("Show more..."))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerSharedPhotosAlbumViewContainerReact.bs",["ReasonReact.bs","MessengerSharedPhotosAlbumViewContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerSharedPhotosAlbumViewContainer.react"),{onClick:a,onCloseSharedPhotos:c,threadID:d,viewedPhoto:e},[])}f.make=a}),null);
__d("MessengerSharedPhotosVideosData.bs",["bs_curry","bs_js_dict","bs_belt_Array","bs_js_primitive","MessengerThreadSharedMediaHelper","MessengerSharedPhotosVideosBaseData.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){a=b("bs_belt_Array").get(b("bs_js_dict").values(a),0);if(a!==void 0){a=b("bs_js_primitive").valFromOption(a);if(a==null)return void 0;else return b("bs_js_primitive").some(a.message_shared_media)}}function h(a,c,d,e){__p&&__p();a=g(a);if(a!==void 0){a=b("bs_js_primitive").valFromOption(a);var f=d[0];f=f[1];f=[1,f];d=d[1];if(d!==void 0){d=d;var h=a.edges;h=h.length!==0?[f,[h.concat(d[0]),a.page_info.start_cursor,d[2],a.page_info.has_next_page]]:[f,[d[0],d[1],d[2],a.page_info.has_next_page]]}else h=[f,[a.edges,a.page_info.start_cursor,a.page_info.end_cursor,a.page_info.has_next_page]];b("MessengerSharedPhotosVideosBaseData.bs").set(e,h);return b("bs_curry")._1(c,0)}else return 0}function i(a,c,d,e){__p&&__p();a=g(a);if(a!==void 0){a=b("bs_js_primitive").valFromOption(a);var f=d[0];f=f[0];f=[f,1];d=d[1];if(d!==void 0){d=d;var h=a.edges;h=h.length!==0?[f,[d[0].concat(h),d[1],a.page_info.end_cursor,a.page_info.has_next_page]]:[f,[d[0],d[1],d[2],a.page_info.has_next_page]]}else h=[f,[a.edges,a.page_info.start_cursor,a.page_info.end_cursor,a.page_info.has_next_page]];b("MessengerSharedPhotosVideosBaseData.bs").set(e,h);return b("bs_curry")._1(c,0)}else return 0}function j(a,c,d,e,f,g,h){__p&&__p();var j=a[0];j=[j[0],0];a=a[1];j=[j,a];b("MessengerSharedPhotosVideosBaseData.bs").set(c,j);b("bs_curry")._1(h,0);b("MessengerThreadSharedMediaHelper").loadMorePrevious(d,f!==void 0?b("bs_js_primitive").valFromOption(f):void 0,e,function(a){var d=b("MessengerSharedPhotosVideosBaseData.bs").get(c);if(d!==void 0)return i(a,g,d,c);else return 0});return 0}function k(a,c,d,e,f,g,i){__p&&__p();var j=a[0];j=[0,j[1]];a=a[1];j=[j,a];b("MessengerSharedPhotosVideosBaseData.bs").set(c,j);b("bs_curry")._1(i,0);b("MessengerThreadSharedMediaHelper").loadMoreLatest(d,f!==void 0?b("bs_js_primitive").valFromOption(f):void 0,e,function(a){var d=b("MessengerSharedPhotosVideosBaseData.bs").get(c);if(d!==void 0)return h(a,g,d,c);else return 0});return 0}function a(a,c,d,e,f){__p&&__p();var g=b("MessengerSharedPhotosVideosBaseData.bs").get(d);if(g!==void 0){g=g;if(g[0][0]){var h=g[1];if(h!==void 0){h=h;if(h[0].length!==0)return k(g,d,c,a,h[1],e,f);else h=1}else h=1;if(h===1)return j(g,d,c,a,void 0,e,f)}else return 0}else return j([[1,1],void 0],d,c,a,void 0,e,f)}function c(a,c,d,e,f){__p&&__p();var g=b("MessengerSharedPhotosVideosBaseData.bs").get(d);if(g!==void 0){g=g;if(g[0][1]){var h=g[1];if(h!==void 0){h=h;if(h[3])if(h[0].length!==0)return j(g,d,c,a,h[2],e,f);else h=1;else return 0}else h=1;if(h===1)return j(g,d,c,a,void 0,e,f)}else return 0}else return j([[1,1],void 0],d,c,a,void 0,e,f)}d=b("MessengerSharedPhotosVideosBaseData.bs").data;e=b("MessengerSharedPhotosVideosBaseData.bs").get;var l=b("MessengerSharedPhotosVideosBaseData.bs").set,m=b("MessengerSharedPhotosVideosBaseData.bs").localRemove;f.data=d;f.get=e;f.set=l;f.localRemove=m;f.convertPayload=g;f.onFetchNewerDone=h;f.onFetchOlderDone=i;f.mutateDataThenLoadMoreFromRecentToOld=j;f.mutateDataThenLoadMoreFromOldToRecent=k;f.fetchNewer=a;f.fetchOlder=c}),null);
__d("SpotlightMessengerSharedMediaViewerContainerReact.bs",["ReasonReact.bs","SpotlightMessengerSharedMediaViewerContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h){return b("ReasonReact.bs").wrapJsForReason(b("SpotlightMessengerSharedMediaViewerContainer.react"),{onClosePhotoView:a,openAlbum:c,photoID:d,rootClassName:e,threadID:f,disableForward:g},[])}f.make=a}),null);
__d("SpotlightViewerReact.bs",["ReasonReact.bs","SpotlightViewer"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("SpotlightViewer"),{className:a,onHide:c,open:d},e)}f.make=a}),null);
__d("MessengerSharedPhotosReact.bs",["cx","fbt","bs_block","bs_curry","React","bs_caml_obj","bs_belt_Array","MercuryIDs","ReasonReact.bs","bs_js_primitive","MercuryActionType","MercuryAttachment","MercuryDispatcher","SphericalPhotoUtils","MercuryPayloadSource","SpotlightViewerReact.bs","MessengerSpinnerReact.bs","MessengerSharedPhotoReact.bs","MessengerInfoPanelSectionReact.bs","MessengerSharedPhotosVideosData.bs","MessengerSharedPhotosAlbumViewContainerReact.bs","SpotlightMessengerSharedMediaViewerContainerReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("React").createElement("div",{className:"_4dfu"}),j=b("ReasonReact.bs").reducerComponent("MessengerSharedPhotosReact");function k(a,c,d,e,f,g,k,l){__p&&__p();var m=function(a){__p&&__p();var f=b("MessengerSharedPhotosVideosData.bs").get(g);if(k!==void 0){var h=b("bs_js_primitive").valFromOption(k);if(f!==void 0)if(f[0][1]&&!(e||!b("bs_curry")._1(c,0)||b("bs_curry")._1(d,0)===0))return b("MessengerSharedPhotosVideosData.bs").fetchOlder(12,h,g,function(){return b("bs_curry")._1(a[3],0)},function(){return b("bs_curry")._1(a[3],0)});else return 0;else return b("MessengerSharedPhotosVideosData.bs").fetchOlder(12,h,g,function(){return b("bs_curry")._1(a[3],0)},function(){return b("bs_curry")._1(a[3],0)})}else return 0};return[j[0],j[1],j[2],j[3],function(c){__p&&__p();var d=b("MercuryDispatcher").getForFBID(a),e=d.subscribe("update-messages",function(a,d){__p&&__p();if(d==null||d.payload_source!==b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)return 0;else{a=d.actions;if(a.length!==1)return 0;else{d=a[0];a=d.thread_id;var e=b("MercuryIDs").getThreadFBIDFromThreadID(a),f=d.attachments;if(!(f==null)){var g=f.some(function(a){if(b("MercuryAttachment").isPhotoAttachment(a))return!0;else return b("MercuryAttachment").isVideoAttachment(a)});g&&(a==null||b("MessengerSharedPhotosVideosData.bs").fetchNewer(Math.max(f.length,10),e,a,function(){return b("bs_curry")._1(c[3],0)},function(){return b("bs_curry")._1(c[3],0)}))}if(b("bs_caml_obj").caml_equal(d.action_type,b("MercuryActionType").REMOVE_MESSAGE)){g=d.messageId;f=d.thread_id;g==null||(f==null||b("bs_curry")._1(c[3],0))}if(b("bs_caml_obj").caml_equal(d.action_type,b("MercuryActionType").DELETE_MESSAGES)){e=d.message_ids;a=d.thread_id;if(!(e==null)&&!(a==null))return b("bs_curry")._1(c[3],0);else return 0}else return 0}}});b("bs_curry")._1(c[4],function(){e.unsubscribe();return 0});return m(c)},function(a){return m(a[0])},j[6],j[7],function(a){__p&&__p();var c=b("MessengerSharedPhotosVideosData.bs").get(g);if(k!==void 0&&c!==void 0){var d=c[1];if(d!==void 0&&d[0].length!==0){d=c;c=d[1];d=d[0][1];var j=b("bs_js_primitive").valFromOption(k),l=a[1][1];l=l!==void 0?b("ReasonReact.bs").element(void 0,void 0,b("SpotlightMessengerSharedMediaViewerContainerReact.bs").make(function(){return b("bs_curry")._1(a[3],1)},function(c){return b("bs_curry")._1(a[3],b("bs_block").__(0,[c]))},b("bs_js_primitive").valFromOption(l),"",j,!1,[])):null;var m=a[1][0];j=m!==void 0?b("ReasonReact.bs").element(void 0,"spotlightViewer",b("SpotlightViewerReact.bs").make("_3ode",function(){return b("bs_curry")._1(a[3],2)},!0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerSharedPhotosAlbumViewContainerReact.bs").make(function(c){return b("bs_curry")._1(a[3],b("bs_block").__(1,[c]))},function(){return b("bs_curry")._1(a[3],2)},j,b("bs_js_primitive").valFromOption(m),[]))])):null;m=h._("Shared Photos");var n=b("React").createElement("div",{className:"_7jxv"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,void 0,void 0,[])));return b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelSectionReact.bs").make(void 0,!0,e,f,m,[l,j,b("React").createElement("div",{className:"_40jj _5l-3"},b("bs_belt_Array").map(c[0],function(e){__p&&__p();var c=e.node.image;c=c==null?["_3m31 _ooh",void 0]:["_3m31",c.uri];var f=c[1];e=e.node;var g=e.photo_encodings,d;if(g==null||g.length===0)d=[!1,f];else{g=b("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings(g).smallThumbnail;f=g==null?f:g;d=[!0,f]}return b("ReasonReact.bs").element(e.legacy_attachment_id,void 0,b("MessengerSharedPhotoReact.bs").make(c[0],e.legacy_attachment_id,function(c){return b("bs_curry")._1(a[3],b("bs_block").__(2,[c]))},d[1],d[0],[]))})),d?null:n,d&&!c[3]?i:null]))}else return null}else return null},function(){return[void 0,void 0]},j[10],function(a,c){if(typeof a==="number")switch(a){case 0:return b("bs_block").__(0,[c]);case 1:return b("bs_block").__(0,[[c[0],void 0]]);case 2:return b("bs_block").__(0,[[void 0,c[1]]])}else switch(a.tag|0){case 0:return b("bs_block").__(0,[[b("bs_js_primitive").some(a[0]),void 0]]);case 1:return b("bs_block").__(0,[[void 0,b("bs_js_primitive").some(a[0])]]);case 2:return b("bs_block").__(0,[[c[0],b("bs_js_primitive").some(a[0])]])}},j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.viewer,a.getIsScrolledToBottom,a.getScrollableHeight,a.isCollapsed,a.onToggle,a.threadID,b("bs_js_primitive").nullable_to_opt(a.threadFBID),[])});f.endOfMediaIndicator=i;f.component=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerThreadInfoPanelScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={prevHeight:-1,prevIsScrolledToBottom:!1},d.$1=null,d.isScrolledToBottom=function(){if(d.refs.scrollable)return d.refs.scrollable.isScrolledToBottom();else return!0},d.getHeight=function(){if(d.refs.scrollable)return b("ReactDOM").findDOMNode(d.refs.scrollable).offsetHeight;else return 0},d.$2=function(){var a=d.isScrolledToBottom(),b=d.getHeight();(d.state.prevIsScrolledToBottom!==a||d.state.prevHeight!==b)&&d.setState({prevHeight:b,prevIsScrolledToBottom:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement(b("MessengerFlexArea.react"),{className:this.props.className,onResize:this.$2},b("React").createElement(b("MessengerScrollableArea.react"),{height:"100%",onScroll:this.$2,ref:"scrollable"},this.props.children(this.state.prevHeight,this.state.prevIsScrolledToBottom,this.isScrolledToBottom,this.getHeight)))};return c}(b("React").Component);c.propTypes={children:a.func.isRequired};e.exports=c}),null);
__d("WorkChatEditGroupThreadDescriptionDialogReact.bs",["cx","fbt","bs_curry","bs_string","ReasonReact.bs","bs_js_primitive","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","MessengerTextWithEmojiInputReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("WorkChatEditGroupThreadDescriptionDialogReact");function j(a,c){c[1][0][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function a(a,c,d){__p&&__p();var e=function(d,e){d=e[1][0][0];if(d!==void 0){e=b("bs_string").trim(b("bs_js_primitive").valFromOption(d).getValue());d=e===a;d||c!==void 0&&b("bs_curry")._1(c,e)}return b("MessengerDialogs.bs").removeDialog(void 0,0)};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(c){var d=b("ReasonReact.bs").element(void 0,b("bs_curry")._1(c[0],j),b("MessengerTextWithEmojiInputReact.bs").make("_7rkc",void 0,void 0,void 0,h._("Tell your colleagues what this chat is for, note important links or list FAQs"),a,void 0,[]));return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0]("_7rkd",void 0,void 0,void 0,void 0,void 0,500,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,h._("Edit description"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make("_7rke",[d])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,h._("Save"),void 0,void 0,b("bs_curry")._1(c[0],e),0,void 0,void 0,void 0,[]))]))]))},function(){return[[void 0]]},i[10],function(a,b){return 0},i[12]]}f.component=i;f.setDescriptionInputRef=j;f.make=a}),null);
__d("WorkChatTextWithEntitiesTruncated.bs",["ReasonReact.bs","bs_js_null_undefined","TextWithEntitiesTruncated.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("TextWithEntitiesTruncated.react"),{text:b("bs_js_null_undefined").fromOption(a),ranges:b("bs_js_null_undefined").fromOption(c),maxLines:b("bs_js_null_undefined").fromOption(d),truncationStyle:b("bs_js_null_undefined").fromOption(e)},f)}f.make=a}),null);
__d("WorkChatInfoPanelGroupThreadDescriptionSectionReact.bs",["ix","cx","fbt","Keys","bs_curry","Image.bs","React","asset","ReasonReact.bs","getURLRanges","MessengerDialogs.bs","WorkChatTextWithEntitiesTruncated.bs","WorkChatEditGroupThreadDescriptionDialogReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").statelessComponent("WorkChatInfoPanelGroupThreadDescriptionSectionReact");function a(a,c,d,e){__p&&__p();e=a.description;var f=e==null?[]:b("getURLRanges")(e);e=a.description;var h=e==null?"":e,k=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("WorkChatEditGroupThreadDescriptionDialogReact.bs").make(h,d,[]))})},l=function(a,b){a.preventDefault();return k(b[0])},m=function(a,c){if(a.keyCode===b("Keys").RETURN){a.preventDefault();return k(c[0])}else return 0};return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(d){var e=a.description;e=e==null?c?[b("React").createElement("div",{className:"_7rkb",role:"button",tabIndex:0,onKeyDown:b("bs_curry")._1(d[0],m),onClick:b("bs_curry")._1(d[0],l)},i._("Add a Description")),!1]:[i._("No description"),!0]:[b("ReasonReact.bs").element(void 0,void 0,b("WorkChatTextWithEntitiesTruncated.bs").make(e,f,4,"see-more-and-less",[])),!1];var h=a.description;h=c&&!(h==null)?b("React").createElement("div",{className:"_7rev"},b("React").createElement("div",{className:"_7rew",role:"button",tabIndex:0,onKeyDown:b("bs_curry")._1(d[0],m),onClick:b("bs_curry")._1(d[0],l)},b("React").createElement("div",{className:"_7rex"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("478817"),void 0,void 0,void 0,void 0,[]))),b("React").createElement("div",{className:"_7rey"},i._("Edit")))):null;return b("React").createElement("div",{className:"_7rez"},b("React").createElement("div",{className:"_7re-",role:"button",tabIndex:0},b("React").createElement("div",{className:"_7re_"+(e[1]?" _7rf0":"")},e[0])),h)},j[9],j[10],j[11],j[12]]}f.component=j;f.make=a}),null);
__d("WorkChatInfoPanelGroupThreadDescriptionContainerReact.bs",["cx","fbt","bs_curry","React","ReasonReact.bs","bs_js_primitive","MercuryThreadInfo","MessageRequestUtils","MercuryThreadActions","MessengerAdminGroupUtils","MessengerInfoPanelSectionReact.bs","MessagingThreadCustomizationSource","WorkChatInfoPanelGroupThreadDescriptionSectionReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("WorkChatInfoPanelGroupThreadDescriptionContainerReact");function j(a,c,d,e,f){__p&&__p();return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(f){__p&&__p();if(!d.is_subscribed||b("MessageRequestUtils").isMessageRequest(d))return null;else{var g=b("MessengerAdminGroupUtils").canUpdateThreadDescription(d,e),i=function(c,a){if(b("MercuryThreadInfo").isEmptyLocalThread(d))return 0;else{b("MercuryThreadActions").getForFBID(e).changeGroupThreadDescription(d.thread_id,c,b("MessagingThreadCustomizationSource").SETTINGS);return 0}};g=b("React").createElement("div",{className:"_7rka"},b("ReasonReact.bs").element(void 0,void 0,b("WorkChatInfoPanelGroupThreadDescriptionSectionReact.bs").make(d,g,b("bs_curry")._1(f[0],i),[])));return b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").nullable_to_opt(d.solid_color),!0,a,c,h._("Group description"),[g]))}},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.isCollapsed,a.onToggle,a.thread,a.viewer,[])});f.component=i;f.make=j;f.jsComponent=a}),null);
__d("XMessagingSetThreadImageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_thread_image/",{})}),null);
__d("MessengerThreadInfoPanelContainer.react",["cx","fbt","AsyncRequest","Bootloader","BootloadOnRender.react","ChatPinnedThreadsEntryPoint","CoworkerThreadContextBanner.react","CurrentUser","ErrorBoundary.react","IgnoreMessagesTypedLogger","ImmutableObject","JSResource","LazyComponent.react","LoadOnRender.react","MercuryConfig","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryMessageActions","MercuryMessageObject","MercuryThreadActions","MercuryThreadIDMap","MercuryThreadInfo","MessageRequestUtils","MessageThreadAssociatedObjectUtils","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerConfig","MessengerConfirmBlockThreadDialogReact.bs","MessengerConfirmLeaveGroupDialogReact.bs","MessengerContactAdapters","MessengerContactListRowActions","MessengerDialogs.bs","MessengerDomIDs.bs","MessengerDotComAndInboxM4Check.bs","MessengerGroupThreadSubType","MessengerInfoPanelAssociatedObjectSection.react","MessengerInfoPanelGroupSection.react","MessengerInfoPanelGroupThreadDescriptionContainerReact.bs","MessengerInfoPanelNameSectionM4React.re","MessengerInfoPanelNameSectionReact.bs","MessengerInfoPanelPeopleSectionReact.re","MessengerInfoPanelPrivacySupportOptionsContainerReact.bs","MessengerInfoPanelSearchReact.bs","MessengerInfoPanelThreadOptionsContainerReact.bs","MessengerInfoPanelWorkContextContainerReact.bs","MessengerLeaveGroupAction","MessengerMessage.bs","MessengerMessageRequestsTypedLogger","MessengerObjectAssociationType","MessengerSettingsActions","MessengerSettingsStore","MessengerSharedFilesReact.bs","MessengerSharedLinks.react","MessengerSharedPhotosReact.bs","MessengerState.bs","MessengerThreadInfoPanelScrollableArea.react","React","StoreAndPropBasedStateMixin","WorkChatInfoPanelGroupThreadDescriptionContainerReact.bs","WorkGalahadSettings","WorkModeConfig","XMessagingSetThreadImageController","XMessagingSetThreadNameController","getPageIDFromThreadID","gkx","immutable","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,j=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent,k=b("MessengerContactListRowActions").handleContactActions,l=b("MessengerDomIDs.bs").ids,m=b("MessengerInfoPanelGroupThreadDescriptionContainerReact.bs").jsComponent,n=b("MessengerInfoPanelNameSectionM4React.re").make,o=b("MessengerInfoPanelNameSectionReact.bs").jsComponent,p=b("MessengerInfoPanelPeopleSectionReact.re").component,q=b("MessengerInfoPanelPrivacySupportOptionsContainerReact.bs").make,r=b("MessengerInfoPanelSearchReact.bs").jsComponent,s=b("MessengerInfoPanelThreadOptionsContainerReact.bs").jsComponent,t=b("MessengerInfoPanelWorkContextContainerReact.bs").jsComponent,u=b("MessengerSharedFilesReact.bs").jsComponent,v=b("MessengerSharedPhotosReact.bs").jsComponent,w=b("WorkChatInfoPanelGroupThreadDescriptionContainerReact.bs").jsComponent;a=b("React").PropTypes;var x=b("lazyLoadComponent")(b("JSResource")("MessengerInfoPanelWorkGroupLinksContainerReact").__setRef("MessengerThreadInfoPanelContainer.react")),y=b("lazyLoadComponent")(b("JSResource")("WorkChatInfoPanelThreadOptionsContainerReact").__setRef("MessengerThreadInfoPanelContainer.react"));c=b("React").createClass({displayName:"MessengerThreadInfoPanelContainer",mixins:[b("StoreAndPropBasedStateMixin")(b("MessengerSettingsStore"))],propTypes:{className:a.string.isRequired,blockedIds:a.any,contactData:a.object,participants:a.instanceOf(b("immutable").Map).isRequired,thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired,hideGroupInfoInThreadInfoPanel:a.bool.isRequired},statics:{calculateState:function(){var a=b("MessengerSettingsStore").getSettings(),c=a.links_section_collapsed,d=a.associated_object_section_collapsed,e=a.people_section_collapsed,f=a.photos_section_collapsed,g=a.files_section_collapsed,h=a.thread_section_collapsed,i=a.thread_stats_section_collapsed,j=a.group_section_collapsed,k=a.group_approval_section_collapsed,l=a.group_link_section_collapsed,m=a.description_section_collapsed,n=a.saved_message_section_collapsed,o=a.privacy_section_collapsed;a=a.page_link_section_collapsed;return{links_section_collapsed:c,associated_object_section_collapsed:d,people_section_collapsed:e,photos_section_collapsed:f,files_section_collapsed:g,thread_section_collapsed:h,thread_stats_section_collapsed:i,group_section_collapsed:j,group_approval_section_collapsed:k,group_link_section_collapsed:l,description_section_collapsed:m,saved_message_section_collapsed:n,privacy_section_collapsed:o,page_link_section_collapsed:a}}},render:function(){var a=this,c=this.props.contactData||{},d=this.props.thread.thread_fbid||this.props.thread.other_user_fbid,e=b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(this.props.viewer,this.props.blockedIds,this.props.thread),f=b("MercuryIgnoredBlockedParticipants.bs").shouldShowBlock(this.props.thread,this.props.viewer,c.contact);return b("React").createElement(b("MessengerThreadInfoPanelScrollableArea.react"),{className:this.props.className},function(g,i,j,k){return b("React").createElement("div",{className:"_3tkv",id:l.THREAD_INFO_PANEL},b("React").createElement("h3",{className:"accessible_elem"},h._("Conversation information")),b("MessengerDotComAndInboxM4Check.bs").yes?b("React").createElement(n,{contact:c.contact,isUserActive:c.isUserActive||!1,lastActive:c.lastActive,onThreadNameChange:a._handleThreadNameChange,onThreadPhotoChange:a._handleThreadPhotoChange,platform:c.platform,thread:a.props.thread,viewer:a.props.viewer}):b("React").createElement(o,{contact:c.contact,isUserActive:c.isUserActive||!1,isBlocked:e,lastActive:c.lastActive,onArchive:a._handleArchive,onDelete:a._handleDelete,onLeaveGroup:a._handleLeaveGroup,onMarkRead:a._handleMarkRead,onMarkSpam:a._handleMarkSpam,onMarkUnread:a._handleMarkUnread,onMute:a._handleMuteChange,onThreadNameChange:a._handleThreadNameChange,onThreadPhotoChange:a._handleThreadPhotoChange,onPin:a._handlePin,onUnpin:a._handleUnpin,onUnmute:a._handleUnmute,onIgnore:a._handleIgnore,onBlock:a._handleBlock,onUnblock:a._handleUnblock,showBlock:f,participants:a.props.participants,platform:c.platform,showLeaveGroup:a.props.thread.is_subscribed&&!a.props.thread.is_canonical,showReport:a._isPageChat(),thread:a.props.thread,viewer:a.props.viewer}),a._renderAssociatedObject(),a._renderWorkContext(),a._renderMarketplaceBanner(),a._renderCoworkerThreadBanner(),b("CurrentUser").isWorkUser()?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(y,{isCollapsed:a.state.thread_section_collapsed,participants:a.props.participants,thread:a.props.thread,search:b("WorkGalahadSettings").isGalahadEnabled?null:b("React").createElement(r,{thread:a.props.thread}),viewer:a.props.viewer,onToggle:a._handleThreadSectionToggle,contactData:c})):b("MessengerDotComAndInboxM4Check.bs").yes?b("React").createElement(s,{isCollapsed:a.state.thread_section_collapsed,participants:a.props.participants,thread:a.props.thread,viewer:a.props.viewer,onToggle:a._handleThreadSectionToggle}):b("React").createElement(s,{isCollapsed:a.state.thread_section_collapsed,participants:a.props.participants,thread:a.props.thread,viewer:a.props.viewer,onToggle:a._handleThreadSectionToggle}),a._renderPageLink(),a._renderGroupDescription(),b("MercuryConfig").IVITP?a._renderGroupLink():null,b("MessengerAdminGroupUtils").canSeeGroupOptionsSection(a.props.thread,a.props.viewer)?a._renderGroupOptions():null,a.props.thread.is_canonical?null:a._renderMembers(),b("MessengerConfig").canSaveMessages?a._renderSavedMessages():null,b("MessengerDotComAndInboxM4Check.bs").yes?b("React").createElement(q,{contact:c.contact,isBlocked:e,isCollapsed:a.state.privacy_section_collapsed,isPage:a._isPageChat(),participants:a.props.participants,showBlock:f,thread:a.props.thread,viewer:a.props.viewer,onBlock:a._handleBlock,onIgnore:a._handleIgnore,onUnblock:a._handleUnblock,onToggle:a._handlePrivacySectionToggle}):null,b("React").createElement(b("MessengerSharedLinks.react"),{threadID:a.props.thread.thread_id,threadFBID:d,customColor:a.props.thread.solid_color,isCollapsed:a.state.links_section_collapsed,onToggle:a._handleLinksSectionToggle}),b("React").createElement(u,{threadID:a.props.thread.thread_id,threadFBID:d,isCollapsed:a.state.files_section_collapsed,onToggle:a._handleFilesSectionToggle}),b("React").createElement(v,{getIsScrolledToBottom:j,getScrollableHeight:k,isCollapsed:a.state.photos_section_collapsed,onToggle:a._handlePhotosSectionToggle,threadID:a.props.thread.thread_id,threadFBID:d,viewer:a.props.viewer}))})},_handleArchive:function(){this._getThreadActions().archive(this.props.thread.thread_id),b("MessengerActions").selectThread(null)},_handlePin:function(){this._getThreadActions().pin(this.props.thread.thread_id,b("ChatPinnedThreadsEntryPoint").MENU_ITEM_IN_INFO_PANEL)},_handleUnpin:function(){this._getThreadActions().unpin(this.props.thread.thread_id,b("ChatPinnedThreadsEntryPoint").MENU_ITEM_IN_INFO_PANEL)},_handleDelete:function(){this._getThreadActions()["delete"](this.props.thread.thread_id),b("MessengerActions").selectThread(null)},_handleMarkRead:function(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function(){this._getThreadActions().markSpam(this.props.thread.thread_id),b("MessengerActions").selectThread(null)},_handleMarkUnread:function(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function(a){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,a)},_handleUnmute:function(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleIgnore:function(){this._getThreadActions().changeFolder(this.props.thread.thread_id,"other"),b("MessengerActions").selectThread(null),new(b("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(this.props.thread.thread_fbid).setPlatform("messengerdotcom").log()},_handleBlock:function(){var a=this,b=this.props.thread;b=b.thread_id;var c=this.props.contactData&&this.props.contactData.contact.short_name||h._("sender");b&&this._getThreadActions().blockIgnoreOnMessengerDotCom(!0,b,function(){a._handleAfterBlock(c)})},_handleAfterBlock:function(a){var c=this.props,d=c.thread;c=c.viewer;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(i,{participantName:a})});c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.thread_id,b("MercuryIDs").getParticipantIDFromUserID(c));d.folder===b("MessagingTag").PENDING&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.thread_id)).setSurface("thread").setFolderType(b("MessagingTag").PENDING).setThreadKey(c).setEntryPoint("settings").log()},_handleUnblock:function(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_handleMuteChange:function(a){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,a)},_handleContactSelect:function(a,c){c=b("MercuryIDs").getThreadIDFromParticipantID(a.uid);c&&b("MessengerActions").selectThread(c)},_handleLeaveGroup:function(){var a=this;if(this.props.viewer){var c=b("MessengerAdminGroupUtils").isAdmin(this.props.thread.admins,this.props.viewer);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(j,{onLeave:a._onLeaveGroupConfirm,isViewerAdmin:c,thread:a.props.thread})})}},_onLeaveGroupConfirm:function(){b("MessengerLeaveGroupAction").leaveGroup(this.props.thread,this.props.viewer)},_handleThreadNameChange:function(a){var c=b("XMessagingSetThreadNameController").getURIBuilder().getURI(),d=this.props.thread.thread_fbid;if(d===null){var e=b("MercuryThreadIDMap").get();d=e.getServerIDFromClientIDNow(this.props.thread.thread_id)}new(b("AsyncRequest"))().setURI(c).setData({thread_id:d,thread_name:a}).send()},_handleThreadPhotoChange:function(a,c){c=(c=c)!=null?(c=c.metadata)!=null?(c=c[0])!=null?c.image_id:c:c:c;if(!c)return;var d=b("XMessagingSetThreadImageController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(d).setData({thread_id:b("MercuryIDs").getThreadFBIDFromThreadID(a),thread_image_id:c}).send()},_handleAssociatedObjectSectionToggle:function(){b("MessengerSettingsActions").changeSettings({associated_object_section_collapsed:!this.state.associated_object_section_collapsed})},_handlePeopleSectionToggle:function(){b("MessengerSettingsActions").changeSettings({people_section_collapsed:!this.state.people_section_collapsed})},_handlePhotosSectionToggle:function(){b("MessengerSettingsActions").changeSettings({photos_section_collapsed:!this.state.photos_section_collapsed})},_handleFilesSectionToggle:function(){b("MessengerSettingsActions").changeSettings({files_section_collapsed:!this.state.files_section_collapsed})},_handleThreadSectionToggle:function(){b("MessengerSettingsActions").changeSettings({thread_section_collapsed:!this.state.thread_section_collapsed})},_handleThreadStatsSectionToggle:function(){b("MessengerSettingsActions").changeSettings({thread_stats_section_collapsed:!this.state.thread_stats_section_collapsed})},_handleGroupOptionsSectionToggle:function(){b("MessengerSettingsActions").changeSettings({group_section_collapsed:!this.state.group_section_collapsed})},_handleGroupOptionsApprovalSectionToggle:function(){b("MessengerSettingsActions").changeSettings({group_approval_section_collapsed:!this.state.group_approval_section_collapsed})},_handleLinksSectionToggle:function(){b("MessengerSettingsActions").changeSettings({links_section_collapsed:!this.state.links_section_collapsed})},_handleDescriptionSectionToggle:function(){b("MessengerSettingsActions").changeSettings({description_section_collapsed:!this.state.description_section_collapsed})},_handleGroupLinkSectionToggle:function(){b("MessengerSettingsActions").changeSettings({group_link_section_collapsed:!this.state.group_link_section_collapsed})},_handleSavedMessageSectionToggle:function(){var a=!this.state.saved_message_section_collapsed;b("MessengerSettingsActions").changeSettings({saved_message_section_collapsed:a})},_handlePrivacySectionToggle:function(){b("MessengerSettingsActions").changeSettings({privacy_section_collapsed:!this.state.privacy_section_collapsed})},_handlePageMDotMeLinkSectionToggle:function(){b("MessengerSettingsActions").changeSettings({page_link_section_collapsed:!this.state.page_link_section_collapsed})},_getThreadActions:function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)},_getMessageActions:function(){return b("MercuryMessageActions").getForFBID(this.props.viewer)},_getMessageObject:function(){return b("MercuryMessageObject").getForFBID(this.props.viewer)},_isPageChat:function(){return!!b("getPageIDFromThreadID")(this.props.thread.thread_id)},_renderAssociatedObject:function(){var a=this.props,c=a.thread;a=a.hideGroupInfoInThreadInfoPanel;var d=c.work_associated_group||c.object_association_type===b("MessengerObjectAssociationType").GENERAL_CHAT;if(b("CurrentUser").isWorkUser()&&d&&!a)return b("gkx")("808098")?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(x,{isCollapsed:this.state.associated_object_section_collapsed,thread:c,onToggle:this._handleAssociatedObjectSectionToggle})):null;d=b("MessageThreadAssociatedObjectUtils").shouldRender(c.associated_object);return!d?null:b("React").createElement(b("MessengerInfoPanelAssociatedObjectSection.react"),{isCollapsed:this.state.associated_object_section_collapsed,onToggle:this._handleAssociatedObjectSectionToggle,customColor:c.solid_color,associatedObject:c.associated_object})},_renderWorkContext:function(){var a=this.props.contactData||{};a=a.contact;return!b("CurrentUser").isWorkUser()||!a||!a.href||b("WorkModeConfig").hide_email_address||a.user_type!=="user"&&a.user_type!=="fb4c"?null:b("React").createElement(t,{isCollapsed:this.state.thread_stats_section_collapsed,thread:this.props.thread,onToggle:this._handleThreadStatsSectionToggle,href:a.href})},_renderMarketplaceBanner:function(){var a,c,d;d=(d=this.props.thread)!=null?d.marketplace_thread_data:d;c=(c=d)!=null?c.for_sale_item:c;a=(a=d)!=null?a.buyer_fbid:a;d=(d=d)!=null?d.seller_fbid:d;return!c||!a||!d?null:b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MarketplaceMessengerContextBanner.react").__setRef("MessengerThreadInfoPanelContainer.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{buyerID:a,forSaleItem:c,renderLocation:"messenger",sellerID:d})})},_renderCoworkerThreadBanner:function(){var a;a=(a=this.props.thread)==null?void 0:a.group_thread_subtype;return a!==b("MessengerGroupThreadSubType").COWORKER_GROUP_THREAD?null:b("React").createElement(b("CoworkerThreadContextBanner.react"),null)},_renderPageLink:function(){if(b("CurrentUser").isWorkUser()||!this._isPageChat())return null;var a=function(a){b("Bootloader").loadModules(["MessengerInfoPanelPageThreadMDotMeLinkContainerReact.bs"],function(b){b=b.jsComponent;return a(b)},"MessengerThreadInfoPanelContainer.react")};return b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("LoadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{isCollapsed:this.state.page_link_section_collapsed,onToggle:this._handlePageMDotMeLinkSectionToggle,thread:this.props.thread,viewer:this.props.viewer}),loader:a,placeholder:b("React").createElement("div",null)}))},_renderGroupDescription:function(){var a;if(b("CurrentUser").isWorkUser()&&!this.props.thread.is_canonical)return b("gkx")("856953")?b("React").createElement(w,{isCollapsed:this.state.description_section_collapsed,onToggle:this._handleDescriptionSectionToggle,thread:this.props.thread,viewer:this.props.viewer}):null;if(!b("MessengerConfig").IGDE)return null;a=this.props.thread.marketplace_thread_data&&(((a=this.props.thread.marketplace_thread_data)!=null?a.for_sale_item:a)||((a=this.props.thread.marketplace_thread_data)!=null?a.buyer_fbid:a)||((a=this.props.thread.marketplace_thread_data)!=null?a.seller_fbid:a));a=a||this.props.thread.is_canonical||b("MessageRequestUtils").isMessageRequest(this.props.thread)||this.props.thread.associated_object;return a?null:b("React").createElement(m,{isCollapsed:this.state.description_section_collapsed,onToggle:this._handleDescriptionSectionToggle,thread:this.props.thread,viewer:this.props.viewer})},_renderGroupLink:function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{isCollapsed:this.state.group_link_section_collapsed,onToggle:this._handleGroupLinkSectionToggle,thread:this.props.thread,viewer:this.props.viewer}),loader:b("JSResource")("messengerInfoPanelGroupLinkContainerReactComponent").__setRef("MessengerThreadInfoPanelContainer.react"),placeholder:b("React").createElement("div",null)})},_renderGroupOptions:function(){return b("React").createElement(b("MessengerInfoPanelGroupSection.react"),{isOptionsCollapsed:this.state.group_section_collapsed,onOptionsToggle:this._handleGroupOptionsSectionToggle,isApprovalsCollapsed:this.state.group_approval_section_collapsed,onApprovalToggle:this._handleGroupOptionsApprovalSectionToggle,onToggle:this._handleThreadSectionToggle,participants:this.props.participants,viewer:this.props.viewer,thread:this.props.thread})},_renderMembers:function(){return b("React").createElement(p,{canViewerReply:b("MercuryThreadInfo").canReply(this.props.thread),contactAdapter:b("MessengerContactAdapters").fromMercuryParticipant,isCollapsed:this.state.people_section_collapsed,isViewerSubscribed:this.props.thread.is_subscribed,onAddPeopleClick:this._handleAddPeopleClick,onContactAction:this._handleContactAction2,onContactSelect:this._handleContactSelect2,onToggle:this._handlePeopleSectionToggle,participants:this.props.participants,viewer:this.props.viewer,admins:this.props.thread.admins,thread:this.props.thread})},_handleAddPeopleClick:function(a){var c=this;a.preventDefault();b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("messengerAddToConversationDialogReactComponent").__setRef("MessengerThreadInfoPanelContainer.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{thread:c.props.thread,viewer:c.props.viewer})})})},_handleContactAction2:function(a,b){k({action:a,contact:b,viewer:this.props.viewer,thread:this.props.thread,participants:this.props.participants,handleContactSelect:this._handleContactSelect})},_handleContactSelect2:function(a,c){this._handleContactSelect(b("MessengerContactAdapters").fromMercuryParticipant(a))},_renderSavedMessages:function(){var a=h._("Saved messages"),c=this.props,d=c.thread;c=c.viewer;var e=d.thread_id,f=b("MessengerMessage.bs").getSavedMessages(b("MessengerState.bs").getThreadMessagesRangeNow(c,e,0,5));return!f||f.length===0?null:b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerInfoPanelSavedMessageSection.react").__setRef("MessengerThreadInfoPanelContainer.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{title:a,thread:d,viewer:c,onToggle:this._handleSavedMessageSectionToggle,isSectionCollapsed:this.state.saved_message_section_collapsed,messages:b("MessengerMessage.bs").getSavedMessages(b("MessengerState.bs").getThreadMessagesRangeNow(c,e,0,5))})})}});e.exports=c}),null);
__d("WorkchatAppKeyboardShortcut.react",["cx","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();b("immutable").List;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_2_xt _4lrb"},b("React").createElement("div",{className:"_4lrc"},this.props.label),b("React").createElement("div",{className:"_4lrl"},this.props.keys.map(function(a){return b("React").createElement("span",{className:"_4lrm",key:a},a)})))};return c}(b("React").Component);e.exports=a}),null);
__d("WorkchatAppKeyboardShortcutsDialog.react",["cx","fbt","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogHeaderReact.re","MessengerDialogs.re","MessengerDialogTitleReact.re","React","WorkchatAppKeyboardShortcut.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogHeaderReact.re").component,j=b("MessengerDialogTitleReact.re").component,k=b("immutable").List,l=function(a){return a==="darwin"?{CmdOrCtrl:"\u2318",Alt:"\u2387",Shift:"\u21e7",Tab:"\u21b9",Up:"\u2191",Down:"\u2193"}:{CmdOrCtrl:"Ctrl",Alt:"Alt",Shift:"Shift",Tab:"Tab",Up:"\u2191",Down:"\u2193"}},m=function(a){a=l(a);return k([{Header:"General",Shortcuts:k([{label:h._("Create new chat"),keys:k([a.CmdOrCtrl,"N"])},{label:h._("Search chats"),keys:k([a.CmdOrCtrl,"K"])},{label:h._("Show\/Hide notifications"),keys:k([a.CmdOrCtrl,"/"])}])},{Header:"Navigation",Shortcuts:k([{label:h._("Go to previous chat"),keys:k([a.Alt,a.Up])},{label:h._("Go to next chat"),keys:k([a.Alt,a.Down])},{label:h._("Go to next element"),keys:k([a.Tab])},{label:h._("Open\/Select element"),keys:k(["Spacebar"])}])},{Header:"In a Conversation",Shortcuts:k([{label:h._("Show\/Hide information"),keys:k([a.CmdOrCtrl,"."])},{label:h._("Mute\/Unmute chat"),keys:k([a.CmdOrCtrl,a.Shift,"M"])},{label:h._("Find in chat"),keys:k([a.CmdOrCtrl,"F"])}])},{Header:"During a Call",Shortcuts:k([{label:h._("Toggle mute"),keys:k(["M"])},{label:h._("Toggle video"),keys:k(["V"])}])}])};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=m(this.props.platform);return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.$1,type:"default",width:560},b("React").createElement(i,null,b("React").createElement(j,null,h._("Keyboard shortcuts")),b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",label:h._("Done"),type:"primary",use:"default"})),b("React").createElement(b("MessengerDialogBody.react"),null,this.$2(a)))};d.$2=function(a){return b("React").createElement("div",{className:"_4yne"},a.map(function(a,c){return b("React").createElement("div",{className:"_2_xt"+(c!==0?" _4ynf":""),key:a.Header},b("React").createElement("div",{className:"_4ynr"},a.Header),b("React").createElement("div",null,a.Shortcuts.map(function(a){return b("React").createElement(b("WorkchatAppKeyboardShortcut.react"),{key:a.label,keys:a.keys,label:a.label})})))}))};d.$1=function(a){a||b("MessengerDialogs.re").removeDialog({})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("WorkchatAppBridge",["fbt","Arbiter","CurrentLocale","CurrentUser","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MercuryThreadInformer","MessengerActions","MessengerDialogs.bs","MessengerInfoPanelSearchReact.bs","MessengerParticipants.bs","MessengerPromotionDataActions","MessengerSettingsActions","MessengerSettingsStore","MessengerState.bs","MessengerURIListener","MessengerURIStore","React","WorkchatAppKeyboardShortcutsDialog.react","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={TOGGLE_NOTIFICATION_DIALOG:"TOGGLE_NOTIFICATION_DIALOG",getParticipants:function(a,c){var d=b("immutable").Map();return d.withMutations(function(d){a.participants&&a.participants.forEach(function(a){d.set(a,b("MessengerParticipants.bs").getNow(a))}),a.is_subscribed&&d.set(b("MercuryIDs").getParticipantIDFromUserID(c),b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(c)))})},toggleWorkNotificationJewel:function(){b("Arbiter").inform(h.TOGGLE_NOTIFICATION_DIALOG)},toggleKeyboardShortCutsList:function(a){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("WorkchatAppKeyboardShortcutsDialog.react"),{platform:a})})},toggleInfoPanel:function(){var a=b("MessengerSettingsStore").getSettings().info_sidebar_collapsed;b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:!a})},getCurrentUser:function(){return{isWorkUser:b("CurrentUser").isWorkUser,isEmployee:b("CurrentUser").isEmployee,getID:b("CurrentUser").getID}},getCurrentLocale:function(){return b("CurrentLocale").get()},subscribeToUnseenMessageCount:function(a){var c=b("MercuryThreadInformer").get();c.subscribe("unseen-updated",function(){return a(b("MessengerState.bs").getUnseenUnreadCount(b("CurrentUser").getID()))});c.subscribe("unread-updated",function(){return a(b("MessengerState.bs").getUnseenUnreadCount(b("CurrentUser").getID()))})},enableDesktopNotifs:function(){b("MessengerSettingsActions").changeDesktopNotifs(!0)},onSampleTextFromThread:function(a){__p&&__p();function c(){var c=b("MessengerURIStore").getState().activeThreadID;if(!c)return;b("MessengerState.bs").getThreadMessagesRange(b("CurrentUser").getID(),c,0,10,function(b){b=b.map(function(a){return a.body}).join("\n");a(b)})}c();b("MessengerURIStore").addListener("change",function(){c()})},selectThread:function(a){b("MessengerActions").selectThread("thread:"+a)},newThread:function(){b("MessengerActions").changeDetailView("detail/compose")},searchInChat:function(){var a={preventDefault:function(){}};b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:!1});b("MessengerInfoPanelSearchReact.bs").handleSearchThreadClick(a)},restartURIListener:function(){b("MessengerURIListener").stop(),b("MessengerURIListener").start()},toggleMuteConversation:function(){var a=b("CurrentUser").getID(),c=b("MessengerURIStore").getState().activeThreadID;if(!c)return;var d=b("MessengerState.bs").getThreadMetaNow(a,c);if(!d)return;d=b("MercuryThreadInfo").isMuted(d);a=b("MercuryThreadActions").getForFBID(a);d?a.unmute(c):a.updateMuteSetting(c,-1)},showAppUpdateBanner:function(a){b("MessengerPromotionDataActions").setPromotionData({promotionID:null,promotionContent:g._("A new version is available with improvements and fixes."),primaryActionTitle:g._("Click to Update"),primaryActionCallback:a})},init:function(){if(window.workchat===void 0||typeof window.workchat.initMainWindow!=="function")return;window.workchat.initMainWindow(this)}};e.exports=h}),null);
__d("MessengerDetailView.react",["cx","fbt","invariant","Bootloader","BootloadOnRender.react","CurrentUser","CustomColorHighlighting.react","DataTransfer","EventReminderActions","EventRemindersGating","JSResource","LazyComponent.react","MercuryCanonicalGroupThreadStore","MercuryConfig","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MessengerActions","MessengerComposerContainer.react","MessengerComposerStore","MessengerConversation.react","MessengerConversationContainer.react","MessengerDeliveryReceipt.bs","MessengerDetailViewHeaderContainer.react","MessengerDomIDs.bs","MessengerDotComAndInboxM4Check.bs","MessengerErrorBoundary.react","MessengerGalahadGating.bs","MessengerParticipants.bs","MessengerPresenceStatusUtils","MessengerSettingsActions","MessengerSettingsStore","MessengerState.bs","MessengerThreadInfoPanelContainer.react","MessengerThreadSearchActions","MessengerThreadSearchStore","MessengerURIStore","MessengerView","MessengerWebDriverTestIDs","MontageActions","Parent","PresenceStatus","React","SubscriptionsHandler","WorkChatAvailabilityStatusLoader","WorkChatRedesignedMessageListCheck.re","WorkGalahadSettings","gkx","immutable","WorkchatAppBridge","AvailableList","emptyFunction","ifRequired","joinClasses","lazyLoadComponent","promiseDone","requireCond","cr:895572","shallowCompare"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerDomIDs.bs").ids;b("WorkchatAppBridge").init();b("AvailableList");var k=b("lazyLoadComponent")(b("JSResource")("WorkChatGroupNameComposeViewHeader.react").__setRef("MessengerDetailView.react"));a=b("React").PropTypes;function l(a,c,d,e){if(!b("EventRemindersGating").shouldShowPlansOnMessengerCom)return null;if(!c)return null;return!a?null:b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerEventPlanContainer.react").__setRef("MessengerDetailView.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:c,participants:d,viewer:e})})}c=b("React").createClass({displayName:"MessengerDetailView",_composer:void 0,_refsConversationContainer:null,_subscriptionsHandler:null,_participantSubscription:null,_userStatusLiveSubscription:null,_userIDStatusLiveSubscription:null,propTypes:{activeThread:a.object,activeThreadID:a.string,blockedIds:a.any,deliveryReceipts:a.object,messengerState:a.array.isRequired,readReceipts:a.any,view:a.string,viewer:a.string.isRequired,isWorkUser:a.bool.isRequired,hostProps:a.object,DetailViewHeaderComponent:a.any.isRequired,hideGroupInfoInThreadInfoPanel:a.bool,hideContextBanner:a.bool,openPostComposerInSameWindow:a.bool,suppressThreadInfoPanel:a.bool,suppressSearchResults:a.bool,bottomOffset:a.number},calculateState:function(a,c){__p&&__p();var d,e=this;c===void 0&&(c=!1);d=a.activeThreadID||((d=a.activeThread)==null?void 0:d.thread_id);var f=b("MessengerComposerStore").getState();if(a.view===b("MessengerView").DETAIL.COMPOSE){!f.recipients&&i(0,1840);var g=f.recipients;g.size===1?d=b("MercuryIDs").getThreadIDFromUserID(g.first().getUniqueID().toString()):g.size>1&&(d=b("MercuryCanonicalGroupThreadStore").getOrFetch(Array.from(g).map(function(a){return a.getUniqueID().toString()})))}g=this.props.activeThread;d&&!g&&(g=b("MessengerState.bs").getThreadMetaNow(a.viewer,d),!g&&!c&&b("MessengerState.bs").getThreadMeta(a.viewer,d,function(a){g=a}));if(b("gkx")("678586")){c=b("MercuryIDs").getUserIDFromThreadID(d);var h=b("MessengerState.bs").montage(this.props.messengerState);(h[c]===null||h[c]===void 0)&&c!=null&&b("MontageActions").loadMontageThreadForActor(c)}h=b("immutable").Map();this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription);c=g;if(c&&d){var j=c.participants;if(c.is_subscribed){var k=b("MercuryIDs").getParticipantIDFromUserID(a.viewer);j=j.concat([k])}k=b("MessengerParticipants.bs").getMultiEagerMap(j,function(a){e._participantSubscription=null,e.setState({participants:a})});j=k[0];k=k[1];this._participantSubscription=k;h=j;if(b("EventRemindersGating").shouldShowPlansOnMessengerCom){k=c?c.lightweight_event:null;b("EventReminderActions").clearAllReminders(d);if(k){b("EventReminderActions").updateEventReminder(d,k);j=c.lightweight_events;if(j&&Object.keys(j).length>0)for(var l in j)b("EventReminderActions").updateEventReminder(d,j[l],l)}}}k=b("ifRequired")("MessengerUploadFilesStore",function(a){return a.getState()},function(){return b("immutable").Map({})});j=b("ifRequired")("MessengerSharePreviewStore",function(a){return a.getState()},function(){return b("immutable").Map({})});var m=b("ifRequired")("WorkChatContentAppStore",function(a){return a.getState()},function(){return b("immutable").Map({})});this._checkUserThreadUpdatedForStatusSubscription(d);return{infoPanelCollapsed:b("MessengerSettingsStore").getSettings().info_sidebar_collapsed,activeThreadID:d,composerState:f,messengerState:b("MessengerURIStore").getState(),contactData:b("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(h,c),activeThread:c,participants:h,searchResults:b("MessengerThreadSearchStore").getState(),uploadFilesState:k,sharePreviewState:j,workChatContentAppsState:m,hideGroupInfoInThreadInfoPanel:!!a.hideGroupInfoInThreadInfoPanel,hideContextBanner:!!a.hideContextBanner,openPostComposerInSameWindow:!!a.openPostComposerInSameWindow}},getInitialState:function(){return babelHelpers["extends"]({dropTargetOverlayVisible:!1,isCreatingNewGroupChat:!1,newGroupName:""},this.calculateState(this.props,!0))},componentDidMount:function(){__p&&__p();var a=this;this._subscriptionsHandler=new(b("SubscriptionsHandler"))();this._subscribeToSubscriptionsHandler([b("MessengerComposerStore"),b("MessengerSettingsStore"),b("MessengerURIStore"),b("MessengerThreadSearchStore"),b("MercuryCanonicalGroupThreadStore"),b("PresenceStatus")]);b("Bootloader").loadModules(["MessengerUploadFilesStore"],function(b){a._subscribeToSubscriptionsHandler([b])},"MessengerDetailView.react");b("Bootloader").loadModules(["MessengerSharePreviewStore"],function(b){a._subscribeToSubscriptionsHandler([b])},"MessengerDetailView.react");b("CurrentUser").isWorkUser()&&b("gkx")("678573")&&b("promiseDone")(b("WorkChatAvailabilityStatusLoader").load(),function(c){c=c.store;a._subscribeToSubscriptionsHandler([c]);var d=b("MercuryIDs").getUserIDFromThreadID(a.state.activeThreadID);d&&c.fetchUsers([d])});b("CurrentUser").isWorkUser()&&b("gkx")("990297")&&b("Bootloader").loadModules(["WorkChatContentAppStore"],function(b){a._subscribeToSubscriptionsHandler([b])},"MessengerDetailView.react");this.setState(this.calculateState(this.props,!1))},_subscribeToSubscriptionsHandler:function(a){var b=this,c=function(){b.setState(b.calculateState(b.props,!1))},d=[];a.forEach(function(a){a.hasChanged&&a.getDispatchToken&&a.addListener?d.push(a.addListener(c)):a.subscribe?d.push(a.subscribe("change",c)):a.addListener?d.push(a.addListener("change",c)):i(0,574)});if(d.length>0){this._subscriptionsHandler&&(a=this._subscriptionsHandler).addSubscriptions.apply(a,d)}},shouldComponentUpdate:function(a,c){return b("shallowCompare")(this,a,c)},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release(),this._subscriptionsHandler=null,this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription)},UNSAFE_componentWillReceiveProps:function(a){this.setState(this.calculateState(a,!1)),this.props&&this.props.activeThreadID!==a.activeThreadID&&this._cancelReplyingToMessage(),this.setState(function(c){var d=b("MessengerComposerStore").getState();return a.view!==b("MessengerView").DETAIL.COMPOSE||d.recipients.size<2||c.newGroupName===""?{newGroupName:"",isCreatingNewGroupChat:!1}:{}})},_checkUserThreadUpdatedForStatusSubscription:function(a){if(!b("CurrentUser").isWorkUser()||!b("gkx")("678573")||!b("WorkChatAvailabilityStatusLoader").isLoaded())return;var c=b("WorkChatAvailabilityStatusLoader").getStoreEnforce(),d=this._userIDStatusLiveSubscription;a=b("MercuryIDs").getUserIDFromThreadID(a);a!==d&&(d&&this._userStatusLiveSubscription&&(this._userStatusLiveSubscription.dispose(),this._userStatusLiveSubscription=null),this._userIDStatusLiveSubscription=a,a&&(c.fetchUsers([a]),this._userStatusLiveSubscription=c.liveSubscribe(a)))},_renderMessageView:function(a){var c;this.state.activeThread&&(c=this.props.query==null?l(this.state.activeThread.lightweight_event,a,this.state.participants,this.props.viewer):null);return b("React").createElement("div",{className:"_4_j4"+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj4":""),onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop,role:"presentation"},this._renderGroupNameComposerHeader(),this._renderMainView(a),c,this._renderSearchView(a),this._renderFooterView(a),b("React").createElement("div",{className:(this.state.dropTargetOverlayVisible?"":"hidden_elem")+" _2fg6"}),this._renderUploadFiles(a))},render:function(){var a=this,c=this.state.activeThreadID,d=this.props.DetailViewHeaderComponent;if(this.props.hostProps&&this.props.hostProps.renderMinimal)return this._renderMessageView(c);else{var e=this._getMainLabelDetails();return b("React").createElement("div",{"aria-labelledby":e.labelIDs,className:b("joinClasses")("_1t2u"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7sli":""),b("cr:895572")),role:"main"},b("React").createElement("div",{className:"hidden_elem",id:j.MAIN_LABEL},e.labelText," "),b("React").createElement(b("CustomColorHighlighting.react"),{className:"_wsc",customColor:b("WorkChatRedesignedMessageListCheck.re").enabled?null:this.state.activeThread&&this.state.activeThread.solid_color},b("React").createElement(d,{contactData:this.state.contactData,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onInfoPanelToggle:this._handleInfoPanelToggle,infoPanelCollapsed:this.state.infoPanelCollapsed,isWorkUser:this.props.isWorkUser,messengerState:this.props.messengerState,shouldShowCreateGroupButton:b("gkx")("836564")&&this.state.composerState.recipients.size>=2&&c&&!this.state.isCreatingNewGroupChat,onCreateGroupButtonClicked:function(){a.setState({newGroupName:"",isCreatingNewGroupChat:!0})}}),b("React").createElement("div",{className:"_20bp"},this._renderInfoPanel(),this._renderMessageView(c))))}},_renderUploadFiles:function(a){if(!a)return null;var c=this.state.sharePreviewState.get(a);return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerDragAndDrop.react").__setRef("MessengerDetailView.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:a,sharePreview:c,onResize:this._handleResize})})},_renderSearchView:function(a){return b("WorkGalahadSettings").isGalahadEnabled?null:a&&!this.props.mid&&this.props.query!=null?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerThreadSearchContainer.react").__setRef("MessengerDetailView.react"),placeholder:b("React").createElement("div",{className:"_33p7 _5iwm"}),component:b("React").createElement(b("LazyComponent.react"),{loading:this.state.searchResults.loading,query:this.state.searchResults.query,selectedIndex:this.state.searchResults.selectedIndex,totalCount:this.state.searchResults.totalCount})}):null},_renderGroupNameComposerHeader:function(){var a=this;return this._shouldShowGroupNameComposer()?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(k,{autoFocus:!b("gkx")("836564")&&this.state.isCreatingNewGroupChat,onChange:function(b){a.setState({newGroupName:b})},onCloseButtonClick:function(){a.setState({isCreatingNewGroupChat:!1})},showCloseButton:this.state.isCreatingNewGroupChat})):null},_assignConversationContainerRef:function(a){this._refsConversationContainer=a},_renderMainView:function(a){if(!a||this._shouldShowGroupNameComposer())return b("React").createElement("div",{className:"_1ut7"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w75":"")+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj5":"")});var c=this.state.contactData?this.state.contactData.contact:null,d=this.props.deliveryReceipts?b("MessengerDeliveryReceipt.bs").getDeliveryTimeOfThread(this.props.deliveryReceipts,a):0;return this.state.searchResults.messages&&this.props.suppressSearchResults!==!0?b("React").createElement(b("MessengerErrorBoundary.react"),{component:"conversation"},b("React").createElement(b("MessengerConversation.react"),{className:"_1wfr"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w75":"")+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj5":""),contact:c,deliveryTimestamp:d,downExhausted:this.state.searchResults.downExhausted,fetchMessages:b("MessengerThreadSearchActions").getMoreSearchContext,onVoiceClipCreate:this.handleAudioUpload,innerClassName:"_1r_-",isCanonical:b("MercuryIDs").isCanonical(a),isLoaded:!0,isLoading:!1,messages:this.state.searchResults.messages,onRead:b("emptyFunction"),onReplyToMessage:this._handleReplyToMessage,readReceipts:this.props.readReceipts,thread:this.state.activeThread,threadID:a,upExhausted:this.state.searchResults.upExhausted,useManualFetch:!0,viewer:this.props.viewer,ref:this._assignConversationContainerRef,selectedMessage:this.state.searchResults.mid,isSearchResult:!!this.state.searchResults.query,hideContextBanner:this.state.hideContextBanner})):b("React").createElement(b("MessengerErrorBoundary.react"),{component:"conversation"},b("React").createElement(b("MessengerConversationContainer.react"),{className:"_1wfr"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w75":"")+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj5":""),contact:c,deliveryTimestamp:d,ignoredIds:b("MessengerState.bs").ignoredIds(this.props.messengerState),fbid:b("MessengerState.bs").fbid(this.props.messengerState),onVoiceClipCreate:this.handleAudioUpload,onMarkRead:this._handleMarkRead,onReplyToMessage:this._handleReplyToMessage,readReceipts:this.props.readReceipts,ref:this._assignConversationContainerRef,thread:this.state.activeThread,threadID:a,viewer:this.props.viewer,hideContextBanner:this.state.hideContextBanner,bottomOffset:this.props.bottomOffset}))},_renderFooterView:function(a){var c=this;return b("React").createElement(b("MessengerErrorBoundary.react"),{className:"_4rv3 _2pen",component:"composer"},b("React").createElement(b("MessengerComposerContainer.react"),{canReply:!!(!this._shouldBlockReply()&&(this.props.view===b("MessengerView").DETAIL.COMPOSE||this.state.activeThread&&b("MercuryThreadInfo").canReply(this.state.activeThread)&&!b("MercuryConfig").ViewerIsReadOnly)),disableAutofocus:b("gkx")("836564")&&this.props.view===b("MessengerView").DETAIL.COMPOSE,fileUploader:this.state.uploadFilesState.get(a),onMount:function(a){return c._composer=a},onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,sharePreview:this.state.sharePreviewState.get(a),workChatContentApps:this.state.workChatContentAppsState.get(a),hostProps:this.props.hostProps,threadID:a,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,replyingToMessage:this.state.replyingToMessage,onCancelReplyingToMessage:this._cancelReplyingToMessage,newGroupName:this.state.newGroupName,openPostComposerInSameWindow:this.state.openPostComposerInSameWindow}))},_renderInfoPanel:function(){var a=this.state,c=a.activeThread,d=a.contactData,e=a.infoPanelCollapsed,f=a.participants;a=a.hideGroupInfoInThreadInfoPanel;var g=this.props,h=g.view;g=g.suppressThreadInfoPanel;return g||!c||!f||h===b("MessengerView").DETAIL.COMPOSE?null:b("React").createElement("div",{className:(e?"hidden_elem":"")+" _4_j5","data-testid":b("MessengerWebDriverTestIDs").INFO_PANEL},b("React").createElement(b("MessengerErrorBoundary.react"),{className:"_4rv3",component:"conversation information"},b("React").createElement(b("MessengerThreadInfoPanelContainer.react"),{blockedIds:this.props.blockedIds,className:"_4_j9",contactData:d,participants:f,thread:c,viewer:this.props.viewer,hideGroupInfoInThreadInfoPanel:a})))},_getMainLabelDetails:function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE?{labelText:h._("New message"),labelIDs:j.MAIN_LABEL}:{labelText:h._("Conversation with"),labelIDs:j.MAIN_LABEL+" "+j.THREAD_TITLE}},_handleConversationClick:function(a){__p&&__p();var c=this.props.activeThreadID;if(c&&this._refsConversationContainer&&this._refsConversationContainer.isScrolledToBottom()){var d=b("MessengerState.bs").getThreadMetaNow(this.props.viewer,c);d&&d.unread_count&&d.unread_count>0&&this._handleMarkRead(c)}if(window.getSelection().toString()!=="")return;d=a.target;if(d instanceof Node&&b("Parent").byTag(d,"a")!=null)return;c=this._getComposer();c&&c.focusInput()},handleAudioUpload:function(a){var b=this._getComposer();b!=null&&a!=null&&(b.handleAudioUpload(a),b.focusInput())},_showDropTargetOverlay:function(a){a&&a.preventDefault(),this.setState({dropTargetOverlayVisible:!0})},_hideDropTargetOverlay:function(a){a&&a.preventDefault();this.setState({dropTargetOverlayVisible:!1});a=this._getComposer();a&&a.resetDrag()},_handleDrop:function(a){__p&&__p();this._hideDropTargetOverlay(a);var c=this._getComposer();if(!c)return;a.nativeEvent.dataTransfer instanceof Object||i(0,1841);var d=new(b("DataTransfer"))(a.nativeEvent.dataTransfer),e=d.getFiles(),f=this.state.activeThreadID;if(e.length){b("MessengerActions").prepareFilesForSend(f,a.nativeEvent.dataTransfer.files,"DragAndDrop");return}if(e.length)c.handleFileUpload(e);else{f=d.getText();f&&c.handleTextDropped(f)}},_handleResize:function(){var a=this._refsConversationContainer;a&&a.handleResize()},_handleInfoPanelToggle:function(){var a=!this.state.infoPanelCollapsed;this.setState({infoPanelCollapsed:a},function(){b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:a})})},_handleMarkRead:function(a){b("MercuryThreadActions").getForFBID(this.props.viewer).markRead(a)},_handleReplyToMessage:function(a){this.setState({replyingToMessage:a})},_cancelReplyingToMessage:function(){this.setState({replyingToMessage:null})},_shouldShowGroupNameComposer:function(){return!b("gkx")("836564")||this.props.view!==b("MessengerView").DETAIL.COMPOSE||this.state.composerState.recipients.size<2?!1:!this.state.activeThread||this.state.isCreatingNewGroupChat},_shouldBlockReply:function(){var a;return!!(((a=this.state.contactData)==null?void 0:(a=a.contact)==null?void 0:a.is_messenger_blocked)||b("MercuryConfig").ColdOpenBlock&&this.state.activeThread&&b("MercuryThreadInfo").isColdOpen(this.state.activeThread))},_getComposer:function(){return this._composer}});c.defaultProps={DetailViewHeaderComponent:b("MessengerDetailViewHeaderContainer.react")};e.exports=c}),null);
__d("MessengerDetailViewReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerDetailView.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDetailView.react"),{activeThreadID:b("bs_js_null_undefined").fromOption(a),blockedIds:c,className:b("bs_js_null_undefined").fromOption(d),deliveryReceipts:e,readReceipts:f,messengerState:g,mid:b("bs_js_null_undefined").fromOption(h),query:b("bs_js_null_undefined").fromOption(i),view:b("bs_js_null_undefined").fromOption(j),viewer:k,isWorkUser:l},m)}f.make=a}),null);
__d("MessengerErrorBoundaryReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerErrorBoundary.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerErrorBoundary.react"),{className:b("bs_js_null_undefined").fromOption(a),component:b("bs_js_null_undefined").fromOption(c)},d)}f.make=a}),null);
__d("MessengerFlexScrollableAreaReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerFlexScrollableArea.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerFlexScrollableArea.react"),{onScroll:b("bs_js_null_undefined").fromOption(a),className:b("bs_js_null_undefined").fromOption(c),maxHeight:b("bs_js_null_undefined").fromOption(d),limitCalculationToParent:b("bs_js_null_undefined").fromOption(e)},f)}f.make=a}),null);
__d("ReasonReasonResource",["Promise","JSResourceReference","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.load=function(){var a=this;return new(b("Promise"))(function(c){b("promiseDone")(a.getFullComponent(),function(a){c(a.$$module)})})};d.getModuleIfRequired=function(){var a;return(a=this.__reference.getModuleIfRequired())==null?void 0:a.$$module};d.getFullComponent=function(){return this.__reference.load()};d.setResourceReference=function(a){this.__reference=a;return this};return a}(b("JSResourceReference"));function a(a){return new g(a.getModuleIdAsRef()).setResourceReference(a)}e.exports=a}),null);
__d("AbstractPopoverButtonReact.bs",["ReasonReact.bs","bs_js_null_undefined","AbstractPopoverButton.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("ReasonReact.bs").wrapJsForReason(b("AbstractPopoverButton.react"),{config:b("bs_js_null_undefined").fromOption(a),haschevron:b("bs_js_null_undefined").fromOption(c),image:b("bs_js_null_undefined").fromOption(d),label:b("bs_js_null_undefined").fromOption(e),maxwidth:b("bs_js_null_undefined").fromOption(f)},g)}f.make=a}),null);
__d("MessengerSettingsIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"30px",width:"30px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"settings",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Settings"},b("React").createElement("polygon",{id:"Bounding-Box",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-1",d:"M18,11.00025 C14.1345,11.00025 11.0005,14.13425 11.0005,18.00025 C11.0005,21.86575 14.1345,24.99975 18,24.99975 C21.8655,24.99975 24.9995,21.86575 24.9995,18.00025 C24.9995,14.13425 21.8655,11.00025 18,11.00025 Z M31,17.42725 L31,18.57325 C31,19.14125 30.679,19.66025 30.171,19.91475 L28.638,20.68075 C28.2975,20.85125 28.0215,21.13725 27.8915,21.49475 C27.7675,21.83575 27.624,22.16775 27.4665,22.49175 C27.3,22.83375 27.286,23.23025 27.406,23.59175 L27.96,25.25225 C28.1395,25.79125 27.999,26.38575 27.5975,26.78725 L26.787,27.59775 C26.3855,27.99925 25.791,28.13975 25.2525,27.95975 L23.595,27.40725 C23.234,27.28725 22.837,27.30125 22.495,27.46775 C22.1705,27.62575 21.837,27.76975 21.4945,27.89425 C21.1355,28.02475 20.849,28.30125 20.6785,28.64275 L19.9145,30.17075 C19.6605,30.67875 19.141,31.00025 18.573,31.00025 L17.427,31.00025 C16.859,31.00025 16.3395,30.67875 16.0855,30.17075 L15.3215,28.64275 C15.151,28.30125 14.864,28.02475 14.5055,27.89425 C14.1625,27.76975 13.83,27.62575 13.505,27.46775 C13.163,27.30125 12.766,27.28725 12.405,27.40725 L10.7475,27.95975 C10.2085,28.13975 9.6145,27.99925 9.213,27.59775 L8.4025,26.78725 C8.0005,26.38575 7.8605,25.79125 8.04,25.25225 L8.594,23.59175 C8.714,23.23025 8.7,22.83375 8.5335,22.49175 C8.376,22.16775 8.2325,21.83575 8.1085,21.49475 C7.9785,21.13725 7.7025,20.85125 7.362,20.68075 L5.829,19.91475 C5.321,19.66025 5,19.14125 5,18.57325 L5,17.42725 C5,16.85875 5.321,16.33925 5.829,16.08525 L7.362,15.31925 C7.7025,15.14875 7.9785,14.86275 8.1085,14.50525 C8.2325,14.16425 8.376,13.83225 8.5335,13.50825 C8.7,13.16625 8.714,12.76975 8.594,12.40825 L8.04,10.74775 C7.8605,10.20875 8.0005,9.61475 8.4025,9.21275 L9.213,8.40275 C9.6145,8.00075 10.2085,7.86025 10.7475,8.04025 L12.405,8.59275 C12.766,8.71275 13.163,8.69875 13.505,8.53225 C13.83,8.37425 14.1625,8.23025 14.5055,8.10575 C14.864,7.97525 15.151,7.69875 15.3215,7.35725 L16.0855,5.82925 C16.3395,5.32125 16.859,5.00025 17.427,5.00025 L18.573,5.00025 C19.141,5.00025 19.6605,5.32125 19.9145,5.82925 L20.6785,7.35725 C20.849,7.69875 21.1355,7.97525 21.4945,8.10575 C21.837,8.23025 22.1705,8.37425 22.495,8.53225 C22.837,8.69875 23.234,8.71275 23.595,8.59275 L25.2525,8.04025 C25.791,7.86025 26.3855,8.00075 26.787,8.40275 L27.5975,9.21275 C27.999,9.61475 28.1395,10.20875 27.96,10.74775 L27.406,12.40825 C27.286,12.76975 27.3,13.16625 27.4665,13.50825 C27.624,13.83225 27.7675,14.16425 27.8915,14.50525 C28.0215,14.86275 28.2975,15.14875 28.638,15.31925 L30.171,16.08525 C30.679,16.33925 31,16.85875 31,17.42725 Z",fill:"#000000"}))));f.icon=a}),null);
__d("XMessengerDotComSpoofIFrameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/spoof/fb_iframe_target/",{gk_spoof:{type:"String"}})}),null);
__d("XSpoofMessengerDotComIFrameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/spoof/messenger_dot_com_iframe/",{redirect_uri:{type:"String",required:!0}})}),null);
__d("MessengerSpoof",["Arbiter","DOM","JSXDOM","URI","XMessengerDotComSpoofIFrameController","XSpoofMessengerDotComIFrameController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=6e3;function a(a){var c=b("JSXDOM").iframe({src:h().toString(),width:0,height:0});b("DOM").appendContent(document.body,c);b("Arbiter").subscribeOnce("messengerdotcom_spoof",function(){b("DOM").remove(c),a()});setTimeout(function(){b("Arbiter").inform("messengerdotcom_spoof")},g)}function h(){var a=new(b("URI"))(document.URL),c=b("XMessengerDotComSpoofIFrameController").getURIBuilder().getURI().getQualifiedURI().toString();c=b("XSpoofMessengerDotComIFrameController").getURIBuilder().setString("redirect_uri",c).getURI();return c.setDomain(a.getDomain().replace("messenger.com","facebook.com")).setPort(a.getPort()).setProtocol("https")}e.exports={init:a}}),null);
__d("SRPinningNub",["Event","SRDevModeParams","URI"],(function(a,b,c,d,e,f){__p&&__p();a={watchForm:function(a){__p&&__p();b("Event").listen(a,"submit",function(a){__p&&__p();var c=b("URI").getRequestURI();c.removeQueryData(b("SRDevModeParams").items);c.removeQueryData(b("SRDevModeParams").escapeParam);var d=a.target.getElementsByTagName("input");for(var d=d,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;c.addQueryData(g.name,g.value)}g=a.target.getElementsByTagName("select");for(var f=g,e=Array.isArray(f),d=0,f=e?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(d>=f.length)break;a=f[d++]}else{d=f.next();if(d.done)break;a=d.value}g=a;c.addQueryData(g.name,g.value)}c.go(!0);return!1})},watchLink:function(a){__p&&__p();a=b("URI").getRequestURI();for(var c=b("SRDevModeParams").items,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;a.removeQueryData(f)}a.go(!0);return!1},resetPage:function(a){a=b("URI").getRequestURI();a.addQueryData(b("SRDevModeParams").escapeParam,"");a.go(!0);return!1}};e.exports=a}),null);
__d("WorkChatCustomMenuItem",["cx","CSS","DOM","MenuItem","React","ReactDOM","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=["href","rel","ajaxify","target","accesskey"];function i(a,c){var d={};h.forEach(function(a){c[a]&&(d[a]=c[a])});b("DOM").setAttributes(a,d)}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){return a.call(this,b)||this}var d=c.prototype;d._renderItemContent=function(){__p&&__p();this._anchor=b("DOM").create(this._data.renderas==="label"?"label":"a",{className:"_54nc"+(this._data.icon?" _54nu":"")});if(this._data.children){var a=this._data.icon?b("React").cloneElement(this._data.icon,{className:b("joinClasses")(this._data.icon.props.className,"mrs")}):null;b("ReactDOM").render(b("React").createElement("div",null,a,b("React").createElement("div",{className:"_54nh"},this._data.children)),this._anchor);this._data.label=this._anchor.innerText||this._anchor.textContent}else{a=b("DOM").create("div",null,b("DOM").create("div",{className:"_54nh"},this._data.markup||this._data.label));this._data.icon&&b("DOM").prependContent(a,this._data.icon);b("DOM").setContent(this._anchor,a)}this._data.href||(this._data.href="#");this.isDisabled()||i(this._anchor,this._data);b("DOM").setAttributes(this._anchor,this.__getAttributesFromData());this._anchor.setAttribute("role",this._ARIARole);return this._anchor};d.render=function(){var c=a.prototype.render.call(this);b("CSS").addClass(c,"_1ydp");this._disabled&&b("CSS").addClass(c,"_5arm");return c};return c}(b("MenuItem"));e.exports=a}),null);
__d("WorkChatCustomMenuItem.bs",["ReasonReact.bs","bs_js_null_undefined","WorkChatCustomMenuItem"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("WorkChatCustomMenuItem"),{href:b("bs_js_null_undefined").fromOption(a),label:c,onclick:b("bs_js_null_undefined").fromOption(d),target:b("bs_js_null_undefined").fromOption(e)},f)}f.make=a}),null);
__d("WorkChatDoNotDisturbDialogReactBootloader.bs",["bs_block","bs_curry","React","Bootload.bs","Bootloader","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableWorkChatDoNotDisturbDialogReact.bs"],a,"WorkChatDoNotDisturbDialogReactBootloader.bs");return 0}d=[a];var g=b("Bootload.bs").Create(d),h=b("ReasonReact.bs").reducerComponent("WorkChatDoNotDisturbDialogReactBootloader");function i(a,c){return b("bs_curry")._1(a[3],[c])}function c(a,c){return[h[0],h[1],h[2],h[3],function(a){return b("bs_curry")._1(g[0],function(b){return i(a,b)})},h[5],h[6],h[7],function(c){c=c[1][0];if(c!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._2(c[13],a,[]));else return b("React").createElement("div",void 0)},function(){return[void 0]},h[10],function(c,a){return b("bs_block").__(0,[[c[0]]])},h[12]]}f.BootloadableWorkChatDoNotDisturbDialogReact=d;f.LoadableWorkChatDoNotDisturbDialogReact=g;f.component=h;f.handleDoNotDisturbDialogLoad=i;f.make=c}),null);
__d("WorkChatDoNotDisturbMenuItemContentReactBootloader.bs",["fbt","bs_block","bs_curry","Bootload.bs","Bootloader","ReasonReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableWorkChatDoNotDisturbMenuItemContentReact.bs"],a,"WorkChatDoNotDisturbMenuItemContentReactBootloader.bs");return 0}d=[a];var h=b("Bootload.bs").Create(d),i=b("ReasonReact.bs").reducerComponent("WorkChatDoNotDisturbMenuItemContentReactBootloader");function j(a,c){if(a[1][1][0])return b("bs_curry")._1(a[3],[c]);else return 0}function c(a,c){__p&&__p();return[i[0],i[1],i[2],i[3],function(a){a[1][1][0]=!0;return b("bs_curry")._1(h[0],function(b){return j(a,b)})},i[5],function(a){a[1][1][0]=!1;return 0},i[7],function(c){c=c[1][0];if(c!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._2(c[2],a,[]));else return g._("Do Not Disturb")},function(){return[void 0,[!1]]},i[10],function(a,c){return b("bs_block").__(0,[[a[0],c[1]]])},i[12]]}f.BootloadableWorkChatDoNotDisturbMenuItemContentReact=d;f.LoadableWorkChatDoNotDisturbMenuItemContentReact=h;f.component=i;f.handleDoNotDisturbMenuItemContentLoad=j;f.make=c}),null);
__d("WorkUserDoNotDisturbSettingsEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IMPRESSION:"impression",SCHEDULED_DND_SETTINGS_DIALOG_IMPRESSION:"scheduled_dnd_settings_dialog_impression",TURN_OFF:"turn_off",TURN_ON:"turn_on"})}),null);
__d("WorkUserDoNotDisturbSettingsSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BLUE_BAR_MODERN_MENU:"blue_bar_modern_menu",BOOKMARK_NAV_MENU:"bookmark_nav_menu",GALAHAD_NAV_BAR_MENU:"galahad_nav_bar_menu",WORKPLACE_CHAT_MENU:"workplace_chat_menu",WORKPLACE_QUICKCHAT:"workplace_quickchat"})}),null);
__d("XMessengerDotComDYIController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/dyi/",{error:{type:"Exists",defaultValue:!1},x:{type:"String"},tab:{type:"String"},start:{type:"Int"},end:{type:"Int"},quality:{type:"Enum",enumType:0},format:{type:"Enum",enumType:0},sections:{type:"EnumKeyset",enumType:null},referrer:{type:"Enum",enumType:1},settings_tracking:{type:"String"},target_id:{type:"FBID"}})}),null);
__d("XWorkLogoutController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/logout/",{next:{type:"String"}})}),null);
__d("MessengerSettingsMenuReact.bs",["cx","fbt","Run","Form","React","goURI","gkx","LinkReact.bs","JSResource","AsyncDialog","bs_belt_Option","CurrentUser","ReasonReact.bs","AsyncRequest","bs_js_primitive","MessagingTag","SRPinningNub","MercuryConfig","MessengerView","MercuryFilters.bs","MessengerSpoof","MessengerConfig","MessengerActions","MessengerDialogs.bs","ReasonReactCompat.bs","WebStorageMonster","BootloaderResource","MessengerMenuReact.bs","MessengerEnvironment","ReasonReasonResource","XWorkLogoutController","WorkChatCustomMenuItem.bs","MessengerPopoverMenuReact.bs","AbstractPopoverButtonReact.bs","ServiceWorkerLoginAndLogout","XMessengerDotComDYIController","MessengerDotComAndInboxM4Check.bs","MessengerSettingsIconSVGM4React.bs","XFacebookWorkChatInboxController","XMessengerDotComLogoutController","WorkUserDoNotDisturbSettingsEvent","WorkUserDoNotDisturbSettingsSource","WorkDoNotDisturbSettingsTypedLogger","WorkChatDoNotDisturbDialogReactBootloader.bs","WorkChatDoNotDisturbMenuItemContentReactBootloader.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){a.preventDefault();return 0}function i(){var a=b("CurrentUser").isWorkUser();return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](a?"https://www.workplace.com/workplace":"https://www.messenger.com/about",h._("About"),void 0,"_blank",[]))}function j(){var a=b("bs_belt_Option").getWithDefault(b("MercuryConfig").WorkTermsURI==null?void 0:b("bs_js_primitive").some(b("MercuryConfig").WorkTermsURI),"https://www.facebook.com/policies");return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](a,h._("Terms"),void 0,"_blank",[]))}function k(){var a=b("bs_belt_Option").getWithDefault(b("MercuryConfig").WorkPrivacyURI==null?void 0:b("bs_js_primitive").some(b("MercuryConfig").WorkPrivacyURI),"https://www.facebook.com/privacy/explanation");return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](a,h._("Privacy Policy"),void 0,"_blank",[]))}function l(){var a=b("bs_belt_Option").getWithDefault(b("MercuryConfig").WorkCookiesURI==null?void 0:b("bs_js_primitive").some(b("MercuryConfig").WorkCookiesURI),"https://www.facebook.com/help/cookies");return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](a,h._("Cookie Policy"),void 0,"_blank",[]))}var m=b("MessengerDotComAndInboxM4Check.bs").yes?"_30yy _6ymd":"_30yy _2fug",n=b("ReasonReasonResource")(b("JSResource")("MessengerSettingsDialogWrapper.bs").__setRef("MessengerSettingsMenuReact.bs"));function c(a,c,d){d={viewer:a};c!==void 0&&(d.key=b("bs_js_primitive").valFromOption(c));return d}function o(a){return b("React").createElement(b("BootloaderResource").read(n)[0],a)}e=[n,c,o];var p=b("ReasonReact.bs").statelessComponent("MessengerSettingsMenuReact");function d(a,c,d,e,f){__p&&__p();var g=function(a){a.preventDefault();return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("ReasonReactCompat.bs").wrapReactForReasonReact(b("React").Suspense,{fallback:null},b("React").createElement(o,{viewer:e})))})};f=function(a){a.preventDefault();new(b("WorkDoNotDisturbSettingsTypedLogger"))().setEvent(b("WorkUserDoNotDisturbSettingsEvent").IMPRESSION).setSource(b("WorkUserDoNotDisturbSettingsSource").WORKPLACE_CHAT_MENU).log();return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("WorkChatDoNotDisturbDialogReactBootloader.bs").make(e,[]))})};var n=function(a){a.preventDefault();a=d===b("MessengerView").MASTER.RECENT;b("MessengerActions").changeMasterView(a?b("MessengerView").MASTER.PEOPLE:b("MessengerView").MASTER.RECENT);return 0},q=function(a){a.preventDefault();a=c===b("MessagingTag").PENDING;b("MessengerActions").changeFolder(a?b("MessagingTag").INBOX:b("MessagingTag").PENDING);return 0},r=function(a){a.preventDefault();a=c===b("MessagingTag").OTHER;b("MessengerActions").changeFolder(a?b("MessagingTag").INBOX:b("MessagingTag").OTHER);return 0},s=function(a){a.preventDefault();a=c===b("MessagingTag").ACTION_ARCHIVED;b("MessengerActions").changeFolder(a?b("MessagingTag").INBOX:b("MessagingTag").ACTION_ARCHIVED);return 0},t=function(a){a.preventDefault();b("MessengerSpoof").init(function(){b("goURI")(window.location.href,!0,void 0);return 0});return 0},u=function(){b("Run").onUnload(function(){b("WebStorageMonster").cleanOnLogout(0);b("ServiceWorkerLoginAndLogout").logout();return 0});var a=b("CurrentUser").isWorkUser();b("Form").post((a?b("XWorkLogoutController").getURIBuilder().setString("next",b("XFacebookWorkChatInboxController").getURIBuilder().getURI().toString()):b("XMessengerDotComLogoutController").getURIBuilder()).getURI(),{});return 0},v=function(a){a.preventDefault();b("AsyncDialog").send(new(b("AsyncRequest"))("/ajax/bugs/report"));return 0},w=function(c){c.preventDefault();c=a===b("MercuryFilters.bs").unread;b("MessengerActions").changeFilter(c?b("MercuryFilters.bs").all:b("MercuryFilters.bs").unread);return 0},x=function(){var a=b("XMessengerDotComDYIController").getURIBuilder().getURI();return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](a,h._("Download your information"),void 0,"_blank",[]))},y=function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Log Out"),u,void 0,[]))},z=function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Message requests"),q,void 0,[]))},A=function(){var a=b("CurrentUser").isWorkUser()&&b("gkx")("762398");if(a)return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Permanently hidden"),r,void 0,[]));else return null},B=function(){var a=b("CurrentUser").isWorkUser()&&b("gkx")("762398");return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,a?h._("Hidden chats"):h._("Archived threads"),s,void 0,[]))},C=b("CurrentUser").isWorkUser(),D=C?"/help/work/682468881954082":"https://www.facebook.com/help/735006619902401",E=function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,"[FB-Only] Copy Spoofs",t,void 0,[]))},F=function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,"[FB-Only] Reset SPIN Pin",function(){b("SRPinningNub").resetPage();return 0},void 0,[]))};C=b("CurrentUser").isWorkUser()&&b("gkx")("678573");C=C?[b("ReasonReact.bs").element(void 0,void 0,b("WorkChatCustomMenuItem.bs").make(void 0,h._("Do Not Disturb"),f,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("WorkChatDoNotDisturbMenuItemContentReactBootloader.bs").make(e,[]))])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([]))]:[null,null];var G=C[1],H=C[0];return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],function(){__p&&__p();var e=d===b("MessengerView").MASTER.RECENT;if(e){e=b("CurrentUser").isWorkUser();e=e?h._("People"):h._("Active contacts")}else e=h._("Recent messages");var f=d===b("MessengerView").MASTER.RECENT,o=d===b("MessengerView").MASTER.RECENT,p=d===b("MessengerView").MASTER.RECENT&&c===b("MessagingTag").INBOX,q=a===b("MercuryFilters.bs").unread,r=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser(),s=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser(),t=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser()&&(b("MercuryConfig").WorkTermsURI==null?void 0:b("bs_js_primitive").some(b("MercuryConfig").WorkTermsURI))!==void 0,u=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser()&&(b("MercuryConfig").WorkPrivacyURI==null?void 0:b("bs_js_primitive").some(b("MercuryConfig").WorkPrivacyURI))!==void 0,I=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser()&&(b("MercuryConfig").WorkCookiesURI==null?void 0:b("bs_js_primitive").some(b("MercuryConfig").WorkCookiesURI))!==void 0,J=b("CurrentUser").isMessengerOnlyUser()||b("CurrentUser").isDeactivatedAllowedOnMessenger(),K=b("MessengerConfig").GKSpoof,L=b("CurrentUser").isEmployee(),M=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser(),N=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser();e=b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").Menu[0]([H,G,b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Settings"),g,void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,e,n,void 0,[])),f?z(0):null,o?A(0):null,p?B(0):null,b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,q?h._("All threads"):h._("Unread threads"),w,void 0,[])),r?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])):null,s?i(0):null,t?j(0):null,u?k(0):null,I?l(0):null,J?x(0):null,b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](D,h._("Help"),void 0,"_blank",[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Report a Problem"),v,void 0,[])),K?E(0):null,L?F(0):null,M?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])):null,N?y(0):null]));f=h._("Settings, help and more");o={button:b("MessengerDotComAndInboxM4Check.bs").yes?b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,f,m,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,f,[b("MessengerSettingsIconSVGM4React.bs").icon])):b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,f,m,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,f,[])),defaultMaxWidth:200};return b("ReasonReact.bs").element(void 0,void 0,b("MessengerPopoverMenuReact.bs").make(void 0,void 0,void 0,e,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("AbstractPopoverButtonReact.bs").make(b("bs_js_primitive").some(o),!1,void 0,void 0,200,[]))]))},p[9],p[10],p[11],p[12]]}g=b("bs_belt_Option").getWithDefault;f.preventDefault=a;f.$pipe$unknown=g;f.renderAbout=i;f.renderPolicies=j;f.renderPrivacy=k;f.renderCookies=l;f.settingsIconClasses=m;f.LazySettings=e;f.component=p;f.make=d}),null);
__d("WorkChatThreadlistTabsReact.bs",["cx","fbt","React","LinkReact.bs","ReasonReact.bs","bs_js_primitive","MessagingTag","MessengerView","MercuryFilters.bs","MessengerActions","MessengerSettingsMenuReact.bs","WorkChatActivityTypedLogger.bs","WorkChatActivityTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("WorkChatThreadlistTabsReact");function a(a,c,d,e,f){__p&&__p();var g=a!==void 0?b("bs_js_primitive").valFromOption(a):b("MercuryFilters.bs").all,j=c!==void 0?c:"",k=function(a){j!==b("MessagingTag").INBOX&&b("MessengerActions").changeFolder(b("MessagingTag").INBOX);var c=a===b("MessengerView").MASTER.RECENT;new(b("WorkChatActivityTypedLogger"))().setEvent(b("WorkChatActivityTypedLogger.bs").string_of_event(2)).addToExtraData("data",[c?"recent":"people"]).log();b("MessengerActions").changeMasterView(a);return 0};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){var a=h._("Home"),c=h._("People"),f=d===b("MessengerView").MASTER.RECENT&&j===b("MessagingTag").INBOX;return b("React").createElement("div",{className:"_65ty"},b("React").createElement("div",{className:"_65tz"},b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,a,"_65t-"+(f?"":" _65t_")+(f?" _65u0":""),void 0,void 0,void 0,void 0,void 0,void 0,void 0,function(){return k(b("MessengerView").MASTER.RECENT)},void 0,void 0,"button",void 0,void 0,void 0,void 0,a,[]))),b("React").createElement("div",{className:"_65tz"},b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,c,"_65t-"+(d!==b("MessengerView").MASTER.PEOPLE?" _65u1":"")+(d===b("MessengerView").MASTER.PEOPLE?" _65u2":""),void 0,void 0,void 0,void 0,void 0,void 0,void 0,function(){return k(b("MessengerView").MASTER.PEOPLE)},void 0,void 0,"button",void 0,void 0,void 0,void 0,c,[]))),b("React").createElement("div",{className:"_65tz"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSettingsMenuReact.bs").make(g,j,d,e,[]))))},i[9],i[10],i[11],i[12]]}f.component=i;f.make=a}),null);
__d("MessengerActiveUsersListReact.bs",["cx","fbt","bs_block","bs_curry","React","gkx","bs_belt_Array","JSResource","MercuryIDs","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerView","MessengerState.bs","PresencePrivacy","MessengerActions","MessengerDialogs.bs","bs_js_null_undefined","ReasonReactCompat.bs","BootloaderResource","PresenceOrderedList","PresenceStatusStore","ReasonReasonResource","MessengerParticipants.bs","AvailableListConstants","MeasurePeopleTypedLogger","MessengerContactAdapters","WorkChatThreadlistTabsReact.bs","MessengerContactListRowReact.bs","MessengerDotComAndInboxM4Check.bs","MessengerFlexScrollableAreaReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReasonResource")(b("JSResource")("MessengerSettingsDialogWrapper.bs").__setRef("MessengerActiveUsersListReact.bs"));function a(a,c,d){d={viewer:a};c!==void 0&&(d.key=b("bs_js_primitive").valFromOption(c));return d}function j(a){return b("React").createElement(b("BootloaderResource").read(i)[0],a)}d=[i,a,j];function k(a,c){__p&&__p();var d=c[3];b("PresenceOrderedList").getSorted(200,function(a){var c=b("PresenceOrderedList").getAvailableSorted(a),e=a.filter(function(a){return b("PresencePrivacy").allows(a)}),f=b("CurrentUser").isWorkUser();f=f?a:b("bs_belt_Array").keep(b("bs_belt_Array").concat(e,c),function(a){return b("PresenceStatusStore").get(a)===b("AvailableListConstants").ACTIVE});a=b("bs_belt_Array").map(f,function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});e=b("MessengerParticipants.bs").getMultiEager(a,function(a){return b("bs_curry")._1(d,[a,void 0])});return b("bs_curry")._1(d,[e[0],b("bs_js_primitive").nullable_to_opt(e[1])])});return 0}function l(a){var c=b("PresencePrivacy").subscribe("privacy-user-presence-changed",b("bs_curry")._1(a[0],k)),d=b("PresenceStatusStore").addListener(b("bs_curry")._1(a[0],k));b("bs_curry")._1(a[4],function(){b("PresencePrivacy").unsubscribe(c);d.remove();return 0});new(b("MeasurePeopleTypedLogger"))().log();return k(0,a)}function m(a,c){b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),b("MercuryIDs").getThreadIDFromUserID(a.fbid),function(a){b("MessengerActions").selectThread(a.thread_id,void 0);return 0},null);return 0}var n=b("MessengerDotComAndInboxM4Check.bs").yes?"_225b _6ybl":"_225b",o=b("ReasonReact.bs").reducerComponent("MessengerActiveUsersListReact");e=b("MessengerContactListRowReact.bs").createMake(0);var p=e[1];g=[p];function c(a,c,d){__p&&__p();var e=function(a){a.preventDefault();return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("ReasonReactCompat.bs").wrapReactForReasonReact(b("React").Suspense,{fallback:null},b("React").createElement(j,{viewer:c})))})};return[o[0],o[1],o[2],o[3],l,o[5],function(a){a=a[1][2][0];if(a!==void 0)return b("MessengerParticipants.bs").removeCallback(b("bs_js_primitive").valFromOption(a));else return 0},o[7],function(d){__p&&__p();d=d[1];var f=b("MercuryIDs").getUserIDFromThreadID(b("bs_js_null_undefined").fromOption(a)),g=!(f==null)&&f!==""?b("bs_js_primitive").some(f):void 0;f=b("CurrentUser").isWorkUser()&&b("gkx")("678606");f=f?b("ReasonReact.bs").element(void 0,void 0,b("WorkChatThreadlistTabsReact.bs").make(void 0,void 0,b("MessengerView").MASTER.PEOPLE,c,[])):null;var i=d[1];if(i){i=b("CurrentUser").isWorkUser();return b("React").createElement("div",void 0,b("ReasonReact.bs").element(void 0,void 0,b("MessengerFlexScrollableAreaReact.bs").make(void 0,void 0,void 0,void 0,[b("React").createElement("div",{className:n},i?h._("Contacts ({number_of_contacts})",[h._param("number_of_contacts",String(d[0].length))]):h._("Active contacts ({number_of_contacts})",[h._param("number_of_contacts",String(d[0].length))])),b("React").createElement("ul",void 0,b("bs_belt_Array").map(d[0],function(a){var d=g!==void 0?a.fbid===b("bs_js_primitive").valFromOption(g):!1;return b("ReasonReact.bs").element(a.id,void 0,b("bs_curry").app(p,[function(a){return b("MessengerContactAdapters").fromMercuryParticipant(a)},a,void 0,b("bs_js_primitive").some(m),void 0,void 0,void 0,void 0,!1,void 0,void 0,d,void 0,void 0,void 0,void 0,void 0,void 0,!0,void 0,void 0,c,[]]))}))])),f)}else return b("React").createElement("div",void 0,b("React").createElement("div",{className:"_6ckd"},b("React").createElement("div",{className:"_6cke"},h._("See active contacts")),b("React").createElement("div",{className:"_6ckf"},h._("Let people know when you're active and see when they are, too")),b("React").createElement("button",{className:"_6ckg",onClick:e},"Turn On")),f)},function(){return[[],b("PresencePrivacy").getVisibility()===b("PresencePrivacy").ONLINE,[void 0]]},o[10],function(c,a){return b("bs_block").__(0,[[c[0],b("PresencePrivacy").getVisibility()===b("PresencePrivacy").ONLINE,[c[1]]]])},o[12]]}a=200;f.LazySettings=d;f.numTopUsers=a;f.updateHelper=k;f.didMount=l;f.handleSelect=m;f.userListHeader=n;f.component=o;f.ListRowReactForMercuryParticipant=g;f.make=c}),null);
__d("LinkWithHiddenURLBar.react",["Link.react","React","ReactDOM","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.link=null,d.$5=function(a){d.link=a},d.$4=function(a){d.$6(),d.props.onFocus&&d.props.onFocus(a)},d.$2=function(a){d.$1(),d.props.onBlur&&d.props.onBlur(a)},d.$3=function(a){d.$6(),!a.metaKey&&d.props.onClick&&(d.props.onClick(a),a.preventDefault()),d.props.onAllClicks&&d.props.onAllClicks(a),b("setImmediate")(function(){return d.$1()})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1()};d.render=function(){var a=this.props,c=a.label;a.onBlur;a.onAllClicks;a.onClick;a.onFocus;a=babelHelpers.objectWithoutPropertiesLoose(a,["label","onBlur","onAllClicks","onClick","onFocus"]);return b("React").createElement(b("Link.react"),babelHelpers["extends"]({},a,{label:c,onBlur:this.$2,onClick:this.$3,onFocus:this.$4,ref:this.$5}))};d.$1=function(){if(this.link){var a=b("ReactDOM").findDOMNode(this.link);a.href&&(a.setAttribute("data-href",a.href),a.removeAttribute("href"))}};d.$6=function(){if(this.link){var a=b("ReactDOM").findDOMNode(this.link),c=a.getAttribute("data-href");c&&(a.setAttribute("href",c),a.removeAttribute("data-href"))}};return c}(b("React").Component);e.exports=a}),null);
__d("LinkWithHiddenURLBarReact.bs",["ReasonReact.bs","bs_js_null_undefined","LinkWithHiddenURLBar.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return b("ReasonReact.bs").wrapJsForReason(b("LinkWithHiddenURLBar.react"),{"aria-label":b("bs_js_null_undefined").fromOption(a),"data-hover":b("bs_js_null_undefined").fromOption(d),"data-tooltip-content":b("bs_js_null_undefined").fromOption(e),"data-tooltip-alignh":b("bs_js_null_undefined").fromOption(f),"data-tooltip-position":b("bs_js_null_undefined").fromOption(g),className:b("bs_js_null_undefined").fromOption(c),href:b("bs_js_null_undefined").fromOption(h),linkRef:b("bs_js_null_undefined").fromOption(i),onClick:b("bs_js_null_undefined").fromOption(j),onAllClicks:b("bs_js_null_undefined").fromOption(k),onMouseDown:b("bs_js_null_undefined").fromOption(l),onMouseEnter:b("bs_js_null_undefined").fromOption(m),role:b("bs_js_null_undefined").fromOption(n),rel:b("bs_js_null_undefined").fromOption(o),style:b("bs_js_null_undefined").fromOption(p),tabIndex:b("bs_js_null_undefined").fromOption(q),target:b("bs_js_null_undefined").fromOption(r),title:b("bs_js_null_undefined").fromOption(s)},t)}f.make=a}),null);
__d("MessengerArrowLeftIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"30px",width:"30px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"arrow-left",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"ArrowLeft",transform:"translate(18.000000, 18.000000) scale(-1, 1) translate(-18.000000, -18.000000) "},b("React").createElement("polygon",{id:"Bounding-Box",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-1",d:"M7.4993436,16.4891009 L24.8703244,16.4891009 L17.9462377,9.56085648 C17.3606035,8.97508945 17.3606035,8.02496734 17.9462377,7.43970012 C18.5318719,6.85343329 19.4805893,6.85343329 20.0657234,7.43970012 L29.5603993,16.9394218 C30.1465336,17.524689 30.1465336,18.475311 29.5603993,19.0605782 L20.0657234,28.5602999 C19.4805893,29.1465667 18.5318719,29.1465667 17.9462377,28.5602999 C17.3606035,27.9745329 17.3606035,27.0249105 17.9462377,26.4391435 L24.8918294,19.4899074 L7.4993436,19.4899074 C6.67115381,19.4899074 6,18.8181746 6,17.9895042 C6,17.1608338 6.67115381,16.4891009 7.4993436,16.4891009 Z",fill:"#000000"}))));f.icon=a}),null);
__d("MessengerComposeIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"30px",width:"30px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"compose",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("polygon",{id:"Fill-1",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-2",d:"M15.047,20.26245 L15.9815,17.45445 C16.091,17.12495 16.276,16.82495 16.5215,16.57945 L27.486,5.60195 C28.29,4.79695 29.595,4.79695 30.399,5.60195 C31.2025,6.40645 31.202,7.70895 30.399,8.51345 L19.432,19.49345 C19.186,19.73945 18.886,19.92495 18.556,20.03495 L15.7555,20.96995 C15.318,21.11645 14.901,20.69995 15.047,20.26245 Z M24.005,28.00095 L12.001,28.00095 C9.791,28.00095 8,26.20945 8,23.99995 L8,11.99895 C8,9.78945 9.791,7.99845 12.001,7.99845 L19.0035,7.99745 C19.5555,7.99745 20.0035,8.44545 20.0035,8.99745 C20.0035,9.54995 19.5555,9.99795 19.0035,9.99795 L12.001,9.99845 C10.8965,9.99845 10.0005,10.89395 10.0005,11.99895 L10.0005,23.99995 C10.0005,25.10445 10.8965,26.00045 12.001,26.00045 L24.005,26.00045 C25.1095,26.00045 26.005,25.10445 26.005,23.99995 C26.005,23.99995 26.0045,17.55145 26.0045,16.99895 C26.0045,16.44645 26.4525,15.99845 27.005,15.99845 C27.557,15.99845 28.005,16.44645 28.005,16.99895 C28.005,17.55145 28.0055,23.99995 28.0055,23.99995 C28.0055,26.20945 26.2145,28.00095 24.005,28.00095 Z",fill:"#000000"})));f.icon=a}),null);
__d("MessengerDeleteAllDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("messengerDeleteAllDialogReactComponent").__setRef("MessengerDeleteAllDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerDeleteAllDialogBootloaderReact.bs",["ReasonReact.bs","MessengerDeleteAllDialogBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDeleteAllDialogBootloader.react"),{onDeleteAll:a,getThreadIDs:c,logConnectionRequestEvent:d},e)}f.make=a}),null);
__d("MessengerMessageRequestsTypedLoggerBootloader",["Promise","Bootloader"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_loggerLoader:null,_loadLogger:function(){this._loggerLoader||(this._loggerLoader=new(b("Promise"))(function(a,c){b("Bootloader").loadModules(["MessengerMessageRequestsTypedLogger"],function(b){b=new b();a(b)},"MessengerMessageRequestsTypedLoggerBootloader")}));return this._loggerLoader},log:function(a,b,c,d,e,f){this._loadLogger().done(function(g){g.setAction(a).setThreadKeyList(b).setSurface(c).setFolderType(d).setEntryPoint(e).setExtraClientData(f).log()})}};e.exports=a}),null);
__d("MessengerDeleteAllMenuReact.bs",["cx","fbt","bs_array","LinkReact.bs","MercuryIDs","ReasonReact.bs","bs_js_primitive","MessengerActions","MessengerDialogs.bs","bs_js_null_undefined","MessengerURIStore","MessengerMenuReact.bs","MercuryThreadActions","MessengerPopoverMenuReact.bs","AbstractPopoverButtonReact.bs","MessengerDotComAndInboxM4Check.bs","MessengerSettingsIconSVGM4React.bs","MessagingThreadCustomizationSource","MessengerDeleteAllDialogBootloaderReact.bs","MessengerMessageRequestsTypedLoggerBootloader"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDotComAndInboxM4Check.bs").yes?"_30yy _6ymd":"_30yy _2fug",j=b("ReasonReact.bs").statelessComponent("messengerDeleteAllMenuReact");function a(a,c,d,e,f){__p&&__p();return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){__p&&__p();var f=function(a,d){if(a.length!==0){var f=b("bs_array").map(function(a){return b("MercuryIDs").getThreadKeyfromThreadIDUserID(a,e)},a);f=f.join(",");a=JSON.stringify({number_of_threads:a.length});b("MessengerMessageRequestsTypedLoggerBootloader").log(d,f,c,c,"settings",b("bs_js_null_undefined").fromOption(a===void 0?void 0:b("bs_js_primitive").some(a)));return 0}else return 0},g=function(){__p&&__p();if(d==null)return[];else{var b=d[c];if(b!==void 0){b=b[a];if(b!==void 0)return b.threadlist;else return[]}else return[]}},j=function(){__p&&__p();var a=g(0);a.forEach(function(a){__p&&__p();var c=b("MessengerURIStore").getState().activeThreadID;if(c==null)return 0;else{c=c===a;if(c){b("MessengerActions").selectThread("");return 0}else return 0}});f(a,"message_requests_delete_request_multiple");b("MercuryThreadActions").get().batchDelete(a,b("MessagingThreadCustomizationSource").DELETE_ALL_SETTING);return 0},k=function(){var a=g(0);f(a,"message_requests_delete_attempt_multiple");return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDeleteAllDialogBootloaderReact.bs").make(j,g,f,[]))})},l=function(){var a=g(0);b("MercuryThreadActions").get().batchMarkRead(a,b("MessagingThreadCustomizationSource").DELETE_ALL_SETTING);return f(a,"message_requests_read_request_multiple")};k=b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").Menu[0]([b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Delete All"),k,void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Mark All As Read"),l,void 0,[]))]));l=h._("Settings, help and more");l={button:b("MessengerDotComAndInboxM4Check.bs").yes?b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,l,i,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,l,[b("MessengerSettingsIconSVGM4React.bs").icon])):b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,l,i,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,l,[])),defaultMaxWidth:200};return b("ReasonReact.bs").element(void 0,void 0,b("MessengerPopoverMenuReact.bs").make(void 0,void 0,void 0,k,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("AbstractPopoverButtonReact.bs").make(b("bs_js_primitive").some(l),!1,void 0,void 0,200,[]))]))},j[9],j[10],j[11],j[12]]}f.settingsIconClasses=i;f.component=j;f.make=a}),null);
__d("MessengerMasterViewHeaderM4React.bs",["cx","fbt","React","qex","MercuryIDs","ReasonReact.bs","MessagingTag","MessengerView","MessengerActions","MessengerURIConstants","LinkWithHiddenURLBarReact.bs","MessengerSettingsMenuReact.bs","MessengerDeleteAllMenuReact.bs","MessengerComposeIconSVGM4React.bs","MercuryParticipantsImageM4React.bs","MessengerArrowLeftIconSVGM4React.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("qex")._("1002636");function j(a,c){__p&&__p();if(a===b("MessagingTag").ACTION_ARCHIVED)return 1;else if(a===b("MessagingTag").PENDING)return 5;else if(a===b("MessagingTag").MARKETPLACE_FOLDER)return 4;else if(a===b("MessagingTag").OTHER)return 2;else if(c===b("MessengerView").MASTER.PEOPLE)return 0;else if(c===b("MessengerView").MASTER.SEARCH)if(i)return 6;else return 3;else if(c===b("MessengerView").MASTER.SEE_ALL_GROUPS)if(i)return 7;else return 3;else if(c===b("MessengerView").MASTER.SEE_ALL_PAGES)if(i)return 8;else return 3;else if(c===b("MessengerView").MASTER.SEE_ALL_PEOPLE&&i)return 9;else return 3}function k(a){a.preventDefault();b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);b("MessengerActions").changeQuery(null);return 0}function l(a){a.preventDefault();b("MessengerActions").changeFolder(b("MessagingTag").PENDING);return 0}var m=h._("Back to Recent Messages"),n=h._("Back to Message Requests"),o=h._("New Message"),p=b("ReasonReact.bs").statelessComponent("MessengerMasterViewHeaderM4React");function a(a,c,d,e,f,g){__p&&__p();var i=j(c,e),q=function(a){a.preventDefault();(i===0||i===6||i===7||i===8||i===9)&&b("MessengerActions").changeMasterView(b("MessengerView").MASTER.RECENT);b("MessengerActions").changeFolder(b("MessagingTag").INBOX);return 0};return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],function(){__p&&__p();var g;switch(i){case 0:g=[0,h._("People"),2,!0];break;case 1:g=[0,h._("Archived"),2,!0];break;case 2:g=[1,h._("Filtered"),1,!1];break;case 3:g=[2,h._("Chats"),0,!0];break;case 4:g=[0,h._("Marketplace"),1,!1];break;case 5:g=[0,h._("Requests"),1,!1];break;case 6:g=[0,h._("Messages"),2,!1];break;case 7:g=[0,h._("Groups"),2,!1];break;case 8:g=[0,h._("Businesses"),2,!1];break;case 9:g=[0,h._("People"),2,!1];break}var j=g[3],p=g[0],r;switch(p){case 0:r=b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(m,"_30yy _6-xf _6-xg",void 0,void 0,void 0,void 0,void 0,void 0,q,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,m,[b("MessengerArrowLeftIconSVGM4React.bs").icon]));break;case 1:r=b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(n,"_30yy _6-xf _6-xg",void 0,void 0,void 0,void 0,void 0,void 0,l,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,n,[b("MessengerArrowLeftIconSVGM4React.bs").icon]));break;case 2:r=b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(m,"_30yy _6-xf _6-xh",void 0,void 0,void 0,void 0,void 0,void 0,q,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,m,[b("MessengerArrowLeftIconSVGM4React.bs").icon]));break}var s=b("ReasonReact.bs").element(void 0,void 0,b("MessengerSettingsMenuReact.bs").make(a,c,e,f,[])),t;switch(g[2]){case 0:t=b("React").createElement("div",{className:"_6ymu _7iq4"},s);break;case 1:t=b("React").createElement("div",{className:"_6ymu _7iq4"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerDeleteAllMenuReact.bs").make(a,c,d,f,[])));break;case 2:t=b("React").createElement("div",{className:"_6ymu _6-xj"},s);break}return b("React").createElement("div",{className:"_6-xk",role:"banner"},r,b("React").createElement(b("MercuryParticipantsImageM4React.bs").make,{className:"_7sta"+(p===2?" _7stb":"")+(p!==2?" _7stc":""),participants:[b("MercuryIDs").getParticipantIDFromUserID(f)],size:40}),b("React").createElement("h1",{className:"_6-xo"},g[1]),b("React").createElement("div",{className:"_6-xl _6-xm"}),t,b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(o,"_30yy _6-xp"+(j?" _6-xq":"")+(j?"":" _6-xr"),void 0,void 0,void 0,void 0,b("MessengerURIConstants").COMPOSE_SUBPATH,void 0,k,void 0,void 0,void 0,"button",void 0,void 0,0,void 0,o,[b("MessengerComposeIconSVGM4React.bs").icon])))},p[9],p[10],p[11],p[12]]}f.showNewBannerMessageSearch=i;f.convertStupidErrorProneCheckToViewVariant=j;f.handleNewMessageClick=k;f.handleBackToMessageRequests=l;f.backToInbox=m;f.backToMessageRequests=n;f.newMessage=o;f.component=p;f.make=a}),null);
__d("MessengerMasterViewHeaderReact.bs",["cx","fbt","React","ReasonReact.bs","MessagingTag","MessengerView","MessengerActions","MessengerURIConstants","LinkWithHiddenURLBarReact.bs","MessengerSettingsMenuReact.bs","MessengerDeleteAllMenuReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){a.preventDefault();b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);b("MessengerActions").changeQuery(null);return 0}function j(a){a.preventDefault();b("MessengerActions").changeFolder(b("MessagingTag").PENDING);return 0}var k="_30yy _2oc8",l="_4kzu",m="_36ic _5l-3",n=b("ReasonReact.bs").statelessComponent("MessengerMasterViewHeaderReact");function o(a,c,d,e,f,g){__p&&__p();var o=function(a){a.preventDefault();e!==b("MessengerView").MASTER.RECENT&&b("MessengerActions").changeMasterView(b("MessengerView").MASTER.RECENT);b("MessengerActions").changeFolder(b("MessagingTag").INBOX);return 0},p=function(){var a=c===b("MessagingTag").PENDING||c===b("MessagingTag").ACTION_ARCHIVED||e!==b("MessengerView").MASTER.RECENT,d=a?o:j;a=a?h._("Back to Recent Messages"):h._("Back to Message Requests");return b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(a,"_30yy _2oc9",void 0,void 0,void 0,void 0,void 0,void 0,d,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,a,[]))},q=c===b("MessagingTag").ACTION_ARCHIVED?h._("Archived threads"):c===b("MessagingTag").PENDING?h._("Message requests"):c===b("MessagingTag").OTHER?h._("Filtered messages"):e===b("MessengerView").MASTER.PEOPLE?h._("Active now"):h._("Messenger");return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],function(){var g=c!==b("MessagingTag").INBOX||e!==b("MessengerView").MASTER.RECENT?p(0):b("React").createElement("div",{className:l},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSettingsMenuReact.bs").make(a,c,e,f,[]))),j=c!==b("MessagingTag").PENDING&&c!==b("MessagingTag").OTHER;if(j){j=h._("New Message");j=b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(j,k,void 0,void 0,void 0,void 0,b("MessengerURIConstants").COMPOSE_SUBPATH,void 0,i,void 0,void 0,void 0,"button",void 0,void 0,0,void 0,j,[]))}else j=b("React").createElement("div",{className:l},b("ReasonReact.bs").element(void 0,void 0,b("MessengerDeleteAllMenuReact.bs").make(a,c,d,f,[])));return b("React").createElement("div",{className:m,role:"banner"},g,b("React").createElement("h1",{className:"_1tqi"},q),j)},n[9],n[10],n[11],n[12]]}a=b("ReasonReact.bs").wrapReasonForJs(n,function(a){return o(a.filter,a.folder,a.threadlistOrderMap,a.view,a.viewer,[])});f.handleAddClick=i;f.handleFilteredRequestsBackArrowClick=j;f.composeButtonClasses=k;f.settingsMenuClasses=l;f.rootClasses=m;f.component=n;f.make=o;f.jsComponent=a}),null);
__d("MessengerThread.bs",[],(function(a,b,c,d,e,f){}),null);
__d("makeMarketplaceFolderPayload",["ImmutableObject","MessagingTag","MessagingThreadType","makeMercuryThreadPayload"],(function(a,b,c,d,e,f){"use strict";function a(a){a===void 0&&(a={});return new(b("ImmutableObject"))(babelHelpers["extends"]({},b("makeMercuryThreadPayload")({folder:b("MessagingTag").INBOX,name:"Marketplace",thread_id:"marketplace",thread_type:b("MessagingThreadType").FOLDER}),a))}e.exports=a}),null);
__d("MercuryThreadlistContainer.react",["LogHistory","MercuryAPIArgsSource","MercuryFilters.bs","MercuryServerRequests","MercuryThreadlistConstants","MessagingTag","MessagingThreadType","MessengerConfig","MessengerEnvironment","MessengerState.bs","MessengerThread.bs","React","emptyFunction","gkx","immutable","makeMarketplaceFolderPayload","qex","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="search";a=3;var h=5e3,i=b("MercuryThreadlistConstants").JEWEL_THREAD_COUNT+a,j=b("LogHistory").getInstance("threadlist_container");function k(a,b,c){a=a[b];return a?a[c]:null}function l(a,b,c){a=k(a,b,c);return a?a.reachedEnd:!1}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),i=0;i<e;i++)f[i]=arguments[i];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isLoading:null,isSearching:!1,unreadMessageRequestThreads:[],threads:b("immutable").Map(),pinnedThreads:[]},d.$1=null,d.$5=function(){var a=function(){d.setState({suspended:!1}),d.handleThreadListUpdate()};b("gkx")("678640")&&(d.setState({suspended:!0}),b("setTimeout")(a,h))},d.$8=function(){!d.state.isSearching&&!d.state.isLoading&&!l(d.props.threadlistOrderMap,d.props.folder,d.props.filter)&&d.$13(d.props.folder,d.props.filter,b("MercuryThreadlistConstants").JEWEL_MORE_COUNT+1)},d.$10=function(a,c){d.setState({searchThreads:[]},function(){return d.$3(g,b("MercuryFilters.bs").all,a)})},d.$9=function(a){d.setState({isSearching:!!a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$2(this.props.threadlistOrderMap,this.props.folder,this.props.filter),this.$3(this.props.folder,this.props.filter)};d.UNSAFE_componentWillReceiveProps=function(a){(a.folder!==this.props.folder||a.filter!==this.props.filter)&&this.$2(a.threadlistOrderMap,a.folder,a.filter);var b=this.state.isLoading;if(b&&a.folder===b.folder&&a.filter===b.filter){var c=k(a.threadlistOrderMap,a.folder,a.filter);(c&&c.threadlist.length>=b.limit||l(a.threadlistOrderMap,a.folder,a.filter))&&this.setState({isLoading:null})}this.$3(a.folder,a.filter)};d.componentWillUnmount=function(){this.$4()};d.handleThreadListUpdate=function(){this.$3(this.props.folder,this.props.filter)};d.$6=function(){var a=this,c=k(this.props.threadlistOrderMap,b("MessagingTag").PENDING,b("MercuryFilters.bs").unread);return!c?[]:c.threadlist.map(function(b){return a.props.threads[b]})};d.$7=function(a,c){__p&&__p();var d=this;if(this.state.isSearching)return this.state.threads.get(g)||[];if(a==="inbox"&&this.props.threadlistOrderMap.marketplace_folder&&this.props.threadlistOrderMap.marketplace_folder.all.threadlist.length>0&&b("qex")._("998180")&&b("MessengerEnvironment").messengerdotcom){var e=this.state.threads.get(a)?[].concat(this.state.threads.get(a)).filter(function(a){return a.thread_type!==b("MessagingThreadType").MARKETPLACE}):[],f=this.props.threadlistOrderMap.marketplace_folder.all.threadlist.reduce(function(a,c){return a+b("MessengerState.bs").getThreadMetaNow(d.props.viewer,c).unread_count},0);if(c==="unread"&&f===0)return e;c=b("MessengerState.bs").getThreadMetaNow(this.props.viewer,this.props.threadlistOrderMap.marketplace_folder.all.threadlist[0]);e.push(b("makeMarketplaceFolderPayload")({timestamp:c.timestamp,unread_count:f,snippet:c.snippet,snippet_sender:c.snippet_sender,participants:c.participants}));e.sort(function(a,b){return b.timestamp-a.timestamp});return e}else if(a==="marketplace_folder"&&this.props.threadlistOrderMap.marketplace_folder&&this.props.threadlistOrderMap.marketplace_folder.groups.threadlist.length>0&&b("qex")._("998180")&&b("MessengerEnvironment").messengerdotcom)return this.props.threadlistOrderMap.marketplace_folder.groups.threadlist.map(function(a){return b("MessengerState.bs").getThreadMetaNow(d.props.viewer,a)}).filter(function(a){return a.message_count>0});return this.state.threads.get(a)||[]};d.render=function(){var a=this.props,c=a.ChildClass,d=a.folder,e=a.filter,f=a.threadlistOrderMap;a=babelHelpers.objectWithoutPropertiesLoose(a,["ChildClass","folder","filter","threadlistOrderMap"]);var g=this.$7(d,e);return b("React").createElement(c,babelHelpers["extends"]({},a,{filter:e,folder:d,isLoaded:l(f,d,e),isLoading:!!this.state.isLoading,isSearching:this.state.isSearching,maxHeight:this.props.maxHeight,newMessageRequestThreads:this.$6(),pendingFolderUnseenCount:this.props.pendingFolderUnseenCount,threads:g,pinnedThreads:this.state.pinnedThreads,onLoadMoreRequest:this.$8,onQuery:this.$9,onSearchResults:this.$10,maxInitialThreadCount:i,handleChatTabOpen:this.props.source==="jewel"&&b("gkx")("678640")?this.$5:b("emptyFunction")}))};d.$2=function(a,c,d){var e=this;c===b("MessagingTag").INBOX&&(b("gkx")("678596")||this.props.source!==b("MercuryAPIArgsSource").JEWEL)&&this.$11();!this.$12(c,d,a)?this.$13(c,d,i):this.state.isLoading?this.setState({isLoading:null},function(){e.$3(c,d)}):this.$3(c,d)};d.$11=function(){if(l(this.props.threadlistOrderMap,b("MessagingTag").PENDING,b("MercuryFilters.bs").unread))return;b("MercuryServerRequests").getForFBID(this.props.viewer).fetchThreadlistInfo(0,b("MercuryThreadlistConstants").MAX_UNREAD_COUNT,b("MessagingTag").PENDING,b("MercuryFilters.bs").unread,this.props.source,null)};d.$14=function(a,b){var c=k(this.props.threadlistOrderMap,a,b);c=c?c.threadlist:[];c=c&&c.length>0?c[c.length-1]:null;if(!c)return null;c=this.props.threads[c];var d=c?c.timestamp:null;a==="inbox"&&b==="all"&&j.debug("load threads after timestamp "+(d?d:"null"),c?c.thread_id:null);return d};d.$13=function(a,c,d){var e=this;a===b("MessagingTag").MARKETPLACE_FOLDER&&(a=b("MessagingTag").INBOX);var f=function(){b("MercuryServerRequests").getForFBID(e.props.viewer).fetchThreadlistInfo(b("MercuryThreadlistConstants").RECENT_THREAD_OFFSET,d,a,c===b("MercuryFilters.bs").all?null:c,e.props.source,e.$14(a,c))};this.setState({isLoading:{folder:a,filter:c,limit:d}},f)};d.$3=function(a,c,d){__p&&__p();var e=this;this.$4();c=k(this.props.threadlistOrderMap,a,c);var f=d||(c?c.threadlist:[]);d=[].concat.apply([],f);this.$1=b("MessengerState.bs").getMultiThreadMeta(this.props.viewer,d,function(b){e.setState(function(c){var d=c.threads.set(a,e.$15(f,b));return babelHelpers["extends"]({},c,{threads:d})})});this.$16()};d.$16=function(){var a=this,c=b("MessengerState.bs").getPinnedThreadlist(this.props.viewer);b("MessengerConfig").MPT>0&&c.reverse();b("MessengerState.bs").getMultiThreadMeta(this.props.viewer,c,function(b){a.setState({pinnedThreads:a.$15(c,b)})})};d.$15=function(a,b){return a.map(function(a){if(Array.isArray(a))return a.map(function(a){return b[a]});else return b[a]})};d.$17=function(){var a=this,c=k(this.props.threadlistOrderMap,b("MessagingTag").PENDING,b("MercuryFilters.bs").unread),d=c?c.threadlist:[];b("MessengerState.bs").getMultiThreadMeta(this.props.viewer,d,function(b){a.setState({unreadMessageRequestThreads:d.map(function(a){return b[a]})})})};d.$12=function(a,b,c){var d=i,e=k(c,a,b);return!!(e&&(e.threadlist.length>=d||l(c,a,b)))};d.$4=function(){this.$1&&b("MessengerState.bs").unsubscribeThread(this.props.viewer,this.$1)};return c}(b("React").Component);c.defaultProps={source:b("MercuryAPIArgsSource").JEWEL};e.exports=c}),null);
__d("MessengerRecentContainer.react",["requireCond","MercuryAPIArgsSource","MercuryThreadlistContainer.react","MessengerComposerSteps","MessengerComposerStore","MessengerState.bs","PureStoreBasedStateMixin","React","cr:875867"],(function(a,b,c,d,e,f){"use strict";var g=b("cr:875867").jsComponent;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerRecentContainer",mixins:[b("PureStoreBasedStateMixin")(b("MessengerComposerStore"))],propTypes:{activeThreadID:a.string,blockedIds:a.any,filter:a.string.isRequired,folder:a.string.isRequired,maxHeight:a.number,pendingFolderUnseenCount:a.number,readReceipts:a.any,viewer:a.string.isRequired,hideThreadListHeader:a.bool,isDenseRow:a.bool,hideSearchBox:a.bool,searchInputPortalRef:a.any},statics:{calculateState:function(){return{isComposing:b("MessengerComposerStore").getState().step!==b("MessengerComposerSteps").NULL}}},render:function(){var a=this;return b("React").createElement(b("MessengerState.bs").jsComponent,{fbid:this.props.viewer},function(c){return b("React").createElement(b("MercuryThreadlistContainer.react"),{ChildClass:g,activeThreadID:a.props.activeThreadID,blockedIds:a.props.blockedIds,filter:a.props.filter,folder:a.props.folder,isComposing:a.state.isComposing,maxHeight:a.props.maxHeight,pendingFolderUnseenCount:a.props.pendingFolderUnseenCount,isNewMessageActive:a.props.isNewMessageActive,readReceipts:a.props.readReceipts,source:b("MercuryAPIArgsSource").WEBMESSENGER,threads:b("MessengerState.bs").threads(c),threadlistOrderMap:b("MessengerState.bs").threadlistOrderMap(c),viewer:a.props.viewer,hideThreadListHeader:a.props.hideThreadListHeader,isDenseRow:a.props.isDenseRow,hideSearchBox:a.props.hideSearchBox,searchInputPortalRef:a.props.searchInputPortalRef})})}});e.exports=c}),null);
__d("MessengerRecentContainerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerRecentContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("MessengerRecentContainer.react"),{activeThreadID:b("bs_js_null_undefined").fromOption(a),blockedIds:b("bs_js_null_undefined").fromOption(c),filter:d,folder:e,isNewMessageActive:f,pendingFolderUnseenCount:b("bs_js_null_undefined").fromOption(g),readReceipts:b("bs_js_null_undefined").fromOption(h),viewer:i},j)}f.make=a}),null);
__d("MessengerSearchContainer.react",["cx","fbt","requireCond","ImageBlock.react","Link.react","MercuryIDs","MercuryTypeaheadConstants","MessengerActions","MessengerContactAdapters","MessengerContactList.react","MessengerFlexArea.react","MessengerScrollableArea.react","MessengerSearchStore","MessengerSpinner.react","MercuryThreadIDMap","MessengerThreadSearchActions","MessengerThreadSearchStore","MessengerTypeaheadUtils","MessengerURIStore","MessengerView","React","StoreAndPropBasedStateMixin","emptyFunction","cr:875867"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryThreadIDMap").get(),j=b("cr:875867").jsComponent;a=b("React").PropTypes;var k=function(){return b("React").createElement(b("ImageBlock.react"),{className:"_225c",spacing:"medium"},b("React").createElement(b("MessengerSpinner.react"),{className:"_2i59",color:"grey"}),b("React").createElement("div",{className:"_4g0h"},h._("Searching...")))};c=b("React").createClass({displayName:"MessengerSearchContainer",mixins:[b("StoreAndPropBasedStateMixin")(b("MessengerSearchStore"),b("MessengerThreadSearchStore"),b("MessengerURIStore"))],propTypes:{activeThreadID:a.string,blockedIds:a.object.isRequired,filter:a.string.isRequired,folder:a.string.isRequired,isComposing:a.bool,isLoaded:a.bool,isLoading:a.bool,isNewMessageActive:a.bool,maxHeight:a.number,viewer:a.string.isRequired,readReceipts:a.any,hideThreadListHeader:a.bool,isDenseMode:a.bool},statics:{calculateState:function(a){a=b("MessengerURIStore").getState();if(a.sa!=null){a=b("MessengerSearchStore").getState();return{showSeeAllView:!0,threads:a.threads||[],threadsExhausted:a.threadsExhausted,loading:a.loading,query:a.query}}else{a=b("MessengerThreadSearchStore").getState();return{showSeeAllView:!1,threads:a.threads||[],threadsExhausted:a.threadsExhausted,loading:a.loading,query:a.query}}}},_subscriptions:null,render:function(){var a=!this.state.loading&&!!this.state.threads,c=this.state.query===null;if(c)return b("React").createElement(k,null);if(this.state.showSeeAllView){c=b("MessengerTypeaheadUtils").buildSingleSection(this.state.threads);return b("React").createElement(b("MessengerFlexArea.react"),null,b("React").createElement(b("MessengerScrollableArea.react"),null,b("React").createElement(b("MessengerContactList.react"),{contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,isLoading:this.state.loading,listSections:c,onSelect:this._handleSelect,viewer:this.props.viewer})))}else return b("React").createElement(j,babelHelpers["extends"]({},this.props,{handleClear:this._handleClear,isLoaded:a,isLoading:this.state.loading,isSearching:!1,maxHeight:this.props.maxHeight,newMessageRequestThreads:[],onLoadMoreRequest:b("MessengerThreadSearchActions").loadMoreThreads,onQuery:b("MessengerActions").changeQueryAll,onSearchResults:b("emptyFunction"),queryString:this.state.query,renderLoadMore:this._renderLoadMoreLink,readReceipts:this.props.readReceipts,threads:this.state.threads,hideThreadListHeader:this.props.hideThreadListHeader,isDenseMode:this.props.isDenseMode}))},_renderLoadMoreLink:function(){if(this.state.threadsExhausted)return this.state.threads.length>0?null:b("React").createElement("div",{className:"_19hf"},b("React").createElement(b("Link.react"),{href:"#",onClick:this._handleClear},h._("No conversations found")));return this.state.loading?b("React").createElement(k,null):b("React").createElement("div",{className:"_19hf"},b("React").createElement(b("Link.react"),{href:"#",onClick:b("MessengerThreadSearchActions").loadMoreThreads,tabIndex:-1},h._("Load More")))},_handleClear:function(){b("MessengerActions").changeMasterView(b("MessengerView").MASTER.RECENT)},_handleSelect:function(a,c){__p&&__p();c&&c.preventDefault();var d=a.getType();c=a.getUniqueID().split(":").pop();switch(d){case b("MercuryTypeaheadConstants").FRIEND_TYPE:case b("MercuryTypeaheadConstants").NON_FRIEND_TYPE:case b("MercuryTypeaheadConstants").PAGE_TYPE:b("MessengerActions").selectThread(b("MercuryIDs").getThreadIDFromUserID(c),d);return;case b("MercuryTypeaheadConstants").THREAD_TYPE:a=function(a){return b("MessengerActions").selectThread(a,d)};i.getClientIDFromServerID(c,a);break}}});e.exports=c}),null);
__d("MessengerSearchContainerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerSearchContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l){return b("ReasonReact.bs").wrapJsForReason(b("MessengerSearchContainer.react"),{activeThreadID:b("bs_js_null_undefined").fromOption(a),blockedIds:b("bs_js_null_undefined").fromOption(c),filter:d,folder:e,isComposing:b("bs_js_null_undefined").fromOption(f),isLoaded:b("bs_js_null_undefined").fromOption(g),isLoading:b("bs_js_null_undefined").fromOption(h),isNewMessageActive:b("bs_js_null_undefined").fromOption(i),readReceipts:b("bs_js_null_undefined").fromOption(j),viewer:k},l)}f.make=a}),null);
__d("MessengerUtilityJitter.react",["React","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(){return Math.random()<.5}var h={display:"none",opacity:"0",width:"0",margin:"0",height:"0",padding:"0",border:"0"};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=document,c=a.body;if(!c)return;a=Math.floor(Math.random()*1e4%4);for(var a=a;a>0;a--)b("setTimeout")(function(){var a=document.createElement("iframe");a.src="about:blank";a.setAttribute("aria-hidden","true");for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(a.style[d]=h[d]);c.appendChild(a);g()&&b("setTimeout")(function(){c.removeChild(a)},Math.random()*25)},Math.random()*50)};d.render=function(){return g()?b("React").createElement("iframe",{src:"about:blank",style:h,"aria-hidden":"true"}):b("React").createElement("span",null)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerUtilityJitterReact.bs",["ReasonReact.bs","MessengerUtilityJitter.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("MessengerUtilityJitter.react"),{},a)}f.make=a}),null);
__d("MessengerGroupCreateDialog.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{entryPoint:this.props.entryPoint,isShown:this.props.isShown,onClose:this.props.onClose}),loader:b("JSResource")("MessengerGroupCreateDialogImpl.react").__setRef("MessengerGroupCreateDialog.react"),placeholder:b("React").createElement("div",null)})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerGroupCreateDialogReact.bs",["ReasonReact.bs","MessengerGroupCreateDialog.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerGroupCreateDialog.react"),{entryPoint:a,isShown:c,onClose:d},e)}f.make=a}),null);
__d("WorkchatNotificationsJewelBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";function a(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),null),loader:b("JSResource")("workchatNotificationsJewelReactComponent").__setRef("WorkchatNotificationsJewelBootloader.react"),placeholder:b("React").createElement("div",null)})}e.exports=a}),null);
__d("WorkchatNotificationsJewelBootloaderReact.bs",["ReasonReact.bs","WorkchatNotificationsJewelBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("WorkchatNotificationsJewelBootloader.react"),{},a)}f.make=a}),null);
__d("WorkplaceLogoReact.bs",["cx","fbt","React","LinkReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("ReasonReact.bs").statelessComponent("WorkplaceLogoReact");function a(){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){var a=h._("Go to Workplace News Feed");return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,a,"_2z9u",void 0,void 0,void 0,void 0,void 0,"/feed",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"_blank",a,[b("React").createElement("span",{className:"_2z9t"},a)]))},i[9],i[10],i[11],i[12]]}f.component=i;f.make=a}),null);
__d("WorkChatMasterViewHeaderReact.bs",["cx","fbt","bs_block","bs_curry","React","gkx","QE2Logger","ReasonReact.bs","MessagingTag","MercuryConfig","MessengerView","MessengerActions","WorkplaceLogoReact.bs","MessengerURIConstants","LinkWithHiddenURLBarReact.bs","MessengerSettingsMenuReact.bs","MessengerDeleteAllMenuReact.bs","MessengerGroupCreateDialogReact.bs","XWorkSaveGroupPurposeController","MessengerGroupCreationEntryPoint","WorkSyncedGroupCreationEntryPoint","WorkchatNotificationsJewelBootloaderReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){a.preventDefault();b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);b("MessengerActions").changeQuery(null);return 0}function a(a){a.preventDefault();b("MessengerActions").changeFolder(b("MessagingTag").PENDING);return 0}var j="_30yy _2oc8",k="_4kzu",l="_36ic _5l-3",m=b("MessengerGroupCreationEntryPoint").WORK_CHAT_HEADER_NEW_GROUP_BUTTON;function n(a){var c=a[1][0];if(c)return b("ReasonReact.bs").element(void 0,void 0,b("MessengerGroupCreateDialogReact.bs").make(m,!0,function(){return b("bs_curry")._1(a[3],1)},[]));else return null}var o=b("ReasonReact.bs").reducerComponent("WorkChatMasterViewHeaderReact");function c(a,c,d,e,f,g){__p&&__p();var m=function(a){a.preventDefault();e!==b("MessengerView").MASTER.RECENT&&b("MessengerActions").changeMasterView(b("MessengerView").MASTER.RECENT);b("MessengerActions").changeFolder(b("MessagingTag").INBOX);return 0},p=function(){var a=h._("Back to Recent Messages");return b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(a,"_30yy _2oc9",void 0,void 0,void 0,void 0,void 0,void 0,m,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,a,[]))},q;if(c===b("MessagingTag").ACTION_ARCHIVED){g=b("gkx")("762398");q=g?h._("Hidden chats"):h._("Archived threads")}else if(c===b("MessagingTag").PENDING)q=h._("Message requests");else if(c===b("MessagingTag").OTHER){g=b("gkx")("762398");q=g?h._("Permanently hidden"):h._("Filtered messages")}else q=e===b("MessengerView").MASTER.PEOPLE?h._("People"):h._("Chat");var r=b("gkx")("678606");return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],function(g){__p&&__p();var m=c!==b("MessagingTag").INBOX||e!==b("MessengerView").MASTER.RECENT?p(0):r?b("ReasonReact.bs").element(void 0,void 0,b("WorkchatNotificationsJewelBootloaderReact.bs").make([])):b("React").createElement("div",{className:k},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSettingsMenuReact.bs").make(a,c,e,f,[]))),o=c!==b("MessagingTag").PENDING&&c!==b("MessagingTag").OTHER;b("QE2Logger").logExposureForUser("workchat_synced_groups_universe",f);var s=function(){if(b("MercuryConfig").WorkSyncedGroupEntryPointEnabled){var a=b("MercuryConfig").WorkSyncedGroupAutoCreateEnabled;a=a?[b("XWorkSaveGroupPurposeController").getURIBuilder().setString("purpose","work_teamwork").setString("ref",b("WorkSyncedGroupCreationEntryPoint").COMPOSE_BUTTON_ON_WORKCHAT).setBool("back_disallowed",!0).getURI(),function(){return 0},"dialog"]:["#",function(){return b("bs_curry")._1(g[3],0)},""];var c=h._("New Group");return b("React").createElement(b("React").Fragment,void 0,n(g),b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(c,"_30yy _6u29",void 0,void 0,void 0,void 0,a[0],void 0,a[1],void 0,void 0,void 0,void 0,a[2],void 0,void 0,void 0,c,[])))}else return null};if(o){var t=h._("New Message");t=b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(t,j,void 0,void 0,void 0,void 0,b("MessengerURIConstants").COMPOSE_SUBPATH,void 0,i,void 0,void 0,void 0,"button",void 0,void 0,0,void 0,t,[]))}else t=b("React").createElement("div",{className:k},b("ReasonReact.bs").element(void 0,void 0,b("MessengerDeleteAllMenuReact.bs").make(a,c,d,f,[])));return b("React").createElement("div",{className:l,role:"banner"},r?b("ReasonReact.bs").element(void 0,void 0,b("WorkplaceLogoReact.bs").make([])):null,m,b("React").createElement("h1",{className:"_1tqi"},q),o?s(0):null,t)},function(){return[!1]},o[10],function(c,a){if(c)return b("bs_block").__(0,[[!1]]);else return b("bs_block").__(0,[[!0]])},o[12]]}f.handleAddClick=i;f.handleFilteredRequestsBackArrowClick=a;f.composeButtonClasses=j;f.settingsMenuClasses=k;f.rootClasses=l;f.entryPoint=m;f.renderDialog=n;f.component=o;f.make=c}),null);
__d("MessengerMasterViewReact.bs",["React","bs_js_exn","gkx","bs_belt_Option","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerView","MessengerUtilityJitterReact.bs","MessengerActiveUsersListReact.bs","MessengerRecentContainerReact.bs","MessengerSearchContainerReact.bs","WorkChatMasterViewHeaderReact.bs","MessengerDotComAndInboxM4Check.bs","MessengerMasterViewHeaderReact.bs","MessengerMasterViewHeaderM4React.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerMasterView");function a(a,c,d,e,f,h,i,j,k,l,m){__p&&__p();var n=function(){__p&&__p();var g=d!==void 0?d===b("MessengerView").DETAIL.COMPOSE:!1;if(k===b("MessengerView").MASTER.PEOPLE)return b("ReasonReact.bs").element(void 0,void 0,b("MessengerActiveUsersListReact.bs").make(g?void 0:a,l,[]));else if(k===b("MessengerView").MASTER.PAYMENT||k===b("MessengerView").MASTER.RECENT)return b("ReasonReact.bs").element(void 0,void 0,b("MessengerRecentContainerReact.bs").make(a,b("bs_js_primitive").some(c),b("bs_belt_Option").getExn(e),f,g,h,b("bs_js_primitive").some(i),l,[]));else if(k===b("MessengerView").MASTER.SEARCH)return b("ReasonReact.bs").element(void 0,void 0,b("MessengerSearchContainerReact.bs").make(a,b("bs_js_primitive").some(c),b("bs_belt_Option").getExn(e),f,void 0,void 0,void 0,g,b("bs_js_primitive").some(i),l,[]));else if(k===b("MessengerView").MASTER.SEE_ALL_PAGES||k===b("MessengerView").MASTER.SEE_ALL_PEOPLE||k===b("MessengerView").MASTER.SEE_ALL_GROUPS)return b("ReasonReact.bs").element(void 0,void 0,b("MessengerSearchContainerReact.bs").make(a,b("bs_js_primitive").some(c),b("bs_belt_Option").getExn(e),f,void 0,void 0,void 0,g,b("bs_js_primitive").some(i),l,[]));else return b("bs_js_exn").raiseError("Unknown master view: "+k)};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(a){var c=b("gkx")("827710");return b("React").createElement(b("React").Fragment,void 0,c?null:b("ReasonReact.bs").element(void 0,void 0,b("MessengerUtilityJitterReact.bs").make([])),b("MessengerDotComAndInboxM4Check.bs").yes?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMasterViewHeaderM4React.bs").make(b("bs_belt_Option").getExn(e),f,j,k,l,[])):b("CurrentUser").isWorkUser()?b("ReasonReact.bs").element(void 0,void 0,b("WorkChatMasterViewHeaderReact.bs").make(b("bs_belt_Option").getExn(e),f,j,k,l,[])):b("ReasonReact.bs").element(void 0,void 0,b("MessengerMasterViewHeaderReact.bs").make(b("bs_belt_Option").getExn(e),f,j,k,l,[])),n(a))},g[9],g[10],g[11],g[12]]}f.component=g;f.make=a}),null);
__d("P2PPaymentPickerDialog.react",["cx","fbt","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","MessengerGraphQLTokenizer.react","React","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogHeaderReact.re").component,j=b("MessengerDialogTitleReact.re").component;a=b("React").PropTypes;var k=460,l=b("immutable").Set();c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={entries:b("immutable").Set()},d.$1=function(){var a=d.state.entries;d.props.handleContinue(a)},d.$2=function(){var a=d.state.entries;d.props.handleCancel(a)},d.handleAddEntryAttempt=function(a){d.props.multiSelect?d.setState({entries:d.state.entries.add(a)}):d.setState({entries:b("immutable").Set.of(a)})},d.handleRemoveEntryAttempt=function(a){d.setState({entries:d.state.entries["delete"](a)})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.renderHeader=function(){return b("React").createElement(i,null,b("React").createElement(b("MessengerDialogCancelButton.react"),null),b("React").createElement(j,null,h._("Send money")),b("React").createElement(b("MessengerDialogButton.react"),{disabled:!this.state.entries.size,label:h._("Continue"),type:"primary",onClick:this.$1}))};d.renderTokenizer=function(){return b("React").createElement(b("MessengerGraphQLTokenizer.react"),{autoFocus:!0,canViewerSendMoneyFilter:!0,className:"_2wsl",context:null,enableMessageSearch:!1,entries:this.state.entries.toList(),excludeGroups:!0,excludePages:!0,forceHideClearButton:!0,hasHoverState:!1,originalEntryIDs:l,placeholder:h._("Type the name of a person"),scrollableViewClassName:"_2wsm",shouldQueryInternalBot:!1,shouldQueryVCEndpoint:!1,useLayer:!1,viewer:this.props.viewer,width:k,onAddEntryAttempt:this.handleAddEntryAttempt,onClear:null,onRemoveEntryAttempt:this.handleRemoveEntryAttempt})};d.render=function(){return b("React").createElement(b("MessengerDialog.react"),{className:"_2wsn",type:"default",width:k,onToggle:this.$2},this.renderHeader(),this.renderTokenizer())};return c}(b("React").Component);c.propTypes={viewer:a.string.isRequired,handleContinue:a.func.isRequired,handleCancel:a.func.isRequired,multiSelect:a.bool.isRequired};e.exports=c}),null);
__d("MessengerP2PDialogContainer.react",["Bootloader","MercuryIDs","MessengerActions","MessengerURIStore","MessengerView","P2PActions","P2PDialogContainer.react","P2PPaymentPickerDialog.react","React","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this,c=b("MessengerURIStore").getState();c.detailView===b("MessengerView").DETAIL.PAYFRIENDPICKER&&this.$1();var d=c.extraQueryParams;d&&d.id&&b("Bootloader").loadModules(["P2PSendMoneyDialogStore"],function(){a.$2(d)},"MessengerP2PDialogContainer.react")};d.componentDidUpdate=function(){var a=b("MessengerURIStore").getState();a.detailView===b("MessengerView").DETAIL.PAYFRIENDPICKER&&this.$1();a=b("MessengerURIStore").getState().extraQueryParams;a&&a.id&&this.$2(a)};d.$1=function(){var a=function(a){b("P2PActions").hideDialog();a=a.first().getUniqueID();b("MessengerActions").changeID(a)},c=function(a){b("P2PActions").hideDialog(),b("MessengerActions").selectThread(null)};b("P2PActions").showDialog(b("P2PPaymentPickerDialog.react"),{viewer:this.props.viewer,handleContinue:a,handleCancel:c,multiSelect:!1})};d.$2=function(a){var c=b("MercuryIDs").getThreadIDFromUserID(a.id);b("P2PActions").chatSendViewOpened({referrer:"chat",threadID:c,amount:a.a,memoText:a.m})};d.render=function(){return b("React").createElement(b("P2PDialogContainer.react"),null)};return c}(b("React").Component);c.propTypes={viewer:a.string.isRequired};e.exports=c}),null);
__d("MessengerP2PDialogContainerReact.bs",["ReasonReact.bs","MessengerP2PDialogContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MessengerP2PDialogContainer.react"),{viewer:a},c)}f.make=a}),null);
__d("PagesPlatformDialogContainerReact.bs",["ReasonReact.bs","PagesPlatformDialogContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("PagesPlatformDialogContainer.react"),{},a)}f.make=a}),null);
__d("MessengerReact.bs",["cx","bs_block","bs_curry","React","Utils.bs","bs_belt_Option","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerState.bs","HotReloadConfig","MessengerURIStore","MessengerBannerReact.bs","MessengerBugNubReact.bs","MessengerDetailViewReact.bs","MessengerMasterViewReact.bs","MessengerErrorBoundaryReact.bs","FBPaymentsDialogContainerReact.bs","MNCommerceDialogContainerReact.bs","MessengerDotComAndInboxM4Check.bs","MessengerP2PDialogContainerReact.bs","PagesPlatformDialogContainerReact.bs","MessengerReasonDialogContainerReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){a.preventDefault();return 0}var i=b("ReasonReact.bs").reducerComponent("MessengerReact");function j(a,c,d,e,f){__p&&__p();return[i[0],i[1],i[2],i[3],function(a){b("MessengerURIStore").addListener("change",function(){return b("bs_curry")._1(a[3],0)});b("bs_curry")._1(a[4],function(){b("MessengerURIStore").destroy();return 0});return b("bs_curry")._1(e,0)},i[5],i[6],i[7],function(e){var f=e[1];return b("React").createElement(b("MessengerState.bs").Provider[0],{fbid:b("CurrentUser").getID(),children:function(e){var g=e[4],i=e[2],j=f.activeThreadID;return b("React").createElement("div",{className:"_li"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerBannerReact.bs").make(c,d,[])),b("React").createElement("div",{className:"_4sp8",onDragEnter:h,onDragOver:h,onDrop:h},b("React").createElement("div",{className:"_1enh"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7q1s":"")},b("ReasonReact.bs").element(void 0,void 0,b("MessengerErrorBoundaryReact.bs").make(void 0,"conversation list",[b("ReasonReact.bs").element(void 0,void 0,b("MessengerMasterViewReact.bs").make(b("bs_js_primitive").nullable_to_opt(f.activeThreadID),g,b("bs_js_primitive").nullable_to_opt(f.detailView),b("bs_js_primitive").nullable_to_opt(f.filter),b("bs_belt_Option").getExn(b("bs_js_primitive").nullable_to_opt(f.folder)),e[5],i,e[12],b("bs_belt_Option").getExn(b("bs_js_primitive").nullable_to_opt(f.masterView)),b("CurrentUser").getID(),[]))])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerBugNubReact.bs").make(a!==void 0?b("Utils.bs").isTruthy(b("bs_js_primitive").valFromOption(a).isBetaEnabled):!1,a!==void 0?b("bs_js_primitive").valFromOption(a).unixName:void 0,[]))),b("ReasonReact.bs").element(j==null?void 0:j,void 0,b("MessengerDetailViewReact.bs").make(b("bs_js_primitive").nullable_to_opt(f.activeThreadID),g,void 0,e[1],i,e,b("bs_js_primitive").nullable_to_opt(f.mid),b("bs_js_primitive").nullable_to_opt(f.query),b("bs_js_primitive").nullable_to_opt(f.detailView),b("CurrentUser").getID(),b("CurrentUser").isWorkUser(),[]))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerReasonDialogContainerReact.bs").make([])),b("ReasonReact.bs").element(void 0,void 0,b("MNCommerceDialogContainerReact.bs").make([])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerP2PDialogContainerReact.bs").make(b("CurrentUser").getID(),[])),b("ReasonReact.bs").element(void 0,void 0,b("PagesPlatformDialogContainerReact.bs").make([])),b("ReasonReact.bs").element(void 0,void 0,b("FBPaymentsDialogContainerReact.bs").make([])))}})},function(){return b("MessengerURIStore").getState()},i[10],function(a,c){return b("bs_block").__(0,[b("MessengerURIStore").getState()])},i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(b("bs_js_primitive").nullable_to_opt(a.employeeData),a.showWorkchatUpsellBanner,b("bs_js_primitive").nullable_to_opt(a.isFirstRedirect),a.onMount,[])});f.preventDefault=h;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerMount",["cx","BanzaiODS","Bootloader","CSS","CurrentUser","HotLikeSound","MessengerConfig","MessengerDialogs.bs","MessengerEnvironment","MessengerFPSCounter","MessengerNonMount","MessengerPage","MessengerPromotionDataActions","MessengerReact.bs","MessengerSettingsStore","MessengerURIListener","MessengerWebStgTypedLoggerLite","React","ReactDOM","gkx","OrderedFriendsList"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerReact.bs").jsComponent;b("OrderedFriendsList");var i=b("MessengerNonMount").initStoresAndListeners,j=b("MessengerNonMount").dispatchInitialData;a={initStoresAndListeners:i,dispatchInitialData:j,mount:function(a,c,d){__p&&__p();b("MessengerEnvironment").setMessengerUI(!0);b("MessengerPage").emit(b("MessengerPage").Events.JS_LOADED);d=b("CurrentUser").getID();var e=b("CurrentUser").isWorkUser();i(d);b("MessengerURIListener").start();j(d,c);b("MessengerPage").emit(b("MessengerPage").Events.DATA_INITIALIZED);var f=document.documentElement;f&&b("CSS").addClass(f,"_51l0");if(document.body){f=document.body;b("CSS").addClass(f,"_z4_");b("MessengerConfig").SFFontEnabled&&b("CSS").addClass(f,"__6g");b("MessengerConfig").SegoeUIDisabled&&b("CSS").addClass(f,"_2por");b("MessengerEnvironment").facebookdotcom&&b("CSS").addClass(f,"_mvg")}b("HotLikeSound").setCheckSoundEnabledFunc(function(){return b("MessengerSettingsStore").getSettings().sound_enabled});b("ReactDOM").render(b("React").createElement(h,{employeeData:c.employeeData,showWorkchatUpsellBanner:c.showWorkchatUpsellBanner,isFirstRedirect:!b("gkx")("678603"),viewer:d,isWorkUser:e,onMount:function(){return k(c)}}),a);b("MessengerFPSCounter").counter&&b("MessengerFPSCounter").counter(6e4,function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_dot_com","fps.count."+a)})}};function k(a){__p&&__p();b("MessengerPage").emit(b("MessengerPage").Events.APP_MOUNTED);b("MessengerWebStgTypedLoggerLite").log({event_name:"render_inbox"});var c=a.gameData;c&&c.gameID&&b("Bootloader").loadModules(["MessengerGamesQuicksilverPlayerContainer.react","InstantGameContextType","QuicksilverSources"],function(a,d,e){var f=null,g=d.SOLO;c.contextSourceID&&(f=c.contextSourceID,g=d.THREAD);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(a,{initialContextSourceID:f,initialContextType:g,onHide:function(){return b("MessengerDialogs.bs").removeAllDialogs()},initialGameID:c.gameID,initialSource:e.M_ME_LINK,sourceID:null})})},"MessengerMount");a.promotionData&&b("MessengerPromotionDataActions").setPromotionData(a.promotionData)}e.exports=a}),null);
__d("MessengerThreadListGridWrapper.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.label;return b("React").createElement("div",null,b("React").createElement("h2",{className:"accessible_elem"},a),b("React").createElement("ul",{"aria-label":a,role:"grid"},this.props.children))};return c}(b("React").PureComponent);c.propTypes={label:a.string.isRequired};e.exports=c}),null);
__d("MessengerThreadlistNewMessageRow.react",["cx","fbt","ix","Image.react","LinkWithHiddenURLBar.react","MercuryIDs","MercuryParticipantListRenderer","MercuryParticipantsImage.react","MessengerActions","MessengerComposerStore","MessengerCrossIconSVGM4React.bs","MessengerDotComAndInboxM4Check.bs","MessengerParticipants.bs","MessengerProfileImageWrapperReact.bs","MessengerView","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerCrossIconSVGM4React.bs").make,k=b("MessengerProfileImageWrapperReact.bs").jsComponent,l=50,m=i("86935");a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={participants:c.$3()},c.$8=function(a){a.preventDefault(),c.props.onClose&&c.props.onClose(a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=b("MessengerComposerStore").addListener("change",function(){var b=a.$3();a.setState({participants:b})})};d.$3=function(){var a=this;this.$2&&b("MessengerParticipants.bs").removeCallback(this.$2);var c=b("MessengerParticipants.bs").getMultiEager(this.$4(),function(b){a.$2=null,a.setState({participants:b})}),d=c[0];c=c[1];this.$2=c;return d};d.$4=function(){return b("MessengerComposerStore").getState().recipients.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.getUniqueID())}).toArray()};d.componentWillUnmount=function(){this.$1&&this.$1.remove(),this.$2&&b("MessengerParticipants.bs").removeCallback(this.$2)};d.renderM4=function(){return b("React").createElement("li",{className:"_5l-3 _1ht1 _6zk9"+(this.props.isActive?" _1ht2":"")},b("React").createElement(b("LinkWithHiddenURLBar.react"),{onAllClicks:this.$5,className:"_1ht5 _2il3 _6zka _5l-3"},b("React").createElement("div",{className:"_6zkb _7t1l _6zkc"},this.$6(),b("React").createElement("div",{className:"_1qt4 _7vuo _5l-m"},b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1ht6 _7st9"},this.$7()))),b("React").createElement("div",{className:"_6zv8"},b("React").createElement(b("ShimButton.react"),{className:"_23ct _6zv9"+(this.props.isActive?" _6zva":""),onClick:this.$8},b("React").createElement(j,{size:18}))))))};d.render=function(){if(b("MessengerDotComAndInboxM4Check.bs").yes)return this.renderM4();else return b("React").createElement("li",{className:"_5l-3 _1ht1"+(this.props.isActive?" _1ht2":"")},b("React").createElement(b("LinkWithHiddenURLBar.react"),{onAllClicks:this.$5,className:"_1ht5 _2il3 _5l-3"},this.$6(),b("React").createElement("div",{className:"_1qt4 _5l-m"},b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1ht6"},this.$7()),b("React").createElement(b("ShimButton.react"),{className:"_23ct",onClick:this.$8})),b("React").createElement("div",{className:"_1qt5 _5l-3"},"\xa0"))))};d.$6=function(){var a=this.state.participants;return a.length>0?b("React").createElement("div",{className:"_1qt3 _5l-3"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6-5k":"")},b("React").createElement(k,{isMessengerUser:a.length===1&&a[0].is_messenger_user,size:l,showBadge:!1},b("React").createElement(b("MercuryParticipantsImage.react"),{participants:a.map(function(a){return a.id}).slice(0,3),size:l}))):b("React").createElement("div",{className:"_1qt3 _5l-3"},b("React").createElement(b("Image.react"),{height:l,src:m,width:l}))};d.$7=function(){return this.state.participants.length===0?h._("New message"):h._("New message to {List of message recipients}",[h._param("List of message recipients",new(b("MercuryParticipantListRenderer"))().renderParticipantList(this.state.participants))])};d.$5=function(a){a.preventDefault(),b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE)};return c}(b("React").PureComponent);c.propTypes={isActive:a.bool,onClose:a.func.isRequired};e.exports=c}),null);
__d("MNAdsMessageRequestUtils",["fbt","AdPageMessageTypeEnum","MessagingTag","React"],(function(a,b,c,d,e,f,g){"use strict";e.exports={isAdsMessageRequest:function(a){return a.folder==b("MessagingTag").PENDING&&!!a.last_message_type&&a.last_message_type!==b("AdPageMessageTypeEnum").NON_AD},renderAdsMessageRequestStatus:function(){var a=g._("Sponsored");return b("React").createElement("span",null,a)}}}),null);
__d("MessengerPinIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"0 0 22 22"},b("React").createElement("title",void 0,"PinChatIcon"),b("React").createElement("path",{id:"Fill-1",d:"M13.9355,-3.55271368e-15 C13.4005,-3.55271368e-15 12.8985,0.208 12.5205,0.586 L11.5435,1.562 C11.0045,2.102 10.8195,2.886 11.0605,3.609 L11.3765,4.559 L8.5715,7.364 L7.2425,7.364 C5.3635,7.364 3.5955,8.096 2.2675,9.425 C1.9845,9.707 1.8285,10.084 1.8285,10.485 C1.8285,10.886 1.9845,11.263 2.2675,11.546 L9.3385,18.617 C9.6225,18.9 9.9985,19.057 10.3995,19.057 C10.8005,19.057 11.1775,18.9 11.4605,18.617 C12.7895,17.289 13.5205,15.521 13.5205,13.643 L13.5205,12.313 L16.3265,9.508 L17.2755,9.824 C17.4795,9.893 17.6925,9.927 17.9075,9.927 C18.4415,9.927 18.9445,9.719 19.3225,9.341 L20.2985,8.363 C20.6765,7.986 20.8845,7.484 20.8845,6.949 C20.8845,6.415 20.6765,5.913 20.2985,5.535 L15.3495,0.586 C14.9715,0.208 14.4695,-3.55271368e-15 13.9355,-3.55271368e-15 M13.9355,1 C14.1915,1 14.4475,1.098 14.6425,1.293 L19.5915,6.242 C19.9825,6.633 19.9825,7.267 19.5915,7.656 L18.6155,8.634 C18.4235,8.824 18.1675,8.927 17.9075,8.927 C17.8015,8.927 17.6955,8.91 17.5915,8.876 L16.6425,8.56 C16.5395,8.525 16.4325,8.508 16.3275,8.508 C16.0655,8.508 15.8105,8.61 15.6195,8.801 L12.8135,11.606 C12.6255,11.794 12.5205,12.049 12.5205,12.313 L12.5205,13.643 C12.5205,15.243 11.8845,16.778 10.7525,17.91 C10.6555,18.008 10.5275,18.057 10.3995,18.057 C10.2715,18.057 10.1435,18.008 10.0455,17.91 L2.9745,10.839 C2.7795,10.644 2.7795,10.327 2.9745,10.132 C4.1065,9 5.6415,8.364 7.2425,8.364 L8.5715,8.364 C8.8355,8.364 9.0905,8.259 9.2785,8.071 L12.0835,5.266 C12.3515,4.998 12.4455,4.602 12.3255,4.242 L12.0085,3.293 C11.8895,2.934 11.9825,2.538 12.2505,2.27 L13.2285,1.293 C13.4235,1.098 13.6795,1 13.9355,1",fill:c}),b("React").createElement("path",{id:"Fill-3",d:"M0.1465,20.7383 C-0.0485,20.5433 -0.0485,20.2263 0.1465,20.0313 L4.3885,15.7883 C4.5835,15.5933 4.9015,15.5933 5.0965,15.7883 C5.2915,15.9833 5.2915,16.3013 5.0965,16.4963 L0.8535,20.7383 C0.6585,20.9333 0.3415,20.9333 0.1465,20.7383",fill:c})))}f.make=a}),null);
__d("MessengerDeclineDialogReact.bs",["fbt","bs_curry","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerDeclineDialogReact");function i(a,c,d,e,f,i){__p&&__p();var j=function(a){if(a)return 0;else{b("bs_curry")._1(e,a);return b("MessengerDialogs.bs").removeDialog(void 0,0)}},k=function(a){b("MessengerDialogs.bs").removeDialog(void 0,0);return b("bs_curry")._1(c,a)},l=function(){b("bs_curry")._1(d,0);return b("MessengerDialogs.bs").removeDialog(void 0,0)},m=function(){return j(!1)};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var c=f?g._("Leave Group"):g._("Block"),d=b("CurrentUser").isWorkUser(),e,h=0;f||d||a===void 0?h=1:e=g._("Don't want to hear from {name}?",[g._param("name",a)]);h===1&&(e=g._("Decline conversation"));d=b("CurrentUser").isWorkUser();return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,j,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,e)),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[f?g._("Would you like to leave the group? Group members will see that you've left."):a!==void 0?d?g._("The message request will be declined. Would you like to block {name} in Workplace Chat or delete these messages?",[g._param("name",a)]):g._("You can permanently delete the conversation, block {name} from sending you messages or tell us if something's wrong. We won't tell {name} that you've taken these actions.",[g._param("name",a)]):g._({"Workplace Chat":"The message request will be declined. Would you like to block this person in Workplace Chat or delete these messages?","Messenger":"The message request will be declined. Would you like to block this person in Messenger or delete these messages?"},[g._enum(d?"Workplace Chat":"Messenger",{"Workplace Chat":"Workplace Chat",Messenger:"Messenger"})])])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](m,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,g._("Delete"),void 0,"danger",l,0,void 0,void 0,void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,c,void 0,"danger",k,0,void 0,void 0,void 0,[]))]))]))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(b("bs_js_primitive").nullable_to_opt(a.name),a.onBlock,a.onDelete,a.onToggle,a.isGroupChat,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerThreadlistRowPendingThreadButtonsReact.bs",["cx","fbt","bs_curry","React","Bootload.bs","Bootloader","MercuryIDs","CurrentUser","ReasonReact.bs","MessagingTag","MessengerDialogs.bs","MercuryThreadActions","MessengerButtonReact.bs","MessengerDeclineDialogReact.bs","MessengerMessageRequestsTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.onBlock,d=a.onDelete,e=a.onToggle,f=a.thread;a=function(a){b("Bootloader").loadModules(["BootloadableMessengerDeclineDialogReact.bs"],a,"MessengerThreadlistRowPendingThreadButtonsReact.bs");return 0};a=[a];var g=b("Bootload.bs").Create(a),i=b("MercuryIDs").getThreadKeyfromThreadIDUserID(f.thread_id,b("CurrentUser").getID()),j=function(a){a.preventDefault();a.stopPropagation();b("MercuryThreadActions").get().changeFolder(f.thread_id,b("MessagingTag").INBOX);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(f.thread_id)).setFolderType("pending").setThreadKey(i).setEntryPoint("inbox_banner").log();return 0},k=function(a){a.preventDefault();a.stopPropagation();return b("bs_curry")._1(g[0],function(){var a=b("MercuryIDs").isGroupChat(f.thread_id);b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDeclineDialogReact.bs").make(void 0,c,d,e,a,[]))});new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(f.thread_id)).setFolderType("pending").setThreadKey(i).setEntryPoint("inbox_banner").log();return 0})};a=function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerButtonReact.bs").make(void 0,void 0,void 0,void 0,void 0,j,void 0,"_3yvh",void 0,void 0,h._("Accept"),0,void 0,void 0,void 0,void 0,[]))};var l=function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerButtonReact.bs").make(void 0,void 0,void 0,void 0,void 0,k,void 0,"_3yvh _1d-z",void 0,void 0,h._("Decline"),2,void 0,void 0,void 0,void 0,[]))};return b("React").createElement("div",{className:"_5l-3"},a(0),l(0))}c=a;f.make=c}),null);
__d("MessengerThreadlistRowPendingThreadButtonsReact.re",["MessengerThreadlistRowPendingThreadButtonsReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerThreadlistRowPendingThreadButtonsReact.bs").make;f.make=a}),null);
__d("MessengerThreadlistRowSeenHeadReact.bs",["cx","Image.bs","MercuryIDs","ReasonReact.bs","joinClasses","bs_js_primitive","MessengerMessage.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,c,d,e){__p&&__p();var f=d.snippet_sender;if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);if(e.author===a&&c.watermark>=e.timestamp&&!b("MessengerMessage.bs").isSending(e))return!b("MessengerMessage.bs").hasError(e);else return!1}else if(!(f==null)&&f===a)return c.watermark>=d.timestamp;else return!1}var i=b("ReasonReact.bs").statelessComponent("MessengerThreadlistRowSeenHeadReact");function j(a,c,d,e,f,g,j,k){__p&&__p();var l=a!==void 0?a:"";return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){__p&&__p();var a=g.is_canonical,i=g.other_user_fbid;if(c!==void 0&&a&&!(i==null||c)){a=b("MercuryIDs").getParticipantIDFromUserID(j);i=b("MercuryIDs").getParticipantIDFromUserID(i);var k=f.get(i);i=e.get(i);if(!(i==null)&&!(k==null)&&h(a,k,g,d))return b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(b("joinClasses")(l,"_2_a2"),void 0,void 0,void 0,i.image_src,void 0,i.name,void 0,void 0,[]));else return null}else return null},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(b("bs_js_primitive").nullable_to_opt(a.className),b("bs_js_primitive").nullable_to_opt(a.isHidden),b("bs_js_primitive").nullable_to_opt(a.lastMessage),a.participants,a.readReceipts,a.thread,a.viewer,[])});f.shouldRender=h;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("WorkGalahadChannelStatusBadge.react",["cx","fbt","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){var c=a.canToggle,d=a.onClick,e=a.unread;a=a.isNested;a=a===void 0?!1:a;var f=i({canToggle:c,unread:e});return b("React").createElement("div",{"aria-label":f,className:(a?"":"_2ph-")+(e?"":" _1qum")+(e?" _1qun":"")+(c?" _1quo":""),"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":f,onClick:c?function(a){a.stopPropagation(),a.preventDefault(),d&&d()}:void 0,role:c?"button":void 0},b("React").createElement("div",{className:"_1qvo"}))}function i(a){var b=a.canToggle;a=a.unread;return!b?null:a?h._("Mark as Read"):h._("Mark as Unread")}e.exports=a}),null);
__d("MessengerDeleteDialogReact.re",["bs_curry","MessengerDeleteDialogReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){a=b("ReasonReact.bs").wrapReasonForJs(b("MessengerDeleteDialogReact.bs").component,function(a){return b("bs_curry")._7(b("MessengerDeleteDialogReact.bs").make,a.folder,a.isArchived,a.isGroupChat,a.onArchive,a.onBlock,a.onDelete,a.children)});f.component=a;f["default"]=a}),null);
__d("WorkChatHidePermanentlyConfirmationDialogReact.bs",["cx","fbt","bs_curry","React","ReasonReact.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("WorkChatHidePermanentlyConfirmationDialogReact");function j(a,c,d){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){var d=function(){b("bs_curry")._1(a,0);return b("bs_curry")._1(c,!1)},e=h._("This chat will move to \"Permanently hidden\" and will stay hidden until you unhide it.");return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,c,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,h._("Hide this conversation permanently?"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[b("React").createElement("div",{className:"_1q73 _7q7a"},e)])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,h._("Hide Permanently"),void 0,"danger",d,0,void 0,void 0,void 0,[]))]))]))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.onIgnore,a.onToggle,[])});f.component=i;f.make=j;f.jsComponent=a}),null);
__d("WorkChatHidePermanentlyConfirmationDialogReact.re",["bs_curry","ReasonReact.bs","WorkChatHidePermanentlyConfirmationDialogReact.bs"],(function(a,b,c,d,e,f){a=b("ReasonReact.bs").wrapReasonForJs(b("WorkChatHidePermanentlyConfirmationDialogReact.bs").component,function(a){return b("bs_curry")._3(b("WorkChatHidePermanentlyConfirmationDialogReact.bs").make,a.onIgnore,a.onToggle,a.children)});f.component=a;f["default"]=a}),null);
__d("WorkForeignEntityInfo.re",["WorkForeignEntityInfo.bs"],(function(a,b,c,d,e,f){a=b("WorkForeignEntityInfo.bs").isCoworker;f.isCoworker=a;c=b("WorkForeignEntityInfo.bs").areAllCoworkers;f.areAllCoworkers=c}),null);
__d("WorkGalahadAsyncStatefulActionHelper",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useReducer;function h(a,b){switch(b.type){case"reset":return{loading:!1,requested:!1,error:null};case"startAction":return babelHelpers["extends"]({},a,{loading:!0,error:null});case"actionSuccess":return babelHelpers["extends"]({},a,{loading:!1,requested:!0});case"actionFailed":return babelHelpers["extends"]({},a,{loading:!1,requested:!0,error:b.error});default:return a}}a={useAsyncActionReducer:function(){var a=g(h,{loading:!1,requested:!1,error:null}),b=a[0],c=b.loading,d=b.requested;b=b.error;a=a[1];var e=!c&&d&&b==null,f=!c&&d&&b!=null;return[{loading:c,requested:d,error:b,isSuccessful:e,isFailed:f},a]}};e.exports=a}),null);
__d("WorkGalahadChangeChatPhotoMenuItem.react",["cx","fbt","AsyncRequest","FileInput.react","FileInputUploader","LayerFadeOnHide","MercuryConfig","MercuryIDs","React","WorkGalahadAsyncStatefulActionHelper","WorkGalahadDropdownMenuItem.react","XMessagingSetThreadImageController","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("React").useCallback,j=b("WorkGalahadAsyncStatefulActionHelper").useAsyncActionReducer;function a(a){__p&&__p();var c=a.label,d=a.icons,e=a.desc,f=a.threadID;a=j();var g=a[0],l=g.loading,m=g.error,n=g.isFailed,o=a[1],p=i(function(){o({type:"actionFailed",error:h._("There was an error during the uploading process.")})},[]),q=i(function(a,c){a=c.response.payload;a=(c=a.metadata[0])==null?void 0:c.image_id;if(!a)return;c=b("XMessagingSetThreadImageController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({thread_id:b("MercuryIDs").getThreadFBIDFromThreadID(f),thread_image_id:a}).setHandler(function(){o({type:"actionSuccess"})}).setErrorHandler(function(a){p()}).send()},[f]),r=i(function(a){var c=a.target.files&&a.target.files.length;if(!c)return;o({type:"startAction"});c=new(b("FileInputUploader"))(a.target).setURI(b("MercuryConfig").upload_url).setAllowCrossOrigin(!0).setAllowCrossPageTransition(!0).setData({images_only:!0});c.subscribe("success",q);c.subscribe("falure",p);c.send()},[f,q,p]);g=function(a){a=a.children;return b("React").createElement(b("FileInput.react"),{accept:"image/*",containerClassName:"_21op",name:"file",onChange:r},a,b("React").createElement(k,{shown:n,onHide:function(){o({type:"reset"})},description:m}))};return b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{id:"chat-photo-upload",LinkRenderer:g,label:c,icons:d,desc:e,isLoading:l})}function k(a){var c=a.onHide,d=a.shown;a=a.description;return b("React").createElement(b("XUIDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},isStrictlyControlled:!0,onHide:c,shown:d,width:400},b("React").createElement(b("XUIDialogTitle.react"),null,h._("Failed to change group photo")),b("React").createElement(b("XUIDialogBody.react"),null,a),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogOkayButton.react"),{use:"confirm",action:"cancel"})))}e.exports=a}),null);
__d("WorkGalahadDropdownMenuHelper",["React","WorkGalahadDropdownMenuItem.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={createItemsFromSections:function(a,c){c===void 0&&(c="separator");return a.reduce(function(a,d){if(d.length===0)return a;if(a.length===0)return d;var e=a.length;return[].concat(a,[b("React").createElement(b("WorkGalahadDropdownMenuItem.react").Separator,{key:c+"-"+e})],d)},[])}};e.exports=a}),null);
__d("WorkGalahadChatMenuHelper",["ix","cx","fbt","requireDeferred","Bootloader","ChatPinnedThreadsEntryPoint","CurrentUser","EmojiLikeConstants","IgnoreMessagesTypedLogger","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryThreadActions","MercuryThreadInfo","MessagingTag","MessagingThreadCustomizationSource","MessengerActions","MessengerAdminGroupUtils","MessengerApprovalModeTypes","MessengerBlockDialogReact.bs","MessengerChangeColorDialogReact.bs","MessengerConfirmBlockThreadDialogReact.bs","MessengerConfirmLeaveGroupDialogReact.bs","MessengerContactAdapters","MessengerCustomColorUtils.bs","MessengerDeleteDialogReact.re","MessengerDialogs.bs","MessengerFRXBootloaderUtils","MessengerLeaveGroupAction","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerState.bs","React","WorkChatHidePermanentlyConfirmationDialogReact.re","WorkForeignEntityInfo.re","WorkGalahadChangeChatPhotoMenuItem.react","WorkGalahadDropdownMenuHelper","WorkGalahadDropdownMenuItem.react","asset","formatDate","gkx","immutable"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerBlockDialogReact.bs").jsComponent,k=b("MessengerChangeColorDialogReact.bs").jsComponent,l=b("requireDeferred")("MessengerChangeEmojiDialogReact.bs"),m=b("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,n=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent,o=b("MessengerDeleteDialogReact.re").component,p=b("requireDeferred")("MessengerEditNicknamesDialogReact.bs"),q=b("WorkChatHidePermanentlyConfirmationDialogReact.re").component,r=b("requireDeferred")("WorkChatOptInGroupSyncDialogReact.bs"),s=b("requireDeferred")("WorkChatRenameThreadDialogReact.bs"),t=3600;function u(a){a||b("MessengerDialogs.bs").removeDialog()}function v(a,c,d){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(m,{participantName:d})});c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(a.thread_id,b("MercuryIDs").getParticipantIDFromUserID(c));a.folder===b("MessagingTag").PENDING&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id)).setSurface("thread").setFolderType(b("MessagingTag").PENDING).setThreadKey(c).setEntryPoint("settings").log()}function w(a,c,d){var e=a.thread_id,f=d&&d.short_name||i._("sender");e&&b("MercuryThreadActions").getForFBID(c).blockIgnoreOnMessengerDotCom(!0,e,function(){v(a,c,f)})}var x={getChatTabIcon:function(a){return a?{normal:g("722660"),selected:g("902031")}:void 0},createMuteChatItems:function(a){var c=a==null?void 0:a.mute_until,d=i._("Mute chat"),e=i._("Pause notifications for messages"),f=x.isChatMuted(a);f&&(d=i._("Unmute chat"),e=function(a){a=a.hovered;return b("React").createElement("span",{className:"_7vy2"+(a?" _7vy3":"")},c===-1?i._("Muted indefinitely"):i._("Muted until {date}",[i._param("date",b("formatDate")(c,{today:"g:ia",withinDay:"g:ia",thisYear:"M jS, g:ia",future:"M d, Y g:ia"}))]))});return f?[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"chat-notification",id:"chat-notification",label:d,desc:e,icons:"bell_null",onClick:function(){return b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).updateMuteSetting(a.thread_id,0)},hideOnClick:!0})]:[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"chat-notification",id:"chat-notification",label:d,desc:e,icons:"bell_null_cross",items:x.createChatMuteOptionsMenu(!0,function(c){b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).updateMuteSetting(a.thread_id,c)})})]},isChatMuted:function(a){if(a==null)return!1;a=a.mute_until;return!!a&&Number.isInteger(a)&&(a===-1||a*1e3>Date.now())},createGroupChatMuteExplanationItem:function(){return b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"mention",id:"mention",label:i._("While muted, you'll still be notified about {\u0040mentions} in this chat.",[i._param("@mentions",b("React").createElement("strong",null,"@mentions"))]),isStatic:!0})},createChatMuteOptionsMenu:function(a,c){return[b("React").createElement(b("WorkGalahadDropdownMenuItem.react").Header,{key:"mute-chat-header",label:i._("Mute this chat...")})].concat(x.createChatMuteOptionItems(a,c),[b("React").createElement(b("WorkGalahadDropdownMenuItem.react").Separator,{key:"mute-chat-separator"}),x.createGroupChatMuteExplanationItem()])},createChatMuteOptionItems:function(a,c){__p&&__p();return[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"chat-mute-1-hour",id:"chat-mute-1-hour",label:i._("For 1 hour"),onClick:function(){c(t)},hideOnClick:!0,navigateBackOnClick:a}),b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"chat-mute-2-hour",id:"chat-mute-2-hour",label:i._("For 2 hours"),onClick:function(){c(2*t)},hideOnClick:!0,navigateBackOnClick:a}),b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"chat-mute-until-tomorrow",id:"chat-mute-until-tomorrow",label:i._("Until tomorrow at 8 am"),onClick:function(){var a=new Date(),b=a.getHours()>=8;b&&a.setDate(a.getDate()+1);a.setHours(8,0,0,0);c(Math.ceil((a.getTime()-Date.now())/1e3))},hideOnClick:!0,navigateBackOnClick:a}),b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"chat-mute-next-week",id:"chat-mute-next-week",label:i._("Until next week (Monday at 8 am)"),onClick:function(){var a=new Date();a.setDate(a.getDate()+(7-a.getDay())%7+1);a.setHours(8,0,0,0);c(Math.ceil((a.getTime()-Date.now())/1e3))},hideOnClick:!0,navigateBackOnClick:a}),b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"chat-mute-until-changed",id:"chat-mute-until-changed",label:i._("Until I change it"),onClick:function(){c(-1)},hideOnClick:!0,navigateBackOnClick:a})]},createCustomizeItems:function(a){__p&&__p();var c=[];!a.is_canonical&&!a.work_associated_group&&(a.is_subscribed&&!a.is_canonical&&b("MessengerAdminGroupUtils").canUpdateThreadCustomization(a,b("CurrentUser").getAccountID())&&(b("gkx")("997564")||c.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"rename-chat",id:"rename-chat",icons:"text",label:i._("Rename chat"),hideOnClick:!0,onClick:function(){s.onReady(function(c){var d=c.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(d,{currentThreadName:a.name,onSave:function(c){b("MercuryThreadInfo").isEmptyLocalThread(a)||b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).changeGroupThreadName(a.thread_id,c)}})})})}})),c.push(b("React").createElement(b("WorkGalahadChangeChatPhotoMenuItem.react"),{key:"change-chat-photo",icons:"photo",label:i._("Change chat photo"),threadID:a.thread_id}),b("React").createElement(b("WorkGalahadDropdownMenuItem.react").Separator,{key:"customize-options-separator"}))));a.customization_enabled&&(c.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"edit-chat-nicknames",id:"edit-chat-nicknames",icons:"pencil_underline",label:i._("Edit nicknames"),hideOnClick:!0,onClick:function(){p.onReady(function(c){var d=c.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(d,{thread:a,participants:b("immutable").Map(a.participants.reduce(function(a,c){return babelHelpers["extends"]({},a,(a={},a[c]=b("MessengerParticipants.bs").getNow(c),a))},{})),viewer:b("CurrentUser").getID(),onSave:function(c){var d=c[0];c=c[1];b("MercuryThreadInfo").isEmptyLocalThread(a)||b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).changeThreadNicknames(a.thread_id,d,c,b("MessagingThreadCustomizationSource").SETTINGS)},onClose:function(){}})})})}})),b("gkx")("819043")&&c.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"edit-chat-color",id:"edit-chat-color",icons:"color",label:i._("Change colour"),hideOnClick:!0,onClick:function(){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(k,{currentColor:b("MessengerCustomColorUtils.bs").customColorOrBlue(a),onSave:function(c){b("MercuryThreadInfo").isEmptyLocalThread(a)||b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).changeThreadTheme(a.thread_id,c,"SETTINGS")},onClose:function(){}})})}})),c.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"change-chat-emoji",id:"change-chat-emoji",icons:"emoji",label:i._("Change emoji"),hideOnClick:!0,onClick:function(){l.onReady(function(c){var d=c.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(d,{currentEmoji:a.custom_like_icon?a.custom_like_icon.emoji:String.fromCodePoint.apply(String,b("EmojiLikeConstants").FB_THUMBS_UP_EMOJI),onClose:function(){},onSave:function(c){b("MercuryThreadInfo").isEmptyLocalThread(a)||b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).changeThreadEmoji(a.thread_id,c,b("MessagingThreadCustomizationSource").SETTINGS)}})})})}})));if(c.length===0)return[];var d=a.is_canonical||a.work_associated_group?i._("Edit emoji, nicknames and more"):i._("Edit chat name, photo and more");return[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"customize-chat",id:"customize-chat",icons:"pencil",label:i._("Customise chat"),desc:d,items:[b("React").createElement(b("WorkGalahadDropdownMenuItem.react").Header,{key:"customize-chat-header",label:i._("Customise chat")})].concat(c)})]},getOnHideChatCallback:function(a){return function(){var c=b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID());a.is_pinned===!0&&c.unpin(a.thread_id);c.archive(a.thread_id);b("MessengerActions").selectThread(null)}},getOnUnhideChatCallback:function(a){return function(){var c=b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID());a.is_archived===!0&&c.unarchive(a.thread_id);a.folder===b("MessagingTag").OTHER&&c.changeFolder(a.thread_id,b("MessagingTag").INBOX);b("MessengerActions").selectThread(a.thread_id)}},createHideChatItems:function(a){var c=a.folder===b("MessagingTag").OTHER;if(!a.is_archived&&!c)return[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"hide-chat",id:"hide-chat",label:i._("Hide chat"),icons:"hide",desc:i._("Hide this chat from your inbox"),onClick:this.getOnHideChatCallback(a),hideOnClick:!0})];else return[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"unhide-chat",id:"unhide-chat",label:i._("Unhide chat"),icons:"undo",desc:i._("Show this chat in your inbox"),onClick:this.getOnUnhideChatCallback(a),hideOnClick:!0})]},createRemoveChatItems:function(a){__p&&__p();var c=this,d={label:i._("Delete message history"),desc:i._("Delete your copy of this chat and all of the messages within it."),onClick:function(){var d=function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID())["delete"](a.thread_id,b("ChatPinnedThreadsEntryPoint").MENU_ITEM_IN_OVERFLOW_MENU),b("MessengerActions").selectThread(null)};b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(o,{folder:a.folder,isArchived:a.is_archived,isGroupChat:b("MercuryIDs").isGroupChat(a.thread_id),onArchive:c.getOnHideChatCallback(a),onBlock:function(){},onDelete:d})})},hideOnClick:!0},e=a.folder===b("MessagingTag").OTHER;if(!a.is_subscribed||a.is_archived||e){delete d.desc;return[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),babelHelpers["extends"]({key:"delete-chat-history",id:"delete-chat-history",icons:"trash"},d))]}var f=[];if(!e){var g=function(){var c=b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID());c.changeFolder(a.thread_id,b("MessagingTag").OTHER);b("MessengerActions").selectThread(null);new(b("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(a.thread_id).setPlatform("messengerdotcom").log()};f.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"hide-chat-permanently",id:"hide-chat-permanently",label:i._("Permanently hide"),desc:i._("This chat will be moved to \"Permanently hidden\" and will stay there until you unhide it."),onClick:function(){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(q,{onIgnore:g,onToggle:u})})},hideOnClick:!0}))}f.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),babelHelpers["extends"]({key:"delete-chat-history",id:"delete-chat-history"},d)));return[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"remove-chat",id:"remove-chat",icons:"trash",label:i._("Remove chat"),items:f})]},createBlockMessagesItems:function(a){__p&&__p();var c=b("CurrentUser").getID(),d=!1;b("MessengerState.bs").compute(c,function(e){e=e.blocked_ids;d=b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(c,e,a)});var e=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromFromThreadID(a.thread_id));if(e==null)return[];return!b("MercuryIgnoredBlockedParticipants.bs").shouldShowBlock(a,c,e)?[]:[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"block-chat",id:"block-chat",icons:"friend_block",label:d?i._("Unblock messages"):i._("Block messages"),onClick:function(){if(d)b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).unblockOnMessengerDotCom(a.thread_id);else{var f=b("MessengerContactAdapters").fromMercuryParticipant(e);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(j,{onBlock:function(){w(a,c,f)},contact:f,threadID:a.thread_fbid})})}},hideOnClick:!0})]},createReportChatItems:function(a,c){return[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"report-chat",id:"report-chat",icons:"report",label:i._("Report chat"),desc:c?i._("Give feedback and report something a person has shared in this chat"):null,hideOnClick:!0,onClick:function(){a.is_canonical?b("MessengerFRXBootloaderUtils").bootloadFRXDialog(a.thread_id):b("Bootloader").loadModules(["WorkChatReportParticipantDialogReact.bs"],function(c){var d=c.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(d,{thread:a,participants:b("immutable").Map(a.participants.reduce(function(a,c){return babelHelpers["extends"]({},a,(a={},a[c]=b("MessengerParticipants.bs").getNow(c),a))},{})),viewer:b("CurrentUser").getID()})})},"WorkGalahadChatMenuHelper")}})]},createChatPrivacySubMenuItems:function(a){var c=a.other_user_fbid===b("CurrentUser").getID(),d=b("MercuryThreadInfo").isEmptyLocalThread(a);if(!a.is_subscribed||c||d)return[];c=x.createReportChatItems(a,!0);return b("WorkGalahadDropdownMenuHelper").createItemsFromSections([[].concat(c),[].concat(this.createBlockMessagesItems(a))])},createPrivacyItems:function(a){var c=x.createChatPrivacySubMenuItems(a);if(c.length===0)return[];return c.length===1?x.createReportChatItems(a,!1):[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"privacy-chat-options",id:"privacy-chat-options",icons:"privacy",label:i._("Privacy options"),items:[b("React").createElement(b("WorkGalahadDropdownMenuItem.react").Header,{key:"privacy-options-header",id:"privacy-options-header",label:i._("Privacy options")})].concat(c)})]},createPinOrUnpinItems:function(a){if(!a.is_subscribed)return[];if(!a.is_pinned)return[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"pin-chat",id:"pin-chat",icons:"pushpin",label:i._("Pin chat"),desc:i._("Pin this chat to the top of your inbox"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).pin(a.thread_id,b("ChatPinnedThreadsEntryPoint").MENU_ITEM_IN_OVERFLOW_MENU)},hideOnClick:!0})];else return[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"unpin-chat",id:"unpin-chat",icons:"pushpin_slash",label:i._("Unpin chat"),desc:i._("Unpin this chat in your inbox"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).unpin(a.thread_id,b("ChatPinnedThreadsEntryPoint").MENU_ITEM_IN_OVERFLOW_MENU)},hideOnClick:!0})]},createAdminOptionsItems:function(a){__p&&__p();var c=b("MessengerAdminGroupUtils").isAdmin(a.admins,b("CurrentUser").getID());if(a.is_canonical||!c)return[];c=!b("MessengerAdminGroupUtils").isApprovalOpenThread(a);c=[b("React").createElement(b("WorkGalahadDropdownMenuItem.react").Header,{key:"chat-admin-options-header",label:i._("Membership approval")}),b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"membership-approval-on",id:"membership-approval-on",label:i._("On"),desc:i._("Admins can approve new people who are added by non-admins."),icons:c?"checkmark_selected":"checkmark_unselected",onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).setApprovalMode(b("MessengerApprovalModeTypes").APPROVALS,a)},hideOnClick:!0}),b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"membership-approval-off",id:"membership-approval-off",label:i._("Off"),desc:i._("Any member can add new people to the chat without approval."),icons:c?"checkmark_unselected":"checkmark_selected",onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).setApprovalMode(b("MessengerApprovalModeTypes").OPEN,a)},hideOnClick:!0})];var d=b("immutable").OrderedMap(a.participants.reduce(function(a,c){return babelHelpers["extends"]({},a,(a={},a[c]=b("MessengerParticipants.bs").getNow(c),a))},{})),e=!b("WorkForeignEntityInfo.re").areAllCoworkers(d);a.is_subscribed&&!a.work_associated_group&&!e&&(c.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react").Separator,{key:"admin-create-group-option-separator"})),c.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"create-group",id:"create-group",icons:"group_plus",label:i._("Create group"),hideOnClick:!0,onClick:function(){r.onReady(function(c){var e=c.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(e,{thread:a,participants:d})})})}})));return[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"chat-admin-options",id:"chat-admin-options",icons:"badge_admin",label:i._("Admin options"),items:c})]},createLeaveItems:function(a){return a.is_canonical||!a.is_subscribed?[]:[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"leave-chat",id:"leave-chat",icons:"leave",label:i._("Leave chat"),onClick:function(){var c=b("MessengerAdminGroupUtils").isAdmin(a.admins,b("CurrentUser").getID());b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(n,{onLeave:function(){b("MessengerLeaveGroupAction").leaveGroup(a,b("CurrentUser").getID())},isViewerAdmin:c,thread:a})})},hideOnClick:!0})]}};e.exports=x}),null);
__d("WorkGalahadQuickChatAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN:"OPEN",EXPAND:"EXPAND",CLOSE:"CLOSE"})}),null);
__d("WorkGalahadQuickChatLocation",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHANNEL:"CHANNEL",NOTIFICATION:"NOTIFICATION",QUICKCHAT:"QUICKCHAT"})}),null);
__d("WorkGalahadQuickChatMenuItem.react",["fbt","React","WorkGalahadDropdownMenuItem.react","WorkGalahadQuickChatAction","WorkGalahadQuickChatActions","WorkGalahadQuickChatLocation","WorkQuickChatTypedLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React").useCallback;function a(a){var c=a.threadID;a=h(function(){new(b("WorkQuickChatTypedLogger"))().setThreadID(c).setActionType(b("WorkGalahadQuickChatAction").OPEN).setLocation(b("WorkGalahadQuickChatLocation").CHANNEL).log(),b("WorkGalahadQuickChatActions").openThreadID(c)},[c]);return b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{id:"quickchat",icons:"square_corner_bottom_right_box",label:g._("Open chat window"),desc:g._("Chat while you use Workplace"),onClick:a,hideOnClick:!0})}e.exports=a}),null);
__d("WorkGalahadChatChannelOverflowButton.react",["cx","fbt","AbstractPopoverButton.react","Link.react","React","WorkGalahadChatMenuHelper","WorkGalahadDropdownMenuHelper","WorkGalahadQuickChatMenuItem.react","joinClasses","suiMargin","useGalahadDropdownMenu"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.thread,d=a.className;c=b("WorkGalahadDropdownMenuHelper").createItemsFromSections([[b("React").createElement(b("WorkGalahadQuickChatMenuItem.react"),{key:"quickChat",threadID:c.thread_id})].concat(b("WorkGalahadChatMenuHelper").createPinOrUnpinItems(c)),[].concat(b("WorkGalahadChatMenuHelper").createMuteChatItems(c),b("WorkGalahadChatMenuHelper").createHideChatItems(c)),[].concat(b("WorkGalahadChatMenuHelper").createRemoveChatItems(c),b("WorkGalahadChatMenuHelper").createLeaveItems(c))]);var e=b("useGalahadDropdownMenu")({label:void 0,alignment:"left",items:c,onShow:function(){a.onToggle(!0)},onHide:function(){a.onToggle(!1)},width:280,offsetX:-12}),f=e[0];e=e[1];if(c.length===0)return null;c={button:b("React").createElement(b("Link.react"),babelHelpers["extends"]({"aria-label":h._("Group actions"),className:b("joinClasses")(d,"_7kl6")},e))};return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("AbstractPopoverButton.react"),{className:"_3-99",config:c,haschevron:!1}),f)}e.exports=a}),null);
__d("WorkGalahadMessageRow.react",["cx","React","WorkGalahadHoverHelper"],(function(a,b,c,d,e,f,g){var h=b("WorkGalahadHoverHelper").useHover;function a(a){var c=a.children,d=a.isActive,e=a.meta;a=a.hideMeta;var f=h(),g=f[0];f=f[1];return b("React").createElement("div",babelHelpers["extends"]({className:"_3-gp _23dk _6inw"+(d?" _69pu":"")+(g?" _6aio":"")},f),c,e!=null&&a!==!0?b("React").createElement("div",{className:"_3-gq _3nmu"},e):null)}e.exports=a}),null);
__d("MessengerThreadlistRow.react",["cssVar","cx","fbt","ix","requireCond","Bootloader","CurrentUser","Image.react","ImmutableObject","LinkWithHiddenURLBar.react","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryParticipantListRenderer","MercuryThreadActions","MercuryThreadSnippet.react","MercuryThreadTimestampReact.bs","MercuryThreadTitleSafe.react","MercuryTimestamp","MessageRequestUtils","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerBlockDialogReact.bs","MessengerButtonReact.bs","MessengerConfig","MessengerConfirmBlockThreadDialogReact.bs","MessengerConfirmLeaveGroupDialogReact.bs","MessengerDialogs.bs","MessengerDotComAndInboxM4Check.bs","MessengerGalahadGating.bs","MessengerMessage.bs","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerPinIconSVGReact.bs","MessengerPresenceStatusUtils","cr:999311","cr:861811","MessengerThreadImageReact.bs","MessengerThreadlistRowActionsReact.bs","MessengerThreadlistRowPendingThreadButtonsReact.re","MessengerThreadlistRowSeenHeadReact.bs","MessengerURIStore","MessengerURIUtils.bs","MNAdsMessageRequestUtils","React","ReactDOM","RTCCallState","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","ShimButton.react","Tooltip","UserAgent","WorkGalahadChannelStatusBadge.react","WorkGalahadChatChannelOverflowButton.react","WorkGalahadMessageRow.react","asset","clearTimeout","getPageIDFromThreadID","gkx","immutable","joinClasses","messengerRTLClasses","qex","setTimeout"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("MercuryThreadTimestampReact.bs").jsComponent,l=b("MessengerBlockDialogReact.bs").jsComponent,m=b("MessengerButtonReact.bs").jsComponent,n=b("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,o=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent,p=b("MessengerThreadImageReact.bs").jsComponent,q=b("MessengerThreadlistRowActionsReact.bs").jsComponent,r=b("MessengerThreadlistRowPendingThreadButtonsReact.re").make,s=b("MessengerThreadlistRowSeenHeadReact.bs").jsComponent;a=b("React").PropTypes;var t=50,u=28,v=24,w=j("86913"),x=j("86914"),y=function(a){var b;switch(a){case"pending":case"other":case"inbox":case"thread":b=a;break;default:b=null}return b};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={actionsOpen:!1,participantNames:"",isMiniInbox:!1},d.$1=0,d.$2=null,d.$20=function(){__p&&__p();var a=d.props.thread.thread_id;a=b("MercuryIDs").isGroupChat(a);if(a)d.$23();else{a=d.props.thread.other_user_fbid;var c=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null,e=c==null?void 0:c.short_name;e&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(l,{onBlock:function(){d.$24(e)},contact:c})})}},d.$21=function(){var a=b("CurrentUser").getID();a=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.thread.thread_id,a);b("MercuryThreadActions").get()["delete"](d.props.thread.thread_id);d.props.isActive&&b("MessengerActions").selectThread(null);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.thread.thread_id)).setSurface(y(d.props.folder)).setFolderType("pending").setThreadKey(a).setEntryPoint("inbox_banner").log()},d.$22=function(a){var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.thread.thread_id,c);a||(b("MessengerDialogs.bs").removeDialog(),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.thread.thread_id)).setSurface(y(d.props.folder)).setFolderType("pending").setThreadKey(c).setEntryPoint("inbox_banner").log())},d.$5=function(a){a.preventDefault(),d.props.onFocus(d.props.thread.thread_id)},d.$6=function(a){d.$1++;if(d.$2)return;d.$2=b("setTimeout")(function(){d.props.onSelect&&d.props.onSelect(),d.$1=0,d.$2=null},1e3)},d.$7=function(a){d.$1--,d.$1===0&&(b("clearTimeout")(d.$2),d.$2=null)},d.$9=function(a){d.props.onSelect()},d.$10=function(a){if(d.props.logClickHandler){a=d.props.thread.is_canonical?b("MercuryIDs").getUserIDFromThreadID(d.props.thread.thread_id)||"0":d.props.thread.thread_fbid;d.props.logClickHandler&&d.props.logClickHandler(a)}},d.$18=function(a){d.setState({actionsOpen:a})},d.$27=function(a){__p&&__p();a.preventDefault();a.stopPropagation();a=window.callWindow&&!window.callWindow.closed&&window.callWindow.focus;if(a)window.callWindow.focus();else{a=d.props.thread;var c=a.rtc_call_data;a=a.thread_fbid;var e="GROUP:"+a,f=c.call_state===b("RTCCallState").VIDEO_GROUP_CALL;b("RTWebUserActionLogger").logClick({callType:b("RTWebLoggingCallType").MW,component:b("RTWebLoggingComponent").JOIN_CALL,conferenceName:e,surface:b("RTWebLoggingSurface").THREAD_LIST,mediaType:b("RTWebUserActionLogger").getMediaType(!f)});b("Bootloader").loadModules(["FBRTCCore","FBRTCLogger"],function(a,b){b=b.Trigger;a.startGroupCall({conferenceName:e,hasVideo:f,serverInfoData:c.server_info_data,trigger:b.MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON})},"MessengerThreadlistRow.react")}},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.getParticipantNames();var b=window.matchMedia("(max-width: 900px)");this.setState({isMiniInbox:b.matches});b.addListener(function(b){return a.setState({isMiniInbox:b.matches})})};d.componentDidUpdate=function(a){__p&&__p();this.props.isFocused&&(!a.isFocused?this.props.isActionsFocused?b("ReactDOM").findDOMNode(this.refs.actions.refs.button).focus():b("ReactDOM").findDOMNode(this.refs.link).focus():!a.isActionsFocused&&this.props.isActionsFocused?b("ReactDOM").findDOMNode(this.refs.actions.refs.button).focus():a.isActionsFocused&&!this.props.isActionsFocused&&b("ReactDOM").findDOMNode(this.refs.link).focus());if(this.$3(this.props.thread)&&!this.$3(a.thread)){a=this.props.thread;var c=a.rtc_call_data;a=a.thread_fbid;a="GROUP:"+a;c=c.call_state===b("RTCCallState").VIDEO_GROUP_CALL;b("RTWebUserActionLogger").logImpression({callType:b("RTWebLoggingCallType").MW,component:b("RTWebLoggingComponent").JOIN_CALL,conferenceName:a,surface:b("RTWebLoggingSurface").THREAD_LIST,mediaType:b("RTWebUserActionLogger").getMediaType(!c)})}this.getParticipantNames()};d.getParticipantNames=function(){__p&&__p();var a=this;if(this.state.participantNames!=="")return;var c=this.props,d=c.thread;c=c.viewer;var e=d.participants||[],f=b("MercuryIDs").getParticipantIDFromUserID(c);e.length>1&&(e=e.filter(function(a){return a!=f}));var g=d.custom_nickname?{}:null;if(g)for(var h in d.custom_nickname)g[h]=d.custom_nickname[h];b("MessengerParticipants.bs").getMulti(e,function(c){var d=e.map(function(a){return c[a]});d=new(b("MercuryParticipantListRenderer"))().setNickname(g).renderParticipantList(d);a.setState({participantNames:d})})};d.render=function(){var a=this,c=this.props,d=c.isActive,e=c.isActionsFocused,f=c.isTabbable,g=c.participants,h=c.thread;c=c.viewer;var j=h.unread_count>0,k=b("MessengerURIUtils.bs").getURIForThreadID(h.thread_id),l=h.name?h.name:this.state.participantNames,m=b("MNAdsMessageRequestUtils").isAdsMessageRequest(h)?b("MNAdsMessageRequestUtils").renderAdsMessageRequestStatus():this.$4(h),n=b("CurrentUser").isWorkUser()&&b("gkx")("779201"),o=this.props.isDenseRow===!0,q=b("CurrentUser").isWorkUser()&&b("gkx")("795634")&&j,r=q?b("React").createElement("div",{className:"_7c25"},h.unread_count):null,s=b("MessengerDotComAndInboxM4Check.bs").yes?"_7vuq":"_33g_";n=b("React").createElement("li",{"aria-live":j?"polite":null,"aria-relevant":d||j?"additions text":null,onFocus:this.$5,className:"_5l-3 _1ht1"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zk9":"")+(h.folder===b("MessagingTag").PENDING?" _4as3":"")+(this.props.isActive?" _1ht2":"")+(j?" _1ht3":"")+(b("gkx")("795634")?" _7c1w":"")+(this.state.actionsOpen?" _13aa":"")+(this.props.isMuted?" _569x":"")+((b("gkx")("678624")||b("MessengerConfig").MPT>0)&&h.is_pinned?" _1oh3":"")+(this.props.isFocused?" _23_m":"")+(j&&b("UserAgent").isBrowser("Chrome")&&b("UserAgent").isPlatform("Mac")?" _5fx8":"")+(n?" _7pj1":"")+(o?" _79nz":""),onDragEnter:d?null:this.$6,onDragLeave:d?null:this.$7,role:"row",ref:function(b){return b&&a.props.registerThreadRefs&&a.props.registerThreadRefs(b)},tabIndex:-1},b("React").createElement("div",{className:"_5l-3 _1ht5",id:this.$8(h.thread_id),role:"gridcell",tabIndex:-1},b("React").createElement(b("LinkWithHiddenURLBar.react"),{href:k.toString(),onClick:this.$9,onAllClicks:this.$10,className:"_1ht5 _2il3"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zka":"")+" _5l-3 _3itx",s:"true",ref:"link",role:"link",tabIndex:f&&!e?0:-1},b("React").createElement("div",{className:"_6zkb"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7t1l":"")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zkc":"")},this.props.isMuted&&b("React").createElement("div",{className:"accessible_elem"},i._("Muted conversation")),b("React").createElement("div",babelHelpers["extends"]({},b("Tooltip").propsFor(l,"right","center"),{"data-tooltip-root-class":s,"aria-hidden":!0,className:"_1qt3"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6-5k":"")+" _5l-3"}),b("MessengerDotComAndInboxM4Check.bs").yes&&b("cr:861811")?b("cr:999311")?b("React").createElement(b("cr:999311").make,{borderColor:d?"#f2f2f2":this.state.isMiniInbox&&j?"#D2E7FD":null,size:this.$11(),thread:h,viewer:c}):b("React").createElement(b("cr:861811").make,{borderColor:d?"#f2f2f2":this.state.isMiniInbox&&j?"#D2E7FD":null,size:this.$11(),thread:h,viewer:c}):b("React").createElement(p,{isPresenceForWork:this.props.isPresenceForWork,isDoNotDisturb:this.props.isDoNotDisturb,participants:g,size:this.$11(),thread:h,viewer:c}),h.is_business_page_active&&b("qex")._("968099")?b("React").createElement("div",{className:"_849n"}):null),b("React").createElement("div",{className:"_1qt4"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7vuo":"")+" _5l-m"},b("MessengerDotComAndInboxM4Check.bs").yes?b("React").createElement(b("React").Fragment,null,b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement(b("MercuryThreadTitleSafe.react"),{className:"_1ht6 _7st9",showUnreadCount:!1,thread:h,useShortName:!1,viewer:c})),b("React").createElement("div",{className:"_1qt5 _6zkd _5l-3"},b("React").createElement(b("MercuryThreadSnippet.react"),{className:b("joinClasses")("_1htf _6zke",b("messengerRTLClasses")(h.snippet,!0)),participants:g,shouldRenderYou:!0,thread:h,viewer:c}),b("React").createElement("div",{"aria-hidden":!0,className:"_6zkf"},"\xb7"),m)):b("React").createElement(b("React").Fragment,null,b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement(b("MercuryThreadTitleSafe.react"),{className:"_1ht6",showUnreadCount:!1,thread:h,useShortName:!1,viewer:c}),o?null:b("React").createElement("div",null,m)),o?null:b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement(b("MercuryThreadSnippet.react"),{className:b("joinClasses")("_1htf",b("messengerRTLClasses")(h.snippet,!0)),participants:g,shouldRenderYou:!0,thread:h,viewer:c}))),this.$12(),this.$13(),this.props.isDenseRow?null:r)))),o?this.$14(q):this.$15());if(b("MessengerGalahadGating.bs").isGalahadUIEnabled())return b("React").createElement(b("WorkGalahadMessageRow.react"),{isActive:this.props.isActive,hideMeta:this.props.isDenseRow,meta:b("React").createElement(b("WorkGalahadChannelStatusBadge.react"),{canToggle:!0,onClick:function(){j?a.props.onMarkRead():a.props.onMarkUnread()},unread:this.props.thread.unread_count>0})},n);else return n};d.$15=function(){__p&&__p();if(this.props.showActions===!1)return null;var a=b("CurrentUser").isWorkUser()&&b("MessengerGalahadGating.bs").isGalahadUIEnabled()&&b("gkx")("894038"),c=this.props,d=c.blockedIds,e=c.isActionsFocused,f=c.isTabbable,g=c.participants,h=c.thread;c=c.viewer;var j=b("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(this.props.participants,h);j=j&&j.contact;d=b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(c,d,h);var k=b("MessengerAdminGroupUtils").isJoinableThread(h),l=b("MercuryIDs").isGroupChat(this.props.thread.thread_id),m=h.unread_count>0,n;b("MessengerDotComAndInboxM4Check.bs").yes&&m?n=this.state.actionsOpen?null:b("React").createElement("div",{className:"_6zv_"}):n=b("React").createElement(s,{className:"_5bli",isHidden:this.state.actionsOpen&&!(b("CurrentUser").isWorkUser()&&b("gkx")("678624")||b("MessengerConfig").MPT>0),lastMessage:this.props.lastMessage,participants:g,readReceipts:this.props.readReceipts,thread:h,viewer:c});return b("React").createElement("div",{role:"gridcell"},b("React").createElement(b("ShimButton.react"),{"aria-describedby":this.$8(h.thread_id),"aria-haspopup":"true","aria-label":i._("Actions"),className:"_2j6"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zkg":"")+" _5l-3",tabIndex:f&&e?0:-1,role:"button"},this.$16(),b("React").createElement("div",{className:"_56ck"}),n,this.$17(),a?b("React").createElement(b("WorkGalahadChatChannelOverflowButton.react"),{className:"_5blh",onToggle:this.$18,tabIndex:-1,thread:this.props.thread}):b("React").createElement(q,{contact:j,isGroupChat:l,isJoinableThread:k,isMuted:this.props.isMuted,isOpen:this.state.actionsOpen,isPinned:h.is_pinned,isUnread:m,isBlocked:d,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onPin:this.props.onPin,onToggle:this.$18,onUnmute:this.props.onUnmute,onUnpin:this.props.onUnpin,onIgnore:this.props.onIgnore,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showLeaveGroup:this.props.showLeaveGroup,showMute:!0,showBlock:b("MercuryIgnoredBlockedParticipants.bs").shouldShowBlock(this.props.thread,this.props.viewer,j),showPin:this.$19(),showReport:b("getPageIDFromThreadID")(this.props.thread.thread_id),tabIndex:-1,thread:h,ref:"actions"})))};d.$14=function(a){if(this.props.showActions===!1)return null;var c=this.props,d=c.isActionsFocused,e=c.isTabbable;c=c.thread;a=a?b("React").createElement("div",{className:"_7pj2"},c.unread_count):null;return b("React").createElement("div",{role:"gridcell"},b("React").createElement(b("ShimButton.react"),{"aria-describedby":this.$8(c.thread_id),"aria-haspopup":"true","aria-label":i._("Actions"),className:"_7pj3 _5l-3",tabIndex:e&&d?0:-1,role:"button"},this.$16(),a,b("React").createElement("div",{className:"_56ck"})))};d.$16=function(){if(b("CurrentUser").isWorkUser()&&b("gkx")("678624"))return b("React").createElement(b("Image.react"),{src:j("572538"),className:"_6q64"});else if(b("MessengerConfig").MPT>0)return b("MessengerPinIconSVGReact.bs").make("_1oh5","#808080");return null};d.$17=function(){var a=this.props.lastMessage;if(this.state.actionsOpen||!a)return null;var c=b("MessengerMessage.bs").isSending(a),d=b("MessengerMessage.bs").hasError(a);if(!c&&!d)return null;d=b("MessengerMessage.bs").getError(a);return b("React").createElement("div",b("Tooltip").propsFor(d,"right","center"),b("React").createElement(b("Image.react"),{className:"_wtw"+(c?" _3qh2":""),src:c?x:w}))};d.$4=function(a){return b("React").createElement(k,{className:"_1ht7"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zkh":""),time:a.timestamp,title:b("MercuryTimestamp").getAbsoluteTimestamp(a.timestamp),text:b("MercuryTimestamp").getRelativeTimestamp(a.timestamp)})};d.$12=function(){return!b("MessageRequestUtils").shouldShowThreadlistPendingActions(this.props.thread)?null:b("React").createElement(r,{onBlock:this.$20,onDelete:this.$21,onToggle:this.$22,thread:this.props.thread})};d.$23=function(){var a=this,c=this.props.thread.thread_id;c&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(o,{onLeave:function(){var d=b("MessengerURIStore").getState().activeThreadID===c;a.$25().leaveGroup(c);d&&b("MessengerActions").selectThread(null)},isViewerAdmin:!1,thread:a.props.thread})})};d.$25=function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)};d.$24=function(a){var c=this,d=this.props.thread.thread_id,e=d===b("MessengerURIStore").getState().activeThreadID;this.$25().blockIgnoreOnMessengerDotCom(e,d,function(){c.$26(a)})};d.$26=function(a){var c=this.props.thread,d=this.props.thread.thread_id;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(n,{participantName:a})});var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint(null).log()};d.$13=function(){if(!this.$3(this.props.thread))return null;var a=window.callWindow&&!window.callWindow.closed?i._("Return To Call"):i._("Join Call");return b("React").createElement(m,{className:"_4ry5",label:a,onClick:this.$27,type:"primary"})};d.$8=function(a){return"row_header_id_"+a};d.$3=function(a){return((a=(a=a.rtc_call_data)==null?void 0:a.call_state)!=null?a:b("RTCCallState").NO_ONGOING_CALL)!==b("RTCCallState").NO_ONGOING_CALL};d.$19=function(){var a=b("CurrentUser").isWorkUser()&&b("gkx")("678624")||b("MessengerConfig").MPT>0,c=b("getPageIDFromThreadID")(this.props.thread.thread_id);return a&&c===null};d.$11=function(){if(!b("CurrentUser").isWorkUser())return t;var a=b("gkx")("779201"),c=this.props.isDenseRow===!0;if(c)return v;else if(a)return u;return t};return c}(b("React").PureComponent);c.propTypes={isActive:a.bool.isRequired,blockedIds:a.any,isActionsFocused:a.bool,isFocused:a.bool,isMuted:a.bool.isRequired,isDoNotDisturb:a.bool,isPresenceForWork:a.bool,isDenseRow:a.bool,lastMessage:a.object,logClickHandler:a.func,onArchive:a.func.isRequired,onDelete:a.func.isRequired,onMarkRead:a.func.isRequired,onMarkSpam:a.func.isRequired,onMarkUnread:a.func.isRequired,onMute:a.func.isRequired,onPin:a.func.isRequired,onSelect:a.func.isRequired,onUnmute:a.func.isRequired,onIgnore:a.func.isRequired,onBlock:a.func.isRequired,onUnblock:a.func.isRequired,onUnpin:a.func.isRequired,participants:a.instanceOf(b("immutable").Map).isRequired,readReceipts:a.instanceOf(b("immutable").OrderedMap).isRequired,registerThreadRefs:a.func,thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired};e.exports=c}),null);
__d("MercuryThreadlistRowContainer.react",["Arbiter","AvailableListConstants","Bootloader","CurrentUser","ImmutableObject","MercuryIDs","MessengerParticipants.bs","PresenceStatus","React","SubscriptionsHandler","gkx","immutable","shallowEqual","AvailableList"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("AvailableList");a=b("React").PropTypes;var g=function(a){return!b("CurrentUser").isWorkUser()?!1:b("immutable").Seq(a).some(function(a){a=b("MercuryIDs").getUserIDFromParticipantID(a);if(a===b("CurrentUser").getID())return!1;else return b("PresenceStatus").get(a)===b("AvailableListConstants").ACTIVE})},h=function(a){return a.thread.is_canonical_user?a.thread.other_user_fbid:null},i=b("React").createClass({displayName:"MercuryThreadlistRowContainer",propTypes:{ChildClass:a.func.isRequired,thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired},_availabilityStatusStore:null,subscriptions:new(b("SubscriptionsHandler"))(),_participantsSubscription:null,getInitialState:function(){return{participants:b("immutable").Map(),isPresenceForWork:g(this.props.thread.participants),isDoNotDisturb:this._getDoNotDisturb()}},componentDidMount:function(){__p&&__p();var a=this;b("CurrentUser").isWorkUser()&&this.subscriptions.addSubscriptions(b("Arbiter").subscribe(b("AvailableListConstants").ON_AVAILABILITY_CHANGED,function(){return a.setState({isPresenceForWork:g(a.props.thread.participants)})}));if(b("gkx")("678573")&&b("CurrentUser").isWorkUser()){var c=h(this.props);c&&b("Bootloader").loadModules(["WorkChatAvailabilityStatusStore"],function(b){i._availabilityStatusStore=b,b.fetchUsersIfNeeded(c),b.subscribeUser(c,a),a.setState({isDoNotDisturb:b.getIsDoNotDisturb(c)}),a.subscriptions.addSubscriptions(b.addListener(function(){var c=a.props.thread.is_canonical_user?a.props.thread.other_user_fbid:null;c&&a.setState({isDoNotDisturb:b.getIsDoNotDisturb(c)})}))},"MercuryThreadlistRowContainer.react")}var d=this._getDoNotDisturb(),e=this._computeParticipants();this.setState({participants:e,isPresenceForWork:g(this.props.thread.participants),isDoNotDisturb:d})},componentDidUpdate:function(){__p&&__p();var a=this,b=[];this.props.thread.participants.map(function(c){var d=a.state.participants.get(c);d||b.push(c)});var c=this._getDoNotDisturb();if(b.length>0)this.setState({participants:this._computeParticipants(),isPresenceForWork:g(this.props.thread.participants),isDoNotDisturb:c});else{var d=g(this.props.thread.participants);d!==this.state.isPresenceForWork&&this.setState({isPresenceForWork:d});c!==this.state.isDoNotDisturb&&this.setState({isDoNotDisturb:c})}},_computeParticipants:function(){var a=this;this._participantsSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantsSubscription);var c=b("MessengerParticipants.bs").getMultiEagerMap(this.props.thread.participants,function(b){a._participantsSubscription=null,a.setState({participants:b})}),d=c[0];c=c[1];this._participantsSubscription=c;return d},_getDoNotDisturb:function(){var a=h(this.props);return i._availabilityStatusStore&&a&&b("gkx")("678573")&&b("CurrentUser").isWorkUser()?i._availabilityStatusStore.getIsDoNotDisturb(a):!1},componentWillUnmount:function(){var a=h(this.props);a&&(b("gkx")("678573")&&b("CurrentUser").isWorkUser()&&i._availabilityStatusStore&&i._availabilityStatusStore.unsubscribeUser(a,this));this.subscriptions.release();this._participantsSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantsSubscription)},shouldComponentUpdate:function(a,c){return!b("shallowEqual")(a,this.props)||c.isPresenceForWork!==this.state.isPresenceForWork||c.isDoNotDisturb!==this.state.isDoNotDisturb||!b("immutable").is(c.participants,this.state.participants)},render:function(){var a=this.props,c=a.ChildClass;a=babelHelpers.objectWithoutPropertiesLoose(a,["ChildClass"]);return b("React").createElement(c,babelHelpers["extends"]({},a,{participants:this.state.participants,isPresenceForWork:this.state.isPresenceForWork,isDoNotDisturb:b("gkx")("678573")&&this.state.isDoNotDisturb}))}});e.exports=i}),null);
__d("MessengerThreadlistRowContainer.react",["fbt","requireCond","ChatPinnedThreadsEntryPoint","CurrentUser","IgnoreMessagesTypedLogger","ImmutableObject","MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryThreadActions","MercuryThreadInfo","cr:998178","MercuryThreadlistRowContainer.react","MessageRequestUtils","MessagingSourceEnum","MessagingTag","MessagingThreadType","MessengerActions","MessengerAdminGroupUtils","MessengerConfirmLeaveGroupDialogReact.bs","MessengerDialogs.bs","MessengerEnvironment","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerReadReceipt.bs","MessengerState.bs","cr:998179","MessengerThreadlistRow.react","MNPlatformTagsDataManager","React","ReactComponentWithPureRenderMixin","ReactDOM","withMessengerSource"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerThreadlistRowContainer",mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{blockedIds:a.any,isActive:a.bool.isRequired,isTabbable:a.bool,folder:a.string,onScrollIntoView:a.func,onOverrideSelect:a.func,showActions:a.bool,readReceipts:a.any,thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired,source:a.string.isRequired},componentDidUpdate:function(a){var c=this.props,d=c.onScrollIntoView;c=c.isActive;c&&!a.isActive&&d&&d(b("ReactDOM").findDOMNode(this))},render:function(){var a=this.props.thread.thread_id;a=b("MessengerState.bs").getThreadMessagesRangeNow(this.props.viewer,a,0,1)[0]||null;var c=b("MessengerReadReceipt.bs").getSeenTimestamps(this.props.readReceipts,this.props.thread.thread_id);if(this.props.thread.thread_type===b("MessagingThreadType").FOLDER&&b("cr:998178")&&b("cr:998179")&&b("MessengerEnvironment").messengerdotcom)return b("React").createElement(b("cr:998178"),babelHelpers["extends"]({},this.props,{ChildClass:b("cr:998179")}));else return b("React").createElement(b("MercuryThreadlistRowContainer.react"),babelHelpers["extends"]({},this.props,{ChildClass:b("MessengerThreadlistRow.react"),isMuted:b("MercuryThreadInfo").isMuted(this.props.thread),lastMessage:a,onArchive:this._handleArchive,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onPin:this._handlePin,onSelect:this._handleSelect,onUnmute:this._handleUnmute,onUnpin:this._handleUnpin,onIgnore:this._handleIgnore,onBlock:this._handleBlockFromSettingOrDecline,onUnblock:this._handleUnblock,readReceipts:c,showActions:this.props.showActions,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical}))},_handleArchive:function(){var a=this.props.isActive;this._getThreadActions().archive(this.props.thread.thread_id);a&&b("MessengerActions").selectThread(null)},_handleDelete:function(){var a=this.props.isActive;this._getThreadActions()["delete"](this.props.thread.thread_id);a&&b("MessengerActions").selectThread(null)},_handleMarkRead:function(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function(){var a=this.props.isActive;this._getThreadActions().markSpam(this.props.thread.thread_id);a&&b("MessengerActions").selectThread(null)},_handleMarkUnread:function(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function(a){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,a)},_handlePin:function(){this._getThreadActions().pin(this.props.thread.thread_id,b("ChatPinnedThreadsEntryPoint").MENU_ITEM_IN_THREAD_ROW)},_handleUnpin:function(){this._getThreadActions().unpin(this.props.thread.thread_id,b("ChatPinnedThreadsEntryPoint").MENU_ITEM_IN_THREAD_ROW)},_handleSelect:function(){__p&&__p();var a=b("CurrentUser").getID();a=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,a);if(this.props.onOverrideSelect){this.props.onOverrideSelect(this.props.thread);return}b("MessengerActions").selectThread(this.props.thread.thread_id);var c=b("MercuryIDs").getUserIDFromThreadID(this.props.thread.thread_id),d;switch(this.props.folder){case"inbox":d="inbox";break;case"pending":d="pending";break;case"other":d="other";break}this.props.thread.folder!==b("MessagingTag").INBOX&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_thread_open").setThreadID(c).setSurface(d).setFolderType(this.props.thread.folder).setThreadKey(a).log();b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(b("MessagingSourceEnum").MESSENGER_WEB_SEARCH,c)},_handleUnmute:function(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleLeaveGroup:function(){var a=this;if(this.props.viewer){var c=b("MessengerAdminGroupUtils").isAdmin(this.props.thread.admins,this.props.viewer);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(h,{onLeave:a._onLeaveGroupConfirm,isViewerAdmin:c,thread:a.props.thread})})}},_handleIgnore:function(){var a=this.props.isActive;this._getThreadActions().changeFolder(this.props.thread.thread_id,"other");a&&b("MessengerActions").selectThread(null);new(b("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(this.props.thread.thread_fbid).setPlatform("messengerdotcom").log()},_handleBlockFromSettingOrDecline:function(){var a=this.props.thread.thread_id;a=b("MercuryIDs").isGroupChat(a);if(a){this._handleIgnore();return}a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(this.props.thread.other_user_fbid));a=a&&a.short_name||g._("sender");this._handleConfirmBlock(a)},_handleConfirmBlock:function(a){var b=this,c=this.props.thread.thread_id;c&&this._getThreadActions().blockIgnoreOnMessengerDotCom(this.props.isActive,c,function(){b._handleAfterBlock(a)})},_handleAfterBlock:function(a){a=this.props.thread;var c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(a.thread_id,b("CurrentUser").getID()),d=!!a&&b("MessageRequestUtils").isFiltered(a);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id)).setSurface("thread").setFolderType(d?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(c).setEntryPoint(null).log()},_handleUnblock:function(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_onLeaveGroupConfirm:function(){if(!b("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)){var a=this._getMessageObject().constructLogMessageObject(this.props.source,this.props.thread.thread_id,b("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(a)}},_getThreadActions:function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)},_getMessageActions:function(){return b("MercuryMessageActions").getForFBID(this.props.viewer)},_getMessageObject:function(){return b("MercuryMessageObject").getForFBID(this.props.viewer)}});e.exports=b("withMessengerSource")(c,!0)}),null);
__d("MessengerSearchLoggerUtil",["MercuryTypeaheadConstants","MessengerSearchFunnelLoggerConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c;switch(a){case b("MercuryTypeaheadConstants").THREAD_TYPE:c=b("MessengerSearchFunnelLoggerConstants").GROUP;break;case b("MercuryTypeaheadConstants").FRIEND_TYPE:c=b("MessengerSearchFunnelLoggerConstants").USER_CONTACT;break;case b("MercuryTypeaheadConstants").MESSAGE_TYPE:c=b("MessengerSearchFunnelLoggerConstants").MESSAGE;break;case b("MercuryTypeaheadConstants").NON_FRIEND_TYPE:c=b("MessengerSearchFunnelLoggerConstants").USER_NON_CONTACT;break;case b("MercuryTypeaheadConstants").FB4C_TYPE:c=b("MessengerSearchFunnelLoggerConstants").COWORKER;break;case b("MercuryTypeaheadConstants").GAME_TYPE:c=b("MessengerSearchFunnelLoggerConstants").GAME;break;case b("MercuryTypeaheadConstants").PAGE_TYPE:case b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:case b("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE:case b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE:c=b("MessengerSearchFunnelLoggerConstants").PAGE;break;default:c=b("MessengerSearchFunnelLoggerConstants").OTHER}return c}e.exports={getLoggingTypeFromMercuryType:a}}),null);
__d("MessengerUniversalSearchFunnelLogger",["FunnelLogger","MessengerSearchLoggerUtil","MessengerUniversalSearchFunnelLoggerConstants","compactArray","gkx","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerUniversalSearchFunnelLoggerConstants").NAME,h=b("MessengerUniversalSearchFunnelLoggerConstants").EVENTS,i=h.END,j=h.IMPRESSIONS,k=h.REENTERED,l=h.RESULT_SELECTED,m=h.SOURCE_ENDED,n=h.SOURCE_STARTED,o=h.START,p=h.QUERY_CHANGED,q=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL,r=b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.NULL_STATE,s,t,u,v=b("gkx")("678635");function a(a,d,e){if(!v)return;c=e;u=c.getSessionID();t=null;s=null;b("FunnelLogger").startFunnel(g,u);b("FunnelLogger").appendActionWithPayloadIfNew(g,u,o,{entry_interface:d,entry_surface:a})}function d(a){if(!v)return;b("FunnelLogger").appendActionWithPayload(g,u,p,{query_string:a})}function f(){return u}function w(a,c){__p&&__p();if(!s){if(a===null||a===void 0)return;var d=b("immutable").OrderedMap();a=a.map(function(a){var c=a.getUniqueID();a=b("MessengerSearchLoggerUtil").getLoggingTypeFromMercuryType(a.getType());return{result_fbid:c,result_type:a,rank_section:a,data_source:[b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL]}});a=b("compactArray")(a).slice(0,c);a.forEach(function(a){d=d.set(a.result_fbid,a)});s=d}t=s;b("FunnelLogger").appendActionWithPayload(g,u,j,{impression_list:Array.from(t.values()),query_string:"",result_surface:r})}function x(a,c,d,e){if(!a)return;e===q&&a;t=a;if(!v||!b("gkx")("678636"))return;b("FunnelLogger").appendActionWithPayload(g,u,j,{impression_list:Array.from(a.values()),query_string:c,result_surface:d})}function y(a,c){if(!v)return;b("FunnelLogger").appendActionWithPayload(g,u,n,{query_string:a,data_source:c})}function z(a,c,d,e,f){if(!v)return;b("FunnelLogger").appendActionWithPayload(g,u,m,{query_string:a,data_source:c,results_count:d,status:e,result_used:f})}function A(a,c,d,e){if(!v||!t)return;c=c.split(":").pop();var f=d===b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_TYPES.MESSAGE?"message:"+c:c,h=t.get(f);b("FunnelLogger").appendActionWithPayload(g,u,l,{query_string:a,result_fbid:c,result_type:d,result_index:t.keySeq().findIndex(function(a){return a===f}),data_source:[h.data_source[0]],rank_section:h.rank_section,rank_section_index:0,result_surface:e})}function B(){if(!v)return;b("FunnelLogger").appendAction(g,u,k)}function C(a,c,d,e){if(!v)return;b("FunnelLogger").appendActionWithPayload(g,u,i,{end_reason:a,action_name:c,error_name:d,entry_surface:e});b("FunnelLogger").endFunnel(g,u)}e.exports={endFunnel:C,getCurrentFunnelID:f,logNullStateImpressions:w,logImpressions:x,logQueryChanged:d,logReentered:B,logResultSelected:A,logSourceEnded:z,logSourceStarted:y,startFunnel:a}}),null);
__d("BootloadableMessengerUniversalSearchFunnelLogger.bs",["Bootload.bs","Bootloader","MessengerUniversalSearchFunnelLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger.bs"],a,"BootloadableMessengerUniversalSearchFunnelLogger.bs");return 0}a=[a];var g=b("Bootload.bs").Create(a);function c(a,c,d,e){b("MessengerUniversalSearchFunnelLogger").startFunnel(a,c,d);return 0}function d(a,c,d,e,f){b("MessengerUniversalSearchFunnelLogger").endFunnel(a,c,d,e);return 0}function e(a,c){b("MessengerUniversalSearchFunnelLogger").logQueryChanged(a);return 0}function h(a,c,d,e,f){b("MessengerUniversalSearchFunnelLogger").logResultSelected(a,c,d,e);return 0}c=[c,d,e,h];f.FunnelLoggerForBootload=a;f.Loadable=g;f.FunnelLogger=c}),null);
__d("ChatSidebarSheetChatOffline.react",["fbt","Link.react","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("gkx")("678660")?g._("Turn on Active Status"):g._("Turn on chat");return b("React").createElement("div",null,g._("{=Go online} to see who's available.",[g._param("=Go online",b("React").createElement(b("Link.react"),{className:"fbChatGoOnlineLink",onClick:this.props.onGoOnlineClick},a))]))};return c}(b("React").PureComponent);c.propTypes={onGoOnlineClick:a.func.isRequired};e.exports=c}),null);
__d("ChatSidebarSheetChatReconnectMsg.react",["fbt","ChannelConstants","Link.react","MessengerSpinner.react","Network","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.isMessenger;a=a.msecs;var d=b("React").createElement(b("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},g._("No Internet connection"));if(a==null||!b("Network").isOnline())return c?d:b("React").createElement("div",null,g._("Unable to connect to chat. Check your Internet connection."));else if(a>b("ChannelConstants").WARNING_COUNTDOWN_THRESHOLD_MSEC)return c?d:b("React").createElement("div",null,g._("Unable to connect to chat. {try-again-link}",[g._param("try-again-link",b("React").createElement(b("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},g._("Try again")))]));else if(a>1e3)return c?d:b("React").createElement("div",null,g._("Unable to connect to chat. Reconnecting in {seconds}",[g._param("seconds",Math.floor(a/1e3))]));else return c?b("React").createElement("div",null,b("React").createElement(b("MessengerSpinner.react"),{color:"grey"}),g._("Connecting...")):b("React").createElement("div",null,g._("Unable to connect to chat. Reconnecting..."))};return c}(b("React").PureComponent);c.propTypes={isMessenger:a.bool,msecs:a.number,onManuallyConnectClick:a.func};e.exports=c}),null);
__d("ChatSidebarSheetChatShutdownMsg.react",["fbt","ChannelConstants","CurrentUser","React","SyncProtocolConstants"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.hint;a=a.isMessenger;switch(c){case b("ChannelConstants").HINT_AUTH:return b("React").createElement("div",null,g._("Your session has timed out. Please log in."));case b("ChannelConstants").HINT_MAINT:return a?b("React").createElement("div",null,g._("Messenger is currently down for maintenance.")):b("React").createElement("div",null,g._("{Chat} is currently down for maintenance.",[g._param("Chat",g._("Chat"))]));case b("SyncProtocolConstants").IRIS_CURSOR_LIMIT:case b("SyncProtocolConstants").SNAPSHOT_FAILURE:case b("ChannelConstants").HINT_CONN:default:if(!a)return b("React").createElement("div",null,g._("{Chat} is currently unavailable.",[g._param("Chat",g._("Chat"))]));else if(b("CurrentUser").isWorkUser())return b("React").createElement("div",null,g._("Workplace Chat is currently unavailable."));else return b("React").createElement("div",null,g._("Messenger is currently unavailable."))}};return c}(b("React").PureComponent);c.propTypes={hint:a.string,isMessenger:a.bool};e.exports=c}),null);
__d("ChatSidebarSheet.react",["fbt","Arbiter","Bootloader","ChannelConnection","ChatBehavior","ChatConfig","ChatSidebarSheetChatOffline.react","ChatSidebarSheetChatReconnectMsg.react","ChatSidebarSheetChatShutdownMsg.react","ChatVisibility","LogHistory","MercurySyncConstants","MercurySyncEventsProxy","MessengerEnvironment","MessengerMQTTGating","PresencePrivacy","React","SubscriptionsHandler","clearTimeout","gkx","joinClasses","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("LogHistory").getInstance("sidebar_sheet");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$3=b("MercurySyncEventsProxy").getForFBID(d.props.viewer),d.state={connectionStatus:null,channelData:null,isConnected:!b("ChannelConnection").disconnected(),isOnline:b("ChatVisibility").isOnline(),notifiesUserMessages:b("ChatBehavior").notifiesUserMessages(),syncStateInvalid:!1,syncStateReconnecting:!1},d.$5=function(a,c){var e=b("ChannelConnection").CONNECTED;switch(a){case d.$3.getArbiterType(b("MercurySyncEventsProxy").Events.SHUTDOWN):e=b("ChannelConnection").SHUTDOWN;break;case d.$3.getArbiterType(b("MercurySyncEventsProxy").Events.RECONNECTING):e=b("ChannelConnection").RECONNECTING;break}d.setState({connectionStatus:e,channelData:c});d.$6()},d.$6=function(){d.setState({isConnected:!b("ChannelConnection").disconnected(),isOnline:b("ChatVisibility").isOnline(),notifiesUserMessages:b("ChatBehavior").notifiesUserMessages()})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$4=function(){var a=this;this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("Arbiter").subscribe([this.$3.getArbiterType(b("MercurySyncEventsProxy").Events.CONNECTED),this.$3.getArbiterType(b("MercurySyncEventsProxy").Events.SHUTDOWN),this.$3.getArbiterType(b("MercurySyncEventsProxy").Events.RECONNECTING)],this.$5),b("ChannelConnection").subscribe([b("ChannelConnection").MUTE_WARNING,b("ChannelConnection").UNMUTE_WARNING],this.$6),b("PresencePrivacy").subscribe("privacy-user-presence-changed",this.$6),b("ChatBehavior").subscribe(b("ChatBehavior").ON_CHANGED,this.$6),b("Arbiter").subscribe(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE,function(){h.log("invalid state fatal","{}"),a.setState({syncStateInvalid:!0,syncStateReconnecting:!1})}),b("Arbiter").subscribe(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY,function(){h.log("retry from invalid state","{}"),a.$7()}),b("Arbiter").subscribe(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER,function(){h.log("recover from invalid state","{}"),a.$8()}),b("Arbiter").subscribe("messenger-mqtt-drop-down-to-channel",function(){a.$1.release(),a.$4()}))};d.componentDidMount=function(){this.$4()};d.componentDidUpdate=function(){this.$2&&(b("clearTimeout")(this.$2),this.$2=null)};d.componentWillUnmount=function(){this.$1&&this.$1.release(),b("clearTimeout")(this.$2)};d.render=function(){var a=b("MessengerEnvironment").messengerui,c,d;!this.state.isOnline&&!a?(c="offline",d=this.$9()):this.$10()?(c="error",d=this.$11(a)):!this.state.notifiesUserMessages&&!a&&(c="notice",d=this.$12());(this.state.connectionStatus===b("ChannelConnection").RECONNECTING&&this.state.channelData<1e3||this.state.syncStateReconnecting)&&(c=b("joinClasses")(c,"reconnecting"));return c==="offline"&&this.$13()?null:b("React").createElement("div",{className:b("joinClasses")(this.props.className,c)},a?null:b("React").createElement("div",{className:"img"}),b("React").createElement("div",{className:"message"},d))};d.$13=function(){return b("gkx")("697231")&&!this.props.isSidebar};d.$10=function(){var a=this.state.connectionStatus;if(b("MessengerMQTTGating").isEnabled())return a&&(a===b("ChannelConnection").SHUTDOWN||a===b("ChannelConnection").RECONNECTING&&this.state.channelData!==void 0)||this.state.syncStateInvalid||this.state.syncStateReconnecting;else return!this.state.isConnected||this.state.syncStateInvalid||this.state.syncStateReconnecting};d.$11=function(a){__p&&__p();var c=this;if(this.state.connectionStatus===b("ChannelConnection").SHUTDOWN||this.state.syncStateInvalid)return b("React").createElement(b("ChatSidebarSheetChatShutdownMsg.react"),{hint:this.state.syncStateInvalid?void 0:this.state.channelData,isMessenger:a});else if(this.state.connectionStatus===b("ChannelConnection").RECONNECTING||this.state.syncStateReconnecting){var d=this.state.channelData;if(d===void 0&&!this.state.syncStateReconnecting)return null;d=this.state.syncStateReconnecting?1:d;d>1e3&&(this.$2=b("setTimeoutAcrossTransitions")(this.$5.bind(this,this.$3.getArbiterType(b("MercurySyncEventsProxy").Events.RECONNECTING),d-1e3),1e3));return b("React").createElement(b("ChatSidebarSheetChatReconnectMsg.react"),{isMessenger:a,msecs:d,onManuallyConnectClick:function(){c.state.syncStateReconnecting||b("ChannelConnection").reconnect()}})}return null};d.$9=function(){var a=this;return b("React").createElement(b("ChatSidebarSheetChatOffline.react"),{onGoOnlineClick:function(c){a.$14(),h.log("sidebar_go_online"),b("ChatVisibility").goOnline()}})};d.$14=function(){b("Bootloader").loadModules(["FunnelLogger"],function(a){a.startFunnel("WWW_PRESENCE_FUNNEL"),a.appendActionWithTag("WWW_PRESENCE_FUNNEL","sidebar_turn_on_chat",b("PresencePrivacy").getOnlinePolicyStr()),a.endFunnel("WWW_PRESENCE_FUNNEL")},"ChatSidebarSheet.react")};d.$12=function(){return b("React").createElement("div",null,g._("Alerts are off while you use another client to chat."))};d.$7=function(){this.setState({syncStateReconnecting:!0})};d.$8=function(){this.setState({syncStateInvalid:!1,syncStateReconnecting:!1})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("ChatSidebarSheetReact.bs",["ReasonReact.bs","ChatSidebarSheet.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("ChatSidebarSheet.react"),{className:a,viewer:c},d)}f.make=a}),null);
__d("MessageRequestLogger.bs",["MessengerMessageRequestsTypedLogger"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){new(b("MessengerMessageRequestsTypedLogger"))().setSurface("inbox").setFolderType(d).setAction("message_requests_thread_impression").addToExtraData("threads",a).setThreadKeyList(c).log();return 0}f.logItemImpression=a}),null);
__d("MessengerAddIconSVGReact.re",["bs_curry","MessengerAddIconSVGReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){a=b("ReasonReact.bs").wrapReasonForJs(b("MessengerAddIconSVGReact.bs").component,function(a){return b("bs_curry")._3(b("MessengerAddIconSVGReact.bs").make,a.className,a.customColor,a.children)});f.component=a;f["default"]=a}),null);
__d("MessengerGraphQLSearchTypeaheadReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerGraphQLSearchTypeahead.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){return b("ReasonReact.bs").wrapJsForReason(b("MessengerGraphQLSearchTypeahead.react"),{className:a,enableMessageSearch:c,excludeGroups:d,excludePages:e,hasHoverState:f,hideClearButton:b("bs_js_null_undefined").fromOption(g),hideResults:b("bs_js_null_undefined").fromOption(h),isFocused:b("bs_js_null_undefined").fromOption(i),onBlur:j,onChange:k,onClear:l,onFocus:m,onScrollIntoView:n,onSelect:o,placeholder:p,queryString:b("bs_js_null_undefined").fromOption(q),shouldQueryInternalBot:r,shouldQueryVCEndpoint:s,typeaheadViewClassName:t,viewer:u,rowComponent:b("bs_js_null_undefined").fromOption(v),searchInputPortalRef:b("bs_js_null_undefined").fromOption(w)},x)}f.make=a}),null);
__d("MessengerMessageDotsIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"32px",width:"32px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"message-dots",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("polygon",{id:"Fill-2",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-11",d:"M24,15.5044817 C22.8955,15.5044817 22,16.4004043 22,17.5054256 C22,18.6104468 22.8955,19.5063694 24,19.5063694 C25.1045,19.5063694 26,18.6104468 26,17.5054256 C26,16.4004043 25.1045,15.5044817 24,15.5044817 Z M18,15.5044817 C16.8955,15.5044817 16,16.4004043 16,17.5054256 C16,18.6104468 16.8955,19.5063694 18,19.5063694 C19.1045,19.5063694 20,18.6104468 20,17.5054256 C20,16.4004043 19.1045,15.5044817 18,15.5044817 Z M12,15.5044817 C10.8955,15.5044817 10,16.4004043 10,17.5054256 C10,18.6104468 10.8955,19.5063694 12,19.5063694 C13.1045,19.5063694 14,18.6104468 14,17.5054256 C14,16.4004043 13.1045,15.5044817 12,15.5044817 Z M29.9995,17.4579031 C29.9985,24.1155436 24.974,28.9893426 18,28.9893426 C16.838,28.9893426 15.731,28.8857938 14.692,28.6321741 C13.829,28.4215748 12.9275,28.4430849 12.0855,28.7302204 L8.084,29.9587999 C7.439,30.1784035 6.814,29.5521081 7.032,28.8827924 L7.827,26.2530519 C8.124,25.3411217 8.0085,24.3406498 7.5095,23.5257654 C6.4525,21.8004516 6.001,19.7394794 6.0005,17.4579031 L6.0005,17.4569027 L6.0005,17.4559022 C6.0015,10.7992622 11.026,6.0035 18,6.0035 C24.974,6.0035 29.9985,10.7992622 29.9995,17.4559022 L29.9995,17.4569027 L29.9995,17.4579031 Z",fill:"#000000"})));f.icon=a}),null);
__d("MessengerMessageRequestsInfoReact.bs",["fbt","CurrentUser","ReasonReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerMessageRequestsInfoReact");function i(){if(b("CurrentUser").isWorkUser())return g._("Open a request to see who wants to chat. Your information and actions will remain private until you accept the request. Verify the identity of others before you share information.");else return g._("Open a request to get info about who's messaging you. They won't know you've seen it until you reply.")}function a(){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return i(0)},h[9],h[10],h[11],h[12]]}f.component=h;f.getText=i;f.make=a}),null);
__d("MessengerThreadListGridWrapperReact.bs",["ReasonReact.bs","MessengerThreadListGridWrapper.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadListGridWrapper.react"),{label:a},c)}f.make=a}),null);
__d("MessengerThreadlistLinkRowReact.bs",["cx","fbt","React","Link.react","MessengerDotComAndInboxM4Check.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerDotComAndInboxM4Check.bs").yes?"_2ogt _6yb-":"_2ogt";function a(a){return b("React").createElement("li",{className:"_5l-3 _1ht1 _2ogr"},b("React").createElement("div",{className:"_2ogs"},b("React").createElement(b("Link.react"),{className:i,onClick:a,children:h._("See filtered messages")})))}f.linkClasses=i;f.make=a}),null);
__d("MessengerThreadlistMessageRequestsRowReact.bs",["cx","ix","fbt","Keys","Image.bs","React","bs_caml_array","MercuryIDs","ReasonReact.bs","bs_js_primitive","MessagingTag","MessengerActions","MNAdsLogMessageUtils","MessengerParticipants.bs","LinkWithHiddenURLBarReact.bs","MessengerDotComAndInboxM4Check.bs","MessengerMessageDotsIconSVGM4React.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=h("86936");function k(a){a.preventDefault();if(a.charCode===b("Keys").RETURN){b("MessengerActions").changeFolder(b("MessagingTag").PENDING);return 0}else return 0}function l(a){a.preventDefault();b("MessengerActions").changeFolder(b("MessagingTag").PENDING);return 0}function a(a){__p&&__p();var c=a.pendingFolderUnseenCount,d=a.newMessageRequestThreads,e=a.viewer,f=d.filter(function(a){return!(a==null)});a=function(){__p&&__p();var a=f.length===1;a=i._({"someone":"From someone you may know","people":"From people you may know"},[i._enum(a?"someone":"people",{someone:"someone",people:"people"})]);var c=f.length;if(c===0)return a;else{var d=b("bs_caml_array").caml_array_get(f,0),g=b("MercuryIDs").getParticipantIDFromUserID(e),h=d.participants.find(function(a){return a!==g});if(h!==void 0){h=b("MessengerParticipants.bs").getNow(h);if(h==null)return a;else{b("MNAdsLogMessageUtils").logAdsThreadListImpression(d);d=c===1;if(d)return i._("From {name}",[i._param("name",h.name)]);else return i._("From {name} and {count} more",[i._param("name",h.name),i._param("count",String(c-1|0))])}}else return a}};d=f.length===0;if(d)return null;else{d=(c==null?void 0:b("bs_js_primitive").some(c))!==0&&!b("MessengerDotComAndInboxM4Check.bs").yes;return b("React").createElement("li",{className:"_5l-3 _1ht1"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zk9":"")+" _2kt",role:"row",tabIndex:-1,onKeyPress:k},b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(void 0,"_1ht5 _2il3"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zka":"")+" _5l-3",void 0,void 0,void 0,void 0,void 0,void 0,void 0,l,void 0,void 0,void 0,void 0,void 0,-1,void 0,void 0,[b("React").createElement("div",{className:"_6zkb"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7t1l":"")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zkc":"")},b("React").createElement("div",{className:"_5l-3 _1qt3"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6-5k":"")+" _5nxe"},b("MessengerDotComAndInboxM4Check.bs").yes?b("React").createElement("div",{className:"_7jot",style:{height:String(50)+"px",width:String(50)+"px"}},b("MessengerMessageDotsIconSVGM4React.bs").icon):b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,"",void 0,void 0,j,50,void 0,50,void 0,[])),d?b("React").createElement("span",{className:"_3xse"}):null),b("React").createElement("div",{className:"_1qt4"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7vuo":"")+" _5l-m"},b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1ht6 _5nxa"+((c==null?void 0:b("bs_js_primitive").some(c))!==0?" _3xsd":"")},i._({"*":"New message requests","_1":"New message request"},[i._plural(f.length)]))),b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1htf"+((c==null?void 0:b("bs_js_primitive").some(c))!==0?" _3xsd":"")},a(0)))))])),b("MessengerDotComAndInboxM4Check.bs").yes?b("React").createElement("div",{role:"gridcell"},b("React").createElement("div",{className:"_2j6"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zkg":"")+" _5l-3"},b("React").createElement("div",{className:"_7jp2"}))):null)}}c=50;d=a;f.imageSize=c;f.src=j;f.handleKeyPress=k;f.handleClickRow=l;f.make=d}),null);
__d("MessengerThreadlistNewMessageRowReact.bs",["ReasonReact.bs","MessengerThreadlistNewMessageRow.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadlistNewMessageRow.react"),{isActive:a,onClose:c},d)}f.make=a}),null);
__d("MessengerSearchFunnelState",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(){this.$1}var b=a.prototype;b.setSessionID=function(a){this.$1=a};b.getSessionID=function(){return this.$1};return a}();e.exports=a}),null);
__d("MessengerThreadlistRowContainerReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MessengerThreadlistRowContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m,n,o){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadlistRowContainer.react"),{folder:b("bs_js_null_undefined").fromOption(a),blockedIds:n,isActive:b("Utils.bs").optionBoolToBool(c),isFocused:b("Utils.bs").optionBoolToBool(d),isActionsFocused:b("Utils.bs").optionBoolToBool(f),isTabbable:b("Utils.bs").optionBoolToBool(h),isDenseRow:b("Utils.bs").optionBoolToBool(e),onOverrideSelect:b("bs_js_null_undefined").fromOption(g),onFocus:i,onScrollIntoView:j,thread:k,viewer:l,readReceipts:m},o)}f.make=a}),null);
__d("WorkGalahadAppTabChatsAction.react",["ix","fbt","Image.react","Link.react","MessengerURIConstants","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";function a(){return b("React").createElement(b("Link.react"),{"aria-label":h._("Create New Chat"),href:b("MessengerURIConstants").FACEBOOK_PREFIX+b("MessengerURIConstants").COMPOSE_SUBPATH},b("React").createElement(b("Image.react"),{src:g("470511")}))}e.exports=a}),null);
__d("SavedDashboardSectionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ALL:"ALL",ARCHIVED:"ARCHIVED",BOOKS:"BOOKS",EVENTS:"EVENTS",LINKS:"LINKS",MOVIES:"MOVIES",MUSIC:"MUSIC",PLACES:"PLACES",TV_SHOWS:"TV_SHOWS",VIDEOS:"VIDEOS",PAGES:"PAGES",PHOTOS:"PHOTOS",PRODUCTS:"PRODUCTS",PROFILES:"PROFILES",MESSAGES:"MESSAGES",FUNDRAISERS:"FUNDRAISERS",JOBS:"JOBS",MEDIA:"MEDIA",POSTS:"POSTS",EXTERNAL_URLS:"EXTERNAL_URLS",LISTS:"LISTS",GROUP_POSTS:"GROUP_POSTS",OFFERS:"OFFERS",ASSET3DS:"ASSET3DS",MARKETPLACE_NEARBUY_DEALS:"MARKETPLACE_NEARBUY_DEALS",GAMES:"GAMES",APPS:"APPS"})}),null);
__d("WorkGalahadChatsThreadlistMenu",["fbt","requireDeferred","MercuryFilters.bs","MessagingTag","MessengerDialogs.bs","React","SavedDashboardSectionType","WorkGalahadChatChannelActions","WorkGalahadDropdownMenuItem.react","XSavedForLaterDashboardController","gkx"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("requireDeferred")("MessengerSettingsDialogWrapper.bs");function i(){b("WorkGalahadChatChannelActions").changeFolder(b("MessagingTag").INBOX),b("WorkGalahadChatChannelActions").changeFilter(b("MercuryFilters.bs").all)}function j(){b("WorkGalahadChatChannelActions").changeFolder(b("MessagingTag").INBOX),b("WorkGalahadChatChannelActions").changeFilter(b("MercuryFilters.bs").unread)}function k(){b("WorkGalahadChatChannelActions").changeFolder(b("MessagingTag").ACTION_ARCHIVED),b("WorkGalahadChatChannelActions").changeFilter(b("MercuryFilters.bs").all)}function l(){b("WorkGalahadChatChannelActions").changeFolder(b("MessagingTag").OTHER),b("WorkGalahadChatChannelActions").changeFilter(b("MercuryFilters.bs").all)}function m(){b("WorkGalahadChatChannelActions").changeFolder(b("MessagingTag").PENDING),b("WorkGalahadChatChannelActions").changeFilter(b("MercuryFilters.bs").all)}function n(a){h.onReady(function(a){var c=a.make;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(c,{viewer:!0})})})}function a(a,c,d){var e=b("gkx")("762398"),f=b("gkx")("843916"),h=[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"inbox",id:"inbox",icons:a===b("MercuryFilters.bs").all&&c===b("MessagingTag").INBOX?"checkmark_selected":"checkmark_unselected",label:g._("Inbox"),onClick:i,hideOnClick:!0}),b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"unread",id:"unread",icons:a===b("MercuryFilters.bs").unread&&c===b("MessagingTag").INBOX?"checkmark_selected":"checkmark_unselected",label:g._("Unread"),onClick:j,hideOnClick:!0}),b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"hidden",id:"hidden",icons:a===b("MercuryFilters.bs").all&&c===b("MessagingTag").ACTION_ARCHIVED?"checkmark_selected":"checkmark_unselected",label:e?g._("Hidden"):g._("Archived"),onClick:k,hideOnClick:!0})];e&&h.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"permanently-hidden",id:"permanentlyHidden",icons:a===b("MercuryFilters.bs").all&&c===b("MessagingTag").OTHER?"checkmark_selected":"checkmark_unselected",label:g._("Permanently hidden"),onClick:l,hideOnClick:!0}));h.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"message-requests",id:"messageRequests",icons:a===b("MercuryFilters.bs").all&&c===b("MessagingTag").PENDING?"checkmark_selected":"checkmark_unselected",label:g._("Message requests"),onClick:m,hideOnClick:!0}));h.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react").Separator,{key:"workchat-settings-separator"}));f&&h.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"saved-message",id:"savedMessages",icons:"bookmark",label:g._("Saved messages"),href:b("XSavedForLaterDashboardController").getURIBuilder().setEnum("dashboard_section",b("SavedDashboardSectionType").MESSAGES).getURI(),hideOnClick:!0}));h.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"settings",id:"settings",icons:"settings",label:g._("Settings"),onClick:function(){return n(d)},hideOnClick:!0}));return h}e.exports={getMenuItems:a}}),null);
__d("WorkGalahadChatsThreadlistHeader.react",["fbt","MercuryFilters.bs","MessagingTag","React","WorkGalahadAppTabChatsAction.react","WorkGalahadChatsThreadlistMenu","WorkGalahadNavHeader.react","gkx"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a,c){a=a===b("MercuryFilters.bs").unread;switch(c){case b("MessagingTag").INBOX:return a?g._("Unread"):g._("Chats");case b("MessagingTag").ACTION_ARCHIVED:return b("gkx")("762398")?g._("Hidden"):g._("Archived");case b("MessagingTag").PENDING:return g._("Message requests");case b("MessagingTag").OTHER:return g._("Permanently hidden")}return null}function a(a){var c=a.filter,d=a.folder;a=a.viewer;return b("React").createElement(b("WorkGalahadNavHeader.react"),{title:h(c,d),action:{items:b("WorkGalahadChatsThreadlistMenu").getMenuItems(c,d,a),extraAction:b("React").createElement(b("WorkGalahadAppTabChatsAction.react"),null)}})}e.exports=a}),null);
__d("WorkGalahadChatsThreadlistHeaderReact.bs",["ReasonReact.bs","WorkGalahadChatsThreadlistHeader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("WorkGalahadChatsThreadlistHeader.react"),{filter:c,folder:a,viewer:d},e)}f.make=a}),null);
__d("WorkGalahadNewMessageRow.react",["MessengerThreadlistNewMessageRow.react","React","WorkGalahadMessageRow.react"],(function(a,b,c,d,e,f){function a(a){return b("React").createElement(b("WorkGalahadMessageRow.react"),{isActive:a.isActive},b("React").createElement(b("MessengerThreadlistNewMessageRow.react"),a))}e.exports=a}),null);
__d("WorkGalahadNewMessageRowReact.bs",["ReasonReact.bs","WorkGalahadNewMessageRow.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("WorkGalahadNewMessageRow.react"),{isActive:a,onClose:c},d)}f.make=a}),null);
__d("WorkchatThreadListInviteRow.react",["cssVar","cx","fbt","Link.react","MercuryConfig","MessengerAddIconSVGReact.re","React","WorkInviteSource","XWorkInviteCoworkersDialogController"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("MessengerAddIconSVGReact.re").component;function a(){if(!b("MercuryConfig").ShowInviteSurface)return null;var a=b("XWorkInviteCoworkersDialogController").getURIBuilder().setEnum("source",b("WorkInviteSource").WWW_CHAT_THREAD_LIST).getURI();return b("React").createElement("li",{className:"_5l-3 _1q5x",role:"row",tabIndex:0},b("React").createElement("div",{className:"_5l-3 _1q5y",id:"work_thread_list_invite_row",role:"gridcell",tabIndex:-1},b("React").createElement(b("Link.react"),{href:"#",ajaxify:a,rel:"dialog",className:"_1q5y _1q61 _5l-3",s:"true",role:"link",tabIndex:-1},b("React").createElement("div",{className:"_5l-3 _1q60"},b("React").createElement("div",{"aria-hidden":!0,className:"_1qt3 _5l-3"},b("React").createElement(j,{className:"_1q5z",customColor:"#0084ff"})),b("React").createElement("div",{className:"_1qt4 _5l-m"},b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1ht6"},i._("Invite Colleagues"))))))))}e.exports=a}),null);
__d("WorkchatThreadListInviteRowReact.bs",["ReasonReact.bs","WorkchatThreadListInviteRow.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("WorkchatThreadListInviteRow.react"),{},a)}f.make=a}),null);
__d("MessengerThreadlistReact.bs",["cx","csx","fbt","bs_array","bs_block","bs_curry","React","Parent","gkx","bs_belt_Set","ReactDOM","debounce","LinkReact.bs","UserAgent","bs_caml_array","MercuryIDs","bs_belt_Option","CurrentUser","ReasonReact.bs","bs_js_primitive","MessagingTag","MessengerView","ParticipantId.bs","bs_caml_primitive","MercuryFilters.bs","MessengerState.bs","MessengerConfig","MessengerActions","MercuryThreadInfo","KeyEventController","MessageRequestLogger.bs","SubscriptionsHandler","ChatSidebarSheetReact.bs","MessengerSpinnerReact.bs","MessengerGalahadGating.bs","QuickPerformanceLogger","MessengerTypeaheadUtils","MessengerComposerActions","MercuryTypeaheadConstants","MessengerSearchFunnelState","WorkChatThreadlistTabsReact.bs","WorkGalahadNewMessageRowReact.bs","MessengerDotComAndInboxM4Check.bs","MessengerNewMessagesNoticeReact.bs","MessengerThreadlistLinkRowReact.bs","MessengerFlexScrollableAreaReact.bs","WorkchatThreadListInviteRowReact.bs","MessengerMessageRequestsInfoReact.bs","MessengerThreadListGridWrapperReact.bs","MessengerGraphQLSearchTypeaheadReact.bs","MessengerSearchFunnelLoggerConstants","MessengerThreadlistRowContainerReact.bs","MessengerThreadlistNewMessageRowReact.bs","WorkGalahadChatsThreadlistHeaderReact.bs","MessengerThreadlistMessageRequestsRowReact.bs","MessengerUniversalSearchFunnelLoggerConstants","BootloadableMessengerUniversalSearchFunnelLogger.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,c,d){if(d!==void 0&&a.length>0&&c.length>0){a=b("bs_caml_array").caml_array_get(a,0);c=b("bs_caml_array").caml_array_get(c,0);if(a.unread_count>0&&a.thread_id!==b("bs_js_primitive").valFromOption(d)&&a!==c)return b("MercuryThreadInfo").isMuted(a);else return!1}else return!1}function k(a,c){var d=a.ctrlKey,e=a.metaKey,f=a.shiftKey,g=b("KeyEventController").filterEventTypes(a,c);c=b("KeyEventController").filterEventTargets(a,c);a=b("Parent").bySelector(a.target,"._150g");if(d||e||f||!(g&&c))return!1;else return(a==null?void 0:b("bs_js_primitive").some(a))===void 0}function l(a,c){__p&&__p();var d=a.ctrlKey,e=a.metaKey,f=b("UserAgent").isPlatform("Mac OS X"),g=b("UserAgent").isPlatform("iOS");c=b("KeyEventController").filterEventTypes(a,c);a=b("Parent").bySelector(a.target,"._150g");a=a==null?void 0:b("bs_js_primitive").some(a);if(d)if(e||f||g||!c)return!1;else return a===void 0;else if(e)if(f)if(g||!c)return!1;else return a===void 0;else if(g&&c)return a===void 0;else return!1;else return!1}a=b("UserAgent").isPlatform("Mac OS X")||b("UserAgent").isPlatform("iOS")?"Cmd":"Ctrl";var m="K",n=a+" + K";function o(a,c){c[1][6][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function p(a,c,d){var e=d.findIndex(function(c){if(a!==void 0)return c.thread_id===b("bs_js_primitive").valFromOption(a);else return!1});e=b("bs_caml_primitive").caml_int_min(b("bs_caml_primitive").caml_int_max(e+c|0,0),d.length-1|0);return b("bs_caml_array").caml_array_get(d,e).thread_id}function q(a,c){a.preventDefault();a=c[1][4][0];if(a!==void 0)return b("bs_js_primitive").valFromOption(a).focusInput();else return 0}function r(a,c){c[1][4][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function s(a,c){var d=c[1];setTimeout(function(){var c=d[6][0];if(c!==void 0){b("MessengerTypeaheadUtils").scrollEntryIntoView(a,b("bs_js_primitive").valFromOption(c));return 0}else return 0},0);return 0}function t(a){a.preventDefault();b("MessengerActions").changeFolder(b("MessagingTag").OTHER);return 0}function u(a){a.preventDefault();b("MessengerActions").changeFilter(b("MercuryFilters.bs").all);b("MessengerActions").changeFolder(b("MessagingTag").INBOX);return 0}function v(a,c,d,e){__p&&__p();var f=[];b("bs_array").iter(function(d){__p&&__p();d=c[d];if(d!==void 0){var e=d[1];d=d[0];if(d==null)return 0;else{d=b("ReactDOM").findDOMNode(d).getBoundingClientRect();if(d.top>a.top-10&&d.bottom<a.bottom+10){f.push({threadID:e.thread_id,unread:e.unread_count>0});return 0}else return 0}}else return 0},Object.keys(c));if(f.length){var g=b("bs_array").map(function(a){return b("MercuryIDs").getThreadKeyfromThreadIDUserID(a.threadID,e)},f);g=g.join(",");return b("MessageRequestLogger.bs").logItemImpression(f,g,d)}else return 0}var w=b("debounce")(function(a){__p&&__p();var c=a[1];a=a[0];var d=a[6][0];if(d!==void 0){d=b("bs_js_primitive").valFromOption(d).getArea();if(d==null)return 0;else{d=d.getElement().getBoundingClientRect();v(d,a[8],b("MessagingTag").PENDING,c);return v(d,a[9],b("MessagingTag").OTHER,c)}}else return 0},500);function x(a,c,d){__p&&__p();d=d[1];if(a.folder===b("MessagingTag").PENDING){d[8][a.thread_id]=[c,a];return 0}else if(a.folder===b("MessagingTag").OTHER){d[9][a.thread_id]=[c,a];return 0}else return 0}function y(a,c){return b("bs_curry")._1(a[3],b("bs_block").__(2,[c]))}function z(a,c,d,e,f,g,h,i,j){__p&&__p();var k=d[1];a=a!==void 0?b("bs_js_primitive").valFromOption(a)===j.thread_id:!1;var l=k[0];l=l!==void 0;var m=k[0];m=m!==void 0?b("bs_js_primitive").valFromOption(m)===j.thread_id:!1;l=a?l&&!m?!1:!0:m?!0:!1;var n=j.folder===b("MessagingTag").PENDING||j.folder===b("MessagingTag").OTHER;return b("ReasonReact.bs").element(j.thread_id,n?b("bs_curry")._1(d[0],function(a,b){return x(j,a,b)}):function(){return 0},b("MessengerThreadlistRowContainerReact.bs").make(e,a,m,h,k[2],i,l,b("bs_curry")._1(d[1][19],[d,y]),b("bs_curry")._1(d[1][18],[d,s]),j,c,g,f,[]))}function A(a,c){__p&&__p();c=c[1];var d=a[2],e=a[1],f=a[0],g=e==null?b("MessengerSearchFunnelLoggerConstants").OTHER:e===b("MercuryTypeaheadConstants").FRIEND_TYPE?b("MessengerSearchFunnelLoggerConstants").USER_CONTACT:e===b("MercuryTypeaheadConstants").NON_FRIEND_TYPE?b("MessengerSearchFunnelLoggerConstants").USER_NON_CONTACT:e===b("MercuryTypeaheadConstants").FB4C_TYPE?b("MessengerSearchFunnelLoggerConstants").COWORKER:e===b("MercuryTypeaheadConstants").GAME_TYPE?b("MessengerSearchFunnelLoggerConstants").GAME:e===b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE||e===b("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE||e===b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE||e===b("MercuryTypeaheadConstants").PAGE_TYPE?b("MessengerSearchFunnelLoggerConstants").PAGE:e===b("MercuryTypeaheadConstants").THREAD_TYPE?b("MessengerSearchFunnelLoggerConstants").GROUP:e===b("MercuryTypeaheadConstants").MESSAGE_TYPE?b("MessengerSearchFunnelLoggerConstants").MESSAGE:b("MessengerSearchFunnelLoggerConstants").OTHER;if(d!==void 0){a=d;b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),f,b("bs_curry").__1(a),null)}else g===b("MessengerSearchFunnelLoggerConstants").MESSAGE?b("MessengerActions").searchForMessagesInAThread(f,c[3]):b("MessengerActions").selectThread(f,e);d=c[3];var h=d===""?b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.NULL_STATE:b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD,i=c[3],j=b("BootloadableMessengerUniversalSearchFunnelLogger.bs").FunnelLogger[3];return b("bs_curry")._1(b("BootloadableMessengerUniversalSearchFunnelLogger.bs").Loadable[0],function(a){return j(i,f,g,h,a)})}var B=b("MessengerDotComAndInboxM4Check.bs").yes?"_3bll _6ybw":"_3bll",C=b("ReasonReact.bs").reducerComponent("MessengerThreadlistReact");function D(a,c,d,e,f,g,h,v,x,y,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,aa){__p&&__p();var W=S!==void 0?S:!0,X=function(d,e,f){__p&&__p();var g=f[1],a=g[10],c=g[11];d=typeof d==="number"?d!==0?a.length-1|0:(-a.length|0)-1|0:d[0];var h=e.altKey,i=b("Parent").bySelector(e.target,"._4rv3"),j=g[0],k=b("Parent").bySelector(e.target,"._1ht1");if(h&&!(i==null)){h=g[16];if(h)if(d===1&&a.length>0){b("MessengerActions").selectThread(b("bs_caml_array").caml_array_get(a,0).thread_id,null);return 0}else return 0;else{i=function(d,c){return c.findIndex(function(c){return c===b("bs_caml_array").caml_array_get(a,d)})};h=function(c,a,d){c=c;var e=!1;while(!e)b("bs_caml_array").caml_array_get(a,c).is_pinned===!1?e=!0:c=c+d|0;return c};var l=a.findIndex(function(c){var a=g[14];if(a!==void 0)return b("bs_js_primitive").valFromOption(a)===c.thread_id;else return!1});if(l!==-1){var m=c.length>0;if(m){m=b("bs_caml_array").caml_array_get(c,c.length-1|0)===b("bs_caml_array").caml_array_get(a,l);m=m?!0:!1}else m=!1;var n=l===h(0,a,1);n=n?!0:!1;var o=b("bs_caml_array").caml_array_get(a,l).is_pinned,p,q=0;o?m?n?q=2:p=c.length===a.length?b("bs_caml_array").caml_array_get(a,l):d<0&&c.length>1?b("bs_caml_array").caml_array_get(c,c.length-2|0):c.length===1&&d<0?b("bs_caml_array").caml_array_get(a,l):b("bs_caml_array").caml_array_get(a,h(0,a,d)):n?q=2:p=i(l,c)===0&&d<0?b("bs_caml_array").caml_array_get(a,l):b("bs_caml_array").caml_array_get(c,i(l,c)+d|0):m?q=2:p=n?c.length>0&&d<0?b("bs_caml_array").caml_array_get(c,c.length-1|0):b("bs_caml_array").caml_array_get(a,h(l+d|0,a,d)):l===(a.length-1|0)&&d>0?b("bs_caml_array").caml_array_get(a,l):b("bs_caml_array").caml_array_get(a,l+d|0).is_pinned===!0?b("bs_caml_array").caml_array_get(a,h(l+d|0,a,d)):b("bs_caml_array").caml_array_get(a,l+d|0);q===2&&(p=b("bs_caml_array").caml_array_get(a,l+d|0));b("MessengerActions").selectThread(p.thread_id);g[12]&&l===0&&d===-1&&b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);if(l===(a.length-1|0))return b("bs_curry")._1(g[15],0);else return 0}else return 0}}else o=1;if(o===1)if(j!==void 0&&!(k==null)){e.preventDefault();return b("bs_curry")._1(f[3],b("bs_block").__(3,[d]))}else return 0},Y=function(c,a){c.stopPropagation();b("MessengerComposerActions").exitComposeStateAbandonSearch();if(x){a=I.find(function(a){return a.unread_count===0});b("MessengerActions").selectThread(a!==void 0?a.thread_id:null,null);return 0}else return 0},Z=function(c,a){c.preventDefault();return b("bs_curry")._1(E,0)},ba=function(a,c,d,e){__p&&__p();var f=0;if(a!==void 0&&a)return null;else a=2;if(a===2)if(c!==void 0&&c)return b("React").createElement("div",{className:"_19hf"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,void 0,void 0,[])));else f=1;if(f===1){a=e[6][0];if(a!==void 0){b("bs_js_primitive").valFromOption(a).isScrolledToBottom()&&b("bs_curry")._1(E,0);return null}else return b("React").createElement("div",{className:"_19hf"},b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"#",void 0,b("bs_curry")._1(d[0],Z),void 0,void 0,void 0,void 0,void 0,-1,void 0,void 0,[i._("Show older")])))}},$=Q!==void 0?Q:!1,ca=function(d){__p&&__p();b("bs_array").stable_sort(function(a,b){a=a.thread_pin_timestamp;b=b.thread_pin_timestamp;if(a==null)if(b==null)return 0;else return-1;else if(b==null)return 1;else return a-b|0},J);if(J.length<1)return null;else return b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadListGridWrapperReact.bs").make(i._("Pinned conversations"),[b("bs_array").map(function(b){return z(a,K,d,f,c,L,$,P,b)},J)]))},da=function(d){__p&&__p();if(I.length===0&&v===!1){if(f===b("MessagingTag").INBOX){var g=e===b("MercuryFilters.bs").unread;g=g?i._("No unread messages found."):i._("No messages found.")}else g=f===b("MessagingTag").PENDING?i._("No message requests found."):i._("No filtered messages found.");var h=f!==b("MessagingTag").INBOX||e!==b("MercuryFilters.bs").all;h=h?b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,u,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[i._("Return to chats")])):null;return b("React").createElement("div",{className:"_3blk"},g,b("React").createElement("div",{className:B},h))}else return b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadListGridWrapperReact.bs").make(i._("Conversation list"),[b("bs_array").map(function(e){if(e.is_pinned===!0&&(b("gkx")("678624")||b("MessengerConfig").MPT>0))return null;else return z(a,K,d,f,c,L,$,P,e)},I)]))};return[C[0],C[1],C[2],function(c){__p&&__p();var d=c[6][0];d=d!==void 0?b("bs_js_primitive").valFromOption(d).isScrolledToTop():!1;var e=j(I,c[10],a),h=0,i=0;if(d||!e)i=2;else if(G!==void 0){e=G;var k=e.length===0;return[c[0],c[1],c[2],k?e:c[3],c[4],!0,c[6],c[7],c[8],c[9],I,J,g,c[13],a,E,x,f,c[18],c[19]]}else h=1;if(i===2)if(G!==void 0){k=G;e=k.length===0;return[c[0],c[1],c[2],e?k:c[3],c[4],c[5]&&!d,c[6],c[7],c[8],c[9],I,J,g,c[13],a,E,x,f,c[18],c[19]]}else h=1;if(h===1)return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],I,J,g,c[13],a,E,x,f,c[18],c[19]]},function(a){__p&&__p();var c=function(c,d){var e=b("Parent").bySelector(d.target,"._1ht1");if(e==null)return 0;else{d.preventDefault();return b("bs_curry")._1(a[3],b("bs_block").__(1,[c]))}},d=new(b("SubscriptionsHandler"))(),e=[-1],f=[1],g=[-5],h=[5];d.addSubscriptions(b("KeyEventController").registerKey("UP",b("bs_curry")._1(a[0],function(a,b){return X(e,a,b)}),k),b("KeyEventController").registerKey("DOWN",b("bs_curry")._1(a[0],function(a,b){return X(f,a,b)}),k),b("KeyEventController").registerKey("PAGE_UP",b("bs_curry")._1(a[0],function(a,b){return X(g,a,b)})),b("KeyEventController").registerKey("PAGE_DOWN",b("bs_curry")._1(a[0],function(a,b){return X(h,a,b)})),b("KeyEventController").registerKey("HOME",b("bs_curry")._1(a[0],function(a,b){return X(0,a,b)})),b("KeyEventController").registerKey("END",b("bs_curry")._1(a[0],function(a,b){return X(1,a,b)})),b("KeyEventController").registerKey("LEFT",function(a){return c(!1,a)}),b("KeyEventController").registerKey("RIGHT",function(a){return c(!0,a)}),b("KeyEventController").registerKey(m,b("bs_curry")._1(a[0],q),l));b("bs_curry")._1(a[4],function(){d.release();return 0});b("QuickPerformanceLogger").markerStartFromNavStart(25296901);b("QuickPerformanceLogger").markerEnd(25296901,"SUCCESS");return w([a[1],K])},function(a){__p&&__p();var c=a[1];a=a[0];c[1][17]!==f&&w([c[1],K]);var d=c[1][1]!==a[1][1];a=g&&!a[1][12];c=c[1][6][0];if(d&&a&&c!==void 0){b("bs_js_primitive").valFromOption(c).scrollToTop();return 0}else return 0},C[6],C[7],function(a){__p&&__p();var c=a[1],j=c[5]&&!c[1],k=b("MessengerGalahadGating.bs").isGalahadUIEnabled(0),l=!c[1]&&b("MessengerConfig").MPT>0&&J.length>0&&f===b("MessagingTag").INBOX,m=b("CurrentUser").isWorkUser()&&!c[1]&&b("gkx")("678624")&&J.length>0&&e===b("MercuryFilters.bs").all&&f===b("MessagingTag").INBOX,p=i._("Conversations"),q=G!==void 0,u=M!==void 0?M:!1,w=N!==void 0?N:!1,z=O!==void 0?O:!1,B;if(U!==void 0)B=U;else{var C=b("CurrentUser").isWorkUser();if(C){C=c[1];B=i._("Search chats {keyboard shortcut help}",[i._param("keyboard shortcut help",C?"":" ("+(n+")"))])}else B=i._("Search Messenger")}var E;C=0;R!==void 0&&R?E=null:C=1;if(C===1){C=f===b("MessagingTag").INBOX;E=C?b("ReasonReact.bs").element(void 0,b("bs_curry")._1(a[0],r),b("MessengerGraphQLSearchTypeaheadReact.bs").make("_5iwm"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6-_b":"")+(c[1]||c[3].length>0?" _5iwn":"")+" _150g",W,!1,!1,!1,c[3]===""&&!q,q,c[1],function(){if(q)return b("bs_curry")._1(a[3],1);else{var d=c[3]==="",e=d?b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.NULL_STATE:b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD,f=b("MessengerUniversalSearchFunnelLoggerConstants").END_ACTIONS.ABANDON,g=b("MessengerUniversalSearchFunnelLoggerConstants").END_REASONS.END_ACTION,h=b("BootloadableMessengerUniversalSearchFunnelLogger.bs").FunnelLogger[1];b("bs_curry")._1(b("BootloadableMessengerUniversalSearchFunnelLogger.bs").Loadable[0],function(a){return h(g,f,"",e,a)});return b("bs_curry")._1(a[3],2)}},function(c){c=c.target.value;return b("bs_curry")._1(a[3],b("bs_block").__(0,[c]))},function(){d!==void 0&&b("bs_curry")._1(d,0);return b("bs_curry")._1(a[3],3)},function(){if(q)return b("bs_curry")._1(a[3],4);else return b("bs_curry")._1(a[3],0)},b("bs_curry")._1(a[1][18],[a,s]),function(e,f){var d=c[3]==="",g=d?b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.NULL_STATE:b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD;b("bs_curry")._2(a[0],A,[e,f,P]);var h=b("MessengerUniversalSearchFunnelLoggerConstants").END_ACTIONS.RESULT_SELECTED,i=b("MessengerUniversalSearchFunnelLoggerConstants").END_REASONS.END_ACTION,j=b("BootloadableMessengerUniversalSearchFunnelLogger.bs").FunnelLogger[1];return b("bs_curry")._1(b("BootloadableMessengerUniversalSearchFunnelLogger.bs").Loadable[0],function(a){return j(i,h,"",g,a)})},B,c[3],!0,!0,"_11_d"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _705p":""),K,T,V,[])):k?b("React").createElement("div",{className:"_7cyu"}):null}C=b("CurrentUser").isWorkUser()&&!c[1];B=k&&!c[1]&&!u;u=m||l;if(u){m=l||w;u=b("React").createElement("div",void 0,ca(a),m?null:b("React").createElement("div",{className:"_1s38"}))}else u=null;l=f===b("MessagingTag").PENDING;w=f===b("MessagingTag").INBOX&&D.length>0;m=f===b("MessagingTag").PENDING&&!(b("CurrentUser").isWorkUser()&&b("gkx")("762398"));var I=b("CurrentUser").isWorkUser()&&!k&&b("gkx")("678606");return b("React").createElement("div",{className:"_2xhi"+(b("MessengerConfig").MPT>0?" _6q63":"")},b("ReasonReact.bs").element(void 0,void 0,b("ChatSidebarSheetReact.bs").make("_p0g",K,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerNewMessagesNoticeReact.bs").make(j,function(c){c.preventDefault();return b("bs_curry")._1(a[3],6)},void 0,[])),b("ReasonReact.bs").element(void 0,b("bs_curry")._1(a[0],o),b("MessengerFlexScrollableAreaReact.bs").make(function(){return b("bs_curry")._1(a[3],5)},"_3_e8"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7slg":"")+(b("MessengerDotComAndInboxM4Check.bs").yes&&c[7]?" _7slh":""),y,z,[E,C?b("ReasonReact.bs").element(void 0,void 0,b("WorkchatThreadListInviteRowReact.bs").make([])):null,B?b("ReasonReact.bs").element(void 0,void 0,b("WorkGalahadChatsThreadlistHeaderReact.bs").make(f,e,K,[])):null,u,l?b("React").createElement("div",{className:"_5u15"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerMessageRequestsInfoReact.bs").make([]))):null,b("React").createElement("div",{"aria-label":p,className:c[1]&&!q?"accessible_elem":"",role:"navigation"},w?b("React").createElement(b("MessengerThreadlistMessageRequestsRowReact.bs").make,{pendingFolderUnseenCount:F,newMessageRequestThreads:D,viewer:K}):null,g?k?b("ReasonReact.bs").element(void 0,void 0,b("WorkGalahadNewMessageRowReact.bs").make(x,b("bs_curry")._1(a[0],Y),[])):b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadlistNewMessageRowReact.bs").make(x,b("bs_curry")._1(a[0],Y),[])):null,da(a),m?b("MessengerThreadlistLinkRowReact.bs").make(t):null,H!==void 0?b("bs_curry")._1(H,0):ba(h,v,a,c))])),I?b("ReasonReact.bs").element(void 0,void 0,b("WorkChatThreadlistTabsReact.bs").make(b("bs_js_primitive").some(e),f,b("MessengerView").MASTER.RECENT,K,[])):null)},function(){return[void 0,!1,!1,b("bs_belt_Option").getWithDefault(G,""),[void 0],!1,[void 0],!1,{},{},I,J,g,void 0,a,E,x,f,b("ReasonReact.bs").Props[0](function(a,b){return a[1]===b[1]},function(a){return b("bs_curry")._1(a[0][0],a[1])}),b("ReasonReact.bs").Props[0](function(a,b){return a[1]===b[1]},function(a){return b("bs_curry")._1(a[1],a[0])})]},C[10],function(c,d){__p&&__p();if(typeof c==="number")switch(c){case 0:var e=new(b("MessengerSearchFunnelState"))();e.setSessionID(0);var f=b("MessengerUniversalSearchFunnelLoggerConstants").INTERFACES.MESSENGER_DOT_COM,g=b("MessengerUniversalSearchFunnelLoggerConstants").ENTRY_SURFACES.INBOX,h=b("BootloadableMessengerUniversalSearchFunnelLogger.bs").FunnelLogger[0];b("bs_curry")._1(b("BootloadableMessengerUniversalSearchFunnelLogger.bs").Loadable[0],function(a){return h(g,f,e,a)});return b("bs_block").__(0,[[d[0],!0,d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],b("bs_js_primitive").some(e),d[14],d[15],d[16],d[17],d[18],d[19]]]);case 1:return b("bs_block").__(0,[[d[0],!1,d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17],d[18],d[19]]]);case 2:return b("bs_block").__(0,[[d[0],!1,d[2],"",d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17],d[18],d[19]]]);case 3:return b("bs_block").__(0,[[d[0],d[1],d[2],"",d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],void 0,d[14],d[15],d[16],d[17],d[18],d[19]]]);case 4:return b("bs_block").__(0,[[d[0],!0,d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17],d[18],d[19]]]);case 5:if(d[1])return 0;else{var i=d[6][0];if(i!==void 0){i=b("bs_js_primitive").valFromOption(i);var j=i.isScrolledToTop(),k=d[0],l=d[1],m=d[2],n=d[3],o=d[4],q=d[5],r=d[6],s=!j,t=d[8],u=d[9],v=d[10],x=d[11],y=d[12],z=d[13],A=d[14],B=d[15],C=d[16],D=d[17],F=d[18],H=d[19];q=[k,l,m,n,o,q,r,s,t,u,v,x,y,z,A,B,C,D,F,H];i=i.isScrolledToBottom();var J=d[5];if(i){if(j&&J)return b("bs_block").__(2,[[k,l,m,n,o,!1,r,s,t,u,v,x,y,z,A,B,C,D,F,H],function(a){b("bs_curry")._1(E,0);return w([a[1],K])}]);else i=1;if(i===1)return b("bs_block").__(2,[q,function(a){b("bs_curry")._1(E,0);return w([a[1],K])}])}else{if(j&&J)return b("bs_block").__(2,[[k,l,m,n,o,!1,r,s,t,u,v,x,y,z,A,B,C,D,F,H],function(a){return w([a[1],K])}]);else i=1;if(i===1)return b("bs_block").__(2,[q,function(a){return w([a[1],K])}])}}else return 0}break;case 6:return b("bs_block").__(2,[[d[0],d[1],d[2],d[3],d[4],!1,d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17],d[18],d[19]],function(a){a=a[1][6][0];if(a!==void 0){b("bs_js_primitive").valFromOption(a).scrollToTop();return 0}else return 0}])}else switch(c.tag|0){case 0:var a=c[0],L=b("BootloadableMessengerUniversalSearchFunnelLogger.bs").FunnelLogger[2];b("bs_curry")._1(b("BootloadableMessengerUniversalSearchFunnelLogger.bs").Loadable[0],function(b){return L(a,b)});return b("bs_block").__(0,[[d[0],d[1],d[2],a,d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17],d[18],d[19]]]);case 1:return b("bs_block").__(0,[[d[0],d[1],c[0],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17],d[18],d[19]]]);case 2:return b("bs_block").__(0,[[b("bs_js_primitive").some(c[0]),d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17],d[18],d[19]]]);case 3:return b("bs_block").__(0,[[b("bs_js_primitive").some(p(d[0],c[0],I)),d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17],d[18],d[19]]])}},C[12]]}c=b("ReasonReact.bs").wrapReasonForJs(C,function(a){var c=a.blockedIds,d=a.isComposing;return D(b("bs_js_primitive").nullable_to_opt(a.activeThreadID),c==null?b("bs_belt_Set").make([b("ParticipantId.bs").cmp]):c,b("bs_js_primitive").nullable_to_opt(a.handleClear),a.filter,a.folder,d==null?!1:d,b("bs_js_primitive").nullable_to_opt(a.isLoaded),b("bs_js_primitive").nullable_to_opt(a.isLoading),a.isNewMessageActive,b("bs_js_primitive").nullable_to_opt(a.maxHeight),a.newMessageRequestThreads,a.onLoadMoreRequest,a.pendingFolderUnseenCount,b("bs_js_primitive").nullable_to_opt(a.queryString),b("bs_js_primitive").nullable_to_opt(a.renderLoadMore),a.threads,b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.pinnedThreads),[]),a.viewer,a.readReceipts,b("bs_js_primitive").nullable_to_opt(a.hideThreadListHeader),b("bs_js_primitive").nullable_to_opt(a.hidePinnedThreadSeparator),b("bs_js_primitive").nullable_to_opt(a.skipViewportHeightCalculationForScrollarea),b("bs_js_primitive").nullable_to_opt(a.onOverrideSelect),b("bs_js_primitive").nullable_to_opt(a.isDenseRow),b("bs_js_primitive").nullable_to_opt(a.hideSearchBox),a.enableMessageSearch,b("bs_js_primitive").nullable_to_opt(a.searchResultRowComponent),b("bs_js_primitive").nullable_to_opt(a.searchPlaceholder),b("bs_js_primitive").nullable_to_opt(a.searchInputPortalRef),[])});d=b("bs_belt_Option").getWithDefault;e=25296901;g=10;f.$pipe$unknown=d;f.qpl_module_page_load_mdotcom=e;f.hasNewUnreadMessages=j;f.filterKeyEvent=k;f.filterPlatformSpecificModifierKey=l;f.platformSpecificModiferKeyLabel=a;f.searchKeyboardMainKey=m;f.searchKeyboardShortcut=n;f.setScrollable=o;f.getFocusedThreadId=p;f.handleFocusSearchBar=q;f.setSearchInputNode=r;f.handleScrollIntoView=s;f.handleFilteredRequestsClick=t;f.handleReturnToInboxClick=u;f.impressionOffset=g;f.logNodeImpressions=v;f.checkAndUpdateMessageRequestImpressions=w;f.setter=x;f.onFocus=y;f.renderThread=z;f.handleSelect=A;f.emptyInboxLinkClasses=B;f.component=C;f.make=D;f.jsComponent=c}),null);