if (self.CavalryLogger) { CavalryLogger.start_js(["D8GqS"]); }

__d("AdsImageUploadConstants",[],(function(a,b,c,d,e,f){e.exports={maxWidth:2048,maxHeight:2048}}),null);
__d("AdsImageUploadLoggerPlugins",["AdsInterfacesLogEvents","adsEditorLoggerLog"],(function(a,b,c,d,e,f){"use strict";var g=b("AdsInterfacesLogEvents").Event;a={log:function(a){b("adsEditorLoggerLog")(g.IMAGE_LIB_UPLOAD_ERROR,{})}};c={log:function(a){b("adsEditorLoggerLog")(g.IMAGE_LIB_UPLOAD_SUCCESS,{})}};e.exports={AdsImageUploadErrorDataLoggerPlugin:a,AdsImageUploadUploadSuccessDataLoggerPlugin:c}}),null);
__d("AdsImageUploadApiErrorDataAction",["Laminar","AdsImageUploadLoggerPlugins"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[b("Laminar").__createLogger("AdsImageUploadLoggerPlugins.AdsImageUploadErrorDataLoggerPlugin",b("AdsImageUploadLoggerPlugins").AdsImageUploadErrorDataLoggerPlugin,{})]},"IMAGE_UPLOAD.API_ERROR");e.exports=a}),null);
__d("AdsImageUploadApiErrorDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"IMAGE_UPLOAD.API_ERROR"}}),null);
__d("AdsImageUploadFormatErrorDataAction",["Laminar","AdsImageUploadLoggerPlugins"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[b("Laminar").__createLogger("AdsImageUploadLoggerPlugins.AdsImageUploadErrorDataLoggerPlugin",b("AdsImageUploadLoggerPlugins").AdsImageUploadErrorDataLoggerPlugin,{})]},"IMAGE_UPLOAD.FORMAT_ERROR");e.exports=a}),null);
__d("AdsImageUploadFormatErrorDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"IMAGE_UPLOAD.FORMAT_ERROR"}}),null);
__d("AdsImageUploadLoadFailDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"IMAGE_UPLOAD.LOAD_FAIL"}}),null);
__d("AdsImageUploadRemoveErrorsDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"IMAGE_UPLOAD.REMOVE_ERRORS");e.exports=a}),null);
__d("AdsImageUploadRemoveErrorsDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"IMAGE_UPLOAD.REMOVE_ERRORS"}}),null);
__d("AdsImageUploadSizeErrorDataAction",["Laminar","AdsImageUploadLoggerPlugins"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[b("Laminar").__createLogger("AdsImageUploadLoggerPlugins.AdsImageUploadErrorDataLoggerPlugin",b("AdsImageUploadLoggerPlugins").AdsImageUploadErrorDataLoggerPlugin,{})]},"IMAGE_UPLOAD.SIZE_ERROR");e.exports=a}),null);
__d("AdsImageUploadSizeErrorDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"IMAGE_UPLOAD.SIZE_ERROR"}}),null);
__d("AdsImageUploadUploadFailDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"IMAGE_UPLOAD.UPLOAD_FAIL"}}),null);
__d("EXIFConst",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({kOrientationUnknown:0,kOrientationTopLeft:1,kOrientationTopRight:2,kOrientationBottomRight:3,kOrientationBottomLeft:4,kOrientationLeftTop:5,kOrientationRightTop:6,kOrientationRightBottom:7,kOrientationLeftBottom:8})}),null);
__d("applyExifOrientationToCanvas",["EXIFConst"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e){__p&&__p();var f=e.width;e=e.height;d>4&&(a.width=e,a.height=f,a.style.width=e+"px",a.style.height=f+"px");switch(d){case b("EXIFConst").kOrientationTopRight:c.translate(f,0);c.scale(-1,1);break;case b("EXIFConst").kOrientationBottomRight:c.translate(f,e);c.rotate(Math.PI);break;case b("EXIFConst").kOrientationBottomLeft:c.translate(0,e);c.scale(1,-1);break;case b("EXIFConst").kOrientationLeftTop:c.rotate(.5*Math.PI);c.scale(1,-1);break;case b("EXIFConst").kOrientationRightTop:c.rotate(.5*Math.PI);c.translate(0,-e);break;case b("EXIFConst").kOrientationRightBottom:c.rotate(.5*Math.PI);c.translate(f,-e);c.scale(-1,1);break;case b("EXIFConst").kOrientationLeftBottom:c.rotate(-.5*Math.PI);c.translate(-f,0);break}return c}e.exports=a}),null);
__d("ImageReader",["Promise","DOM","Event","ImageExif","applyExifOrientationToCanvas","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e,f,g,h){__p&&__p();var i=new Image(),j=function(){c(null,0,0)};b("Event").listen(i,{load:function(){__p&&__p();if(g){c(a,i.width,i.height);return}e=e||i.width;f=f||i.height;var j=i.width,k=i.height;if(j>e||k>f){var l=Math.max(j/e,k/f);j=j/l<<0;k=k/l<<0}l=b("DOM").create("canvas",{css:"background-color: transparent;",width:j,height:k});var m=l.getContext("2d");h&&h>0&&b("applyExifOrientationToCanvas")(l,m,h,{width:l.width,height:l.height});m.drawImage(i,0,0,i.width,i.height,0,0,j,k);try{d==="image/png"?c(l.toDataURL("image/png"),i.width,i.height):c(l.toDataURL("image/jpeg"),i.width,i.height);return}catch(b){c(a,i.width,i.height)}},error:j,abort:j});i.src=a}function h(c,d,e,f,h){b("ImageExif").readFromFile(c,function(b){var i=b.Orientation,j=new a.FileReader();j.onloadend=function(a){g(j.result,d,c.type,e,f,h,i)};j.readAsDataURL(c)})}function c(a,c,d,e){return new(b("Promise"))(function(b){h(a,function(a){return b(a)},c,d,e)})}e.exports={promiseRead:c,read:h,resizeIfNeeded:g}}),null);
__d("XAdsCFImageUploadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ads/create/imageupload/",{})}),null);
__d("AdsUploadProcess",["cx","regeneratorRuntime","AdsDaoGraph","AdsImageLegacy","AdsImageUploadConstants","ArbiterMixin","DOM","GlobalCallback","ImageReader","SphericalImage","XAdsCFImageUploadController","getAsyncParams","mixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={IFRAME_NAME:"_57mk"},i=0;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){var d;d=a.call(this)||this;d.id=i;i++;d.file=b;d.iframe=null;d.$AdsUploadProcess1=c;return d}var d=c.prototype;d.getID=function(){return this.id};d.upload=function(a){window.FileReader?this.$AdsUploadProcess2():this.$AdsUploadProcess3(a)};d.$AdsUploadProcess2=function(){__p&&__p();var a,c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:a=function(a){__p&&__p();var c=this;if(!a){this.failed();return}a=a.split(",");var d=function(a,c){if(a&&a.images){var d=this.file.name;a=new(b("AdsImageLegacy"))(a.images[d]);this.succeeded(a)}else{d=c&&c.error;this.failed(d)}}.bind(this),e=function(a){c.progressData=a,c.progressPercent=a.loaded/a.total*100,c.inform("onProgress",a)};try{b("AdsDaoGraph").add.imageForAccount.one(d,{bytes:a[1],name:this.file.name,encoding:a[0],handleError:d,accountId:this.$AdsUploadProcess1},e)}catch(a){this.failed(a.message);throw new Error(a.message)}}.bind(this);c=!1;e.prev=2;e.next=5;return b("regeneratorRuntime").awrap(b("SphericalImage").createFromBlob(this.file));case 5:d=e.sent;d.isSpherical()&&(c=!0);e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](2);case 11:b("ImageReader").read(this.file,a,b("AdsImageUploadConstants").maxWidth,b("AdsImageUploadConstants").maxHeight,c);case 12:case"end":return e.stop()}},null,this,[[2,9]])};d.$AdsUploadProcess3=function(a){__p&&__p();var c=document.createElement("iframe");c.className="_57mi";var d=h.IFRAME_NAME+this.getID();c.name=d;a.target=d;d=b("XAdsCFImageUploadController").getURIBuilder();a.action=d.getURI().getQualifiedURI().toString();var e=b("getAsyncParams")("POST");Object.assign(e,{account_id:this.$AdsUploadProcess1,callback:b("GlobalCallback").create(this.$AdsUploadProcess4.bind(this,c)),domain:document.domain});Object.keys(e).forEach(function(c){a.appendChild(b("DOM").create("input",{type:"hidden",name:c,value:e[c]}))});document.body&&document.body.appendChild(c);a.submit()};d.$AdsUploadProcess4=function(a,c,d){b("GlobalCallback").remove(c),b("DOM").remove(a),d&&d.url?this.succeeded(new(b("AdsImageLegacy"))(d)):this.failed()};d.succeeded=function(a){this.image=a,this.inform("succeeded",a)};d.failed=function(a){this.inform("failed",a)};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("AdsImageUploaderDEPRECATED",["cx","fbt","invariant","Promise","AdsImageUploadApiErrorDataAction","AdsImageUploadFormatErrorDataAction","AdsImageUploadRemoveErrorsDataAction","AdsImageUploadSizeErrorDataAction","AdsImageValidation","AdsInterfaceCreativeLoggingEvents","AdsInterfacesLogger","AdsUploadProcess","ArbiterMixin","CSS","DOMEventListener","DOMQuery","Parent","React","ReactDOM","WebApiApplication","ads-lib-connect_DEPRECATED","adsFormatErrorMessage","getDOMImageSize","mixin","promiseDone"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ads-lib-connect_DEPRECATED").FB,k=a.URL||a.webkitURL,l={UPLOAD_ELEMENT:"_57mh",DRAG_OVER:"_57mj",CLICK_HIJACK:"_57mf",CLICK_HIJACK_FORM:"_5ecl"};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){__p&&__p();var e;e=a.call(this)||this;e.handleFormInputMount=function(a){var c=a;c&&(b("DOMEventListener").add(c,"change",function(a){e.handleInputChange(a,c)}),e.onFormInputMount&&e.onFormInputMount(c))};e.handleInputClick=function(){e.inform("onUploadClicked")};d=d||{};d.accountId||i(0,252);e.accountId=d.accountId;e.acceptsMultiple="multiple"in d?!!d.multiple:!0;e.acceptsMultiple=window.FileReader?e.acceptsMultiple:!1;e.validateImageSize=d.validateImageSize;e.validateImageFormat=d.validateImageFormat;e.imageSpec=d.imageSpec||{minWarningWidth:0,minWarningHeight:0,width:0,height:0,cropKey:""};e.onFormInputMount=d.onFormInputMount;e.onGifUpload=d.onGifUpload;e.root=c;e.root&&(e.findAndDecorateUploadElements(),e.createDragAndDropArea(e.root));return e}var d=c.prototype;d.findAndDecorateUploadElements=function(){var a=b("DOMQuery").scry(this.root,"."+l.UPLOAD_ELEMENT);a.forEach(function(a){this.decorateUploadElement(a)},this);b("CSS").hasClass(this.root,l.UPLOAD_ELEMENT)&&this.decorateUploadElement(this.root)};d.createDragAndDropArea=function(a){b("DOMEventListener").add(a,"dragenter",function(a){a.preventDefault(),b("CSS").addClass(this,l.DRAG_OVER)}),b("DOMEventListener").add(a,"dragleave",function(a){a.preventDefault(),b("CSS").removeClass(this,l.DRAG_OVER)}),b("DOMEventListener").add(a,"dragover",function(a){a.preventDefault(),a.dataTransfer.dropEffect="copy"}),b("DOMEventListener").add(a,"drop",this.onDrop.bind(this))};d.onDrop=function(a){a.preventDefault();var c=b("DOMQuery").scry(this.root,"."+l.CLICK_HIJACK_FORM)[0];this.upload(a.dataTransfer.files,c)};d.decorateUploadElement=function(a){var c=b("WebApiApplication").getAccessToken();c=j.url("/act_"+this.accountId+"/adimages",null,c);if(b("DOMQuery").scry(a,"."+l.CLICK_HIJACK).length)return;var d=document.createElement("div");d.className=l.CLICK_HIJACK;c=b("React").createElement("form",{action:c,className:l.CLICK_HIJACK_FORM,encType:"multipart/form-data",method:"POST"},b("React").createElement("input",{accept:"image/*",className:"_57mg",multiple:this.acceptsMultiple,name:"fileToUpload",ref:this.handleFormInputMount,type:"file",onClick:this.handleInputClick}));c=b("ReactDOM").render(c,d);a.appendChild(d)};d.handleInputChange=function(a,c){a=a.target||c;c=a.files||[a.value];a=b("Parent").byTag(a,"form");a&&this.upload(c,a)};d.filterFiles=function(a){a=Array.from(a).filter(function(a){return!a.type||a.type.match(/image\.*/i)});return a};d.containsGifFile=function(a){a=Array.from(a).findIndex(function(a){return a.type!=null&&a.type.match(/gif\.*/i)});return a!==-1};d.getImageTooSmallErrorMessages=function(a){var b=h._("Image too small.");a=h._({"*":{"*":"This image is too small. Try one that's at least {width} x {height} px."}},[h._param("width",a.minWarningWidth,[0]),h._param("height",a.minWarningHeight,[0])]);return{shortMessage:b,longMessage:a}};d.getImageNotSupportedErrorMessages=function(a){var b=h._("Image format not supported.");a=a?h._("The {image format} image format isn't supported. Please use a different image.",[h._param("image format",a)]):h._("The image format isn't supported. Please use a different image.");return{shortMessage:b,longMessage:a}};d.$AdsImageUploaderDEPRECATED1=function(a,c){return b("AdsImageValidation").isWarningSize({getWidth:function(){return a},getHeight:function(){return c},isStockImage:function(){return!1},hasFullSizeDimensions:function(){return!0}},this.imageSpec)};d.upload=function(a,c){__p&&__p();var d=this;a=Array.from(a);var e=a.length;this.acceptsMultiple||(a=[a[0]]);a=this.filterFiles(a);var f=a.length;if(!a)return;var g=f!==e;g&&b("AdsImageUploadFormatErrorDataAction").dispatch({message:this.getImageNotSupportedErrorMessages()},{line:"391",module:"AdsImageUploaderDEPRECATED.js"});var h=[],i=[];this.validateImageFormat?a.forEach(function(a){b("AdsImageValidation").isValidFormat(a.type)?i.push(a):(b("AdsImageUploadFormatErrorDataAction").dispatch({message:d.getImageNotSupportedErrorMessages(a.type)},{line:"404",module:"AdsImageUploaderDEPRECATED.js"}),g=!0)}):i=a;this.onGifUpload!=null&&this.containsGifFile(i)&&this.onGifUpload();f=[];f=i.map(function(a){return new(b("Promise"))(function(c,e){b("getDOMImageSize")(k.createObjectURL(a),function(e,f,g){d.validateImageFormat&&e===0&&f===0?(b("AdsImageUploadFormatErrorDataAction").dispatch({message:d.getImageNotSupportedErrorMessages()},{line:"425",module:"AdsImageUploaderDEPRECATED.js"}),c(!1)):d.validateImageSize&&d.imageSpec&&!d.$AdsImageUploaderDEPRECATED1(e,f)?(b("AdsImageUploadSizeErrorDataAction").dispatch({message:d.getImageTooSmallErrorMessages(d.imageSpec)},{line:"434",module:"AdsImageUploaderDEPRECATED.js"}),b("AdsInterfacesLogger").log({eventName:b("AdsInterfaceCreativeLoggingEvents").IMAGE_TOO_SMALL_ERROR},b("AdsInterfacesLogger").LOG_TYPE_SECONDARY_APP),c(!1)):(h.push(new(b("AdsUploadProcess"))(a,d.accountId)),c(!0))})})});b("promiseDone")(b("Promise").all(f),function(a){a.every(function(a){return a})&&!g&&b("AdsImageUploadRemoveErrorsDataAction").dispatch({},{line:"457",module:"AdsImageUploaderDEPRECATED.js"}),d.startUploadProcesses(h,c)})};d.$AdsImageUploaderDEPRECATED2=function(a){a=b("Parent").byClass(a,l.CLICK_HIJACK);var c=a&&a.parentNode;a&&c&&(c.removeChild(a),this.decorateUploadElement(c))};d.startUploadProcesses=function(a,c){__p&&__p();var d=this;this.inform("onUploadStarted",a);var e=[],f=0;a=a.map(function(a){return new(b("Promise"))(function(d,g){a.subscribe("succeeded",function(a,c){e.push(c),d(),b("AdsInterfacesLogger").log({eventName:b("AdsInterfaceCreativeLoggingEvents").IMAGE_UPLOAD_SUCCESSFUL},b("AdsInterfacesLogger").LOG_TYPE_SECONDARY_APP)}),a.subscribe("failed",function(a,c){a=b("adsFormatErrorMessage")(c);b("AdsImageUploadApiErrorDataAction").dispatch({message:{shortMessage:h._("Upload error"),longMessage:a}},{line:"511",module:"AdsImageUploaderDEPRECATED.js"});f++;d();b("AdsInterfacesLogger").log({eventName:b("AdsInterfaceCreativeLoggingEvents").IMAGE_UPLOAD_FAILURE},b("AdsInterfacesLogger").LOG_TYPE_SECONDARY_APP)}),a.upload(c)})});b("promiseDone")(b("Promise").all(a),function(){d.$AdsImageUploaderDEPRECATED2(c),d.uploadEnded(e,f)})};d.uploadEnded=function(a,b){this.inform("onUploadEnded",{succeededImages:a,numFailedImages:b})};return c}(b("mixin")(b("ArbiterMixin")));e.exports={AdsImageUploaderDEPRECATED:c,AdsImageUploaderConstantsDEPRECATED:l}}),null);
__d("AdsImageUploadErrorMessagesUtils",["fbt","adsFormatErrorMessage"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){var b=g._("Image too small.");a=g._({"*":{"*":"This image is too small. Try one that's at least {width} x {height} px."}},[g._param("width",a.minWarningWidth,[0]),g._param("height",a.minWarningHeight,[0])]);return{shortMessage:b,longMessage:a}}function c(a){var b=g._("Image format not supported.");a=a==null||a===""?g._("The image format isn't supported. Please use a different image."):g._("The {image format} image format isn't supported. Please use a different image.",[g._param("image format",a)]);return{shortMessage:b,longMessage:a}}function d(a){var c=g._("Upload error");a=b("adsFormatErrorMessage")(a);return{shortMessage:c,longMessage:a}}e.exports={getImageTooSmallErrorMessages:a,getImageNotSupportedErrorMessages:c,getAPIErrorMessages:d}}),null);
__d("AdsMediaLibraryExpandedAsset.react",["cx","Image.react","Keys","React","ReactDOM"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").PropTypes;var h=24;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){a.keyCode===b("Keys").ESC&&d.props.onClickClose()},d.$2=function(a){d.props.onClickClose(),a.stopPropagation()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("ReactDOM").findDOMNode(this.refs.expandedAssetView).focus()};d.render=function(){var a=this.props.width,c=this.props.height,d={},e=window.innerHeight,f=window.innerWidth;a>f||c>e?a/f>c/e?(a=f,c=this.props.height*(f/this.props.width),d.width=a):(c=e,a=this.props.width*(e/this.props.height),d.height=c):d.width=this.props.width;f=-Math.floor(a/2);e=this.props.topBarHeight||0;a=-Math.floor(c/2)+e+h;c=b("React").createElement("div",{className:"_4-lr",style:{marginLeft:f,marginTop:a}},b("React").createElement(b("Image.react"),{alt:this.props.source,className:"_4vnf",src:this.props.source,style:d}));e=b("React").createElement("div",{className:"_1zn8",style:{marginLeft:-(f+15),marginTop:a-20}});return b("React").createElement("div",{className:"_1zn6",ref:"expandedAssetView",role:"button",tabIndex:0,onClick:this.$2,onKeyDown:this.$1},b("React").createElement("div",{className:"_4-ls"}),c,e)};return c}(b("React").Component);c.propTypes={height:a.number.isRequired,onClickClose:a.func.isRequired,source:a.string.isRequired,topBarHeight:a.number,width:a.number.isRequired};e.exports=c}),null);
__d("AdsMediaPanelImageBox.react",["cssVar","cx","errorCode","fbt","AdsBuyingTypes","AdsError","AdsErrorUtils","AdsImageLegacy","AdsImageValidation","AdsInstagramErrorUtils","AdsInstagramFields","AdsPageTypes","AdsStockImageSourceUtils","AdsValidationIcon.react","AdsValidationIconType","BackgroundImage.react","ContextualDialog.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","GradientBox.react","Link.react","React","ReactDOM","ReactLayeredComponentMixin_DEPRECATED","SphericalMediaGyroIcon.react","debounce","getElementPosition","getViewportDimensions","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("AdsStockImageSourceUtils").MAX_STOCK_IMAGE_HEIGHT,l=b("AdsStockImageSourceUtils").MAX_STOCK_IMAGE_WIDTH;a=b("React").PropTypes;var m=parseInt("110px",10),n=parseInt("58px",10),o=n,p=n,q=20,r=b("AdsInstagramFields").INSTAGRAM_SPECIFIC_IMAGE_ERROR_KEYS,s={"default":null,disabled:null,selected:"_5ywk",removable:"_5ywl"};c=b("React").createClass({displayName:"AdsMediaPanelImageBox",mixins:[b("ReactLayeredComponentMixin_DEPRECATED")],propTypes:{alt:a.string,buyingTypes:a.arrayOf(a.oneOf(Object.keys(b("AdsBuyingTypes")))),decoration:a.oneOf(Object.keys(s)),disableDimensionInfo:a.bool,image:a.instanceOf(b("AdsImageLegacy")).isRequired,imageSpec:a.object,isTooSmall:a.bool,igSpecificImageSpec:a.object,scaleImageFactor:a.number,useMediaPanelRedesign:a.bool,onDecorationIconClick:a.func,onImageClick:a.func,onImageDoubleClick:a.func},getDefaultProps:function(){return{decoration:"default",isTooSmall:!1}},getInitialState:function(){return{errorLevel:b("AdsError").Level.SUCCESS,imageReady:this.props.image.hasDimensions(),previewShown:!1,hovering:!1,isValidForFacebook:!0}},_isDisabled:function(){return this.props.decoration==="disabled"},_mayClickImages:function(){if(this._isDisabled())return!1;return!this.props.isTooSmall||this.state.errorLevel!==b("AdsError").Level.WARN?!0:this.state.isValidForFacebook},_getOnImageClick:function(){return this._mayClickImages()?this.props.onImageClick:null},_getOnImageDoubleClick:function(){return this._mayClickImages()?this.props.onImageDoubleClick:null},_mayShowPreviews:function(){return!this._isDisabled()&&this.props.image.isStockImage()},_getOnImageMouseEnter:function(){return this._mayShowPreviews()?this._showPreview:null},_getOnImageMouseLeave:function(){return this._mayShowPreviews()?this._hidePreview:null},_showPreview:function(){this._resetSchedulePreviewHide(),this.setState({previewShown:!0})},_hidePreview:function(){this._resetSchedulePreviewHide(),this.setState({previewShown:!1})},_onImageDimensionsReady:function(){this.isMounted()&&this.setState({imageReady:!0})},UNSAFE_componentWillReceiveProps:function(a){if(a.image.equals(this.props.image))return;var b=a.image.hasDimensions();this.setState({imageReady:b});b||a.image.setDimensionsReadyCallback(this._onImageDimensionsReady)},UNSAFE_componentWillMount:function(){this._setSchedulePreviewHide(b("debounce")(this._hidePreview,q)),this.state.imageReady||this.props.image.setDimensionsReadyCallback(this._onImageDimensionsReady),this.props.imageSpec&&this.props.image.resetValidation(this.props.imageSpec.placement),this.props.igSpecificImageSpec&&this.props.image.resetValidation(this.props.igSpecificImageSpec.placement)},componentWillUnmount:function(){this._resetSchedulePreviewHide(),this._setSchedulePreviewHide(null)},_setSchedulePreviewHide:function(a){var b=this;b._schedulePreviewHide=a},_resetSchedulePreviewHide:function(){var a=this;a._schedulePreviewHide.reset()},_renderDecorationIcon:function(){var a=this.props.onDecorationIconClick;return b("React").createElement(b("Link.react"),{className:"_40hk",tabIndex:a?null:-1,onClick:a,onMouseEnter:this._getOnImageMouseEnter(),onMouseLeave:this._getOnImageMouseLeave()},b("React").createElement("div",{className:"_5ywm"}))},_renderOverlay:function(){return!this._isDisabled()?null:b("React").createElement("div",{className:"_29wz"})},_renderImage:function(){__p&&__p();var a=this.props.image,c=this._calculateImageDimensions(),d=a.calculatedWidth,e=a.calculatedHeight,f=a.renderedWidth,g=a.renderedHeight,h=null,i=null,j=null;this.props.isTooSmall?(h=this._renderErrorIcon(),i=this._renderDimensionInfo(),j=this._renderOverlayGradient()):this.state.hovering&&(i=this._renderDimensionInfo(),j=this._renderOverlayGradient());var k=a.getThumbnailUrl()||a.getUrl();g=g||e||c.height;e=f||d||c.width;this.props.useMediaPanelRedesign&&(k=a.getHighResThumbnailUrl()||k);this.props.scaleImageFactor&&this.props.useMediaPanelRedesign&&(g*=this.props.scaleImageFactor,e*=this.props.scaleImageFactor);f=null;a.getIsSphericalPhoto()&&(f=this._renderSphericalGyroIcon());return b("React").createElement(b("FBOverlayContainer.react"),{className:"_29w-"},b("React").createElement(b("FBOverlayBase.react"),null,b("React").createElement("div",{className:a.isStockImage()?"":"_5ywo"},b("React").createElement(b("BackgroundImage.react"),{alt:this.props.alt,backgroundPosition:"0px",backgroundSize:"cover",height:g,loadingIndicatorStyle:"small",optimizeResizeSpeed:!0,ref:"image",src:k,style:this._getImageStyle(),width:e}))),j,b("React").createElement(b("FBOverlayElement.react"),{vertical:"bottom"},b("React").createElement("div",{className:"_20-u"},i,h,f)))},_renderOverlayGradient:function(){return this.props.disableDimensionInfo?null:b("React").createElement(b("FBOverlayElement.react"),{vertical:"bottom"},b("React").createElement(b("GradientBox.react"),{className:"_2_4q",color:"black",direction:"up"}))},_renderDimensionInfo:function(){if(this.props.disableDimensionInfo)return null;var a=this.props.image.isStockImage()?this._calculateFullSizeStockImageDimensions():this._getImageDimensions();return j._("{width} \u00d7 {height}",[j._param("width",a.width),j._param("height",a.height)])},_renderErrorIcon:function(){__p&&__p();var a=[];this.props.imageSpec&&a.push(this.props.imageSpec);this.props.igSpecificImageSpec&&a.push(this.props.igSpecificImageSpec);a=b("AdsImageValidation").getAdsErrorsForImage(this.props.image,a,this.props.buyingTypes);if(!a||a.length===0)return null;var c=this.props.imageSpec&&this.props.imageSpec.placement!==b("AdsPageTypes").INSTAGRAM_STREAM&&this.props.imageSpec.placement!==b("AdsPageTypes").INSTAGRAM_STORY&&a.every(function(a){return a.key!==1487015});c!==this.state.isValidForFacebook&&this.setState({isValidForFacebook:c});c=b("AdsErrorUtils").getLevelForErrors(a);c!==this.state.errorLevel&&this.setState({errorLevel:c});a=b("AdsErrorUtils").getAllErrorsAtLevel(a,c);return b("React").createElement(b("AdsValidationIcon.react"),{className:"_20-v",isError:c===b("AdsError").Level.WARN,messages:this._getErrorMessages(a,c),type:c===b("AdsError").Level.WARN?b("AdsValidationIconType").ERROR_IMAGE:b("AdsValidationIconType").WARNING})},_getErrorMessages:function(a,c){var d=a.filter(function(a){return!r.has(a.key)}).map(function(a){return a.message}),e=a.filter(function(a){return r.has(a.key)}),f;e.length>0&&(f=b("AdsInstagramErrorUtils").getCombinedErrorMessage(a.filter(function(a){return r.has(a.key)}),c));f&&d.push(f);return d},_renderSphericalGyroIcon:function(){return b("React").createElement(b("SphericalMediaGyroIcon.react"),{className:"_4d75"})},render:function(){var a=this,c="_5ywp"+(this.props.useMediaPanelRedesign?" _40hl":"");return b("React").createElement("div",{className:c},b("React").createElement("div",{className:b("joinClasses")("_1997",s[this.props.decoration],this.props.className),onMouseEnter:function(){return a.setState({hovering:!0})},onMouseLeave:function(){return a.setState({hovering:!1})}},b("React").createElement(b("Link.react"),{className:"_5ywq","data-test-decoration":this.props.decoration,"data-testid":"image-box",tabIndex:this.props.onImageClick?null:-1,onClick:this._getOnImageClick(),onDoubleClick:this._getOnImageDoubleClick(),onMouseEnter:this._getOnImageMouseEnter(),onMouseLeave:this._getOnImageMouseLeave()},this._renderImage()),this._renderOverlay(),this._renderDecorationIcon()))},renderLayers:function(){var a=this,c=this.props.image,d=this._mayShowPreviews()&&this.state.previewShown,e=c.getPreviewWidth(),f=c.getPreviewHeight(),g=null;if(!d)return{};d={height:String(f)+"px",width:String(e)+"px"};var h=b("getElementPosition")(b("ReactDOM").findDOMNode(this)),i=b("getViewportDimensions")(),j=h.x;i=i.width-h.x-h.width;g=j>i?"left":"right";return{preview:b("React").createElement(b("ContextualDialog.react"),{autoFocus:!1,contextRef:function(){return a.refs.image},position:g,shown:!0,style:d},b("React").createElement(b("BackgroundImage.react"),{backgroudSize:"cover",backgroundPosition:"0px",height:f,loadingIndicatorStyle:"large",optimizeResizeSpeed:!0,src:c.getPreviewUrl(),width:e}))}},_getSizeMultiplier:function(a,b,c){return Math.min(b/a.width,c/a.height)},_getStockImageSizeMultiplier:function(){return this._getSizeMultiplier(this._getStockImageVisibleDimensions(),m,n)},_fitDimensions:function(a,b,c){b=this._getSizeMultiplier(a,b,c);return{height:Math.floor(a.height*b),width:Math.floor(a.width*b)}},_getImageStyle:function(){__p&&__p();var a=this.props.image;if(!a.isStockImage()||!this.state.imageReady)return null;a=this._getStockImageVisibleDimensions();var b=this._getImageDimensions();b={height:b.height-a.height,width:b.width-a.width};a=this._getStockImageSizeMultiplier();var c={};b.height>0&&(c.marginBottom=String(Math.ceil(b.height*-a))+"px");b.width>0&&(c.marginRight=String(Math.ceil(b.width*-a))+"px");return c},_getImageDimensions:function(){return{height:this.props.image.height,width:this.props.image.width}},_getNonStockImageDimensions:function(){return{height:this.props.image.getThumbnailHeight()||this.props.image.height,width:this.props.image.getThumbnailWidth()||this.props.image.width}},_getStockImageVisibleDimensions:function(){return{height:this.props.image.getThumbnailHeight(),width:this.props.image.getThumbnailWidth()}},_calculateImageDimensions:function(){return this.props.image.isStockImage()?this._calculateStockImageDimensions():this._calculateNonStockImageDimensions()},_calculateNonStockImageDimensions:function(){return!this.state.imageReady?{height:p,width:o}:this._fitDimensions(this._getNonStockImageDimensions(),m,n)},_calculateStockImageDimensions:function(){if(!this.state.imageReady)return this._fitDimensions(this._getStockImageVisibleDimensions(),m,n);var a=this._getImageDimensions(),b=this._getStockImageSizeMultiplier();return{height:Math.floor(a.height*b),width:Math.floor(a.width*b)}},_calculateFullSizeStockImageDimensions:function(){var a=this.props.image;if(a.hasFullSizeDimensions())return{height:a.getFullSizeHeight(),width:a.getFullSizeWidth()};var b=a.getPreviewWidth();a=a.getPreviewHeight();var c=Math.min(l/b,k/a);return{height:Math.round(a*c),width:Math.round(b*c)}}});e.exports=c}),null);
__d("AdsMediaStandaloneLibraryImageWithDimensions.react",["cx","fbt","AdsImageLegacy","AdsValidationIcon.react","AdsValidationIconType","BackgroundImage.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","React","ShimButton.react","SphericalMediaGyroIcon.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i={height:600,width:200},j={height:400,width:400},k=function(a){return!a.image.getIsSphericalPhoto()?null:b("React").createElement(b("SphericalMediaGyroIcon.react"),{className:"_62-d"})};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={thumbnailLoaded:!1},d.$3=function(a){var c=a.getWidth();a=a.getHeight();return b("React").createElement("div",{className:"_1byh"},b("React").createElement(b("ShimButton.react"),{className:"_1byi",inline:!0,onClick:d.$4},b("React").createElement(b("AdsValidationIcon.react"),{className:"_1byj",type:b("AdsValidationIconType").LARGE_IMAGE}),b("React").createElement("span",{className:"_1byk"},h._("{width} \u00d7 {height}",[h._param("width",c),h._param("height",a)]))))},d.$2=function(){d.setState({thumbnailLoaded:!0})},d.$4=function(a){a.stopPropagation(),d.props.onExpandClick(d.props.image)},d.$1=function(){return!d.props.imageReady?j:d.$5(d.$6(),i)},d.$6=function(){return{height:d.props.image.getThumbnailHeight()||d.props.image.height,width:d.props.image.getThumbnailWidth()||d.props.image.width}},d.$5=function(a,b){b=d.$7(a,b);return{height:Math.floor(a.height*b),width:Math.floor(a.width*b)}},d.$7=function(a,b){return Math.min(b.width/a.width,b.height/a.height,1)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.image,c=this.$1(),d=a.calculatedWidth,e=a.calculatedHeight,f=this.state.thumbnailLoaded?a.getUrl():a.getThumbnailUrl();return b("React").createElement(b("FBOverlayContainer.react"),{className:"_1bye"},b("React").createElement(b("FBOverlayBase.react"),null,b("React").createElement("div",null,b("React").createElement(b("BackgroundImage.react"),{alt:this.props.alt,backgroundPosition:0,backgroundSize:"cover",className:"_2vjn",height:e||c.height,loadingIndicatorStyle:"small",optimizeResizeSpeed:!0,src:f,width:d||c.width,onImageLoad:this.$2}))),b("React").createElement(b("FBOverlayElement.react"),{vertical:"bottom"},this.$3(a)),b("React").createElement(b("FBOverlayElement.react"),null,b("React").createElement(k,{image:a})))};return c}(b("React").Component);c.propTypes={alt:a.string,image:a.instanceOf(b("AdsImageLegacy")).isRequired,imageReady:a.bool};e.exports=c}),null);
__d("Tag.brands",["cx","fbt","AssetLibraryAppConstants.brands","BUIAdoptionCloseButton.react","React","SUISpinner.react","curry","emptyFunction","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("AssetLibraryAppConstants.brands").SEARCH_RESULT_TYPES,j=function(a){var c=a.className,d=a.tag;a=a.onRemove;return b("React").createElement("div",{className:b("joinClasses")("_4r1y",c)},b("React").createElement("div",{className:"_4r1-"},b("React").createElement("span",{className:"_4r1_"},d.name),b("React").createElement(b("BUIAdoptionCloseButton.react"),{className_DEPRECATED:"_3-8_"+(a?"":" hidden_elem"),label:h._("Remove"),onClick:a?b("curry")(a,d):b("emptyFunction"),size:"small"})))};a=function(a){var c=a.entry,d=a.onRemove;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","onRemove"]);var e=function(a){d(c)};return c.getType()===i.CREATE?b("React").createElement(b("SUISpinner.react"),{className:"_1foc",size:"small"}):b("React").createElement(j,babelHelpers["extends"]({tag:{id:c.getUniqueID(),name:c.getTitle()},onRemove:e},a))};j.FromSearchableEntry=a;e.exports=j}),null);
__d("AssetLibraryImageTags.brands",["cx","fbt","ContextualDialog.react","LayerHideOnBlur","Link.react","React","Tag.brands"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=5;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.props.tagData||[];if(c.length>0){var d=c.slice(0,i);d=this.$1(d);var e=null;if(c.length>i){var f=c.slice(i);f=this.$1(f);c=c.length-i;e=b("React").createElement("span",null,b("React").createElement(b("Link.react"),{ref:"showMoreLink"},h._({"*":"and {count} others"},[h._param("count",c,[0])])),b("React").createElement(b("ContextualDialog.react"),{behaviors:{LayerHideOnBlur:b("LayerHideOnBlur")},contextRef:function(){return a.refs.showMoreLink},hoverContextRef:function(){return a.refs.showMoreLink},position:"right"},b("React").createElement("div",{className:"_2rxe"},f)))}return b("React").createElement("div",{className:"_2rxf"},d,e)}return null};d.$1=function(a){return a.map(function(a){return b("React").createElement(b("Tag.brands"),{className:"mrs mbs",key:a.id,tag:a})})};return c}(b("React").Component);e.exports=a}),null);
__d("AdsMediaStandaloneLibraryMetadataImage.react",["cx","fbt","AdsMediaStandaloneLibraryImageWithDimensions.react","AssetLibraryImageTags.brands","Link.react","React","URI"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.image,c=new(b("URI"))(a.getUrl()).addQueryData({dl:1}),d=null,e=this.$1();e.length>0&&(d=b("React").createElement(i,{propertyKey:h._("Labels:"),propertyValue:b("React").createElement(b("AssetLibraryImageTags.brands"),{tagData:this.$1()})}));return b("React").createElement("div",{className:"_35qj"},b("React").createElement("div",{className:"_35qk"},b("React").createElement(b("AdsMediaStandaloneLibraryImageWithDimensions.react"),{image:a,imageReady:this.props.imageReady,onExpandClick:this.props.onExpandClick})),b("React").createElement("div",{className:"_35ql"},b("React").createElement(i,{propertyKey:h._("Name:"),propertyValue:a.name}),b("React").createElement(i,{propertyKey:h._("Hash:"),propertyValue:b("React").createElement(b("Link.react"),{href:c},a.getAdAccountHash())}),d))};d.$1=function(){return this.props.image.business_object_tags&&this.props.image.business_object_tags.data||[]};return c}(b("React").Component);function i(a){return b("React").createElement("div",{className:"_35qo"},b("React").createElement("div",{className:"_35qp"},a.propertyKey)," ",b("React").createElement("div",{className:"_35qq"},a.propertyValue))}e.exports=a}),null);
__d("AdsMediaStandaloneLibrarySelectableImage.react",["cx","AdsImageLegacy","AdsMediaStandaloneLibraryImageWithDimensions.react","Link.react","React","emptyFunction","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h={"default":null,disabled:null,selected:"_1byd"};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){return b("React").createElement(b("Link.react"),{className:"_1byl"})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_1bym"},b("React").createElement("div",{className:b("joinClasses")(h[this.props.decoration],this.props.className)},b("React").createElement(b("Link.react"),{className:"_1byn",tabIndex:this.props.onImageClick?null:-1,onClick:this.props.onImageClick},b("React").createElement(b("AdsMediaStandaloneLibraryImageWithDimensions.react"),{image:this.props.image,imageReady:this.props.imageReady,onExpandClick:this.props.onExpandClick,onImageClick:this.props.onImageClick})),this.$1()))};return c}(b("React").Component);c.propTypes={alt:a.string,decoration:a.oneOf(Object.keys(h)).isRequired,image:a.instanceOf(b("AdsImageLegacy")).isRequired,imageReady:a.bool,onExpandClick:a.func.isRequired,onImageClick:a.func.isRequired};c.defaultProps={decoration:"default",onExpandClick:b("emptyFunction"),onImageClick:b("emptyFunction")};e.exports=c}),null);
__d("AdsMediaStandaloneLibraryImage.react",["cx","AdsImageLegacy","AdsMediaStandaloneLibraryMetadataImage.react","AdsMediaStandaloneLibrarySelectableImage.react","React","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={imageReady:d.props.image.hasDimensions()},d.$1=function(){d.setState({imageReady:!0})},d.$2=function(){return b("React").createElement(b("AdsMediaStandaloneLibraryMetadataImage.react"),{alt:d.props.alt,image:d.props.image,imageReady:d.state.imageReady,onExpandClick:d.props.onExpandClick})},d.$3=function(){return b("React").createElement(b("AdsMediaStandaloneLibrarySelectableImage.react"),{alt:d.props.alt,decoration:d.props.decoration,image:d.props.image,imageReady:d.state.imageReady,onExpandClick:d.props.onExpandClick,onImageClick:d.props.onImageClick})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){if(a.image.equals(this.props.image))return;var b=a.image.hasDimensions();this.setState({imageReady:b});b||a.image.setDimensionsReadyCallback(this.$1)};d.UNSAFE_componentWillMount=function(){this.state.imageReady||this.props.image.setDimensionsReadyCallback(this.$1)};d.render=function(){return b("React").createElement("div",{className:"_3tlt"},this.props.showImageMetadata?this.$2():this.$3())};return c}(b("React").Component);c.propTypes={alt:a.string,decoration:a.string.isRequired,image:a.instanceOf(b("AdsImageLegacy")).isRequired,onExpandClick:a.func.isRequired,onImageClick:a.func.isRequired,showImageMetadata:a.bool};c.defaultProps={decoration:"default",onExpandClick:b("emptyFunction"),onImageClick:b("emptyFunction"),showImageMetadata:!1};e.exports=c}),null);
__d("DimensionTracker",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1=[],this.$2=0}var b=a.prototype;b.setValue=function(a,b){this.$2++,this.$1.push({index:a,value:b})};b.getChangesSince=function(a){a=this.$1.slice(a,this.$2);return{changes:a,pointer:this.$2}};return a}();e.exports=a}),null);
__d("ImageRowItem.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.imageRowItems[this.props.rowIndex];if(a){var c=this.props.renderImage;c=a.map(c);return b("React").createElement("div",{key:"ImageRowItem"+String(a[0].getAdAccountHash())},c)}else return b("React").createElement("div",{key:"ImageRowItemFooter"},this.props.footerRow)};return c}(b("React").Component);e.exports=a}),null);
__d("MediaLibraryPlacement",["keyMirrorRecursive"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirrorRecursive")({ADS_MEDIA_LIBRARY:"",BIZ_MEDIA_LIBRARY:""});e.exports=a}),null);
__d("PhotoArrange",["sha256"],(function(a,b,c,d,e,f){__p&&__p();var g=.5,h=.5,i={height:-1,isOptimal:!1,isValid:!1};a=function(){"use strict";__p&&__p();function a(){this.$1=new Map(),this.$2=new Map()}var c=a.prototype;c.solve=function(a,b){__p&&__p();var c=b.map(function(a){return a.height/a.width}),d=this.$3(a,b);if(this.$1.has(d))return this.$1.get(d);var e;try{e=this.$4(a,b,c)}catch(d){e=this.$5(a,b,c)}this.$1.set(d,e);return e};c.$3=function(a,c){a=[String(a.containerWidth),String(a.marginPerImage),String(a.maxImageHeight),String(a.minImageHeight),String(a.minImageWidth)].concat(c.map(function(a){return[String(a.width),String(a.height)].join(",")})).join(",");return b("sha256")(a)};c.$5=function(a,b,c){var d=(a.maxImageHeight+a.minImageHeight)/2;return b.map(function(a,b){a=d/c[b];return{height:d,width:a}})};c.$4=function(a,b,c){__p&&__p();if(!b.length)return[];var d=i,e=0,f=i,g=0,h=b.length,k=a.maxImageHeight,l=a.minImageWidth,m=a.containerWidth,n=k/c[0],o=0;while(o<h-1){var p=Math.max(l,k/c[o+1]);if(n+p>m)break;else n+=p+a.marginPerImage,o++}p=[];m=[];for(;o<h;o++){e=o+1;p=b.slice(0,e);m=c.slice(0,e);k=this.$3(a,p);this.$2.has(k)?d=this.$2.get(k):(d=new j(a,m.slice(0,e)).solve(),this.$2.set(k,d));if(d.isValid&&d.isOptimal)break;else if(d.isValid)f=d,g=e;else{d=f;e=g;break}}if(d.isValid){var q=d.height;l=b.slice(0,e);l=l.map(function(b,a){return{width:q/c[a],height:q}});return l.concat(this.$4(a,b.slice(e),c.slice(e)))}else throw new Error("There is no valid solution to arrange these photos\n        under the specified constraints")};return a}();var j=function(){"use strict";__p&&__p();function a(a,b){var c=a.containerWidth,d=a.marginPerImage,e=a.maxImageHeight,f=a.minImageHeight;a=a.minImageWidth;this.$1=c;this.$2=b;this.$3=d;this.$4=e;this.$5=f;this.$6=a}var b=a.prototype;b.solve=function(){var a=this.$5,b=this.$4,c=(b+a)/2,d=this.$7(a),e=this.$7(c),f=this.$7(b);if(!d.isValid)return i;else if(f.isValid)return{height:b,isOptimal:f.isOptimal,isValid:f.isValid};else{while(!e.isValid||b-a>g)!e.isValid?b=c:a=c,c=(b+a)/2,e=this.$7(c);return{height:c,isOptimal:e.isOptimal,isValid:e.isValid}}};b.$7=function(a){var b=this,c=this.$2.reduce(function(c,d){d=Math.max(b.$6,a/d);return c+d+b.$3},-this.$3),d=c<this.$1;c=d&&c+h>this.$1;return{isOptimal:c,isValid:d}};return a}();e.exports=new a()}),null);
__d("AdsMediaLibrary.react",["cx","invariant","AdsImageLegacy","AdsImageValidation","AdsMediaLibraryExpandedAsset.react","AdsMediaPanelImageBox.react","AdsMediaStandaloneLibraryImage.react","DimensionTracker","ImageRowItem.react","InfiniteScroll.react","MediaLibraryPlacement","PhotoArrange","React","ReactDOM","Scroll","SimpleList.react","SUIBusinessTheme","SUISpinner.react","emptyFunction","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i={height:100,width:100},j=60;c=60;var k=290,l=90,m=210,n=14,o=48,p=550;d=60;f=50;g=0;var q=12,r=49,s=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){__p&&__p();var a,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=d=c.call.apply(c,[this].concat(f))||this,d.state={containerWidth:0,expandedImage:null},d.measureContainerWidth=function(){var a=d.refs.imagesContainer;if(a){a=b("ReactDOM").findDOMNode(a);a=a.offsetWidth;d.setState({containerWidth:a})}},d.$7=function(a){d.setState({expandedImage:a})},d.$6=function(){d.setState({expandedImage:null})},d.$2=function(a){return b("React").createElement(b("AdsMediaStandaloneLibraryImage.react"),{decoration:d.$9(a),image:a,key:a.getUniqueIdentifier(),ref:a.getUniqueIdentifier(),showImageMetadata:d.props.showStandaloneImageMetadata,onExpandClick:d.$7,onImageClick:function(b){return d.props.onImageClick(a,b.shiftKey)}})},d.$5=function(a){var c=!1,e=d.props.imageSpec;e&&(c=!b("AdsImageValidation").isWarningSize(a,e),d.props.igSpecificImageSpec&&(c=c||!b("AdsImageValidation").isWarningSize(a,d.props.igSpecificImageSpec)));return b("React").createElement(b("AdsMediaPanelImageBox.react"),{buyingTypes:d.props.buyingTypes,className:"_13u0",decoration:d.$9(a),igSpecificImageSpec:d.props.igSpecificImageSpec,image:a,imageSpec:e,isTooSmall:d.props.disableTooSmallImages&&c,key:a.getUniqueIdentifier(),ref:a.getUniqueIdentifier(),useMediaPanelRedesign:d.props.useMediaPanelRedesign,onImageClick:function(b){d.props.onImageClick&&d.props.onImageClick(a)},onImageDoubleClick:function(b){d.props.onImageDoubleClick&&d.props.onImageDoubleClick(a)}})},a)||babelHelpers.assertThisInitialized(d)}var d=a.prototype;d.componentDidMount=function(){b("setImmediate")(this.measureContainerWidth)};d.UNSAFE_componentWillReceiveProps=function(){this.measureContainerWidth()};d.render=function(){__p&&__p();var a=this,c=b("joinClasses")(this.props.className,"_3suv"),d=this.props.children;d&&(d=b("React").createElement("div",{className:"_13u2 clearfix"},d));var e=this.props.photoArrangeConstraints;if(this.state.containerWidth&&this.props.photoArrangeEnabled){var f=Math.max(0,this.state.containerWidth-e.containerPadding),g=this.props.imageList.map(function(a){return babelHelpers["extends"]({},a,{width:a.width||i.width,height:a.height||i.height})}),h=b("PhotoArrange").solve(babelHelpers["extends"]({},e,{containerWidth:f}),g);g=this.props.imageList.map(function(a,b){a.calculatedWidth=h[b].width;a.calculatedHeight=h[b].height;return a})}else g=this.props.imageList;if(this.props.standalone){var p=null;if(f){e=this.$1(g,f,e.marginPerImage,e.minImageWidth);var q=new(b("DimensionTracker"))();e.forEach(function(c,d){c=c[0];var e=a.props.showStandaloneImageMetadata?l:n;a.props.placement===b("MediaLibraryPlacement").BIZ_MEDIA_LIBRARY&&(e+=j);c=c.calculatedHeight+e;q.setValue(d,c)});q.setValue(e.length,r);var s=this.props.showStandaloneImageMetadata?k:m,t=this.state.containerWidth-o;p=b("React").createElement(b("SimpleList.react"),{height:this.props.height,item:b("React").createElement(b("ImageRowItem.react"),{footerRow:this.props.scrollingAreaFooter,imageRowItems:e,renderImage:this.$2,rowIndex:0}),rowCount:e.length+1,rowHeight:s,rowHeightTracker:q,width:t})}return b("React").createElement("div",{className:c,ref:"AdsMediaLibraryRoot"},b("React").createElement("div",{className:"_13t_"+(this.state.expandedImage?" _fas":""),ref:"imagesContainer"},p),this.$3(),this.$4())}else return b("React").createElement("div",{className:c,ref:"AdsMediaLibraryRoot"},b("React").createElement(b("InfiniteScroll.react"),{className:"_13u1",style:{height:this.props.height},onEndReached:this.props.onEndReached},d,b("React").createElement("div",{className:"_13t_",ref:"imagesContainer"},g.map(this.$5)),this.props.scrollingAreaFooter),this.$4())};d.$1=function(a,b,c,d){if(!a.length)return[];var e=[[]],f=0,g=0;a.forEach(function(a,h){h=Math.max(d,a.calculatedWidth);g+h>b&&(e.push([]),g=0,f++);e[f].push(a);g+=h+c});return e};d.$4=function(){return!this.props.isLoadingInitial?null:b("React").createElement("div",{className:"_13u3"},b("React").createElement(b("SUISpinner.react"),{background:"light",className:"_13t-",size:"large",theme:b("SUIBusinessTheme")}))};d.$3=function(){if(!this.state.expandedImage)return null;var a=this.state.expandedImage,c=Math.min(a.height,p),d=c*a.width/a.height;return b("React").createElement(b("AdsMediaLibraryExpandedAsset.react"),{height:c,key:"expanded_view",source:a.getUrl(),topBarHeight:this.props.topBarHeight,width:d,onClickClose:this.$6})};d.$8=function(a){return this.props.selectedImageList.some(function(b){return b.getUniqueIdentifier()==a})};d.$9=function(a){if(this.$8(a.getUniqueIdentifier()))return"selected";else if(!this.props.isClickEnabled)return"disabled";return"default"};d.scrollToImage=function(a){a=a.getUniqueIdentifier();a in this.refs||h(0,3814);a=b("ReactDOM").findDOMNode(this.refs[a]);var c=b("ReactDOM").findDOMNode(this),d=a.offsetTop;c!=a.offsetParent&&(d-=c.offsetTop);b("Scroll").setTop(c,d)};return a}(b("React").Component);s.propTypes={buyingTypes:a.arrayOf(a.string),disableTooSmallImages:a.bool,height:a.number.isRequired,imageList:a.arrayOf(a.instanceOf(b("AdsImageLegacy"))).isRequired,imageSpec:a.shape({minWarningWidth:a.number.isRequired,minWarningHeight:a.number.isRequired}),isClickEnabled:a.bool.isRequired,isLoadingInitial:a.bool,igSpecificImageSpec:a.object,onEndReached:a.func,onImageClick:a.func.isRequired,onImageDoubleClick:a.func,photoArrangeConstraints:a.shape({containerPadding:a.number.isRequired,maxImageHeight:a.number.isRequired,minImageHeight:a.number.isRequired,minImageWidth:a.number.isRequired,marginPerImage:a.number.isRequired}).isRequired,photoArrangeEnabled:a.bool,selectedImageList:a.array.isRequired,scrollingAreaFooter:a.object,showStandaloneImageMetadata:a.bool,standalone:a.bool,topBarHeight:a.number,useMediaPanelRedesign:a.bool,placement:a.string};s.defaultProps={disableTooSmallImages:!1,onImageClick:b("emptyFunction"),photoArrangeConstraints:{containerPadding:c,maxImageHeight:d,minImageHeight:f,minImageWidth:g,marginPerImage:q},selectedImageList:[],showStandaloneImageMetadata:!1,standalone:!1,useMediaPanelRedesign:!1};e.exports=s}),null);
__d("AdsMediaPanelInfiniteScrollFooter.react",["cx","fbt","FDSSpinner.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.props.onEndReached&&this.props.onEndReached()};d.render=function(){if(!this.props.imagesLoaded)return null;return this.props.fetchingNextPage?b("React").createElement("div",{className:"_4bnz"},b("React").createElement(b("FDSSpinner.react"),{shade:"dark"})):b("React").createElement("div",{className:"_4bn-"},b("React").createElement("div",{className:"_4bn_"},b("React").createElement("div",{className:"_4bo2"},h._("No more images found"))))};return c}(b("React").PureComponent);c.propTypes={fetchingNextPage:a.bool.isRequired,imagesLoaded:a.bool.isRequired,onEndReached:a.func};e.exports=c}),null);
__d("AdsImageUploadErrorStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({apiError:null,sizeError:null,formatError:null}));e.exports=a}),null);
__d("AdsImageUploadTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({DEFAULT:"DEFAULT",INVALID_FORMAT:"INVALID_FORMAT",INVALID_SIZE:"INVALID_SIZE"});e.exports={UploadFailedReason:a}}),null);
__d("AdsImageUploadErrorStore",["AdsDataAtom","AdsImageUploadApiErrorDataActionFlux","AdsImageUploadErrorMessagesUtils","AdsImageUploadErrorStoreState","AdsImageUploadFormatErrorDataActionFlux","AdsImageUploadLoadFailDataActionFlux","AdsImageUploadRemoveErrorsDataActionFlux","AdsImageUploadSizeErrorDataActionFlux","AdsImageUploadTypes","AdsImageUploadUploadFailDataActionFlux","AdsImageUploadUploadSuccessDataActionFlux","FluxReduceStore","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsImageUploadErrorMessagesUtils").getImageNotSupportedErrorMessages,h=b("AdsImageUploadErrorMessagesUtils").getImageTooSmallErrorMessages,i=b("AdsImageUploadErrorMessagesUtils").getAPIErrorMessages,j=b("AdsImageUploadTypes").UploadFailedReason,k=b("gkx")("779516");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("AdsImageUploadErrorStoreState"))()};d.__getActionTypes=function(){return k?[b("AdsImageUploadApiErrorDataActionFlux").actionType,b("AdsImageUploadFormatErrorDataActionFlux").actionType,b("AdsImageUploadLoadFailDataActionFlux").actionType,b("AdsImageUploadRemoveErrorsDataActionFlux").actionType,b("AdsImageUploadSizeErrorDataActionFlux").actionType,b("AdsImageUploadUploadFailDataActionFlux").actionType,b("AdsImageUploadUploadSuccessDataActionFlux").actionType]:null};d.reduce=function(a,c){__p&&__p();c=c.action;switch(c.type){case b("AdsImageUploadFormatErrorDataActionFlux").actionType:return a.set("formatError",c.message);case b("AdsImageUploadSizeErrorDataActionFlux").actionType:return a.set("sizeError",c.message);case b("AdsImageUploadApiErrorDataActionFlux").actionType:return a.set("apiError",c.message);case b("AdsImageUploadLoadFailDataActionFlux").actionType:return this.$AdsImageUploadErrorStore1(a,c.imageData);case b("AdsImageUploadUploadFailDataActionFlux").actionType:return this.$AdsImageUploadErrorStore2(a,c.imageData.errorMessage);case b("AdsImageUploadUploadSuccessDataActionFlux").actionType:return c.imageData?this.$AdsImageUploadErrorStore3(a):a;case b("AdsImageUploadRemoveErrorsDataActionFlux").actionType:return this.$AdsImageUploadErrorStore3(a)}return a};d.getUploadErrors=function(){var a=[];this.getState().forEach(function(b){b&&a.push(b)});return a};d.$AdsImageUploadErrorStore1=function(a,b){if(b.reasonForFail===j.INVALID_FORMAT)return a.set("formatError",g(b.file.type));else if(b.reasonForFail===j.INVALID_SIZE)return a.set("sizeError",h({minWarningWidth:b.minDimensions.width,minWarningHeight:b.minDimensions.height}));else return a};d.$AdsImageUploadErrorStore2=function(a,b){return a.set("apiError",i(b))};d.$AdsImageUploadErrorStore3=function(a){return a.merge({apiError:null,sizeError:null,formatError:null})};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("AdsDataAtom"))}),null);