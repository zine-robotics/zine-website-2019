if (self.CavalryLogger) { CavalryLogger.start_js(["3Da6f"]); }

__d("HiddenPromoteButton.react",["AdsLWIDialogUtils","AdsLWIInstanceType","AdsLWIProductUtils","FBLogger","PageTransitions","React","URI","adsLWICurrentDialogStateSelector","createCancelableFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsLWIDialogUtils").openLWIDialog;a=b("AdsLWIInstanceType").createRandomInstanceID;var h=b("AdsLWIProductUtils").isAdsLWIProduct;function i(){__p&&__p();var a=new(b("URI"))(window.location.href).getQueryData(),c=a.boosted_auto_open;if(c==null)return null;if(!h(String(c))){b("FBLogger")("boosted_component").mustfix("URI had invalid product specified: %s",String(c));return null}var d=a.notif_t||a.ref||"auto_open_unknown_source",e=a.boost_id?String(a.boost_id):"";a=a.target_id?String(a.target_id):null;return{product:c,boostID:e,placement:d,targetID:a}}var j=a();c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.maybeAutoOpenDialog=b("createCancelableFunction")(function(){var a=i();a&&!b("adsLWICurrentDialogStateSelector")().dialogState.instanceID&&g(j,d.props.pageID,a.placement,a.product,a.boostID,a.targetID);b("PageTransitions").registerCompletionCallback(d.maybeAutoOpenDialog)}),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("PageTransitions").registerCompletionCallback(this.maybeAutoOpenDialog)};d.componentWillUnmount=function(){this.maybeAutoOpenDialog.cancel()};d.render=function(){return null};return c}(b("React").PureComponent);e.exports=c}),null);
__d("ChatTabViewEvents",["Arbiter"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("Arbiter"))()}),null);
__d("XPagesPresenceController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/presence/",{})}),null);
__d("PagePresencePoller",["ActorURI","AsyncRequest","UserActivity","XPagesPresenceController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=9e4,h=0,i=function(a){h=Date.now();var c=b("XPagesPresenceController").getURIBuilder().getURI();c=b("ActorURI").create(c,a);new(b("AsyncRequest"))().setURI(c).send()};a={init:function(a){b("UserActivity").subscribe(function(){Date.now()-h>g&&i(a)}),setInterval(function(){b("UserActivity").isActive()&&i(a)},g)}};e.exports=a}),null);
__d("PageTimelineChainingTypeConstants",[],(function(a,b,c,d,e,f){e.exports={FANNING:"fanning",FOLLOW:"follow",SHOW_FOLLOW:"show_follow"}}),null);
__d("PagesTimelineChaining",["Arbiter","Banzai","ChatTabViewEvents","CSS","Event","PageLikeConstants","PagesFollowStore","PageTimelineChainingTypeConstants","Run","Style","SubscriptionsHandler","UIPagelet"],(function(a,b,c,d,e,f){__p&&__p();var g=0;a={_recentlyLikedPageIDs:{},_recentlyMessagedPageIDs:{},container:null,_subscriptions:[],_chatSubscriptions:[],_followSubscription:null,_isFollow:!1,init:function(a,c){__p&&__p();var d=this;this.container=a;this._followSubscription=new(b("SubscriptionsHandler"))();this._isFollow=c.isFollow;b("Run").onLeave(function(){return d._unsubscribe()});this._showChainSuggestions(c.pageID,!1)||(this._subscriptions=[b("Arbiter").subscribe(b("PageLikeConstants").LIKED,this.onLike.bind(this,c.pageID))],c.canFollow&&this._followSubscription.addSubscriptions(b("PagesFollowStore").addListener(function(){var a=b("PagesFollowStore").getState();if(!(c.pageID in a))return;a[c.pageID]&&!d._isFollow&&d._onFollow(c.pageID);d._isFollow=a[c.pageID]})),c.enableLikeCheckup&&this._subscriptions.push(b("Arbiter").subscribe(b("PageLikeConstants").UNLIKED,this.onUnlike.bind(this))),c.onMessageEnabled&&this._chatSubscriptions.push(b("ChatTabViewEvents").subscribe("chat-send-to-page",this.onMessage.bind(this,c.pageID))))},onScroll:function(a){if(document.documentElement){var b=window.pageYOffset||document.documentElement.scrollTop;b<=g&&(this._showChainSuggestions(a,!0),this._unsubscribe());g=b}},onLike:function(a,b,c){c.profile_id===a&&c.target&&(this._recentlyLikedPageIDs[a]=!0,this._showChainSuggestions(a,!1),this._unsubscribe())},_onFollow:function(a){this._showChainFollowSuggestions(a),this._unsubscribe()},onMessage:function(a,b,c){c&&c.pageID===a&&(this._recentlyMessagedPageIDs[a]=!0,this._showMessageSuggestions(a),this._unsubscribe())},onUnlike:function(a,c){b("UIPagelet").loadFromEndpoint("PagesLikeCheckupPagelet",this.container,{},{displayCallback:this.displayCallback.bind(this)}),this._unsubscribe()},displayCallback:function(a){a&&a();a=this.container.firstChild;a&&b("Style").set(this.container,"height",a.offsetHeight+"px")},_showChainSuggestions:function(a,c){if(!(a in this._recentlyLikedPageIDs))return!1;c=b("PageTimelineChainingTypeConstants").FANNING;b("UIPagelet").loadFromEndpoint("PagesTimelineChainingPagelet",this.container,{pageID:a,type:c},{displayCallback:this.displayCallback.bind(this)});return!0},_showChainFollowSuggestions:function(a){var c=b("PageTimelineChainingTypeConstants").FOLLOW;b("UIPagelet").loadFromEndpoint("PagesTimelineChainingPagelet",this.container,{pageID:a,type:c},{displayCallback:this.displayCallback.bind(this)});return!0},_showMessageSuggestions:function(a){if(!(a in this._recentlyMessagedPageIDs))return!1;b("UIPagelet").loadFromEndpoint("PagesMessageChainingPagelet",this.container,{pageID:a},{displayCallback:this.displayCallback.bind(this)});return!0},dismissCallback:function(a,c,d){b("CSS").hide(this.container);delete this._recentlyLikedPageIDs[c];this._unsubscribe();if(d==="friend_inviter_chaining"){a="pages_growth_general_analytical_logger";d={id:c,event:"dismiss_carousel",event_target:"friend_inviter_chaining",feature_name:"friend_inviter_chaining_investigate"};b("Banzai").post(a,d)}},attachDismissCallback:function(a,c,d,e){b("Event").listen(a,"click",this.dismissCallback.bind(this,c,d,e))},_unsubscribe:function(){this._subscriptions.length&&(this._subscriptions.forEach(function(a){return b("Arbiter").unsubscribe(a)}),this._subscriptions=[]),this._chatSubscriptions.length&&(this._chatSubscriptions.forEach(function(a){return b("ChatTabViewEvents").unsubscribe(a)}),this._chatSubscriptions=[]),this._followSubscription&&this._followSubscription.release()}};e.exports=a}),null);
__d("PagesManagerUserMessagePrompt",["ChatAppStore","ChatOpenTabEventLogger","ChatVisibility","FantaTabActions","MercuryIDs","MessengerDiscoveryEntryPoint","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=2e3,h={openTab:function(a,c,d){__p&&__p();c===void 0&&(c=b("MessengerDiscoveryEntryPoint").FB_PAGE_USER_MESSAGE_PROMPT);d===void 0&&(d=g);if(!b("ChatVisibility").isOnline())return;setTimeout(function(){if(b("ChatAppStore").getState().isInitialized)h._openTabAndLog(a,c);else var d=b("ChatAppStore").addListener(function(){b("ChatAppStore").getState().isInitialized&&(b("setImmediate")(function(){h._openTabAndLog(a,c)}),d.remove())})},d)},_openTabAndLog:function(a,c){var d=b("MercuryIDs").getThreadIDFromUserID(a);b("FantaTabActions").openTab(d,[c]);b("ChatOpenTabEventLogger").logUserAutoOpen(c,a);b("PagesLogger").log(a,b("PagesLoggerEventEnum").IMPRESSION,b("PagesLoggerEventTargetEnum").PAGE_MESSAGE_PROMPT,null,["pages_growth"],{})}};e.exports=h}),null);