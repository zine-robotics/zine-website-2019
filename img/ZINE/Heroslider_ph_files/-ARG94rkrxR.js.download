if (self.CavalryLogger) { CavalryLogger.start_js(["W36k2"]); }

__d("TypedImmutable",["immutable"],(function(a,b,c,d,e,f){"use strict";a={create:b("immutable").Iterable.Indexed.bind(b("immutable").Iterable)};c={create:b("immutable").Iterable.Keyed.bind(b("immutable").Iterable)};d={create:b("immutable").List.bind(b("immutable"))};f={create:b("immutable").Map.bind(b("immutable"))};var g={create:b("immutable").Set.bind(b("immutable"))},h=b("immutable").Range.bind(b("immutable"));b=b("immutable").is.bind(b("immutable"));e.exports={ImmIndexedIterable:a,ImmKeyedIterable:c,ImmList:d,ImmMap:f,ImmRange:h,ImmSet:g,is:b}}),null);
__d("ImmCompacting",["TypedImmutable"],(function(a,b,c,d,e,f){"use strict";b("TypedImmutable").ImmKeyedIterable;function g(a){return a.filter(function(a){return a!=null})}function a(a){return g(a)}e.exports={compactImmKeyedIterable:a}}),null);
__d("PromiseThrottler",["invariant","Promise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){a>0||g(0,5530),Object.defineProperty(this,"concurrency",{value:a}),this.$1=[],this.$2=0}var c=a.prototype;c.$3=function(){var a=this,c=function(){++a.$2;var c=a.$1.shift();b("promiseDone")(c.create(),function(b){c.resolve(b),--a.$2,a.$3()},function(b){c.reject(b),--a.$2,a.$3()})};while(this.$2<this.concurrency&&this.$1.length>0)c()};c.throttle=function(a){var c=this;return new(b("Promise"))(function(b,d){c.$1.push({create:a,resolve:b,reject:d}),c.$3()})};return a}();e.exports=a}),null);
__d("PromiseThrottlerWithDelay",["invariant","Promise","PromiseThrottler","promiseDone","promiseTimeout"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c){c>0||g(0,473),Object.defineProperty(this,"delay",{value:c}),this.$1=new(b("PromiseThrottler"))(a)}var c=a.prototype;c.throttle=function(a){var c=this;return new(b("Promise"))(function(d,e){return c.$1.throttle(function(){var f=a();b("promiseDone")(f,d,e);return f.then(function(){return b("promiseTimeout")(c.delay)},function(){return b("promiseTimeout")(c.delay)})})})};return a}();e.exports=a}),null);
__d("FBVerticalCollapsingAnimation.react",["DateConsts","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("DateConsts").MS_PER_SEC,h=.5;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.state={animation:"none",height:0,opacity:0};return b}var d=c.prototype;d.$1=function(a){return this.props.visibility==="visible"?{height:this.refs.inner.offsetHeight,opacity:1}:{height:0,opacity:0}};d.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();var b=this;if(a.visibility===this.props.visibility)return;var c=this.$1(this.props);this.setState(babelHelpers["extends"]({},c,{animation:"running"}));setTimeout(function(){var c=b.$1(a);b.setState(babelHelpers["extends"]({},c,{animation:"running"}));setTimeout(function(){b.setState({animation:"none"})},h*g)},0)};d.$2=function(){return b("React").createElement("div",{ref:"inner"},this.props.children)};d.render=function(){return this.state.animation==="none"?this.props.visibility==="hidden"?null:b("React").createElement("div",{ref:"outer",style:{overflow:"hidden"}},this.$2()):b("React").createElement("div",{ref:"outer",style:{height:this.state.height,overflow:"hidden",opacity:this.state.opacity,transition:"height "+h+"s ease-in, "+("opacity "+h+"s ease-in")}},this.$2())};return c}(b("React").Component);e.exports=a}),null);
__d("getIterableContiguousSegments",["TypedImmutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("TypedImmutable").ImmList,h=function(a){return!!a};function a(a,b){b===void 0&&(b=h);var c=[],d=null;a.forEach(function(e,f){b(e,f,a)?d===null?d={first:f,last:f}:d.last=f:d!==null&&(c.push(d),d=null)});d!==null&&c.push(d);return g.create(c)}e.exports=a}),null);
__d("Day",["DateConsts","TypedImmutable","padNumber"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("DateConsts").MS_PER_DAY,h=b("TypedImmutable").ImmIndexedIterable;a=function(){__p&&__p();function a(a){this.daysSinceEpoch=Math.floor(a)}a.compare=function(a,b){return a.daysSinceEpoch-b.daysSinceEpoch};a.countBetween=function(a,b){return Math.abs(b.daysSinceEpoch-a.daysSinceEpoch)};var c=a.prototype;c.laterThan=function(b){return a.compare(this,b)>0};c.laterThanOrEqualTo=function(b){return a.compare(this,b)>=0};c.earlierThan=function(b){return a.compare(this,b)<0};c.earlierThanOrEqualTo=function(b){return a.compare(this,b)<=0};c.equals=function(b){return a.compare(this,b)===0};c.addDays=function(b){return new a(this.daysSinceEpoch+b)};c.getIndexInWeek=function(){return this.toUTCDate().getUTCDay()};a.fromISOString=function(b){b=b.split("-");var c=b[0],d=b[1];b=b[2];b={dayOfTheMonth:parseInt(b,10),month:parseInt(d,10)-1,year:parseInt(c,10)};return!Number.isFinite(b.dayOfTheMonth)||!Number.isFinite(b.month)||!Number.isFinite(b.year)?null:a.fromYearMonthDay(b.year,b.month,b.dayOfTheMonth)};a.fromYearMonthDay=function(b,c,d){return a.fromUTCMilliseconds(Date.UTC(b,c,d))};a.fromUTCDate=function(b){return a.fromUTCMilliseconds(b.getTime())};a.fromUTCMilliseconds=function(b){return new a(b/g)};c.valueOf=function(){return this.daysSinceEpoch};a.rangeIterator=function(a,b){var c=a,d=(a={next:function(){if(c.laterThanOrEqualTo(b))return{done:!0};var a=c;c=c.addDays(1);return{done:!1,value:a}}},a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=function(){return d},a);return d};a.range=function(b,c){return h.create(a.rangeIterator(b,c))};c.toUTCDate=function(){return new Date(this.toUTCMilliseconds())};c.toUTCMilliseconds=function(){return this.daysSinceEpoch*g};c.toISOString=function(){var a=this.toUTCDate();return a.getUTCFullYear()+"-"+(b("padNumber")(a.getUTCMonth()+1,2)+"-")+b("padNumber")(a.getUTCDate(),2)};c.toString=function(){return this.toISOString()};return a}();e.exports=a}),null);
__d("splitIterableByMaxSize",["invariant"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){a>0||g(0,6167);var c=b.count(),d=Math.ceil(c/Math.ceil(c/a));Number.isNaN(d)||d<=a||g(0,6168);return b.groupBy(function(a,b){return Math.floor(b/d)}).valueSeq()}e.exports=a}),null);
__d("LIAds",["AdsAdgroupSpecUtils","AdsGraphAPI","AdsPromotedObjectTypes","AdsUnifiedCreativeFieldUtils","Day","LIConfig","LILoadedObject","PromiseThrottlerWithDelay","TypedImmutable","getByPath","promiseDone","splitIterableByMaxSize"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LIConfig").ACCESS_TOKEN,h=b("LILoadedObject").getLoadedObject,i=b("LILoadedObject").getLoadFailedObject,j=b("LILoadedObject").getLoadingObject,k=b("TypedImmutable").ImmKeyedIterable,l=b("TypedImmutable").ImmSet,m=new(b("PromiseThrottlerWithDelay"))(6,500);function n(){var a=Math.floor((window.devicePixelRatio||1)*32);return"creative.fields(object_id, object_type, object_story_id, object_story_spec, thumbnail_url)"+(".thumbnail_width("+a+").thumbnail_height("+a+")")}function o(a){var c=b("AdsAdgroupSpecUtils").getPageIDForPost(a);if(c!=null)return c;c=b("AdsAdgroupSpecUtils").getPagePostID(a);if(c==null)return null;a=c.indexOf("_");return a<0?null:c.substr(0,a)}function p(a){var c=a;a={id:a.campaign_id,objective:a.campaign.objective};return b("AdsUnifiedCreativeFieldUtils").getValue("message",c,a,b("AdsPromotedObjectTypes").NONE)}function q(a){return{dateRange:{start:new Date(a.adset.start_time),end:a.adset.end_time?new Date(a.adset.end_time):null},objective:a.campaign.objective,pageID:o(a),peopleReached:a.reach,result:{count:a.result,objective:a.objective_for_results},thumbnailURL:b("getByPath")(a,["creative","thumbnail_url"]),totalSpent:Number(a.lifetime_spent),title:p(a)||a.name||""}}function r(a){return m.throttle(function(){return b("AdsGraphAPI").get(e.id).objects("ad",a.toArray()).get({access_token:g,fields:[n(),"account_id","adset.fields(start_time,end_time)","campaign.fields(objective)","campaign_id","lifetime_spent","name","objective_for_results","reach","result"]}).then(function(a){return k.create(a).map(q)})})}function s(a,c,d,e){__p&&__p();if(d==null||a==null||a.loadStatus!=="loaded"||e==null)return l.create();var f=a.value.get(d);if(f==null)return l.create();a=b("Day").range(e.begin,e.end);e=a.reduce(function(a,b){b=f.spendByAdIDLoadedByDay.get(b);if(b==null)return a;return b.loadStatus==="loaded"?a.union(b.value.keySeq()):a.union(b.partialValue.keySeq())},l.create());a=c.get(d);return a==null||a.loadStatus!=="loaded"?e:e.union(a.value)}function t(a){return b("splitIterableByMaxSize")(50,a.valueSeq())}function u(a){__p&&__p();var c=a.adsByID,d=a.adAccountsByID,e=a.adIDsJustCreatedByAdAccountID,f=a.selectedAdAccountID,g=a.dayRange,h=a.dispatch;a=s(d,e,f,g);d=a.filter(function(a){return!c.has(a)});e=t(d);e.forEach(function(a){b("promiseDone")(r(a),function(a){h({adsByID:a.toMap(),type:"adsLoaded"})},function(b){h({adIDs:a.toSet(),error:b,type:"adsLoadFailed"})})});return c.merge(d.toKeyedSeq().map(function(a){return j()}))}function v(a,b,c){var d=i(c);return a.merge(b.toKeyedSeq().map(function(){return d}))}function w(a,b){return a.merge(b.toKeyedSeq().map(function(a){return h(a)}))}function a(a){var b=a.payload;switch(b.type){case"adsLoadFailed":return v(a.adsByID,b.adIDs,b.error);case"adsLoaded":return w(a.adsByID,b.adsByID)}return u(a)}e.exports={AD_API_THROTTLER:m,getPageIDFromAdSpec:o,updateAdsByID:a}}),null);
__d("LIAdAccountIDToAdsJustCreated",["AdsGraphAPI","DateConsts","LIAds","LIConfig","LILoadedObject","TypedImmutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("DateConsts").SEC_PER_DAY,h=b("LIAds").AD_API_THROTTLER,i=b("LIConfig").ACCESS_TOKEN,j=b("LILoadedObject").getLoadedObject,k=b("LILoadedObject").getLoadFailedObject,l=b("LILoadedObject").getLoadingObject,m=b("TypedImmutable").ImmSet;function n(a){var c=Math.floor(b("DateConsts").getCurrentTimeInSeconds())-2*g;return h.throttle(function(){return b("AdsGraphAPI").get(e.id).adaccount(a).edge("ads").get({access_token:i,effective_status:["ACTIVE"],updated_since:c}).then(function(a){return m.create(a.data.map(function(a){return a.id}))})})}function o(a,c,d){var e=a.get(d);if(e!=null)return a;b("promiseDone")(n(d),function(a){c({adAccountID:d,adIDsJustCreated:a,type:"adAccountToAdIDsJustCreatedLoaded"})},function(a){c({error:a,adAccountID:d,type:"adAccountToAdIDsJustCreatedLoadFailed"})});return a.set(d,l())}function p(a,b,c){return c==null?a:o(a,b,c)}function q(a,b,c){return a.set(b,j(c))}function r(a,b,c){return a.set(b,k(c))}function a(a){var b=a.payload;switch(b.type){case"adAccountToAdIDsJustCreatedLoadFailed":return r(a.adIDsJustCreatedByAdAccountID,b.adAccountID,b.error);case"adAccountToAdIDsJustCreatedLoaded":return q(a.adIDsJustCreatedByAdAccountID,b.adAccountID,b.adIDsJustCreated)}return p(a.adIDsJustCreatedByAdAccountID,a.dispatch,a.selectedAdAccountID)}e.exports={updateAdsJustCreated:a}}),null);
__d("PagesInsightsNearbyDay",["Day","SpectrumTimeScale","TypedImmutable","formatDate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("TypedImmutable").ImmSet,h={Day:b("Day"),convertDayRangeToUTCDateRange:function(a){return{begin:a.begin.toUTCDate(),end:a.end.toUTCDate()}},convertUTCDateRangeToDayRange:function(a){return{begin:b("Day").fromUTCDate(a.begin),end:b("Day").fromUTCDate(a.end)}},convertDayRangeToSpectrumTimeScale:function(a){a=h.convertDayRangeToUTCDateRange(a);a=b("SpectrumTimeScale")().domain([a.begin,a.end]).interval(b("SpectrumTimeScale").Intervals.Day);a.setTooltipFormat("D, M j, Y");return a},formatDay:function(a,c,d){d=babelHelpers["extends"]({},d,{utc:!0});return b("formatDate")(a.toUTCDate(),c,d)},getDayRangeIterator:function(a){return b("Day").rangeIterator(a.begin,a.end)},subtractDayRange:function(a,b){if(b==null||b.end.earlierThanOrEqualTo(a.begin)||b.begin.laterThanOrEqualTo(a.end))return g.create([a]);if(b.begin.earlierThanOrEqualTo(a.begin)&&b.end.laterThanOrEqualTo(a.end))return g.create();if(b.begin.laterThan(a.begin)&&b.end.earlierThan(a.end))return g.create([{begin:a.begin,end:b.begin},{begin:b.end,end:a.end}]);return b.begin.laterThan(a.begin)?g.create([{begin:a.begin,end:b.begin}]):g.create([{begin:b.end,end:a.end}])},joinDayRanges:function(a,b){if(b==null)return g.create([a]);return a.end.earlierThan(b.begin)||a.begin.laterThan(b.end)?g.create([a,b]):g.create([{begin:a.begin.earlierThan(b.begin)?a.begin:b.begin,end:a.end.laterThan(b.end)?a.end:b.end}])},splitDayRangeByMaxSize:function(a,c){return b("Day").range(c.begin,c.end).groupBy(function(b,c){return Math.floor(c/a)}).map(function(a){return{begin:a.first(),end:a.last().addDays(1)}}).toSet()},groupConsecutiveDays:function(a){return a.toList().sort(b("Day").compare).groupBy(function(a,b){return b-a.daysSinceEpoch}).valueSeq().map(function(a){return{begin:a.first(),end:a.last().addDays(1)}})}};e.exports=h}),null);
__d("LIAdAccountsForPage",["AdsGraphAPI","DateConsts","GraphAPIPaging","ImmCompacting","LIAds","LIConfig","LILoadedObject","PagesInsightsNearbyDay","TypedImmutable","nullthrows","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("DateConsts").DAYS_PER_WEEK,h=b("ImmCompacting").compactImmKeyedIterable,i=b("LIAds").AD_API_THROTTLER,j=b("LIConfig").ACCESS_TOKEN,k=b("LILoadedObject").getLoadedObject,l=b("LILoadedObject").getLoadFailedObject,m=b("LILoadedObject").getLoadingObject,n=b("PagesInsightsNearbyDay").Day,o=b("PagesInsightsNearbyDay").groupConsecutiveDays,p=b("PagesInsightsNearbyDay").splitDayRangeByMaxSize,q=b("TypedImmutable").ImmIndexedIterable,r=b("TypedImmutable").ImmKeyedIterable,s=b("TypedImmutable").ImmMap;function t(a){return b("AdsGraphAPI").get(e.id).object("page",a).edge("adaccounts").get({access_token:j,fields:["account_id","currency","name"]}).then(b("GraphAPIPaging").allPages()).then(function(a){return r.create(q.create(a.data).map(function(a){return[a.account_id,{displayName:a.name,currencyCode:a.currency,spendByAdIDLoadedByDay:s.create(),adIDsJustCreated:null}]}))})}function u(a){return JSON.stringify({since:a.begin.toISOString(),until:a.end.addDays(-1).toISOString()})}function v(a){return q.create(a).groupBy(function(a){return b("nullthrows")(n.fromISOString(a.date_start))}).toMap().map(function(a){return s.create(a.map(function(a){return[a.ad_id,Number(a.spend)]}))})}function w(a,b){return b.next==null?null:function(){return x(a,function(){return b.next()})}}function x(a,b){return i.throttle(function(){return b().then(function(b){return{dayRange:a,fetchNextPage:w(a,b),spendByAdIDByDay:v(b.data)}})})}function y(a,c){return x(c,function(){return b("AdsGraphAPI").get(e.id).adaccount(a).edge("insights").get({access_token:j,fields:["ad_id","date_start","spend"],level:"ad",time_increment:1,time_range:u(c)})})}function z(a,b){a=n.range(a.begin,a.end).toSetSeq().toKeyedSeq();a=a.map(b);return h(a)}function A(a,b,c){b=z(b,function(b){var d=a.get(b);return d!=null&&d.loadStatus==="loading"?c(d.partialValue,b):null});return a.merge(b)}function B(a,b){var c=b.dayRange,d=b.fetchNextPage,e=b.spendByAdIDByDay;return A(a,c,function(a,b){b=e.get(b);a=a.merge(b);return d==null?k(a):m(a)})}function C(a,b,c){return A(a,b,function(a,b){return l(c,a)})}function D(a,b){return babelHelpers["extends"]({},a,{spendByAdIDLoadedByDay:b})}function E(a,c){b("promiseDone")(t(a),function(a){a=a.toMap();c({adAccountsByID:a,type:"adAccountsFetchSuccess"})},function(a){c({error:a,type:"adAccountsFetchFailure"})})}function a(a){var b=a.adAccountsByID,c=a.payload;if(b==null){E(a.pageID,a.dispatch);return m()}switch(c.type){case"adAccountsFetchFailure":return l(c.error);case"adAccountsFetchSuccess":return k(c.adAccountsByID)}return b}function F(a,b,c){if(a==null||a.loadStatus!=="loaded")return a;var d=a.value.get(b);if(d==null)return a;c=c(d,b);d=a.value.set(b,c);return k(d)}function G(a,c,d,e){b("promiseDone")(d,function(b){e({adAccountID:a,spendByAdIDByDayPage:b,type:"adAccountSpendByAdIDByDayPageLoaded"})},function(b){e({adAccountID:a,dayRange:c,error:b,type:"adAccountSpendByAdIDByDayLoadFailed"})})}function H(a){__p&&__p();var b=a.adAccountsByID,c=a.dayRange,d=a.dispatch;a=a.selectedAdAccountID;return a==null?b:F(b,a,function(a,b){__p&&__p();if(c==null)return a;var e=n.range(c.begin,c.end).toSet();e=e.subtract(a.spendByAdIDLoadedByDay.keySeq());var f=o(e).map(function(a){return p(g,a)}).flatten(1);f.forEach(function(a){var c=y(b,a);G(b,a,c,d)});f=e.toKeyedSeq().map(function(){return m(s.create())});e=a.spendByAdIDLoadedByDay;e=e.merge(f);return D(a,e)})}function I(a,b,c,d){return F(a,b,function(a){var e=c.dayRange,f=c.fetchNextPage;f!=null&&G(b,e,f(),d);e=a.spendByAdIDLoadedByDay;f=B(e,c);return D(a,f)})}function J(a,b,c,d){return F(a,b,function(a){var b=a.spendByAdIDLoadedByDay;b=C(b,c,d);return D(a,b)})}function c(a){var b=a.payload,c=H(a);switch(b.type){case"adAccountSpendByAdIDByDayLoadFailed":return J(c,b.adAccountID,b.dayRange,b.error);case"adAccountSpendByAdIDByDayPageLoaded":return I(c,b.adAccountID,b.spendByAdIDByDayPage,a.dispatch)}return c}e.exports={fetchAdAccountsForPage:t,fetchAdSpend:y,mergeAdSpendPage:B,mergeAdSpendLoadFailure:C,setAdAccountSpend:D,updateAdAccountsByID:a,updateAdAccountsSpend:c,updateOneAdAccount:F}}),null);
__d("LightweightImmutable",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(a){Object.assign(this,a),Object.defineProperty(this,"dataForValueOf",{value:{fieldMap:null}})}var c=a.prototype;c.valueOf=function(){var a=this.dataForValueOf.fieldMap;a==null&&(a=this.dataForValueOf.fieldMap=b("immutable").Map(this));return a};return a}();e.exports=a}),null);
__d("LIHatchingBand.react",["LightweightImmutable","React","ReactART","Rectangle.art","SpectrumDataVisualization","SpectrumUtilities","TypedImmutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("TypedImmutable").is,h=b("ReactART").Group;a=b("React").PropTypes;var i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}a.create=function(b,c){return new a({width:b,height:c})};return a}(b("LightweightImmutable")),j=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}a.create=function(b,c){return new a({x:b,y:c})};return a}(b("LightweightImmutable")),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("LightweightImmutable"));c=b("React").createClass({displayName:"HatchingBand",mixins:[b("SpectrumDataVisualization").Mixin],propTypes:{color:a.oneOfType([a.string,a.object]),from:a.any.isRequired,to:a.any.isRequired,onMouseMove:a.func},_currentMoveData:null,_onMouseMove:function(a){g(a,this._currentMoveData)||(this._currentMoveData=a,this.props.onMouseMove&&this.props.onMouseMove(a))},handleEvent:function(a){__p&&__p();if(this.props.onMouseMove==null)return;if(a.type==="mouseout"){this._onMouseMove(null);return}if(a.type!=="mousemove")return;var c=this.props,d=c.from;c=c.to;var e=b("SpectrumDataVisualization").getScaleX(this.props),f=this.props.scaleY;f=b("SpectrumUtilities").getOuterRange(f);d={bottom:f[0],left:e(d),right:e(c),top:f[1]};a.x>=d.left&&a.x<=d.right?this._onMouseMove(new k({position:j.create(a.x,a.y),viewport:i.create(this.props.width,this.props.height)})):this._onMouseMove(null)},render:function(){var a=this.props,c=a.from;a=a.to;var d=b("SpectrumDataVisualization").getScaleX(this.props),e=this.props.scaleY;e=b("SpectrumUtilities").getOuterRange(e);var f=e[0];e=e[1];c=d(c);d=d(a);return b("React").createElement(h,null,b("React").createElement(b("Rectangle.art"),{fill:this.props.color,height:e-f,opacity:1,width:d-c,x:c,y:f}))}});e.exports={HatchingBand:c,MouseMoveData:k,Point2D:j,Size2D:i}}),null);
__d("LIChartHatching",["LIHatchingBand.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LIHatchingBand.react").HatchingBand,h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAAXNSR0IArs4c6QAAAE1JREFUGBmF0WEOACAEBeB0BPe/IleQVssS8vd982yAiBCxJcPMmoCIJKAtoWn/Cu2J0dmxLgmQE0HdKzwKxYUyYagQG9Vioq+wuvozA3+2KaU7oDvTAAAAAElFTkSuQmCC",i={applyFill:function(a){a.fillImage(h,6,6,0,0)}};function a(a,c,d){var e=a.end.addDays(-1);return c.map(function(c){var f=c.first.toUTCDate();c.first.laterThan(a.begin)&&f.setUTCHours(-12);var h=c.last.toUTCDate();h.setUTCDate(h.getUTCDate()+1);c.last.earlierThan(e)&&h.setUTCHours(12);return b("React").createElement(g,{color:i,from:f,key:"band-"+c.first.toISOString(),to:h,onMouseMove:function(a){return void (d&&d(c,a))}})}).toArray()}e.exports={renderChartHatching:a}}),null);
__d("LIHighPerformingMarker.react",["Circle.art","React","ReactART"],(function(a,b,c,d,e,f){__p&&__p();var g=b("ReactART").Group;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.color,d=a.x;a=a.y;return b("React").createElement(g,null,b("React").createElement(b("Circle.art"),{radius:5,stroke:c,strokeWidth:1,x:d,y:a}),b("React").createElement(b("Circle.art"),{radius:3,fill:c,x:d,y:a}))};return c}(b("React").Component);e.exports=a}),null);
__d("LIHighPerformingChartMarker.react",["LIHighPerformingMarker.react","React","ReactART","SpectrumDataVisualization","SpectrumUtilities"],(function(a,b,c,d,e,f){__p&&__p();var g=b("ReactART").Group,h=b("ReactART").Path,i=b("ReactART").Shape;a=b("React").PropTypes;c=b("React").createClass({displayName:"HighPerformingChartMarker",mixins:[b("SpectrumDataVisualization").Mixin],propTypes:{color:a.string.isRequired,x:a.any.isRequired},getTop:function(){var a=b("SpectrumUtilities").getOuterRange(this.props.scaleY);return a[1]-5},getX:function(){return Math.floor(this.props.scaleX(this.props.x))+.5},_getYDomain:function(){var a=this.getTop(),c=b("SpectrumUtilities").getOuterRange(this.props.scaleY)[0];return[a-8,c]},_renderMark:function(){var a=this.getX(),c=this._getYDomain(),d=this.props.color;return b("React").createElement(b("LIHighPerformingMarker.react"),{color:d,x:a,y:c[0]})},_renderLine:function(){var a=this.getX(),c=this._getYDomain(),d=h().moveTo(a,c[0]),e=this.props.theme.markers;d=d.lineTo(a,c[1]);return b("React").createElement(i,{d:d,stroke:e.lineColor,strokeWidth:e.lineWidth})},render:function(){return b("React").createElement(g,null,this._renderLine(),this._renderMark())}});e.exports=c}),null);
__d("LIRadiusFormatter",["fbt","invariant","CurrentLocale"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){return b("CurrentLocale").get()==="en_US"?i(a)+"ft":g._({"*":"{value} m"},[g._param("value",a,[0,a])])}function c(a){return b("CurrentLocale").get()==="en_US"?i(a)+" feet":g._({"*":"{value} metres"},[g._param("value",a,[0,a])])}function i(a){a===50||h(0,433);return 165}e.exports={getRadiusWithUnit:c,getRadiusWithUnitAbbreviated:a}}),null);
__d("PagesInsightsNearbyTooltipHelp.react",["ix","Image.react","React","TooltipMixin"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("React").createClass({displayName:"ComponentWithTooltipMixin",mixins:[b("TooltipMixin")],render:function(){return b("React").Children.only(this.props.children)}});a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(h,{tooltip:this.props.helpText},b("React").createElement(b("Image.react"),{className:this.props.className,src:g("28631")}))};return c}(b("React").Component);e.exports=a}),null);
__d("PagesInsightsNearbyLegendLineKeyWithTooltipHelp.react",["cx","InsightsLegendLineKey.react","PagesInsightsNearbyTooltipHelp.react","React"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("span",{className:"_5fi4"},b("React").createElement(b("InsightsLegendLineKey.react"),{color:this.props.lineColor},this.props.title),b("React").createElement(b("PagesInsightsNearbyTooltipHelp.react"),{helpText:this.props.helpText,className:"_5fi5"}))};return c}(b("React").Component);e.exports=a}),null);
__d("formatDay",["Day","formatDate"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("formatDate")(c.toUTCDate(),a,{utc:!0})}e.exports=a}),null);
__d("pagesInsightsNearbyPotentialReachGetFbt",["fbt","React","XUIText.react","intlNumUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("intlNumUtils").formatNumberWithThousandDelimiters;function a(a){return g._({"*":"Create an ad to reach people near your business. You can reach up to {number of people}{non-breaking space}people within {distance} of your business."},[g._param("number of people",b("React").createElement(b("XUIText.react"),{weight:"bold"},h(a.count)),[0,a.count]),g._param("non-breaking space","\xa0"),g._param("distance",i(a.distance))])}function c(a){return g._({"*":"Create a Local Awareness ad to reach up to {number of people}{non-breaking space}people within {distance} of your business."},[g._param("number of people",b("React").createElement(b("XUIText.react"),{weight:"bold"},h(a.count)),[0,a.count]),g._param("non-breaking space","\xa0"),g._param("distance",i(a.distance))])}function i(a){var b=a.unit;return g._({"*":{"kilometer":"{value}{non-breaking space}kilometre","kilometers":"{value}{non-breaking space}kilometres","mile":"{value}{non-breaking space}mile","miles":"{value}{non-breaking space}miles"}},[g._param("value",a.value,[0,a.value]),g._param("non-breaking space","\xa0"),g._enum(a.value>1?b+"s":b,{kilometer:"kilometer",kilometers:"kilometers",mile:"mile",miles:"miles"})])}e.exports={pagesInsightsNearbyDistanceGetFbt:i,pagesInsightsNearbyPotentialReachGetFbt:a,pagesInsightsNearbyPotentialReachGetFbtConcise:c}}),null);
__d("LIAdPerformanceCard.react",["cx","fbt","ix","AdsAPIObjectiveStrings","AdsCMPageValues","AdsCMURLParams","AdsCMURLValuesMap","AdsCurrencyFormatter","AdsRichSelector.react","AdsSharedLinkUtils","ContextualLayerAutoFlip","ContextualLayerHideOnScroll","Currency","HubbleCard","Image.react","InsightsLegend_DEPRECATED.react","Layout.react","LIChartHatching","LIHighPerformingChartMarker.react","LIHighPerformingMarker.react","Link.react","LIRadiusFormatter","PagesInsightsNearbyDay","PagesInsightsNearbyLegendLineKeyWithTooltipHelp.react","React","ReactART","ReactDOM","SpectrumCurrencyScale","SpectrumIntegerScale","SpectrumLines","SpectrumPercentageScale","SpectrumStretchChart","SpectrumStyle","SpectrumTooltipMenu","SpectrumXAxis","SpectrumYAxis","TooltipMixin","TypedImmutable","XAdsCMController","XUIButton.react","XUICard.react","XUIContextualDialog.react","XUIGrayText.react","XUINotice.react","XUISpinner.react","XUIText.react","debounce","formatDate","formatDay","formatNumber","immutable","intlNumUtils","pagesInsightsNearbyPotentialReachGetFbt","suiMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("AdsCurrencyFormatter").formatCurrency,k=b("AdsSharedLinkUtils").getAdsManagerAdgroupsLink,l=b("LIChartHatching").renderChartHatching,m=b("LIRadiusFormatter").getRadiusWithUnit,n=b("PagesInsightsNearbyDay").Day,o=b("ReactART").Surface,p=b("TypedImmutable").ImmMap,q=b("TypedImmutable").ImmSet,r=b("intlNumUtils").formatNumberWithThousandDelimiters,s=b("pagesInsightsNearbyPotentialReachGetFbt").pagesInsightsNearbyPotentialReachGetFbt,t=b("pagesInsightsNearbyPotentialReachGetFbt").pagesInsightsNearbyPotentialReachGetFbtConcise,u=b("AdsRichSelector.react").Option,v=b("Layout.react").Column,w=b("Layout.react").FillColumn,x=b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large"}),y=h._("Amount spent"),z={adSpendByDay:{color:b("SpectrumStyle").COBALT3,title:y,helpText:h._("The total amount that you have spent on Facebook ads during the selected date range.")},howManySawAdsByDay:{color:b("SpectrumStyle").FB_BLUE,title:h._("Percentage of people nearby who saw your ads"),helpText:h._("The percentage of people on Facebook within the selected radius and date range who also saw at least one of your ads in the past 28 days.")}},A=function(a,b){return a+b};function B(a,b,c){return a.adIDs.reduce(function(a,d){var e=a.adsByID,f=a.errors,g=a.areLoading,h=b.get(d);if(h==null||h.loadStatus==="loading")return{adsByID:e,errors:f,areLoading:!0};else if(h.loadStatus==="failed")return{adsByID:e,errors:f.add(h.error),areLoading:g};return h.value.pageID!==c?a:{adsByID:e.set(d,h.value),errors:f,areLoading:g}},{adsByID:p.create(),errors:a.errors,areLoading:a.areLoading})}function C(a,b,c,d){return a.reduce(function(a,c){var d=a.adIDs,e=a.errors;a=a.areLoading;c=b.get(c);if(c==null||c.loadStatus==="loading")return{adIDs:d,errors:e,areLoading:!0};else if(c.loadStatus==="failed")return{adIDs:d,errors:e.add(c.error),areLoading:a};return{adIDs:d.union(c.value.keySeq()),errors:e,areLoading:a}},{adIDs:q.create(),errors:q.create(),areLoading:!1})}function D(a,b,c,d){if(b==null)return a;c=a.adIDs;d=a.errors;a=a.areLoading;if(b.loadStatus==="failed")return{adIDs:c,errors:d.add(b.error),areLoading:a};return b.loadStatus==="loading"?{adIDs:c,errors:d,areLoading:!0}:{adIDs:c.union(b.value),errors:d,areLoading:a}}function E(a,b,c,d,e){a=C(a,b,d,e);a=D(a,c,d,e);return B(a,d,e)}function F(a,b,c){a=a.get(c);return a==null||a.loadStatus!=="loaded"?0:a.value.filter(function(a,c){return b.has(c)}).valueSeq().reduce(A,0)}var G={errors:q.create(),isLoading:!0,spend:null},H={errors:q.create(),isLoading:!1,spend:null};function I(a){return{errors:q.create([a]),isLoading:!1,spend:null}}function J(a,b,c,d,e){var f=a.spendByAdIDLoadedByDay;d=n.range(d.begin,d.end);b=E(d,f,b,c,e);c=b.adsByID.keySeq().toSet();e=F.bind(null,f,c);return{errors:b.errors,isLoading:b.areLoading,spend:{accountName:a.displayName,adsByID:b.adsByID,currencyCode:a.currencyCode,spendByDay:d.toSetSeq().map(e).toMap()}}}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$1=function(){d.props.onLearnMoreClick(b("ReactDOM").findDOMNode(d.refs.learnMore))};d.state={detailsCardAdID:null};d.dismissAdCardSoon=b("debounce")(function(){d.setState({detailsCardAdID:null})},L);return d}var d=c.prototype;d.$2=function(){__p&&__p();var a=this.props,b=a.adAccountsByID,c=a.adIDsJustCreatedByAdAccountID;a=a.selectedAdAccountID;if(b==null||b.loadStatus==="loading")return G;if(b.loadStatus==="failed")return I(b.error);if(a==null)return H;b=b.value.get(a);if(b==null)return H;c=c.get(a);a=this.props;var d=a.adsByID,e=a.dayRange;a=a.pageID;return J(b,c,d,e,a)};d.render=function(){var a=this.$2(),c=this.props,d=c.dayRange,e=c.metricsRegion,f=c.selectedAdAccountID;return b("React").createElement(b("HubbleCard"),{subtitle:M("learnMore",this.$1,e),title:h._("Ad performance")},b("React").createElement("div",{className:"_3wqw"},b("React").createElement(qa,{adAccountID:f,adsState:a,dayRange:d,detailsCardAdID:this.state.detailsCardAdID,onMouseEnter:this.$3.bind(this),onMouseLeave:this.$4.bind(this)}),b("React").createElement(fa,{adAccountsByID:c.adAccountsByID,adsState:a,dayRange:d,emptySegments:c.emptyDaysSegments,onPromotionRequested:c.onPromotionRequested,onSelectedAdAccountIDChange:c.onSelectedAdAccountIDChange,potentialAdReach:c.potentialAdReach,region:e,ratioOfSeenAdsByDay:c.ratioOfSeenAdsByDay,selectedAdAccountID:f})))};d.$3=function(a){this.dismissAdCardSoon.reset(),this.setState({detailsCardAdID:a})};d.$4=function(){this.dismissAdCardSoon()};return c}(b("React").Component);var K=30,L=100;function M(a,c,d){return d.type==="radius"?h._("Compare your advertising spending to the percentage of people on Facebook within {radius} of your business who saw your ads on Facebook. {=Learn More}.",[h._param("radius",m(d.radius)),h._param("=Learn More",b("React").createElement(b("Link.react"),{onClick:c,ref:a},h._("Learn more")))]):h._("Compare your ad spending with the percentage of people on Facebook in postcode {zip code} who saw your ads on Facebook. {=Learn More}.",[h._param("zip code",d.postcode.name),h._param("=Learn More",b("React").createElement(b("Link.react"),{onClick:c,ref:a},h._("Learn more")))])}var N={noAds:h._("No active ads"),nobodySeen:h._("No ad results for people nearby")};function O(a,c,d){return b("React").createElement("div",null,b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"medium",size:"meta1",weight:"bold"},N[d]),b("React").createElement(b("XUIGrayText.react"),{className:"_3-8w",display:"block",shade:"medium",size:"meta1"},h._("{Text describing potential reach}",[h._param("Text describing potential reach",a)])),b("React").createElement(b("XUIButton.react"),{className:"_3-8y",label:h._("Promote Local Business"),onClick:c,size:"large",use:"confirm"}))}function P(a,c,d){return b("React").createElement(b("XUICard.react"),{className:"_2ph_"},O(t(a),c,d))}function Q(a,c){return b("React").createElement("div",{className:"_333r"},b("React").createElement("div",{className:"_423r"},b("React").createElement(b("Layout.react"),{style:{padding:"8px 0px"}},b("React").createElement(v,null,b("React").createElement(b("Image.react"),{className:"_3-92",src:i("76142")})),b("React").createElement(w,null,O(s(a),c,"noAds")))))}function aa(){return b("React").createElement(b("XUINotice.react"),{className:"_3-8z",use:"warn"},h._("There was a problem while loading your ads. Try again later."))}var R=b("React").createClass({displayName:"ComponentWithTooltipMixin",mixins:[b("TooltipMixin")],render:function(){return b("React").Children.only(this.props.children)}}),ba=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.render=function(){return b("React").createElement("div",{style:{display:"table"}},b("React").createElement("div",{style:{display:"table-cell",position:"relative",width:"24px"}},b("React").createElement(o,{width:20,height:20,style:{left:0,position:"absolute",right:"auto",top:0}},b("React").createElement(b("LIHighPerformingMarker.react"),{color:z.howManySawAdsByDay.color,x:10,y:10}))),b("React").createElement("div",{style:{display:"table-cell"}},b("React").createElement("div",{className:"_5npl",style:{padding:"4px 0"}},h._("HIGH-PERFORMING DAY")),this.$1()))};d.$1=function(){var a=this.props,c=a.day,d=a.region;a=a.ratio;return d.type==="radius"?b("React").createElement(b("XUIGrayText.react"),{className:"_1wee",shade:"medium",size:"xlarge",weight:"normal"},h._("On {calendar day}, your ads reached {percentage} of people on Facebook within {radius} of your business.",[h._param("calendar day",b("formatDate")(c.toUTCDate(),"D M d, Y",{utc:!0})),h._param("percentage",b("React").createElement(R,{tooltip:h._("The percentage of people on Facebook within {radius} of your business who saw your ads between {first day} and {last day}.",[h._param("radius",m(d.radius)),h._param("first day",b("formatDay")("M d, Y",c.addDays(-27))),h._param("last day",b("formatDay")("M d, Y",c))])},b("React").createElement(b("XUIText.react"),{weight:"bold"},h._("{ratio}\u0025",[h._param("ratio",b("formatNumber")(a*100,1))])))),h._param("radius",m(d.radius))])):b("React").createElement(b("XUIGrayText.react"),{className:"_1wee",shade:"medium",size:"xlarge",weight:"normal"},h._("{calendar day}, your ads reached {percentage} of people on Facebook in postcode {zip code}.",[h._param("calendar day",b("formatDate")(c.toUTCDate(),"D M d, Y",{utc:!0})),h._param("percentage",b("React").createElement(R,{tooltip:h._("The percentage of people on Facebook in postcode {zip code} who saw your ads sometime between {first day} and {last day}.",[h._param("zip code",d.postcode.name),h._param("first day",b("formatDay")("M d, Y",c.addDays(-27))),h._param("last day",b("formatDay")("M d, Y",c))])},b("React").createElement(b("XUIText.react"),{weight:"bold"},h._("{ratio}\u0025",[h._param("ratio",b("formatNumber")(a*100,1))])))),h._param("zip code",d.postcode.name)]))};return a}(b("React").Component);function ca(a,c,d){if(a==null)return null;c=c.get(a);return c==null?null:b("React").createElement(ba,{day:a,region:d,ratio:c})}function da(a,b){var c=a.end.addDays(-1);a=n.range(a.begin,c).toSetSeq().map(function(a){return b.get(a)}).filter(function(a){return a!=null&&a>0});c=a.entrySeq().maxBy(function(a){a[0];a=a[1];return a});return c!=null?c[0]:null}function ea(a,b){var c=b.spend;if(b.isLoading||b.errors.size>0||c==null)return null;b=n.range(a.begin,a.end).map(function(a){return{day:a,amount:c.spendByDay.get(a)||0}});return b.every(function(a){return a.amount===0})?null:{currencyCode:c.currencyCode,perDay:b}}var fa=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.$1=function(a){__p&&__p();var c=this.props,d=c.adAccountsByID,e=c.dayRange,f=c.ratioOfSeenAdsByDay;if(d==null||d.loadStatus==="loading")return b("React").createElement("div",{className:a},x);var g=n.range(e.begin,e.end).every(function(a){return W(f.get(a))===0}),h=c.onPromotionRequested,i=c.potentialAdReach;if(g&&i!=null&&d.loadStatus==="loaded"&&d.value.size===0)return Q(i,h);var j=c.adsState,k=b("PagesInsightsNearbyDay").convertDayRangeToSpectrumTimeScale(e),l=ea(e,j),m=ga(l),o=m[0];m=m[1];var p=da(e,f);return b("React").createElement("div",{className:a},ca(p,f,c.region),b("React").createElement(T,{forKey:"howManySawAdsByDay"}),b("React").createElement(pa,{scaleX:k,dayRange:e,ratioPerDay:f,emptySegments:c.emptySegments,highPerformingDay:p,leftGutter:m,hasNobodySeenAds:g,potentialReach:i,onPromotionRequested:h}),b("React").createElement("div",{style:{padding:"10px 0 0 0"}},ia(d,c.selectedAdAccountID,c.onSelectedAdAccountIDChange),b("React").createElement(T,{forKey:"adSpendByDay",style:{marginTop:"4px"}})),b("React").createElement("div",{style:{height:"180px"}},ka(k,e,l,o,m,i,h,j)))};d.render=function(){return b("React").createElement("div",{className:"_333r"},this.$1("_423r"))};return a}(b("React").Component);function ga(a){if(a==null)return[null,0];var b=la(a.currencyCode);a=b.tickFormat()(a.perDay.maxBy(function(a){return a.amount}).amount).length*7;return[b,a]}var ha=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.render=function(){var a=this.props,c=a.adAccountsByID;a=a.selectedID;return c.size<=1?null:b("React").createElement("div",{className:"_3wqx"},b("React").createElement(b("AdsRichSelector.react"),{behaviors:{ContextualLayerAutoFlip:b("ContextualLayerAutoFlip"),ContextualLayerHideOnScroll:b("ContextualLayerHideOnScroll")},defaultValue:a,maxheight:200,onChange:this.$1.bind(this)},c.entrySeq().sortBy(function(a){return a[1].displayName}).map(function(a){return ja(a[1].displayName,a[0])}).toArray()))};d.$1=function(a){this.props.onChange(a.value)};return a}(b("React").Component);function ia(a,c,d){return a==null||a.loadStatus!=="loaded"?null:b("React").createElement(ha,{adAccountsByID:a.value,selectedID:c,onChange:d})}function S(a){var b=K;return a.length>b?a.substring(0,b-3).concat("..."):a}function ja(a,c){return b("React").createElement(u,{key:c,label:h._("{ad account name or ad account ID}",[h._param("ad account name or ad account ID",a?S(a):S(c))]),value:c},b("React").createElement("div",{className:"_3wqy"},b("React").createElement(b("XUIText.react"),{display:"block",size:"meta1"},a),b("React").createElement(b("XUIText.react"),{className:"_3wq_",display:"block",size:"meta1",weight:"normal"},h._("Account no.: {ad account id}",[h._param("ad account id",c)]))))}function T(a){var c=a.forKey;a=a.style;var d=z[c];return b("React").createElement("div",{className:"_532w",style:a},b("React").createElement(b("InsightsLegend_DEPRECATED.react"),{className:"_3-95"},b("React").createElement(b("PagesInsightsNearbyLegendLineKeyWithTooltipHelp.react"),{key:c,lineColor:d.color,title:d.title,helpText:d.helpText})))}function U(a,c,d,e){return V(a,b("SpectrumIntegerScale")(),b("immutable").Iterable(b("PagesInsightsNearbyDay").getDayRangeIterator(c)).map(function(a){return{day:a,amount:e==="zeroes"?0:null}}),d,c.end.addDays(-1))}function ka(a,c,d,e,f,g,h,i){if(d!=null)return V(a,e,d.perDay,f,c.end.addDays(-1));if(i.isLoading)return b("React").createElement("div",{style:{height:"100%",position:"relative"}},U(a,c,f,"none"),b("React").createElement("div",{className:"_1bz7"},x));if(i.errors.size>0)return b("React").createElement("div",{style:{height:"100%",position:"relative"}},U(a,c,f,"none"),b("React").createElement("div",{style:{position:"absolute",left:"60px",right:"20px",top:"20px"}},aa()));return!g?U(a,c,f,"zeroes"):b("React").createElement("div",{style:{height:"100%",position:"relative"}},U(a,c,f,"zeroes"),b("React").createElement("div",{style:{position:"absolute",right:"20px",bottom:"40px",left:"60px"}},P(g,h,"noAds")))}function V(a,c,d,e,f){return b("React").createElement(b("SpectrumStretchChart"),{scaleX:a,scaleY:c,theme:X(z.adSpendByDay.color,e)},b("React").createElement(b("SpectrumYAxis"),null),b("React").createElement(b("SpectrumLines"),{data:[d.toArray()],partialValue:function(a){return a.day.equals(f)},valueX:na,valueY:ma,titles:[y]}),b("React").createElement(b("SpectrumTooltipMenu"),null))}function la(a){var c=b("Currency").getOffset(a),d=function(){return function(b){return j(a,Math.round(c*b))}};return b("SpectrumCurrencyScale")(b("Currency").getSymbol(a),{tooltipFormat:d,tickFormat:d})}var ma=function(a){return a.amount},na=function(a){return a.day.toUTCDate()},oa=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.shouldComponentUpdate=function(a){return!b("immutable").Map(this.props).filter(function(a,b){return!b.startsWith("on")}).equals(b("immutable").Map(a).filter(function(a,b){return!b.startsWith("on")}))};d.render=function(){var a=this,c=this.props,d=c.dayRange,e=c.emptySegments,f=c.leftGutter;c=c.scaleX;var g=n.range(d.begin,d.end).map(function(b){return{day:b,ratio:W(a.props.ratioPerDay.get(b))}}),i=d.end.addDays(-1);return b("React").createElement(b("SpectrumStretchChart"),{scaleX:c,scaleY:b("SpectrumPercentageScale")(),theme:X(z.howManySawAdsByDay.color,f,this.props.highPerformingDay!=null?20:0)},b("React").createElement(b("SpectrumXAxis"),{secondaryTicks:!0}),b("React").createElement(b("SpectrumYAxis"),null),l(d,e.toIndexedSeq(),this.$1.bind(this)),this.$2(),b("React").createElement(b("SpectrumLines"),{data:[g.toArray()],partialValue:function(a){return a.day.equals(i)},valueX:function(a){return a.day.toUTCDate()},valueY:function(a){return a.ratio},titles:[h._("People nearby who saw your ads")]}),b("React").createElement(b("SpectrumTooltipMenu"),null))};d.$2=function(){var a=this.props.highPerformingDay;if(a!=null){a=a.toUTCDate();a.setHours(12);return b("React").createElement(b("LIHighPerformingChartMarker.react"),{color:z.howManySawAdsByDay.color,x:a})}return null};d.$1=function(){var a;(a=this.props).onMouseMove.apply(a,arguments)};return a}(b("React").Component),pa=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(a){a=c.call(this,a)||this;a.state={popupState:null};return a}var d=a.prototype;d.renderNoAdsTip=function(){var a=this.props,c=a.hasNobodySeenAds,d=a.potentialReach;a=a.onPromotionRequested;return!c||d==null?null:b("React").createElement("div",{style:{position:"absolute",right:"20px",bottom:"60px",left:"60px"}},P(d,a,"nobodySeen"))};d.render=function(){var a=this.props,c=a.dayRange,d=a.emptySegments,e=a.highPerformingDay,f=a.leftGutter,g=a.ratioPerDay;a=a.scaleX;return b("React").createElement("div",{ref:"root",style:{position:"relative",height:"200px"}},this.renderHatchingCard(),b("React").createElement(oa,babelHelpers["extends"]({dayRange:c,emptySegments:d,highPerformingDay:e,leftGutter:f,ratioPerDay:g,scaleX:a},{onMouseMove:this.$1.bind(this)})),this.renderNoAdsTip())};d.renderHatchingCard=function(){var a=this,c=this.state.popupState;if(c==null)return null;var d=c.mouseMoveData;c=c.segment;return b("React").createElement(b("XUIContextualDialog.react"),{contextRef:function(){return a.refs.root},offsetX:d.position.x-d.viewport.width+8,offsetY:d.position.y-16,shown:!0,position:"right",width:320},b("React").createElement("div",{className:"_2ph_"},b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"light",weight:"bold"},z.howManySawAdsByDay.title),b("React").createElement("div",{className:"_3-8w"},h._("There weren't enough people nearby to show insights.")),b("React").createElement(b("XUIGrayText.react"),{className:"_3-8w",display:"block",shade:"light",weight:"bold"},h._("{start date} - {end date}",[h._param("start date",b("React").createElement("span",{style:{whiteSpace:"nowrap"}},Z(c.first))),h._param("end date",b("React").createElement("span",{style:{whiteSpace:"nowrap"}},Z(c.last)))]))))};d.$1=function(a,b){this.setState({popupState:b==null?null:{segment:a,mouseMoveData:b}})};return a}(b("React").Component);function W(a){return Number.isFinite(a)?a:null}function X(a,b,c){c===void 0&&(c=0);return{lines:{colors:[a],markers:!1},yAxis:{tickPadding:10},gutter:{left:b,top:c}}}var qa=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.$1=function(a){return this.refs[a]};d.render=function(){var a=this.props,c=a.adAccountID,d=a.adsState;return d.isLoading?b("React").createElement("div",{className:"_3wr0"},b("React").createElement("div",{className:"_3mx5"},x)):b("React").createElement("div",{className:"_3wr0"},ra(a.dayRange,d,c),xa(d.spend,a.detailsCardAdID,this.$1.bind(this),a.onMouseEnter,a.onMouseLeave))};return a}(b("React").Component);function ra(a,c,d){return b("React").createElement("div",{className:"_3wr8"},sa(c.spend!=null?c.spend.adsByID.size:0),b("React").createElement(b("XUIGrayText.react"),{className:"_3-8x",display:"block",shade:"light"},ta(a,c,d)))}function sa(a){return b("React").createElement("div",{className:"_5npl"},h._({"*":"ACTIVE ADS ({number of ads})"},[h._param("number of ads",a,[0,a])]))}function ta(a,b,c){a={begin:Z(a.begin),end:Z(a.end.addDays(-1))};var d=b.spend;if(d==null)return ua(a,c);return d.adsByID.size===0&&b.errors.size===0?va(a,c,d.accountName):wa(a,c,d.accountName)}function ua(a,c){return h._("There were no active ads from {start date} to {end date, included} for this Page. See all of your ads in {=Ads Manager}.",[h._param("start date",a.begin),h._param("end date, included",a.end),h._param("=Ads Manager",b("React").createElement(b("Link.react"),{href:Y(c)},h._("Ads Manager")))])}function va(a,c,d){return h._("There were no active ads from {start date} to {end date, included} created by {ad account holder} for this Page. See all of your ads in {=Ads Manager}.",[h._param("start date",a.begin),h._param("end date, included",a.end),h._param("ad account holder",d),h._param("=Ads Manager",b("React").createElement(b("Link.react"),{href:Y(c)},h._("Ads Manager")))])}function Y(a){var c=b("XAdsCMController").getURIBuilder().setEnum(b("AdsCMURLParams").PAGE,b("AdsCMURLValuesMap")[b("AdsCMPageValues").HOME_PAGE]);a!=null&&(c=c.setInt(b("AdsCMURLParams").ACCOUNT_ID,a));return c.getURI()}function wa(a,c,d){return h._("Ads that were active from {start date} to {end date, included} created by {ad account holder} for this Page. {=Manage your ads}.",[h._param("start date",a.begin),h._param("end date, included",a.end),h._param("ad account holder",d),h._param("=Manage your ads",b("React").createElement(b("Link.react"),{href:Y(c)},h._("Manage your ads")))])}var Z=function(a){return b("PagesInsightsNearbyDay").formatDay(a,$)};function xa(a,c,d,e,f){if(a==null||a.adsByID.size===0)return null;var g=a.adsByID,h=a.currencyCode;return b("React").createElement("div",{className:"_3wrf"},g.toSeq().map(function(a,b){return ya(h,b,a,c===b?"shown":"hidden",d,e.bind(null,b),f)}).toArray())}function ya(a,c,d,e,f,g,h){var i="adCardTarget"+c;return b("React").createElement("div",{className:"_3wrg"+(e==="shown"?" _3wri":""),key:c,onKeyPress:function(a){a.key==="Enter"&&(a.stopPropagation(),g())},onMouseEnter:g,onMouseLeave:h,ref:i,role:"button",tabIndex:0},za(a,c,d,e,function(){return f(i)},g,h),b("React").createElement(b("Image.react"),{className:"_3wrj",src:d.thumbnailURL}),b("React").createElement("div",{className:"_3wrk"},b("React").createElement("div",{className:"_3wrl"},d.title)))}function za(a,c,d,e,f,g,h){return e!=="shown"?null:b("React").createElement(b("XUIContextualDialog.react"),{contextRef:f,shown:!0,position:"left"},b("React").createElement("div",{className:"_2ph_",onMouseEnter:g,onMouseLeave:h},Aa(a,c,d)))}function Aa(a,c,d){var e=b("AdsAPIObjectiveStrings").result[d.objective];return b("React").createElement("div",null,b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"light",weight:"bold"},h._("Ad results")),e!=null&&b("React").createElement(b("XUIGrayText.react"),{className:"_3-8w",display:"block",shade:"medium",weight:"bold"},e.name),b("React").createElement(b("XUIText.react"),{display:"block"},h._("{start date} - {end date}",[h._param("start date",b("formatDate")(d.dateRange.start,$)),h._param("end date",d.dateRange.end!=null?b("formatDate")(d.dateRange.end,$):h._("Ongoing"))])),Ba(a,d),b("React").createElement(b("Link.react"),{className:"_3wrn",href:k([c])},h._("Manage ad")))}function Ba(a,c){return b("React").createElement("table",{className:"_3wro"},b("React").createElement("tbody",null,b("React").createElement("tr",null,b("React").createElement("th",null,h._("Total spent")),b("React").createElement("td",null,j(a,c.totalSpent))),b("React").createElement("tr",null,b("React").createElement("th",null,h._("People reached")),b("React").createElement("td",null,r(c.peopleReached))),b("React").createElement("tr",null,b("React").createElement("th",null,b("AdsAPIObjectiveStrings").result[c.result.objective].actionPlural),b("React").createElement("td",null,r(c.result.count)))))}var $="M j, Y";e.exports=a}),null);
__d("LIAreaMap.react",["cx","AdsCommonLocalMapUtils","FBTilesMap__DEPRECATED.react","LeafletCircle.react","LeafletCircleMarker.react","LeafletMultiPolygon.react","LeafletUtils","LeafletView","React","TilesMapConfig","emptyFunction","joinClasses","leaflet","shallowEqual"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=8,i={boxZoom:!1,dragging:!1,doubleClickZoom:!1,keyboardPanOffset:0,scrollWheelZoom:!1,touchZoom:!1};function j(a){if(a.region.type==="radius"){var c=a.region.radius,d=b("LeafletUtils").toLatLng(a.coordinates);return b("LeafletUtils").circleBounds(d,c)}d=a.region.postcode.multipolygon;c=d.reduce(function(a,c){return a.concat(c.map(function(a){return b("LeafletUtils").toLatLng(a)}).toArray())},[]);return b("leaflet").latLngBounds(c)}function k(a,c){if(!c)return b("LeafletView").DEFAULT;a=j(a);c={width:c.x-h*2,height:c.y-h*2};a=b("LeafletUtils").fitBounds(a,c,{zoomRange:[b("TilesMapConfig").ZOOM_RANGE.MIN,b("TilesMapConfig").ZOOM_RANGE.MAX]});return a}function l(a){return a.region.type==="radius"?b("React").createElement(b("LeafletCircle.react"),{center:a.coordinates,options:b("AdsCommonLocalMapUtils").LEAFLET_TARGET_CIRCLE_OPTIONS,radius:a.region.radius}):b("React").createElement(b("LeafletMultiPolygon.react"),{coordinateLists:a.region.postcode.multipolygon,options:b("AdsCommonLocalMapUtils").LEAFLET_TARGET_REGION_INCLUDE_OPTIONS})}function m(a,c,d,e){return b("React").createElement(b("FBTilesMap__DEPRECATED.react"),{className:b("joinClasses")(a,"_5v7o"),view:d,onSizeSettled:e,onViewChange:b("emptyFunction"),options:i,showZoomControls:!1},b("React").createElement(b("LeafletCircleMarker.react"),{center:c.coordinates,options:b("AdsCommonLocalMapUtils").LEAFLET_TARGET_MARKER_OPTIONS}),l(c))}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.state={size:null};return b}var d=c.prototype;d.shouldComponentUpdate=function(a,c){return!(a.area.coordinates.nearlyEquals(this.props.area.coordinates)&&c.size===this.state.size&&b("shallowEqual")(a.area.region,this.props.area.region))};d.$1=function(a){this.setState({size:a})};d.render=function(){return m(this.props.className,this.props.area,k(this.props.area,this.state.size),this.$1.bind(this))};return c}(b("React").Component);e.exports=a}),null);
__d("LIHeaderSelector.react",["cx","Link.react","React","shallowEqual"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getChildContext=function(){return{onChange:this.props.onChange,value:this.props.value}};d.render=function(){var a=this.props,c=a.children;a.onChange;a.value;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","onChange","value"]);return b("React").createElement("ul",a,c)};return c}(b("React").Component);c.propTypes={value:a.any.isRequired,onChange:a.func.isRequired};c.childContextTypes={value:a.any.isRequired,onChange:a.func.isRequired};d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a,c){return b("shallowEqual")(d.context.value,a)?c:b("React").createElement(b("Link.react"),{onClick:d.$2},c)},d.$2=function(){d.context.onChange(d.props.value)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props,c=a.children,d=a.value;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","value"]);return b("React").createElement("li",babelHelpers["extends"]({},a,{className:"_3de1"}),this.$1(d,c))};return c}(b("React").Component);d.propTypes={value:a.any.isRequired};d.contextTypes={value:a.any.isRequired,onChange:a.func.isRequired};e.exports={HeaderSelector:c,HeaderSelectorItem:d}}),null);
__d("LIRegionFormatter",["LIRadiusFormatter"],(function(a,b,c,d,e,f){"use strict";var g=b("LIRadiusFormatter").getRadiusWithUnitAbbreviated;function a(a){return a.type==="radius"?g(a.radius):a.postcode.name}e.exports={getRegionLabel:a}}),null);
__d("LIHeader.react",["cx","fbt","ix","Image.react","LIHeaderSelector.react","Link.react","LIRegionFormatter","React","ReactDOM","XUICard.react","XUIGrayText.react","shallowCompare","suiMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("LIHeaderSelector.react").HeaderSelector,k=b("LIHeaderSelector.react").HeaderSelectorItem,l=b("LIRegionFormatter").getRegionLabel;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$1=function(){return d.props.onLearnMoreClick(b("ReactDOM").findDOMNode(d.refs.learnMore))};return d}var d=c.prototype;d.render=function(){var a="_3de0 _4sy-";return b("React").createElement(b("XUICard.react"),{className:"_2pi5",style:{borderTop:"none",marginTop:"-1px"}},b("React").createElement("div",{className:"_3dd_"},o("learnMore",this.$1,this.props.postcodePolygon),this.$2(a),this.$3(a)))};d.$2=function(a){return b("React").createElement("div",{className:a},b("React").createElement(b("XUIGrayText.react"),{display:"block",weight:"bold"},h._("Date range")),b("React").createElement(j,{className:"_3-8w",onChange:this.props.onTimeSpanChange,value:this.props.metricsContext.timeSpan},u))};d.$3=function(a){return!this.props.postcodePolygon?b("React").createElement("div",{className:a},b("React").createElement(b("XUIGrayText.react"),{display:"block",weight:"bold"},h._("Radius")),b("React").createElement(j,{className:"_3-8w",onChange:this.props.onRegionChange,value:this.props.metricsContext.region},this.getRegionSelectorItems())):b("React").createElement("div",{className:a},b("React").createElement(b("XUIGrayText.react"),{display:"block",weight:"bold"},h._("Region")),b("React").createElement(j,{className:"_3-8w",onChange:this.props.onRegionChange,value:this.props.metricsContext.region},this.getRegionSelectorItems()))};d.getRegionSelectorItems=function(){return r(this.props.postcodePolygon).map(function(a){return[a,l(a)]}).map(q)};d.shouldComponentUpdate=function(a,c){return b("shallowCompare")(this,a,c)};return c}(b("React").Component);var m=b("React").createElement(b("XUIGrayText.react"),{className:"_3-8w",display:"block",shade:"medium"},h._("Choose a radius and date range to learn more about the area around your business.")),n=b("React").createElement(b("XUIGrayText.react"),{className:"_3-8w",display:"block",shade:"medium"},h._("Choose a region and date range to learn more about the area around your business."));function o(a,c,d){return b("React").createElement("div",{className:"_3de0",style:{width:"100%"}},d?n:m,p(a,c))}function p(a,c){return b("React").createElement(b("XUIGrayText.react"),{className:"_3-8w",display:"block",shade:"light"},b("React").createElement(b("Image.react"),{className:"_3-8_",src:i("76151"),style:{verticalAlign:"text-bottom"}}),h._("All data is anonymous. {=Learn More}.",[h._param("=Learn More",b("React").createElement(b("Link.react"),{onClick:c,ref:a},h._("Learn more")))]))}function a(a){return b("React").createElement(k,{value:a[0],key:a[0]},a[1])}function q(a){var c=a[0];return b("React").createElement(k,{key:c.type==="radius"?c.radius:c.postcode,value:c},a[1])}function r(a){if(a!=null)return t(a);else return s()}function s(){return[{type:"radius",radius:50}]}function t(a){return[{type:"radius",radius:50},{type:"postcode",postcode:a}]}var u=[["week",h._("1W")],["month",h._("1M")],["quarter",h._("1Q")]].map(a);e.exports=c}),null);
__d("LIHighlightsFrame.react",["cx","Image.react","PagesInsightsNearbyTooltipHelp.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props;return b("React").createElement("div",{className:b("joinClasses")("_sj_",a.className)},b("React").createElement("div",{className:"_sk0"},b("React").createElement(b("Image.react"),{className:"_sk1",src:a.imageSrc}),a.title,b("React").createElement(b("PagesInsightsNearbyTooltipHelp.react"),{helpText:a.helpText,className:"_sk2"})),a.children)};return c}(b("React").Component);e.exports=a}),null);
__d("PagesInsightsNearbyDemographics",["TypedImmutable"],(function(a,b,c,d,e,f){"use strict";a=b("TypedImmutable").ImmList;c=["female","male"];d=["local","traveling"];f=a.create(["18-24","25-34","35-44","45-54","55-64","65+"]);b=a.create(c);a=a.create(d);c={GENDERS:c,HOME_LOCATION:d,AGE_BUCKETS:f,GENDER_BUCKETS:b,TRAVEL_STATUS_BUCKETS:a};e.exports=c}),null);
__d("LIDemographics",["Day","PagesInsightsNearbyDemographics","TypedImmutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("PagesInsightsNearbyDemographics").AGE_BUCKETS,h=b("PagesInsightsNearbyDemographics").GENDER_BUCKETS,i=b("PagesInsightsNearbyDemographics").TRAVEL_STATUS_BUCKETS,j=b("TypedImmutable").ImmMap,k={age:g,gender:h,home:i},l=function(a,b){return a+b};function m(a,b){return b.filter(function(b,c){return c.laterThanOrEqualTo(a.begin)&&c.earlierThan(a.end)})}function a(a,c,d){var e=b("Day").range(a.begin,a.end);return c.map(function(a){return e.toSeq().map(function(b){var c=d.get(b);c=c==null?null:c.get(a)||0;return{day:b,value:c}}).toArray()}).toArray()}function n(a){return Math.round(a*100)/100}function o(a){return n(a.reduce(l,0)/a.count())}function p(a){return h.toSetSeq().map(function(b){return g.toSetSeq().map(function(c){return o(a.map(function(a){return a.getIn([b,c])||0}))}).toMap()}).toMap()}function q(a){return h.map(function(b){var c=a.get(b)||j.create();return g.map(function(a){return c.get(a)||0}).toArray()}).toArray()}function r(a,b){return[a.map(function(a){return o(b.map(function(b){return b.get(a)||0}))}).toArray()]}function c(a){return g.toSetSeq().map(function(b){return a.ratioByGenderAndAgeRange.reduce(function(a,c){return a+(c.get(b)||0)},0)}).toMap()}function s(a){return a.ratioByGenderAndAgeRange.map(function(a){return a.reduce(l,0)})}function d(a){return a.ratioByTravelStatus}var t={age:c,gender:s,home:d};function u(a){return a.ratioByGenderAndAgeRange}function f(a,b,c){__p&&__p();a=m(a,c);if(b==="ageAndGender"){c=a.map(u);c=p(c);return q(c)}c=t[b];a=a.map(c);c=k[b];return r(c,a)}function v(a,b,c){var d=a.map(b);return c.toSetSeq().map(function(a){return o(d.map(function(b){return b.get(a)||0}))}).toMap()}function w(a,b,c){a=v(a,b,c).entrySeq().maxBy(function(a){a[0];a=a[1];return a});b=a[0];c=a[1];return c>0?b:null}var x=.2;function y(a){a=v(a,s,h);var b=a.get("female");a=a.get("male");if(b==null||a==null)return null;if(b>a+x)return"female";return a>b+x?"male":null}e.exports={ORDERED_BUCKETS_BY_CATEGORY:k,METRICS_MAPPER_FUNCTION_BY_CATEGORY:t,averageRatiosByGenderThenAge:p,convertValuesByDayAndBucketToSeries:a,extractAgeAndGender:u,filterMapByDayRange:m,getAverageValue:o,getColumnSeriesForCategory:f,getLargestGenderGroup:y,getLargestMappedGroup:w,mapMetricsToAgeRanges:c,mapMetricsToGenders:s,mapMetricsToTravelStatuses:d}}),null);
__d("LIDemographicStrings",["fbt","TypedImmutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("TypedImmutable").ImmMap;function h(a){var b=a.high;a=a.low;return b==null?g._({"*":"{low}+"},[g._param("low",a,[0,a])]):g._({"*":{"*":"{low}-{high}"}},[g._param("low",a,[0,a]),g._param("high",b,[0,b])])}c=a.create({"18-24":{low:18,high:24},"25-34":{low:25,high:34},"35-44":{low:35,high:44},"45-54":{low:45,high:54},"55-64":{low:55,high:64},"65+":{low:65,high:null}});d=c.map(function(a){return h(a)});e.exports={AGE_BOUNDS_BY_BUCKET:c,AGE_RANGE_TITLE_BY_BUCKET:d}}),null);
__d("LIHighlightsDemographicsMessage.react",["fbt","LIDemographicStrings","LIRadiusFormatter","React","TooltipMixin","XUIGrayText.react","XUIText.react","shallowEqual"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("LIDemographicStrings").AGE_BOUNDS_BY_BUCKET,i=b("LIRadiusFormatter").getRadiusWithUnit,j=b("React").createClass({displayName:"TooltipSection",mixins:[b("TooltipMixin")],render:function(){return b("React").createElement(b("XUIText.react"),{weight:"bold"},this.props.children)}});function k(a){var b=a.gender;a=a.metricsContext;return a.region.type==="radius"?g._({"female":{"quarter":"There were more women than men within {radius} of your business in the past quarter","month":"There were more women than men within {radius} of your business in the past month","week":"There were more women than men within {radius} of your business in the past week"},"male":{"quarter":"There were more men than women within {radius} of your business in the past quarter","month":"There were more men than women within {radius} of your business in the past month","week":"There were more men than women within {radius} of your business in the past week"}},[g._enum(b,{female:"women than men",male:"men than women"}),g._param("radius",i(a.region.radius)),g._enum(a.timeSpan,{quarter:"quarter",month:"month",week:"week"})]):g._({"female":{"quarter":"There have been more women than men in postcode {zip code} in the past three months","month":"There have been more women than men in postcode {zip code} in the past month","week":"There have been more women than men in postcode {zip code} in the past week"},"male":{"quarter":"There have been more men than women in postcode {zip code} in the past three months","month":"There have been more men than women in postcode {zip code} in the past month","week":"There have been more men than women in postcode {zip code} in the past week"}},[g._enum(b,{female:"women than men",male:"men than women"}),g._param("zip code",a.region.postcode.name),g._enum(a.timeSpan,{quarter:"quarter",month:"month",week:"week"})])}function l(a){var b=a.ageBounds;a=a.metricsContext;return a.region.type==="radius"?g._({"quarter":"The top age group was {low}-{high} within {radius} of your business in the past quarter","month":"The top age group was {low}-{high} within {radius} of your business in the past month","week":"The top age group was {low}-{high} within {radius} of your business in the past week"},[g._param("low",b.low),g._param("high",b.high),g._param("radius",i(a.region.radius)),g._enum(a.timeSpan,{quarter:"quarter",month:"month",week:"week"})]):g._({"quarter":"The top age group has been {low}-{high} in postcode {zip code} in the past three months","month":"The top age group has been {low}-{high} in postcode {zip code} in the past month","week":"The top age group has been {low}-{high} in postcode {zip code} in the past week"},[g._param("low",b.low),g._param("high",b.high),g._param("zip code",a.region.postcode.name),g._enum(a.timeSpan,{quarter:"quarter",month:"month",week:"week"})])}function m(a){var b=a.lowAge;a=a.metricsContext;return a.region.type==="radius"?g._({"quarter":"The top age group has been {low} within {radius} of your business in the past three months","month":"The top age group has been {low} within {radius} of your business in the past month","week":"The top age group has been {low} within {radius} of your business in the past week"},[g._param("low",b),g._param("radius",i(a.region.radius)),g._enum(a.timeSpan,{quarter:"quarter",month:"month",week:"week"})]):g._({"quarter":"The top age group has been {low} in postcode {zip code} in the past three months","month":"The top age group has been {low} in postcode {zip code} in the past month","week":"The top age group has been {low} in postcode {zip code} in the past week"},[g._param("low",b),g._param("zip code",a.region.postcode.name),g._enum(a.timeSpan,{quarter:"quarter",month:"month",week:"week"})])}function n(a){var b=a.region;a=a.timeSpan;return b.type==="radius"?g._({"quarter":"Most people were tourists within {radius} of your business in the past quarter","month":"Most people were tourists within {radius} of your business in the past month","week":"Most people were tourists within {radius} of your business in the past week"},[g._param("radius",i(b.radius)),g._enum(a,{quarter:"quarter",month:"month",week:"week"})]):g._({"quarter":"Most people have been tourists in postcode {zip code} in the past three months","month":"Most people have been tourists in postcode {zip code} in the past month","week":"Most people have been tourists in postcode {zip code} in the past week"},[g._param("zip code",b.postcode.name),g._enum(a,{quarter:"quarter",month:"month",week:"week"})])}function o(a){var c=l(a);return g._("The top age group is {age range}.",[g._param("age range",b("React").createElement(j,{tooltip:c},g._("{low}-{high}",[g._param("low",a.ageBounds.low),g._param("high",a.ageBounds.high)])))])}function p(a){var c=m(a);return g._("The top age group is {=65+}.",[g._param("=65+",b("React").createElement(j,{tooltip:c},g._("{low}+",[g._param("low",a.lowAge)])))])}function q(a){var c=k(a),d=l(a);return a.gender==="female"?g._("Most people are {=women} and the top age group is {age range}.",[g._param("=women",b("React").createElement(j,{tooltip:c},g._("women"))),g._param("age range",b("React").createElement(j,{tooltip:d},g._("{low}-{high}",[g._param("low",a.ageBounds.low),g._param("high",a.ageBounds.high)])))]):g._("Most people are {=men} and the top age group is {age range}.",[g._param("=men",b("React").createElement(j,{tooltip:c},g._("men"))),g._param("age range",b("React").createElement(j,{tooltip:d},g._("{low}-{high}",[g._param("low",a.ageBounds.low),g._param("high",a.ageBounds.high)])))])}function r(a){var c=k(a),d=m(a);return a.gender==="female"?g._("Most people are {=women} and the top age group is {=65+}.",[g._param("=women",b("React").createElement(j,{tooltip:c},g._("women"))),g._param("=65+",b("React").createElement(j,{tooltip:d},g._("{low}+",[g._param("low",a.lowAge)])))]):g._("Most people are {=men} and the top age group is {=65+}.",[g._param("=men",b("React").createElement(j,{tooltip:c},g._("men"))),g._param("=65+",b("React").createElement(j,{tooltip:d},g._("{low}+",[g._param("low",a.lowAge)])))])}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){return!b("shallowEqual")(a,this.props)};d.$1=function(){var a=this.props,b=a.ageRange,c=a.gender;a=a.metricsContext;b=h.get(b);if(b==null)return null;if(c==null)return b.high!=null?o({ageBounds:{low:b.low,high:b.high},metricsContext:a}):p({lowAge:b.low,metricsContext:a});return b.high!=null?q({ageBounds:{low:b.low,high:b.high},gender:c,metricsContext:a}):r({gender:c,lowAge:b.low,metricsContext:a})};d.$2=function(){var a=this.props,c=a.metricsContext;a=a.travelStatus;return a!=="traveling"?null:g._("Most people are {=tourists}.",[g._param("=tourists",b("React").createElement(j,{tooltip:n(c)},g._("tourists")))])};d.$3=function(){var a=this.$1(),b=this.$2();return b==null?a:g._("{sentence about gender and age} {sentence about tourists}",[g._param("sentence about gender and age",a),g._param("sentence about tourists",b)])};d.render=function(){return b("React").createElement(b("XUIGrayText.react"),{className:this.props.className,display:"block",shade:"dark",size:"xlarge",weight:"normal"},this.$3())};return c}(b("React").Component);e.exports=a}),null);
__d("LIHighlightsPeopleFrame.react",["cx","fbt","ix","Day","InsightsLegend_DEPRECATED.react","InsightsLegendLineKey.react","LIChartHatching","LIDemographics","LIHighlightsDemographicsMessage.react","LIHighlightsFrame.react","PagesInsightsNearbyDay","PagesInsightsNearbyDemographics","React","SpectrumLines","SpectrumStretchChart","SpectrumStyle","TypedImmutable","d3-old/scale/linear","suiMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("LIChartHatching").renderChartHatching;b("LIDemographics").averageRatiosByGenderThenAge;var k=b("LIDemographics").filterMapByDayRange;b("LIDemographics").getAverageValue;var l=b("LIDemographics").getLargestGenderGroup,m=b("LIDemographics").getLargestMappedGroup,n=b("LIDemographics").mapMetricsToAgeRanges,o=b("LIDemographics").mapMetricsToTravelStatuses,p=b("PagesInsightsNearbyDay").convertDayRangeToSpectrumTimeScale,q=b("PagesInsightsNearbyDemographics").AGE_BUCKETS;b("PagesInsightsNearbyDemographics").GENDER_BUCKETS;var r=b("PagesInsightsNearbyDemographics").TRAVEL_STATUS_BUCKETS;b("TypedImmutable").ImmIndexedIterable;b("TypedImmutable").ImmKeyedIterable;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){var a=this.props,c=a.metricsPivotalDays;a=a.peopleMetricsByDay;c={begin:c.firstShown,end:c.lastDay};c=k(c,a);a=l(c);var d=m(c,n,q);c=m(c,o,r);return d==null?null:b("React").createElement(b("LIHighlightsDemographicsMessage.react"),{className:"_3-8y",ageRange:d,gender:a,metricsContext:this.props.metricsContext,travelStatus:c})};d.render=function(){var a=this.props;return b("React").createElement(b("LIHighlightsFrame.react"),{className:a.className,helpText:h._("View the trend of people on Facebook within the selected radius and date range."),imageSrc:i("76145"),title:h._("People nearby")},s(a),this.$1())};return c}(b("React").Component);function s(a){__p&&__p();var c=a.metricsPivotalDays,d=c.firstFetched,e=c.firstShown;c=c.lastDay;d=b("Day").range(d,e);var f=b("Day").range(e,c),g=function(b){var c=a.peopleMetricsByDay.get(b);return{day:b,value:c!=null?c.howManyTotal:null}},h=d.count();return b("React").createElement("div",{className:"_2lmm"},t(a.metricsContext.timeSpan),b("React").createElement("div",{className:"_4sza"},b("React").createElement(b("SpectrumStretchChart"),{scaleX:p({begin:e,end:c}),scaleY:b("d3-old/scale/linear")(),theme:w},j({begin:e,end:c},a.emptySegments.toIndexedSeq()),b("React").createElement(b("SpectrumLines"),{data:[d.map(g).map(function(a){return{day:a.day.addDays(h),value:a.value}}).toArray(),f.map(g).toArray()],nonZeroMinimum:"allowed",valueX:function(a){return a.day.toUTCDate()},valueY:function(a){return a.value||null}}))))}function t(a){return b("React").createElement("div",{className:"_4szb"},b("React").createElement(b("InsightsLegend_DEPRECATED.react"),null,b("React").createElement(b("InsightsLegendLineKey.react"),{className:"_4szc",color:v},h._({"quarter":"This quarter","month":"This month","week":"This week"},[h._enum(a,{quarter:"quarter",month:"month",week:"week"})])),b("React").createElement(b("InsightsLegendLineKey.react"),{className:"_4szc",color:u},h._({"quarter":"Last quarter","month":"Last month","week":"Last week"},[h._enum(a,{quarter:"quarter",month:"month",week:"week"})]))))}var u=b("SpectrumStyle").GRAY,v=b("SpectrumStyle").FB_BLUE,w={lines:{colors:[u,v],highlightWidths:[0],markers:!1,widths:[1,2]}};e.exports={HighlightsPeopleFrame:a}}),null);
__d("PagesInsightsNearbyConstants",[],(function(a,b,c,d,e,f){"use strict";a="2.4";b="\u2013";e.exports={GRAPH_API_VERSION:a,PLACEHOLDER_FOR_MISSING_VALUE:b}}),null);
__d("LIHighlightsCard.react",["cx","fbt","ix","DateStrings","LIAreaMap.react","LIHighlightsFrame.react","LIHighlightsPeopleFrame.react","PagesInsightsNearbyConstants","React","XUIButton.react","XUICard.react","XUIGrayText.react","XUIText.react","formatDate","intlNumUtils","suiMargin","pagesInsightsNearbyPotentialReachGetFbt"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("LIHighlightsPeopleFrame.react").HighlightsPeopleFrame,k=b("PagesInsightsNearbyConstants").PLACEHOLDER_FOR_MISSING_VALUE,l=b("intlNumUtils").formatNumberWithThousandDelimiters,m=b("pagesInsightsNearbyPotentialReachGetFbt").pagesInsightsNearbyDistanceGetFbt;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("XUICard.react"),null,this.$1(),this.$2(),b("React").createElement(n,{potentialAdReach:this.props.potentialAdReach,onPromotionRequested:this.props.onPromotionRequested}))};d.$1=function(){return b("React").createElement(b("LIAreaMap.react"),{className:"_7mk",area:this.props.mapArea})};d.$2=function(){var a=this.props.metricsPivotalDays;return b("React").createElement("div",{className:"_17f1 _2pi4"},b("React").createElement(j,{className:"_2kh0 _4sz8",emptySegments:this.props.emptyDaysSegments,metricsContext:this.props.metricsContext,metricsPivotalDays:a,peopleMetricsByDay:this.props.peopleMetricsByDay}),this.$3())};d.$3=function(){var a=this.props,c=a.peakDayOfWeek;a=a.peakHour;return b("React").createElement(b("LIHighlightsFrame.react"),{className:"_2kh0",helpText:h._("The time of day and day of week when the most people on Facebook were within the selected radius and date range."),imageSrc:i("76146"),title:h._("Busiest times")},b("React").createElement("div",{className:"_3-8p"},b("React").createElement(b("XUIText.react"),{display:"block",weight:"bold",size:"xlarge_DEPRECATED"},p(a)),b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"medium",size:"meta1"},h._("Hours of day"))),b("React").createElement("div",{className:"_3-8p"},b("React").createElement(b("XUIText.react"),{display:"block",weight:"bold",size:"xlarge_DEPRECATED"},o(c)),b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"medium",size:"meta1"},h._("Day of week"))))};return c}(b("React").Component);var n=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.render=function(){var a=this.props,c=a.onPromotionRequested;a=a.potentialAdReach;if(!c||!a)return null;var d=this.$1();a=this.$2(a);return b("React").createElement("div",{className:"_17f1"},b("React").createElement("div",{className:"_2kh0 _4cpg"},b("React").createElement("div",{className:"_4cph"},d,a),b("React").createElement("div",{className:"_4cph"},b("React").createElement(b("XUIButton.react"),{label:h._("Promote Local Business"),onClick:c,size:"large",use:"confirm"}))))};d.$1=function(){return b("React").createElement("div",{className:"_4cpi"},h._("Promote your business to people nearby"))};d.$2=function(a){return b("React").createElement("div",{className:"_4cpj"},h._({"*":"{number of people} people are on Facebook within {radius} of your business"},[h._param("number of people",l(a.count),[0,a.count]),h._param("radius",m(a.distance))]))};return a}(b("React").Component);function o(a){return a==null?k:b("DateStrings").getWeekdayName(a)}function p(a){if(a==null)return k;var c=new Date(0);c.setHours(a);var d=new Date(c);d.setHours(a+1);return h._("{start time} - {end time}",[h._param("start time",b("formatDate")(c,q)),h._param("end time",b("formatDate")(d,q))])}var q="g:ia";e.exports=a}),null);
__d("LIIntroCard.react",["fbt","ix","Image.react","Link.react","React","XUICard.react","XUICloseButton.react","XUIGrayText.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={nearby:{title:g._("Activity and peak hours"),Component:function(a){var c=a.canClickLearnMore;a=a.onClick;return g._("Use info about when the most people are nearby to make smart decisions about shop opening hours and more. {=See this info}.",[g._param("=See this info",c?b("React").createElement(b("Link.react"),{onClick:a},g._("See this info")):null)])},image:h("76149")},demographics:{title:g._("Demographic info"),Component:function(a){var c=a.canClickLearnMore;a=a.onClick;return g._("Get to know the general ages, genders and distance travelled by people near your business to inform your marketing and services. {=See this info}.",[g._param("=See this info",c?b("React").createElement(b("Link.react"),{onClick:a},g._("See this info")):null)])},image:h("76141")},adPerformance:{title:g._("Ad performance"),Component:function(a){var c=a.canClickLearnMore;a=a.onClick;return g._("See if your ads reached people who are near your business. {=See this info}.",[g._param("=See this info",c?b("React").createElement(b("Link.react"),{onClick:a},g._("See this info")):null)])},image:h("76136")}};function j(a){var c=a.canClickLearnMore,d=a.cardName;a=a.onClick;d=i[d];var e=d.Component,f=d.image;d=d.title;return b("React").createElement("div",{style:{display:"table-cell",width:"33%",padding:"0 20px"}},b("React").createElement("div",{style:{width:"100%"}},b("React").createElement(b("Image.react"),{style:{display:"block",margin:"0 auto 12px auto"},src:f})),b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"medium",size:"meta1",weight:"bold"},d),b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"medium",size:"meta1",weight:"normal"},b("React").createElement(e,{onClick:a,canClickLearnMore:c})))}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$1=function(){return void b.props.onDismissClick()};b.$2=function(a){return void b.props.onSeeMoreInfoClick(a)};return b}var d=c.prototype;d.$3=function(){return!this.props.canDismiss?null:b("React").createElement("div",{style:{position:"absolute",right:"16px",top:"16px"}},b("React").createElement(b("XUICloseButton.react"),{onClick:this.$1}))};d.render=function(){return b("React").createElement(b("XUICard.react"),{style:{position:"relative",padding:"24px"}},this.$3(),b("React").createElement("div",{style:{padding:"0 0 36px 0",textAlign:"center"}},b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"dark",size:"xlarge",weight:"normal"},g._("Learn more about the people near your business"))),b("React").createElement("div",{style:{display:"table"}},b("React").createElement(j,{canClickLearnMore:this.props.canDismiss,cardName:"nearby",onClick:this.$2.bind(this,"nearby")}),b("React").createElement(j,{canClickLearnMore:this.props.canDismiss,cardName:"demographics",onClick:this.$2.bind(this,"demographics")}),b("React").createElement(j,{canClickLearnMore:this.props.canDismiss,cardName:"adPerformance",onClick:this.$2.bind(this,"adPerformance")})),this.props.children)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("LITestIDs",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({OPT_IN_BUTTON:null,OPT_IN_REQUEST:null,OPT_IN_SUCCESS:null})}),null);
__d("LocalInsightsUnavailableMessage.react",["fbt","LIConfig","React","XUIGrayText.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("LIConfig").LOCAL_INSIGHTS_CONTENT_TRANSLATED_GK;function a(a){return h?b("React").createElement(b("XUIGrayText.react"),babelHelpers["extends"]({},a,{display:"block",shade:"light",weight:"bold"}),g._("There isn't enough data available for the selected date and region. Try choosing a longer date range or a larger region.")):b("React").createElement(b("XUIGrayText.react"),babelHelpers["extends"]({},a,{display:"block",shade:"light",weight:"bold"}),g._("There isn't enough data available for the selected date and radius. Try choosing a longer date range or a larger radius."))}e.exports=a}),null);
__d("pagesInsightsNearbyGetColumnChartTheme",["SpectrumStyle"],(function(a,b,c,d,e,f){"use strict";var g=[b("SpectrumStyle").FB_BLUE,b("SpectrumStyle").COBALT3,b("SpectrumStyle").PURPLE6,b("SpectrumStyle").LIGHT_GREEN,b("SpectrumStyle").CASPER,b("SpectrumStyle").TAN,b("SpectrumStyle").DUCKEGG];function a(a,b){b===void 0&&(b="spaced");a=40*6/a;return{columns:{colors:g,borderRadius:0,labelColors:g,sideBySideMargin:.1},gutter:{bottom:30,left:a+(b==="spaced"?30:10),middle:0,right:a,top:0},rangeBands:{padding:.6,outerPadding:0},yAxis:{tickPadding:a}}}e.exports=a}),null);
__d("PagesInsightsNearbyDemographicsCard.react",["cx","fbt","invariant","ix","BUIFormRadioList.react","HubbleCard","Image.react","InsightsLegend_DEPRECATED.react","InsightsLegendAreaKey.react","InsightsLegendLineKey.react","LIChartHatching","LIConfig","LIDemographics","LIDemographicStrings","Link.react","LIRadiusFormatter","LocalInsightsUnavailableMessage.react","PagesInsightsNearbyDay","PagesInsightsNearbyDemographics","PagesInsightsNearbyTooltipHelp.react","React","ReactDOM","SpectrumLines","SpectrumPercentageScale","SpectrumSideBySideColumns","SpectrumStretchChart","SpectrumStyle","SpectrumTooltipMenu","SpectrumXAxis","SpectrumYAxis","XUIButton.react","XUIRadioButtonGroup.react","d3-old/scale/ordinal","immutable","pagesInsightsNearbyGetColumnChartTheme","suiMargin"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("LIChartHatching").renderChartHatching,l=b("LIConfig").TRAVEL_DISTANCE_THRESHOLD_KM,m=b("LIDemographics").METRICS_MAPPER_FUNCTION_BY_CATEGORY,n=b("LIDemographics").ORDERED_BUCKETS_BY_CATEGORY,o=b("LIDemographics").convertValuesByDayAndBucketToSeries,p=b("LIDemographics").filterMapByDayRange,q=b("LIDemographics").getColumnSeriesForCategory,r=b("LIDemographicStrings").AGE_RANGE_TITLE_BY_BUCKET,s=b("LIRadiusFormatter").getRadiusWithUnit;b("PagesInsightsNearbyDay").Day;var t=b("PagesInsightsNearbyDay").convertDayRangeToSpectrumTimeScale;a=b("PagesInsightsNearbyDemographics").AGE_BUCKETS;b("PagesInsightsNearbyDemographics").GENDER_BUCKETS;b("PagesInsightsNearbyDemographics").TRAVEL_STATUS_BUCKETS;c=b("React").PropTypes;var u=b("BUIFormRadioList.react").Item,v=[b("SpectrumStyle").FB_BLUE,b("SpectrumStyle").COBALT3,b("SpectrumStyle").PURPLE6,b("SpectrumStyle").LIGHT_GREEN,b("SpectrumStyle").CASPER,b("SpectrumStyle").TAN,b("SpectrumStyle").DUCKEGG],w={lines:{colors:v,markers:!1},yAxis:{tickPadding:20}};d=a.map(function(a){return r.get(a)}).toArray();function x(a,c,d){return a.region.type==="radius"?h._({"quarter":"The age, gender and home location of people on Facebook within {radius} of your business during the past quarter. {=Learn More}.","month":"The age, gender and home location of people on Facebook within {radius} of your business during the past month. {=Learn More}.","week":"The age, gender and home location of people on Facebook within {radius} of your business during the past week. {=Learn More}."},[h._param("radius",s(a.region.radius)),h._enum(a.timeSpan,{quarter:"quarter",month:"month",week:"week"}),h._param("=Learn More",b("React").createElement(b("Link.react"),{onClick:d,ref:c},h._("Learn more")))]):h._({"quarter":"The age, gender and home location of people on Facebook in postcode {zip code} during the past three months. {=Learn More}.","month":"The age, gender and home location of people on Facebook in postcode {zip code} during the past month. {=Learn More}.","week":"The age, gender and home location of people on Facebook in postcode {zip code} during the past week. {=Learn More}."},[h._param("zip code",a.region.postcode.name),h._enum(a.timeSpan,{quarter:"quarter",month:"month",week:"week"}),h._param("=Learn More",b("React").createElement(b("Link.react"),{onClick:d,ref:c},h._("Learn more")))])}var y={male:h._("Men"),female:h._("Women")};f=b("PagesInsightsNearbyDemographics").GENDERS;var z={age:d,gender:f.map(function(a){return y[a]}),home:[h._("Local"),h._("Travelling")],ageAndGender:d},A=function(){var a=[h._("People nearby")];return{age:a,gender:a,home:a,ageAndGender:z.gender}}();g=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){d.props.onLearnMoreClick(b("ReactDOM").findDOMNode(d.refs.learnMore))},d.$2=function(){return h._("Demographics")},d.$3=function(){return d.props.peopleMetricsByDay.isEmpty()?[b("React").createElement(b("LocalInsightsUnavailableMessage.react"),{className:"_2pi0",key:"notEnoughDataMessage"})]:[d.$4(),d.$5()]},d.$4=function(){return b("React").createElement("div",{className:"_333q",key:"rightColumn"},b("React").createElement("div",{className:"_5lt6"},b("React").createElement("div",{className:"_5lt7"},b("React").createElement("div",{className:"_5npl"},h._("BREAKDOWN BY")),d.$6())))},d.$6=function(){return b("React").createElement(b("BUIFormRadioList.react"),{className:"_423q",onChange:d.$7,selectedValue:d.props.selectedCategory},b("React").createElement(u,{value:"age"},h._("Age")),b("React").createElement(u,{value:"gender"},h._("Gender")),b("React").createElement(u,{value:"home"},h._("Home location"),b("React").createElement(b("PagesInsightsNearbyTooltipHelp.react"),{helpText:h._("View a breakdown by people on Facebook who live within {radius} km of your business or people travelling from over {radius} km away.",[h._param("radius",l)]),className:"_5fi5"})),b("React").createElement(u,{disabled:d.props.selectedMode==="curves",value:"ageAndGender"},h._("Age and gender")))},d.$7=function(a){d.props.onCategoryChange(a.target.value)},d.$5=function(){return b("React").createElement("div",{className:"_333r",key:"leftColumn"},b("React").createElement("div",{className:"_423r"},d.$8(),d.$9()))},d.$8=function(){return b("React").createElement(b("XUIRadioButtonGroup.react"),{className:"_423s",onValueChange:d.$10,selectedDepressed:!0,selectedValue:d.props.selectedMode},b("React").createElement(b("XUIButton.react"),{image:b("React").createElement(b("Image.react"),{src:d.props.selectedMode==="columns"?j("76138"):j("76137"),alt:""}),label:h._("Show Columns"),labelIsHidden:!0,size:"large",value:"columns"}),b("React").createElement(b("XUIButton.react"),{disabled:d.props.selectedCategory==="ageAndGender",image:b("React").createElement(b("Image.react"),{src:d.props.selectedMode==="curves"?j("76140"):j("76139"),alt:""}),label:h._("Show Curves"),labelIsHidden:!0,size:"large",value:"curves"}))},d.$10=function(a){d.props.onModeChange(a)},d.$9=function(){return d.props.selectedMode==="columns"?d.$11():d.$12()},d.$11=function(){var a=A[d.props.selectedCategory];return b("React").createElement("div",null,b("React").createElement("div",{className:"_532w"},b("React").createElement(b("InsightsLegend_DEPRECATED.react"),{className:"_3-95"},a.map(function(a,c){return b("React").createElement(b("InsightsLegendAreaKey.react"),{className:"_423t",color:v[c],key:c},a)}))),b("React").createElement("div",{className:"_423u"},d.$13()))},d.$13=function(){var a=b("SpectrumPercentageScale")(),c=d.props,e=c.dayRange,f=c.peopleMetricsByDay;c=c.selectedCategory;var g=z[c];e=q({begin:e.begin,end:e.end.addDays(-1)},c,f);return b("React").createElement(b("SpectrumStretchChart"),{key:"columnChart",scaleX:b("d3-old/scale/ordinal")().domain(g),scaleY:a,theme:b("pagesInsightsNearbyGetColumnChartTheme")(g.length)},b("React").createElement(b("SpectrumXAxis"),null),b("React").createElement(b("SpectrumYAxis"),null),b("React").createElement(b("SpectrumSideBySideColumns"),{data:e,label:e.length>1?"NONE":"SPLIT",useCenteredColumns:!0}))},d.$12=function(){var a=z[d.props.selectedCategory];return b("React").createElement("div",null,b("React").createElement("div",{className:"_532w"},b("React").createElement(b("InsightsLegend_DEPRECATED.react"),{className:"_3-95"},a.map(function(a,c){return b("React").createElement(b("InsightsLegendLineKey.react"),{className:"_423t",color:v[c],key:c},a)}))),b("React").createElement("div",{className:"_423u"},d.$14(a)))},d.$14=function(a){__p&&__p();var c=d.props,e=c.dayRange;c=c.selectedCategory;c!=="ageAndGender"||i(0,2352);var f=d.props.peopleMetricsByDay,g=m[c];c=o(e,n[c],p(e,f).map(g));var h=e.end.addDays(-1);return b("React").createElement(b("SpectrumStretchChart"),{key:"curveChart",scaleX:t(e),scaleY:b("SpectrumPercentageScale")(),theme:w},b("React").createElement(b("SpectrumXAxis"),{secondaryTicks:!0}),b("React").createElement(b("SpectrumYAxis"),null),k(e,d.props.emptyDaysSegments),b("React").createElement(b("SpectrumLines"),{data:c,partialValue:function(a){return b("immutable").is(a.day,h)},titles:a,valueX:function(a){return a.day.toUTCDate()},valueY:function(a){return a.value}}),b("React").createElement(b("SpectrumTooltipMenu"),null))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement(b("HubbleCard"),{className:"clearfix",subtitle:x(this.props.metricsContext,"learnMore",this.$1),title:this.$2()},this.$3())};return c}(b("React").PureComponent);g.propTypes={dayRange:c.object.isRequired,emptyDaysSegments:c.object.isRequired,metricsContext:c.object.isRequired,peopleMetricsByDay:c.object.isRequired,selectedCategory:c.string.isRequired,selectedMode:c.string.isRequired,onCategoryChange:c.func.isRequired,onLearnMoreClick:c.func.isRequired,onModeChange:c.func.isRequired};e.exports=g}),null);
__d("PagesInsightsNearbyPeopleAdUpsellRightColumn.react",["cx","fbt","React","XUIButton.react","pagesInsightsNearbyPotentialReachGetFbt","shallowCompare","suiMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("pagesInsightsNearbyPotentialReachGetFbt").pagesInsightsNearbyPotentialReachGetFbt;a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.shouldComponentUpdate=b("shallowCompare").bind(void 0,babelHelpers.assertThisInitialized(c));return c}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_333q"},j(this.props))};return c}(b("React").Component);c.propTypes={onPromotionRequested:a.func.isRequired,potentialReach:a.object};function j(a){var c=a.potentialReach;return!c?null:b("React").createElement("div",{className:"_5lt6"},b("React").createElement("div",{className:"_5lt7"},k(),b("React").createElement("div",{className:"_3-8w"},i(c)),l(a.onPromotionRequested)))}function k(){return b("React").createElement("div",{className:"_5npl"},h._("REACH PEOPLE NEARBY"))}function l(a){return b("React").createElement(b("XUIButton.react"),{className:"_3-8o",label:h._("Create Ad"),onClick:a,size:"large",use:"confirm"})}e.exports=c}),null);
__d("PagesInsightsNearbyPeopleCheckInsView.react",["cx","fbt","PagesInsightsNearbyDay","React","SpectrumBrush","SpectrumIntegerScale","SpectrumLines","SpectrumStretchChart","SpectrumStyle","SpectrumTooltipMenu","SpectrumXAxis","SpectrumYAxis","XUIText.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("PagesInsightsNearbyDay").Day,j=b("PagesInsightsNearbyDay").convertDayRangeToSpectrumTimeScale;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props;return b("React").createElement("div",{className:a.className},b("React").createElement(b("XUIText.react"),{display:"block",size:"meta1"},h._({"year":"View the number of people who have checked in to your business during the past year. Check-in data is reported in the Pacific time zone.","quarter":"View the number of people who have checked in to your business during the past quarter. Check-in data is reported in the Pacific time zone.","month":"View the number of people who have checked in to your business during the past month. Check-in data is reported in the Pacific time zone.","week":"View the number of people who have checked in to your business during the past week. Check-in data is reported in the Pacific time zone."},[h._enum(a.timeSpan,{year:"year",quarter:"quarter",month:"month",week:"week"})])),k(a.dayRange,a.checkInsMetric))};return c}(b("React").Component);function k(a,c){return b("React").createElement("div",{className:"_423u"},b("React").createElement(b("SpectrumStretchChart"),{key:"checkIns",scaleX:j(a),scaleY:l(5),theme:o},b("React").createElement(b("SpectrumXAxis"),{secondaryTicks:!0}),b("React").createElement(b("SpectrumYAxis"),null),b("React").createElement(b("SpectrumLines"),{data:[m(a,c)],partialValue:function(a){return b("immutable").is(a.day,c.lastDay)},titles:[n],valueX:function(a){return a.day.toUTCDate()},valueY:function(a){return Number.isFinite(a.checkIns)?a.checkIns:null}}),b("React").createElement(b("SpectrumBrush"),null),b("React").createElement(b("SpectrumTooltipMenu"),null)))}function l(a){__p&&__p();function c(b){__p&&__p();var d=b.copy.bind(b),e=b.nice.bind(b);Object.assign(b,{copy:function(){return c(d())},nice:function(c){e();c=b.domain();var d=c[0];c=c[1];c<a&&(c=a);return b.domain([d,c])}});return b}return c(b("SpectrumIntegerScale")())}function m(a,b){var c=b.countPerDay;return i.range(a.begin,a.end).map(function(a){return{day:a,checkIns:c.get(a)}}).toArray()}var n=h._("Check-ins"),o={lines:{colors:[b("SpectrumStyle").FB_BLUE],markers:!1},yAxis:{tickPadding:10}};e.exports=a}),null);
__d("PagesInsightsNearbyUnitAgnosticScale",["d3-old/scale/linear"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){__p&&__p();function a(b){__p&&__p();var c=b.copy;Object.assign(b,{copy:function(){return a(c())},tooltipFormat:function(){return function(a){return null}},tickFormat:function(){return function(a){return a.toString()}},ticks:function(a){return[0]},nice:function(a){return b.domain([0,b.domain()[1]])},tickFormatMaxLength:10});return b}return a(b("d3-old/scale/linear")())}e.exports={UNIT_AGNOSTIC_SCALE:a()}}),null);
__d("PagesInsightsNearbyPeopleColumns.react",["cx","LocalInsightsUnavailableMessage.react","PagesInsightsNearbyUnitAgnosticScale","React","SpectrumSideBySideColumns","SpectrumStretchChart","SpectrumStyle","SpectrumXAxis","SpectrumYAxis","d3-old/scale/ordinal","pagesInsightsNearbyGetColumnChartTheme","shallowCompare"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("PagesInsightsNearbyUnitAgnosticScale").UNIT_AGNOSTIC_SCALE;b("SpectrumStyle").FB_BLUE;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.shouldComponentUpdate=b("shallowCompare").bind(void 0,babelHelpers.assertThisInitialized(c));return c}var d=c.prototype;d.render=function(){var a=this.props,c=a.className;a=a.columns;return this.props.columns.every(function(a){return!Number.isFinite(a.value)||a.value===0})?b("React").createElement(b("LocalInsightsUnavailableMessage.react"),{className:c}):b("React").createElement("div",{className:c},i(a,this.props.formatLabel))};return c}(b("React").Component);function i(a,c){var d=b("pagesInsightsNearbyGetColumnChartTheme")(a.size,"tiny"),e=a.map(function(a){return a.key});a=a.map(function(a){return a.value}).toArray();return b("React").createElement("div",{className:"_423u"},b("React").createElement(b("SpectrumStretchChart"),{scaleX:j(e,c),scaleY:h,theme:d},b("React").createElement(b("SpectrumXAxis"),null),b("React").createElement(b("SpectrumYAxis"),null),b("React").createElement(b("SpectrumSideBySideColumns"),{data:[a],label:"NONE",useCenteredColumns:!0})))}function j(a,c){a=b("d3-old/scale/ordinal")().domain(a.toArray());c&&(a.tickFormat=function(a){return c});return a}e.exports=a}),null);
__d("pagesInsightsNearbyPeopleHourlyChartFormatHour",["invariant","DateFormatConfig","DateStrings","padNumber"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("DateFormatConfig").formats["g A"];function a(a){__p&&__p();var b="";for(var c=0;c<h.length;c++){var d=h.charAt(c);if(d==="\\"){c++;b+=h.charAt(c);continue}b+=i(d,a)}return b.trim()}function i(a,c){switch(a){case"d":case"j":case"S":case"D":case"l":case"F":case"f":case"M":case"m":case"n":case"Y":case"y":case"i":case"s":case"X":g(0,4011);case"a":return c%12===0?b("DateStrings").get12HourClockSuffix(c).toString():"";case"A":return c%12===0?b("DateStrings").getUppercase12HourClockSuffix(c).toString():"";case"g":return""+(c===0||c===12?12:c%12);case"G":return""+c;case"h":return c===0||c===12?"12":b("padNumber")(""+c%12,2);case"H":return b("padNumber")(""+c,2)}return a}e.exports=a}),null);
__d("PagesInsightsNearbyPeopleHourlyChart.react",["DateConsts","PagesInsightsNearbyPeopleColumns.react","React","TypedImmutable","pagesInsightsNearbyPeopleHourlyChartFormatHour","shallowCompare"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("TypedImmutable").ImmRange;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.shouldComponentUpdate=b("shallowCompare").bind(void 0,babelHelpers.assertThisInitialized(c));return c}var d=c.prototype;d.render=function(){var a=this.props,c=a.averagePeopleCountByHour;a=a.className;return b("React").createElement(b("PagesInsightsNearbyPeopleColumns.react"),{className:a,columns:g(0,b("DateConsts").HOUR_PER_DAY).map(function(a){return{key:a,value:c.get(a,null)}}),formatLabel:b("pagesInsightsNearbyPeopleHourlyChartFormatHour")})};return c}(b("React").Component);e.exports=a}),null);
__d("PagesInsightsNearbyPeopleHourlyView.react",["PagesInsightsNearbyPeopleHourlyChart.react","React","XUIText.react","shallowCompare","suiMargin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.shouldComponentUpdate=b("shallowCompare").bind(void 0,babelHelpers.assertThisInitialized(c));return c}var d=c.prototype;d.render=function(){var a=this.props;return b("React").createElement("div",{className:a.className},b("React").createElement(b("XUIText.react"),{display:"block",size:"meta1"},a.subtitle),b("React").createElement(b("PagesInsightsNearbyPeopleHourlyChart.react"),{averagePeopleCountByHour:a.averagePeopleCountByHour,className:"_3-8z"}))};return c}(b("React").Component);e.exports=a}),null);
__d("PagesInsightsNearbyPeopleOverallChartAndLegend.react",["cx","fbt","InsightsLegend_DEPRECATED.react","LIChartHatching","LocalInsightsUnavailableMessage.react","PagesInsightsNearbyDay","PagesInsightsNearbyLegendLineKeyWithTooltipHelp.react","PagesInsightsNearbyUnitAgnosticScale","React","SpectrumBrush","SpectrumLines","SpectrumStretchChart","SpectrumStyle","SpectrumTooltipMenu","SpectrumXAxis","SpectrumYAxis","immutable","shallowCompare","suiMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("LIChartHatching").renderChartHatching,j=b("PagesInsightsNearbyDay").Day,k=b("PagesInsightsNearbyDay").convertDayRangeToSpectrumTimeScale,l=b("PagesInsightsNearbyUnitAgnosticScale").UNIT_AGNOSTIC_SCALE,m=b("immutable").Iterable(["all","adSeen"]),n={adSeen:{title:h._("People nearby who saw your ads"),helpText:h._("View the trend of people on Facebook within the selected radius and date range who also saw at least one of your ads in the past 28 days.")},all:{title:h._("People nearby"),helpText:h._("View the trend of people on Facebook within the selected radius and date range.")}},o=[b("SpectrumStyle").FB_BLUE,b("SpectrumStyle").COBALT3,b("SpectrumStyle").PURPLE6,b("SpectrumStyle").LIGHT_GREEN,b("SpectrumStyle").CASPER,b("SpectrumStyle").TAN,b("SpectrumStyle").DUCKEGG],p={lines:{colors:o,markers:!1},yAxis:{tickPadding:10}};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.shouldComponentUpdate=b("shallowCompare").bind(void 0,babelHelpers.assertThisInitialized(c));return c}var d=c.prototype;d.render=function(){var a=this.props.peopleCountsByDay;return a.isEmpty()?b("React").createElement(b("LocalInsightsUnavailableMessage.react"),{className:this.props.className}):b("React").createElement("div",{className:this.props.className},q(),r(this.props.dayRange,a,this.props.emptyDaysSegments))};return c}(b("React").Component);function q(){return b("React").createElement("div",{className:"_532w"},b("React").createElement(b("InsightsLegend_DEPRECATED.react"),{className:"_3-95"},m.map(function(a,c){return b("React").createElement(b("PagesInsightsNearbyLegendLineKeyWithTooltipHelp.react"),{key:a,lineColor:o[c],title:n[a].title,helpText:n[a].helpText})})))}function r(a,c,d){c=s(a,c);var e=a.end.addDays(-1);return b("React").createElement("div",{className:"_423u"},b("React").createElement(b("SpectrumStretchChart"),{key:"peopleOverall",scaleX:k(a),scaleY:l,theme:p},b("React").createElement(b("SpectrumXAxis"),{secondaryTicks:!0}),b("React").createElement(b("SpectrumYAxis"),null),i(a,d),b("React").createElement(b("SpectrumLines"),{data:c,partialValue:function(a){return b("immutable").is(a.day,e)},titles:m.map(function(a){return n[a].title}),valueX:function(a){return a.day.toUTCDate()},valueY:function(a){return a.count}}),b("React").createElement(b("SpectrumBrush"),null),b("React").createElement(b("SpectrumTooltipMenu"),null)))}function s(a,b){return m.map(function(c){var d=t[c];return j.range(a.begin,a.end).map(function(a){var c=b.get(a);return c==null?{day:a,count:null}:{day:a,count:d(c)}}).toArray()}).toArray()}var t={all:function(a){return a.howManyTotal},adSeen:function(a){return a.howManySawAds}};e.exports=a}),null);
__d("PagesInsightsNearbyPeopleOverallView.react",["PagesInsightsNearbyPeopleOverallChartAndLegend.react","React","XUIText.react","suiMargin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:this.props.className},b("React").createElement(b("XUIText.react"),{display:"block",size:"meta1"},this.props.subtitle),b("React").createElement(b("PagesInsightsNearbyPeopleOverallChartAndLegend.react"),{className:"_3-8z",dayRange:this.props.dayRange,emptyDaysSegments:this.props.emptyDaysSegments,peopleCountsByDay:this.props.peopleCountsByDay}))};return c}(b("React").PureComponent);c.propTypes={className:a.string,dayRange:a.object.isRequired,emptyDaysSegments:a.object.isRequired,peopleCountsByDay:a.object.isRequired,subtitle:a.any.isRequired};e.exports=c}),null);
__d("PagesInsightsNearbyPeopleWeeklyChart.react",["DateFormatConfig","DateStrings","PagesInsightsNearbyPeopleColumns.react","React","TypedImmutable","shallowCompare"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("TypedImmutable").ImmRange,h=g(0,7).map(function(a){return b("DateStrings").getWeekdayNameShort(a).toString()}).toMap(),i=(b("DateFormatConfig").weekStart+1)%7;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.shouldComponentUpdate=b("shallowCompare").bind(void 0,babelHelpers.assertThisInitialized(c));return c}var d=c.prototype;d.render=function(){var a=this,c=g(0,7).map(function(a){return(i+a)%7}).map(function(b){return{key:b,value:a.props.averagePeopleCountByDayOfWeek.get(b,null)}});return b("React").createElement(b("PagesInsightsNearbyPeopleColumns.react"),{className:this.props.className,columns:c,formatLabel:function(a){return h.get(a)}})};return c}(b("React").Component);e.exports=a}),null);
__d("PagesInsightsNearbyPeopleWeeklyView.react",["PagesInsightsNearbyPeopleWeeklyChart.react","React","XUIText.react","shallowCompare","suiMargin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.shouldComponentUpdate=b("shallowCompare").bind(void 0,babelHelpers.assertThisInitialized(c));return c}var d=c.prototype;d.render=function(){var a=this.props;return b("React").createElement("div",{className:a.className},b("React").createElement(b("XUIText.react"),{display:"block",size:"meta1"},a.subtitle),b("React").createElement(b("PagesInsightsNearbyPeopleWeeklyChart.react"),{averagePeopleCountByDayOfWeek:a.averagePeopleCountByDayOfWeek,className:"_3-8z"}))};return c}(b("React").Component);e.exports=a}),null);
__d("PagesInsightsNearbyPeopleCard.react",["cx","fbt","HubbleTabbedSections","InsightsTabbedSection.react","Link.react","LIRadiusFormatter","PagesInsightsNearbyPeopleAdUpsellRightColumn.react","PagesInsightsNearbyPeopleCheckInsView.react","PagesInsightsNearbyPeopleHourlyView.react","PagesInsightsNearbyPeopleOverallView.react","PagesInsightsNearbyPeopleWeeklyView.react","React","ReactDOM"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("LIRadiusFormatter").getRadiusWithUnit,j=["hourly","weekly","overall","checkIns"],k={checkIns:h._("Check-ins"),hourly:h._("People nearby: Hourly"),overall:h._("Overall"),weekly:h._("Weekly")},l={checkIns:function(a){return b("React").createElement(b("PagesInsightsNearbyPeopleCheckInsView.react"),{checkInsMetric:a.checkInsMetric,dayRange:a.dayRange,timeSpan:a.metricsContext.timeSpan})},hourly:function(a,c){return b("React").createElement(b("PagesInsightsNearbyPeopleHourlyView.react"),{averagePeopleCountByHour:a.averagePeopleCountByHour,subtitle:c})},overall:function(a,c){return b("React").createElement(b("PagesInsightsNearbyPeopleOverallView.react"),{dayRange:a.dayRange,emptyDaysSegments:a.emptyDaysSegments,peopleCountsByDay:a.peopleCountsByDay,subtitle:c})},weekly:function(a,c){return b("React").createElement(b("PagesInsightsNearbyPeopleWeeklyView.react"),{averagePeopleCountByDayOfWeek:a.averagePeopleCountByDayOfWeek,subtitle:c})}};function m(a,c,d){return a.region.type==="radius"?h._({"year":"View the trend of people on Facebook within {radius} of your business during the past year. {=Learn More}.","quarter":"View the trend of people on Facebook within {radius} of your business during the past quarter. {=Learn More}.","month":"View the trend of people on Facebook within {radius} of your business during the past month. {=Learn More}.","week":"View the trend of people on Facebook within {radius} of your business during the past week. {=Learn More}."},[h._param("radius",i(a.region.radius)),h._enum(a.timeSpan,{year:"year",quarter:"quarter",month:"month",week:"week"}),h._param("=Learn More",b("React").createElement(b("Link.react"),{onClick:d,ref:c},h._("Learn more")))]):h._({"year":"View the trend of people on Facebook in postcode {zip code} during the past year. {=Learn More}.","quarter":"View the trend of people on Facebook in postcode {zip code} during the past three months. {=Learn More}.","month":"View the trend of people on Facebook in postcode {zip code} during the past month. {=Learn More}.","week":"View the trend of people on Facebook in postcode {zip code} during the past week. {=Learn More}."},[h._param("zip code",a.region.postcode.name),h._enum(a.timeSpan,{year:"year",quarter:"quarter",month:"month",week:"week"}),h._param("=Learn More",b("React").createElement(b("Link.react"),{onClick:d,ref:c},h._("Learn more")))])}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.state={activeSectionKey:"hourly"};return b}var d=c.prototype;d.render=function(){var a=this;return b("React").createElement(b("HubbleTabbedSections"),{activeKey:this.state.activeSectionKey,className:"_5nzo",onTabClick:function(b){a.setState({activeSectionKey:b.props.sectionKey})}},this.$1())};d.$1=function(){var a=this.props,c=m(a.metricsContext,"learnMore",this.$2.bind(this));return j.map(function(d){return b("React").createElement(b("InsightsTabbedSection.react"),{sectionKey:d,key:d,title:k[d]},b("React").createElement(n,{potentialAdReach:a.potentialAdReach,onPromotionRequested:a.onPromotionRequested},l[d](a,c)))})};d.$2=function(){this.props.onLearnMoreClick(b("ReactDOM").findDOMNode(this.refs.learnMore))};return c}(b("React").Component);var n=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.render=function(){var a=this.props;return b("React").createElement("div",{className:"clearfix"},b("React").createElement(b("PagesInsightsNearbyPeopleAdUpsellRightColumn.react"),{potentialReach:a.potentialAdReach,onPromotionRequested:a.onPromotionRequested}),b("React").createElement("div",{className:"_333r"},b("React").createElement("div",{className:"_423r"},a.children)))};return a}(b("React").Component);e.exports=a}),null);
__d("LIBoard.react",["cx","fbt","DateConsts","DateTime","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","FBVerticalCollapsingAnimation.react","InsightsLoadingIndicator.react","Instant","LIAdPerformanceCard.react","LIConfig","LIHeader.react","LIHighlightsCard.react","LIIntroCard.react","LITestIDs","PagesInsightsNearbyDay","PagesInsightsNearbyDemographicsCard.react","PagesInsightsNearbyPeopleCard.react","React","ReactDOM","StickyArea.react","Timezone","TypedImmutable","ViewportBounds","XUIButton.react","XUICard.react","XUIGrayText.react","XUINotice.react","XUISpinner.react","curry","getIterableContiguousSegments","shallowEqual","suiMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("DateConsts").HOUR_PER_DAY,j=b("LIConfig").LOCAL_INSIGHTS_CONTENT_TRANSLATED_GK,k=b("PagesInsightsNearbyDay").Day,l=b("TypedImmutable").ImmIndexedIterable,m=b("TypedImmutable").ImmRange,n=function(a,b){return a+b};function o(a,b){var c=k.range(a.begin,a.end).map(function(a){return b.get(a)}).filter(function(a){return a!=null});return m(0,i).toSetSeq().map(function(a){var b=c.map(function(b){return b.howManyByHour.get(a)}).filter(function(a){return a!=null&&a!==0}).toList();return b.size===0?null:b.reduce(n)/b.size}).filter(function(a){return a!=null}).toMap()}function p(a,b){__p&&__p();var c=m(0,7).map(function(a){return{sum:0,count:0}}).toArray();k.range(a.begin,a.end).forEach(function(a){var d=b.get(a);if(!d)return;a=a.getIndexInWeek();++c[a].count;c[a].sum+=d.howManyTotal});return l.create(c).toKeyedSeq().map(function(a){return a.count===0?null:a.sum/a.count}).filter(function(a){return a!=null}).toMap()}function q(a){a=a.entrySeq().maxBy(function(a){return a[1]});return a!=null?a[0]:void 0}function r(a){a=a.entrySeq().maxBy(function(a){return a[1]});return a!=null?a[0]:void 0}function s(a,c){return b("getIterableContiguousSegments")(k.range(a.begin,a.end).toSetSeq().map(function(a){return!c.has(a)}))}function t(a){return a.map(function(a){return a.howManySawAds/a.howManyTotal})}function u(a){return a==null||a.loadStatus!=="loaded"||a.value.type!=="create"?null:{count:a.value.audienceSize,distance:a.value.radius}}var v=2*b("DateConsts").SEC_PER_DAY;function w(a){if(a==null)return!1;a=b("Instant").now()-new(b("DateTime"))(a,b("Timezone").PST8PDT).instant;return a>v}var x=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.componentDidMount=function(){this.refs.root.appendChild(this.props.survey.getForm().getRoot())};d.render=function(){return b("React").createElement(b("XUICard.react"),{className:"_2pi1"},b("React").createElement("div",{ref:"root"}))};return a}(b("React").Component);a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){return!b("shallowEqual")(a,this.props)};d.componentDidMount=function(){this.props.onDidMount()};d.$1=function(a){a=b("ReactDOM").findDOMNode(this.refs[a]).getBoundingClientRect().top;var c=b("ReactDOM").findDOMNode(this.refs.board).getBoundingClientRect().top,d=b("ReactDOM").findDOMNode(this.refs.stickyHeader).getBoundingClientRect().height,e=10;c=c+d+e;window.scroll(0,a-c)};d.$2=function(){var a=this.props.optIn;if(a==null)return null;return a.loadStatus==="loaded"&&a.value!=null&&a.value.creationTime!=null?!a.value.isNew?null:b("React").createElement("div",{className:"_26e-","data-testid":b("LITestIDs").OPT_IN_SUCCESS},b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"dark",size:"xlarge",weight:"bold"},h._("Thank You")),b("React").createElement(b("XUIGrayText.react"),{className:"_3-8x",display:"block",shade:"light"},h._("Please check back in a few days to view insights."))):b("React").createElement("div",{className:"_26e-","data-testid":b("LITestIDs").OPT_IN_REQUEST},b("React").createElement(b("XUIButton.react"),{"data-testid":b("LITestIDs").OPT_IN_BUTTON,disabled:a.loadStatus==="loading",label:h._("Request Access"),size:"xlarge",use:"special",onClick:this.props.onClickRequestOptIn}))};d.$3=function(a,c){return b("React").createElement(b("FBVerticalCollapsingAnimation.react"),{ref:"introCard",visibility:a==="visible"||!c?"visible":"hidden"},b("React").createElement("div",{className:"_2pip"},b("React").createElement(b("LIIntroCard.react"),{canDismiss:c,onDismissClick:this.props.onIntroCardDismissClick,onSeeMoreInfoClick:this.$1.bind(this)},this.$2())))};d.$4=function(){var a=this.props.survey;return a!=null&&a.loadStatus==="loaded"&&a.value!=null?b("React").createElement(x,{survey:a.value}):null};d.render=function(){var a=this.props,c=a.introCardVisibility,d=a.optIn;a=a.pageLocation;if(c==null||c.loadStatus!=="loaded"||a==null||a.loadStatus!=="loaded"||d==null||d.loadStatus!=="loaded")return b("React").createElement(b("InsightsLoadingIndicator.react"),{size:"large"});d=d.value;d=w(d!=null?d.creationTime:null);return b("React").createElement("div",{className:this.props.className,ref:"board",style:{position:"relative"}},b("React").createElement("div",{style:{height:"16px"}}),this.$3(c.value,d),d?b("React").createElement(b("StickyArea.react"),{ref:"stickyHeader",offset:b("ViewportBounds").getTop()},b("React").createElement(b("LIHeader.react"),{metricsContext:this.props.spec.selectedMetricsContext,onLearnMoreClick:this.props.onLearnMoreClick.bind(this,"privacy"),onRegionChange:this.props.onHeaderRegionChange,onTimeSpanChange:this.props.onHeaderTimeSpanChange,postcodePolygon:this.props.postcodePolygon})):null,d?this.$4():null,d?b("React").createElement(b("FBOverlayContainer.react"),null,b("React").createElement(b("FBOverlayBase.react"),null,this.$5(a.value.geoCoordinates)),z(this.props.spec.loadingActivity)):null)};d.$5=function(a){var c=this.props.spec,d={begin:c.metricsPivotalDays.firstShown,end:c.metricsPivotalDays.lastDay},e=p(d,c.peopleMetricsByDay);d=o(d,c.peopleMetricsByDay);var f={begin:c.metricsPivotalDays.firstShown,end:c.metricsPivotalDays.lastDay.addDays(1)},g=s(f,c.peopleMetricsByDay),h=u(this.props.promotionData);return b("React").createElement("div",null,y(c.peopleMetricsByDay),b("React").createElement(b("LIHighlightsCard.react"),{emptyDaysSegments:g,howManyPeoplePerDay:c.peopleMetricsByDay.toSeq().map(function(a){return a.howManyTotal}).toMap(),mapArea:{coordinates:a,region:c.displayedMetricsContext.region},metricsContext:c.displayedMetricsContext,metricsPivotalDays:c.metricsPivotalDays,peakDayOfWeek:r(e),peakHour:q(d),peopleMetricsByDay:c.peopleMetricsByDay,potentialAdReach:h,onPromotionRequested:this.props.onPromotionRequested}),b("React").createElement(b("LIAdPerformanceCard.react"),{adAccountsByID:this.props.adAccountsByID,adIDsJustCreatedByAdAccountID:this.props.adIDsJustCreatedByAdAccountID,adsByID:this.props.adsByID,dayRange:f,emptyDaysSegments:g,metricsRegion:c.displayedMetricsContext.region,onLearnMoreClick:b("curry")(this.props.onLearnMoreClick,"adPerformance"),onPromotionRequested:this.props.onPromotionRequested,onSelectedAdAccountIDChange:this.props.onSelectedAdAccountIDChange,pageID:this.props.pageID,potentialAdReach:h,ratioOfSeenAdsByDay:t(c.peopleMetricsByDay),ref:"adPerformance",selectedAdAccountID:this.props.selectedAdAccountID}),b("React").createElement(b("PagesInsightsNearbyPeopleCard.react"),{averagePeopleCountByHour:d,averagePeopleCountByDayOfWeek:e,checkInsMetric:c.checkInsMetric,dayRange:f,emptyDaysSegments:g,metricsContext:c.displayedMetricsContext,peopleCountsByDay:c.peopleMetricsByDay,potentialAdReach:h,onPromotionRequested:this.props.onPromotionRequested,onLearnMoreClick:b("curry")(this.props.onLearnMoreClick,"peopleNearby"),ref:"nearby"}),b("React").createElement(b("PagesInsightsNearbyDemographicsCard.react"),{dayRange:f,emptyDaysSegments:g,metricsContext:c.displayedMetricsContext,peopleMetricsByDay:c.peopleMetricsByDay,selectedCategory:this.props.demographicsCategory,selectedMode:this.props.demographicsMode,onCategoryChange:this.props.onDemographicsCategoryChange,onModeChange:this.props.onDemographicsModeChange,onLearnMoreClick:b("curry")(this.props.onLearnMoreClick,"demographics"),ref:"demographics"}))};return c}(b("React").Component);function y(a){if(!a.isEmpty())return null;return j?b("React").createElement(b("XUINotice.react"),{className:"_25ba",size:"small"},h._("There weren't enough people nearby to show insights for the selected date and region. Try choosing a longer date range or larger region.")):b("React").createElement(b("XUINotice.react"),{className:"_25ba",size:"small"},h._("There weren't enough people nearby to show insights for the selected date and radius. Try choosing a longer date range or larger radius."))}function z(a){return a!=="loading"?null:b("React").createElement(b("FBOverlayElement.react"),null,b("React").createElement("div",{className:"_1qwi"},b("React").createElement(b("StickyArea.react"),null,b("React").createElement("div",{style:{padding:"60px"}},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large"})))))}e.exports=a}),null);
__d("LILearnMoreDialog.react",["fbt","ix","Image.react","LayerFadeOnHide","Layout.react","Link.react","React","XUICloseButton.react","XUIDialog.react","XUIText.react","suiMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("Layout.react").Column,j=b("Layout.react").FillColumn;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){a||c.props.onDismiss()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props.state;return b("React").createElement(b("XUIDialog.react"),{causalElement:a.causalElement,behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},hideOnEscape:!0,onToggle:this.$1,shown:a.visibility==="shown",width:580},b("React").createElement(b("XUICloseButton.react"),{onClick:this.props.onDismiss,style:{position:"absolute",top:"20px",right:"20px"}}),k(a.topic))};return c}(b("React").PureComponent);c.propTypes={state:a.object.isRequired,onDismiss:a.func.isRequired};function k(a){var c=l[a];return b("React").createElement(b("Layout.react"),{key:a,style:{padding:"32px 24px"}},b("React").createElement(i,null,b("React").createElement(b("Image.react"),{className:"_3-92",src:c.image})),b("React").createElement(j,null,b("React").createElement(b("XUIText.react"),{display:"block",size:"header3",weight:"bold"},c.title),b("React").createElement(b("XUIText.react"),{className:"_3-8w",display:"block",size:"header4",weight:"bold"},c.subtitle),c.content))}var l={adPerformance:{title:g._("Ads performance"),subtitle:null,image:h("76150"),content:b("React").createElement(b("XUIText.react"),{className:"_3-8w",display:"block",size:"header4"},g._("We can only show ad spending for one ad account at a time. If you have multiple ad accounts, use the selector above the chart to change accounts. Learn more in the {=Help Center}.",[g._param("=Help Center",b("React").createElement(b("Link.react"),{href:"https://www.facebook.com/help/408812439309311"},g._("Help Centre")))]))},demographics:{title:g._("Demographics"),subtitle:null,image:h("76150"),content:b("React").createElement(b("XUIText.react"),{className:"_3-8w",display:"block",size:"header4"},g._("Demographic details are based on the information that people provide on Facebook. Bar graphs show a breakdown of the data aggregated over the entire selected date range. Line graphs show a daily breakdown over the course of your selected date range."))},peopleNearby:{title:g._("People nearby"),subtitle:null,image:h("76150"),content:b("React").createElement(b("XUIText.react"),{className:"_3-8w",display:"block",size:"header4"},g._("This shows the trend of people on Facebook near your business. Select the \"Weekly\" or \"Hourly\" tabs to see which days and times are busiest near your shop. Select the \"Overall\" tabs to see the overall trend during the selected date range. We don't show insights for days when there weren't enough people nearby."))},privacy:{title:g._("About Local Insights data"),subtitle:g._("All Local Insights data is normalised and anonymous."),image:h("76152"),content:b("React").createElement(b("XUIText.react"),{className:"_3-8w",display:"block",size:"header4"},g._("Local Insights uses data from people who have location services enabled to show trends about people near your business. To protect the privacy of people on Facebook, this data is anonymised and only normalised values or percentages are reported. We don't show insights for fewer than 100 people in total. To find out more, read our {=Data Policy}.",[g._param("=Data Policy",b("React").createElement(b("Link.react"),{href:"/policy"},g._("Data Policy")))]))}};e.exports=c}),null);
__d("LIDailyMetricsCache",["Promise","DateConsts","LightweightImmutable","PagesInsightsNearbyDay","TypedImmutable","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("PagesInsightsNearbyDay").Day,h=b("PagesInsightsNearbyDay").splitDayRangeByMaxSize,i=b("PagesInsightsNearbyDay").joinDayRanges,j=b("PagesInsightsNearbyDay").subtractDayRange,k=b("TypedImmutable").ImmIndexedIterable,l=b("TypedImmutable").ImmMap;function m(a){return l.create(k.create(a.data).map(function(a){return[a.name,l.create(k.create(a.values).map(function(a){return[b("nullthrows")(g.fromISOString(a.end_time)).addDays(-1),a.value]}))]}))}function n(a,b){return{date_format:"Y-m-d",metric:b,period:"day",since:a.begin.addDays(1).toISOString(),until:a.end.addDays(1).toISOString()}}function o(a,b){return a.mergeWith(function(a,b){return a.merge(b)},b)}var p=80,q=10*b("DateConsts").SEC_PER_MIN*b("DateConsts").MS_PER_SEC;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.create=function(a){return new c({availableDayRange:null,refreshTime:0,$DailyMetricsCache1:a.toSeq().map(function(a){return l.create()}).toMap()})};var d=c.prototype;d.$DailyMetricsCache2=function(a,c){var d=this;a=h(p,a);return b("Promise").all(a.map(function(a){return c(n(a,d.$DailyMetricsCache1.keySeq())).then(function(a){return m(a)})}).toArray()).then(function(a){return a.reduce(o,l.create())})};d.$DailyMetricsCache3=function(a,b,d){return new c({availableDayRange:a,refreshTime:d+q,$DailyMetricsCache1:b})};d.$DailyMetricsCache4=function(a,b){return new c({availableDayRange:a,refreshTime:this.refreshTime,$DailyMetricsCache1:o(this.$DailyMetricsCache1,b)})};d.$DailyMetricsCache5=function(a,b,c,d){var e=i(a,this.availableDayRange);return c==null||e.count()>1?this.$DailyMetricsCache3(a,b,d):this.$DailyMetricsCache4(e.first(),b)};d.fetch=function(a,c,d){var e=this,f=c<this.refreshTime?this.availableDayRange:null,g=j(a,f);return b("Promise").all(g.map(function(a){return e.$DailyMetricsCache2(a,d)}).toArray()).then(function(b){return e.$DailyMetricsCache5(a,b.reduce(o,l.create()),f,c)})};d.get=function(){return this.$DailyMetricsCache1};return c}(b("LightweightImmutable"));e.exports={DailyMetricsCache:a}}),null);
__d("LIMetricsContext",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();d=b("immutable").Set;f={quarter:null,month:null,week:null};b=d(Object.keys(f));function a(a){if(a.type==="postcode")return{DAILY:"daily_total",DEMOGRAPHICS:"demographic_breakdowns",HOURLY:"hourly_breakdowns",IS_TRAVELING:"is_traveling_breakdowns",SEEN_ADS:"seen_ads_daily_total"};a=a.radius;return{DAILY:"local_daily_"+a,DEMOGRAPHICS:"local_demographics_"+a,HOURLY:"local_hourly_"+a,IS_TRAVELING:"local_is_traveling_"+a,SEEN_ADS:"local_seen_ads_"+a}}function c(a){if(a.type==="radius")return a.type+"|"+a.radius;else return a.type+"|"+a.postcode.name}e.exports={ALLOWED_TIME_SPANS:b,getMetricNameTemplateForRegion:a,regionToString:c}}),null);
__d("LIDailyMetricsCacheByRegion",["LIDailyMetricsCache","LightweightImmutable","LIMetricsContext","TypedImmutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LIDailyMetricsCache").DailyMetricsCache,h=b("LIMetricsContext").getMetricNameTemplateForRegion,i=b("LIMetricsContext").regionToString,j=b("TypedImmutable").ImmKeyedIterable,k=b("TypedImmutable").ImmMap;a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.create=function(){return new b({$DailyMetricsCacheByRegion1:k.create()})};var c=b.prototype;c.$DailyMetricsCacheByRegion2=function(a){var b=this.$DailyMetricsCacheByRegion1.get(i(a));return b!=null?b:g.create(j.create(h(a)).toSet())};c.fetch=function(a,c,d,e){var f=this;return this.$DailyMetricsCacheByRegion2(c).fetch(a,d,e).then(function(a){return new b({$DailyMetricsCacheByRegion1:f.$DailyMetricsCacheByRegion1.set(i(c),a)})})};c.get=function(a){a=this.$DailyMetricsCacheByRegion1.get(i(a));return!a?void 0:a.get()};return b}(b("LightweightImmutable"));e.exports={DailyMetricsCacheByRegion:a}}),null);
__d("XPagesInsightsNearbyPageLocalDayController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/insights/nearby/page_local_day/",{page_id:{type:"FBID",required:!0}})}),null);
__d("PagesInsightsNearbyLocalDayForPage",["Promise","DateConsts","PagesInsightsNearbyDay","XPagesInsightsNearbyPageLocalDayController","nullthrows","promiseAsyncRequest"],(function(a,b,c,d,e,f){"use strict";var g=b("PagesInsightsNearbyDay").Day;function a(a,c,d){return a!=null&&a.pageID===c&&d<a.timeValue+h?b("Promise").resolve(a):b("promiseAsyncRequest")(b("XPagesInsightsNearbyPageLocalDayController").getURIBuilder().setFBID("page_id",c).getURI()).then(function(a){return{day:b("nullthrows")(g.fromISOString(a.payload)),pageID:c,timeValue:d}},function(a){return{day:g.fromUTCDate(new Date(d)),pageID:c,timeValue:d}})}var h=15*b("DateConsts").SEC_PER_MIN*b("DateConsts").MS_PER_SEC;e.exports={updateLocalDayForPage:a}}),null);
__d("LIDataForContext",["invariant","Promise","AdsGraphAPI","HubbleChartDataLayer","HubbleConstants","HubbleContext","LIDailyMetricsCacheByRegion","LIMetricsContext","PageInsightsApiAccess","PagesInsightsNearbyDay","PagesInsightsNearbyLocalDayForPage","TypedImmutable","emptyFunction","immutable","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("LIDailyMetricsCacheByRegion").DailyMetricsCacheByRegion,i=b("LIMetricsContext").getMetricNameTemplateForRegion,j=b("PagesInsightsNearbyDay").Day,k=b("PagesInsightsNearbyLocalDayForPage").updateLocalDayForPage,l=b("TypedImmutable").ImmMap;function a(a,b,c){return k(a?a.localDayForPage:null,c,Date.now()).then(function(d){return o(a,c,b,d)})}var m=function(b){__p&&__p();babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this)||this;d.name="LocalMetricsFetchError";d.message=a;d.parameters=c;return d}var c=a.prototype;c.toString=function(){return this.name+": "+this.message};return a}(babelHelpers.wrapNativeSuper(Error));function n(a,c,d){return a.type==="radius"?b("AdsGraphAPI").get(e.id).object("pageID",c).edge("insights").get(babelHelpers["extends"]({},d,{access_token:b("PageInsightsApiAccess").accessToken})):b("AdsGraphAPI").get(e.id).object("geoAreaID",a.postcode.geo_area_id).edge("insights").get(babelHelpers["extends"]({},d,{page_id:c,access_token:b("PageInsightsApiAccess").accessToken}))}function o(a,c,d,e){__p&&__p();a=a?a.nearbyMetricsCache:h.create();var f=p(d.timeSpan,e.day),g={begin:f.firstShown,end:f.lastDay.addDays(1)},j={begin:f.firstFetched,end:f.lastDay.addDays(1)};return b("Promise").all([y(g),a.fetch(j,d.region,Date.now(),function(a){return n(d.region,c,a)["catch"](function(c){return b("Promise").reject(new m(c&&c.message||"unknown error",a))})})]).then(function(a){var c=a[0];a=a[1];var h=b("nullthrows")(a.get(d.region));h=r(j,h,i(d.region));return{checkInsMetric:c,localDayForPage:e,metricsPivotalDays:f,nearbyMetricsCache:a,context:d,dayRange:g,overallPeopleMetricsPerDay:h}})}function p(a,b){var c=b.addDays(-q[a]);return{firstFetched:c.addDays(-q[a]),firstShown:c,lastDay:b}}c=7;var q={quarter:13*c,month:4*c,week:c};function r(a,c,d){var e=b("nullthrows")(c.get(d.DAILY)),f=c.get(d.SEEN_ADS),g=b("nullthrows")(c.get(d.HOURLY)),h=b("nullthrows")(c.get(d.DEMOGRAPHICS)),i=b("nullthrows")(c.get(d.IS_TRAVELING));return l.create(j.range(a.begin,a.end).map(function(a){var c=e.get(a);return c==null||typeof c!=="number"||c<=0?null:[a,{howManySawAds:f!=null?b("nullthrows")(f.get(a)):0,howManyTotal:c,howManyByHour:b("immutable").Iterable.Keyed(b("nullthrows")(g.get(a))).mapKeys(function(a){return parseInt(a,10)}).toMap(),ratioByGenderAndAgeRange:u(t(h.get(a))),ratioByTravelStatus:v(t(i.get(a)))}]}).filter(function(a){return a!=null}))}var s=function(a,b){return a+b};function t(a){typeof a==="object"&&a!=null||g(0,2520);return a}function u(a){return w(a).mapKeys(function(a){return a.split(":")}).groupBy(function(a,b){return b[1]}).map(function(a){return a.mapKeys(function(a){return a[0]}).toMap()}).toMap()}function v(a){return w(a).toMap()}function w(a){a=b("immutable").Iterable.Keyed(a);var c=a.reduce(s,0);return a.map(function(a){return a/c})}function x(){var a=b("HubbleContext").get("earliestTime");return a==null?0:a.getTime()}function y(a){var c={since:new Date(Math.max(a.begin.toUTCMilliseconds(),x())),until:new Date(b("HubbleContext").get("mostRecentTimes").pipe_daily)};return A({metric:[z],period:b("HubbleConstants").PERIOD_DAY,range:c,version:"v2.6"}).then(function(a){var d={begin:j.fromUTCDate(c.since).addDays(-1),end:j.fromUTCDate(c.until)};a=a.values[z];if(!a||!a[b("HubbleConstants").PERIOD_DAY])return b("immutable").Iterable.Keyed();a=l.create(j.range(d.begin,d.end).zip(a[b("HubbleConstants").PERIOD_DAY]));return{countPerDay:a,lastDay:d.end.addDays(-1)}})}var z="page_places_checkin_total_unique";function A(a){return new(b("Promise"))(function(c,d){b("HubbleChartDataLayer").getData(a,b("emptyFunction"),function(a){c(a)})})}e.exports={LocalMetricsFetchError:m,updateDataForContext:a}}),null);
__d("XPagesInsightsNearbyDidOptInController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/insights/nearby/did_opt_in/",{page_id:{type:"FBID",required:!0}})}),null);
__d("XPagesInsightsNearbyOptInController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/insights/nearby/opt_in/",{page_id:{type:"FBID",required:!0}})}),null);
__d("LIOptIn",["LILoadedObject","XPagesInsightsNearbyDidOptInController","XPagesInsightsNearbyOptInController","promiseAsyncRequest","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LILoadedObject").getLoadedObject,h=b("LILoadedObject").getLoadFailedObject,i=b("LILoadedObject").getLoadingObject;function j(a){var c=a.dispatch;a=a.pageID;a=b("XPagesInsightsNearbyDidOptInController").getURIBuilder().setFBID("page_id",a).getURI();b("promiseDone")(b("promiseAsyncRequest")(a),function(a){return c({type:"optInSuccess",optIn:{creationTime:a.payload.creation_time,isNew:!1}})},function(a){return c({error:a,type:"optInFailure"})})}function k(a){var c=a.dispatch;a=a.pageID;a=b("XPagesInsightsNearbyOptInController").getURIBuilder().setFBID("page_id",a).getURI();b("promiseDone")(b("promiseAsyncRequest")(a),function(a){return c({type:"optInSuccess",optIn:{creationTime:a.payload.creation_time,isNew:!0}})},function(a){return c({error:a,type:"optInFailure"})})}function a(a){__p&&__p();var b=a.dispatch,c=a.optIn,d=a.pageID;a=a.payload;switch(a.type){case"clickRequestOptIn":k({dispatch:b,pageID:d});return i();case"optInSuccess":return g(a.optIn);case"optInFailure":return h(a.error)}if(c==null){j({dispatch:b,pageID:d});return i()}return c}e.exports={updateOptInForPage:a}}),null);
__d("LIPageLocation",["Promise","AdsGraphAPI","GeoCoordinates","LILoadedObject","PageInsightsApiAccess","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LILoadedObject").getLoadedObject,h=b("LILoadedObject").getLoadFailedObject,i=b("LILoadedObject").getLoadingObject,j=b("PageInsightsApiAccess").accessToken;function k(a){return b("AdsGraphAPI").get(e.id).object("page",a).get({access_token:j,fields:["location.fields(latitude, longitude, country_code, zip)"]}).then(function(a){a=a.location;return a==null?b("Promise").reject(new Error("no location information")):{countryCode:a.country_code,geoCoordinates:new(b("GeoCoordinates"))(a.latitude,a.longitude),postcode:a.zip}})}function a(a){__p&&__p();var c=a.dispatch,d=a.pageLocation,e=a.payload;switch(e.type){case"pageLocationLoadFailed":return h(e.error);case"pageLocationLoaded":return g(e.pageLocation)}if(d==null){b("promiseDone")(k(a.pageID),function(a){return c({pageLocation:a,type:"pageLocationLoaded"})},function(a){return c({error:a,type:"pageLocationLoadFailed"})});return i()}return d}e.exports={updatePageLocation:a}}),null);
__d("LISession",["DateConsts","TypedImmutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("DateConsts").MS_PER_MIN;var g=b("TypedImmutable").ImmIndexedIterable,h=a*30;c=function(){function a(a,b,c){this.id=a,this.msTimestamp=c,this.salt=b}a.get=function(b,c){return new a(g.create([b,c]).hashCode(),b,c)};var b=a.prototype;b.update=function(b){return b>=this.msTimestamp+h?a.get(this.salt,b):new a(this.id,this.salt,b)};return a}();e.exports=c}),null);
__d("LocalInsightsUsageTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:LocalInsightsUsageLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:LocalInsightsUsageLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:LocalInsightsUsageLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCountryCode=function(a){this.$1.country_code=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPostcode=function(a){this.$1.postcode=a;return this};c.setPostcodeGeoAreaID=function(a){this.$1.postcode_geo_area_id=a;return this};c.setReferrer=function(a){this.$1.referrer=a;return this};c.setSelectedPostcode=function(a){this.$1.selected_postcode=a;return this};c.setSelectedRadius=function(a){this.$1.selected_radius=a;return this};c.setSelectedTimeSpan=function(a){this.$1.selected_time_span=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={country_code:!0,event:!0,page_id:!0,postcode:!0,postcode_geo_area_id:!0,referrer:!0,selected_postcode:!0,selected_radius:!0,selected_time_span:!0,session_id:!0,time:!0,weight:!0};e.exports=a}),null);
__d("LocalInsightsLogging",["LIDataForContext","LocalInsightsUsageTypedLogger","getByPath"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LIDataForContext").LocalMetricsFetchError;function a(a,c){__p&&__p();var d=new(b("LocalInsightsUsageTypedLogger"))().setEvent(c.type);if(a==null)return;d.setPageID(a.pageID);d.setSessionID(a.session.id);a.referrer!=null&&d.setReferrer(a.referrer);var e=a.boardSpec,f=a.pageLocation,g=a.postcodePolygon;if(a.display.status==="boardShown"&&e!=null){a=e.selectedMetricsContext;d.setSelectedTimeSpan(a.timeSpan);a.region.type==="radius"?d.setSelectedRadius(a.region.radius):d.setSelectedPostcode(a.region.postcode.name)}if(f!=null&&f.loadStatus==="loaded"){e=f.value;a=e.countryCode;f=e.postcode;d.setCountryCode(a);d.setPostcode(f)}g!=null&&d.setPostcodeGeoAreaID(g.geo_area_id);d.updateExtraData(h(c));d.log()}function h(a){__p&&__p();switch(a.type){case"demographicsCategoryChange":return{new_demographics_category:a.category};case"demographicsModeChange":return{new_demographics_mode:a.mode};case"adAccountSpendByAdIDByDayLoadFailed":return{ad_account_id:a.adAccountID,error_message:a.error.toString()};case"adsLoadFailed":return{ad_ids:JSON.stringify(a.adIDs),error_message:a.error.toString()};case"postcodePolygonLoaded":return{postcode_polygon_name:a.postcodePolygon.name};case"regionsDataFetched":return{defaultRegionType:a.defaultRegion.type,postcode_polygon_name:b("getByPath")(a.postcodePolygon,["name"])};case"adAccountsFetchFailure":case"errorOccurred":case"regionsDataFetchFailed":a=a.error;var c=a.toString();return a instanceof g?{error_message:c,error_api_parameters:JSON.stringify(a.parameters)}:{error_message:c}}return{}}e.exports={logEventFromPayload:a}}),null);
__d("LIPostcodePolygons",["GeoCoordinates","TypedImmutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("TypedImmutable").ImmList;function a(a){if(a==null)return null;var c=a.multipolygon,d=a.geo_area_id;a=a.name;return{geo_area_id:d.toString(),multipolygon:g.create(c.map(function(a){return g.create(a.map(function(a){return new(b("GeoCoordinates"))(Number(a.lat),Number(a.lng))}))})),name:a}}e.exports={getPostcodePolygon:a}}),null);
__d("XPagesInsightsLocalDefaultsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/insights/local/defaults/",{page_id:{type:"FBID",required:!0}})}),null);
__d("XPagesInsightsLocalLogVisitController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/insights/local/log_visit/",{page_id:{type:"FBID",required:!0}})}),null);
__d("XPagesInsightsNearbyPromotionInfosController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/insights/nearby/promotion_infos/",{page_id:{type:"FBID",required:!0}})}),null);
__d("PagesInsightsNearbyInfosUtils",["invariant","Promise","AsyncRequest","LINuxInfo","LIPostcodePolygons","XPagesInsightsLocalDefaultsController","XPagesInsightsLocalLogVisitController","XPagesInsightsLocalUserSettingsController","XPagesInsightsNearbyPromotionInfosController","promiseAsyncRequest"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("LIPostcodePolygons").getPostcodePolygon,i={genRegionsData:function(a){return b("promiseAsyncRequest")(b("XPagesInsightsLocalDefaultsController").getURIBuilder().setFBID("page_id",a).getURI()).then(function(a){a=a.payload;var b=a.defaultRegionType;a=a.postcodeData;a=h(a);if(b==="radius")return{defaultRegion:{type:"radius",radius:50},postcodePolygon:a};a!=null||g(0,524);return{defaultRegion:{type:"postcode",postcode:a},postcodePolygon:a}})},genPromotionData:function(a){return new(b("Promise"))(function(c,d){var e=b("XPagesInsightsNearbyPromotionInfosController").getURIBuilder().setFBID("page_id",a).getURI();new(b("AsyncRequest"))(e).setHandler(function(a){c(a.payload)}).setErrorHandler(function(a){d(a)}).send()})},getIntroCardVisibility:function(){return b("promiseAsyncRequest")(b("XPagesInsightsLocalUserSettingsController").getURIBuilder().getURI(),{data:{nux:b("LINuxInfo").nuxType.INTRO_CARD,action:b("LINuxInfo").nuxAction.GET_VISIBILITY}}).then(function(a){a.payload==="hidden"&&i.dismissIntroCard();return a.payload==="visible"?"visible":"hidden"})},dismissIntroCard:function(){return b("promiseAsyncRequest")(b("XPagesInsightsLocalUserSettingsController").getURIBuilder().getURI(),{data:{nux:b("LINuxInfo").nuxType.INTRO_CARD,action:b("LINuxInfo").nuxAction.DISMISS}})},logVisitToTab:function(a){return b("promiseAsyncRequest")(b("XPagesInsightsLocalLogVisitController").getURIBuilder().setFBID("page_id",a).getURI())}};e.exports=i}),null);
__d("LIStore",["CurrentUser","EventListener","FBLogger","FluxReduceStore","HubbleContext","LIAdAccountIDToAdsJustCreated","LIAdAccountsForPage","LIAds","LIConfig","LIDataForContext","LIDispatcher","LILoadedObject","LIMetricsContext","LIOptIn","LIPageLocation","LISession","LISurvey","LocalInsightsLogging","PagesInsightsNearbyInfosUtils","TypedImmutable","URI","promiseDone","setImmediate","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LIAdAccountIDToAdsJustCreated").updateAdsJustCreated,h=b("LIAdAccountsForPage").updateAdAccountsByID,i=b("LIAdAccountsForPage").updateAdAccountsSpend,j=b("LIAds").updateAdsByID,k=b("LIConfig").VALID_REFERRERS,l=b("LIDataForContext").updateDataForContext,m=b("LILoadedObject").getLoadedObject,n=b("LILoadedObject").getLoadFailedObject,o=b("LILoadedObject").getLoadingObject,p=b("LIMetricsContext").ALLOWED_TIME_SPANS,q=b("LIOptIn").updateOptInForPage,r=b("LIPageLocation").updatePageLocation,s=b("LISurvey").updateSurvey,t=b("LocalInsightsLogging").logEventFromPayload,u=b("TypedImmutable").ImmList,v=b("TypedImmutable").ImmMap,w=b("LIDispatcher").dispatch.bind(b("LIDispatcher")),x=100,y="age",z="columns",A=Object.freeze({AD_ACCOUNT_ID:"ad_account_id",REFERRER:"referrer",REGION_TYPE:"region",TIME_SPAN:"date_range"});function B(a){a=new(b("URI"))(a);a=a.getQueryData();return a[A.REGION_TYPE]}function C(a,b){if(a==="radius")return{type:"radius",radius:50};return a==="postcode"&&b!=null?{type:"postcode",postcode:b}:null}function D(a){a=new(b("URI"))(a);a=a.getQueryData();a=a[A.TIME_SPAN];return!p.has(a)?null:a}function E(a){a=new(b("URI"))(a);a=a.getQueryData();return a[A.AD_ACCOUNT_ID]||null}function F(){var a=new(b("URI"))(window.location.href);a=a.getQueryData();a=a[A.REFERRER];return a!=null&&k.indexOf(a)>=0?a:null}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;b("EventListener").listen(window,"popstate",function(){var a=B(window.location.href),c=D(window.location.href);a!=null&&c!=null&&b("LIDispatcher").dispatch({regionType:a,timeSpan:c,type:"uriContextChange"});a=E(window.location.href);a!=null&&b("LIDispatcher").dispatch({adAccountID:a,type:"uriAdAccountIDChange"})});return c}var d=c.prototype;d.getInitialState=function(){return null};d.getOrLoadState=function(){__p&&__p();var a=this.getState(),c=b("HubbleContext").getPageID();if(a!=null&&a.pageID===c){if(a.boardSpec!=null){var d=a.boardSpec.selectedMetricsContext;b("setImmediate")(function(){return aa(d)})}return a}b("setImmediate")(function(){b("LIDispatcher").dispatch({pageID:c,type:"bootstrapStart"})});return Q(c,new(b("LISession"))(0,0,0))};d.reduce=function(a,b){a=K(a,b);if(a==null)return a;a=J(a,b);t(a,b);return a};return c}(b("FluxReduceStore"));a.__moduleID=e.id;function G(a,b){return b.type==="demographicsCategoryChange"?b.category:a}function H(a,b){return b.type==="demographicsModeChange"?b.mode:a}function I(a,c){__p&&__p();if(a==null){b("promiseDone")(b("PagesInsightsNearbyInfosUtils").getIntroCardVisibility(),function(a){return void w({type:"introCardLoaded",visibility:a})},function(a){return void w({type:"introCardLoadFailed"})});return o()}switch(c.type){case"introCardDismissClick":if(a.loadStatus==="loaded"){b("PagesInsightsNearbyInfosUtils").dismissIntroCard();return m("hidden")}return a;case"introCardLoadFailed":return m("hidden");case"introCardLoaded":return m(c.visibility)}return a}function J(a,b){var c=a.pageID,d=a.adIDsJustCreatedByAdAccountID,e=a.adAccountsByID,f=a.adsByID,k=a.pageLocation,l=a.postcodePolygon,m=a.selectedAdAccountID;e=h({adAccountsByID:e,pageID:c,payload:b,dispatch:w});m=O(e,m,b);var n=a.dataForContext;n=n==null?null:{begin:n.metricsPivotalDays.firstShown,end:n.metricsPivotalDays.lastDay.addDays(1)};e=i({adAccountsByID:e,selectedAdAccountID:m,dayRange:n,payload:b,dispatch:w});d=g({adIDsJustCreatedByAdAccountID:d,selectedAdAccountID:m,payload:b,dispatch:w});return babelHelpers["extends"]({},a,{adsByID:j({adsByID:f,adAccountsByID:e,adIDsJustCreatedByAdAccountID:d,dayRange:n,dispatch:w,payload:b,selectedAdAccountID:m}),adAccountsByID:e,adIDsJustCreatedByAdAccountID:d,demographicsCategory:G(a.demographicsCategory,b),demographicsMode:H(a.demographicsMode,b),introCardVisibility:I(a.introCardVisibility,b),learnMoreDialogState:ga(a.learnMoreDialogState,b),pageLocation:r({pageLocation:k,dispatch:w,pageID:c,payload:b}),postcodePolygon:ia(l,b),promotionData:ha(a.promotionData,b,c),selectedAdAccountID:m,session:a.session.update(Date.now()),survey:s(a.survey,c,b),optIn:q({dispatch:w,optIn:a.optIn,pageID:c,payload:b})})}function K(a,c){__p&&__p();if(c.type==="bootstrapStart"){var d=b("LISession").get(b("CurrentUser").getAccountID(),Date.now());return R(c.pageID,d)}if(a==null)return a;switch(c.type){case"dataForContextFetchStart":return ba(a);case"dataForContextFetched":return ca(a,c.dataForContext);case"errorOccurred":return ja(a,c.error);case"tryAgain":return L(a);case"uriAdAccountIDChange":return P(a,c.adAccountID)}var e=a.pageID,f=a.postcodePolygon;return T(a,function(a,b){return S(a,b,c,e,f)})}function L(a){return R(a.pageID,a.session)}function M(a,c){var d={};d[A.AD_ACCOUNT_ID]=c;return new(b("URI"))(a).addQueryData(d).toString()}function N(a){if(window.history==null)return;var b=window.location.href;b=M(b,a);window.history.pushState(window.history.state,"",b)}function O(a,b,c){__p&&__p();if(a==null||a.loadStatus!=="loaded")return null;a=a.value;if(c.type==="selectedAdAccountIDChange"&&a.has(c.adAccountID)){N(c.adAccountID);return c.adAccountID}c=E(window.location.href);if(c!=null&&a.has(c))return c;return b!=null&&a.has(b)?b:a.keySeq().first()}function P(a,b){var c=a.adAccountsByID;return c==null||c.loadStatus!=="loaded"||!c.value.has(b)?a:babelHelpers["extends"]({},a,{selectedAdAccountID:b})}function Q(a,b){return{adIDsJustCreatedByAdAccountID:v.create(),adAccountsByID:null,adsByID:v.create(),dataForContext:null,boardSpec:null,learnMoreDialogState:{causalElement:null,topic:"privacy",visibility:"hidden"},demographicsCategory:y,demographicsMode:z,display:{status:"bootstrap"},introCardVisibility:null,optIn:null,pageID:a,pageLocation:null,postcodePolygon:null,promotionData:null,referrer:F(),errors:u.create(),selectedAdAccountID:null,session:b,survey:null}}function R(a,c){b("PagesInsightsNearbyInfosUtils").logVisitToTab(a);da(a);return babelHelpers["extends"]({},Q(a,c))}function S(a,b,c,d,e){switch(c.type){case"headerRegionChange":return V(a,b,c.region,d);case"headerTimeSpanChange":return W(a,b,c.timeSpan,d);case"uriContextChange":return U(a,b,c.regionType,c.timeSpan,d,e)}return a}function T(a,b){var c=a.display,d=a.boardSpec;if(c.status!=="boardShown"||d==null)return a;c=b(d,a.dataForContext);return babelHelpers["extends"]({},a,{boardSpec:c})}function U(a,b,c,d,e,f){var g=a.selectedMetricsContext;if(d===g.timeSpan&&c===g.region.type)return a;c=C(c,f);c==null&&(c=g.region);return X(a,b,{region:c,timeSpan:d},e)}function V(a,b,c,d){var e=a.selectedMetricsContext;if(c===e.region)return a;c={region:c,timeSpan:e.timeSpan};Y(c);return X(a,b,c,d)}function W(a,b,c,d){var e=a.selectedMetricsContext;if(c===e.timeSpan)return a;e={region:e.region,timeSpan:c};Y(e);return X(a,b,e,d)}function X(a,c,d,e){$(c,d,e);b("setTimeout")(function(){b("LIDispatcher").dispatch({type:"dataForContextFetchStart"})},x);return babelHelpers["extends"]({},a,{selectedMetricsContext:d})}function Y(a){if(window.history==null)return;a=Z(window.location.href,a);window.history.pushState(window.history.state,"",a)}function aa(a){if(window.history==null)return;a=Z(window.location.href,a);a!==window.location.href&&window.history.replaceState(window.history.state,"",a)}function Z(a,c){var d={};d[A.REGION_TYPE]=c.region.type;d[A.TIME_SPAN]=c.timeSpan;return new(b("URI"))(a).addQueryData(d).removeQueryData(A.REFERRER).toString()}function ba(a){var b=a.display,c=a.dataForContext;return b.status==="bootstrap"||b.status==="error"||c==null||a.boardSpec==null||a.boardSpec.selectedMetricsContext===c.context||a.boardSpec.loadingActivity==="loading"?a:babelHelpers["extends"]({},a,{dataForContext:c,boardSpec:babelHelpers["extends"]({},a.boardSpec,{loadingActivity:"loading"}),display:{status:"boardShown"}})}function $(a,c,d){b("promiseDone")(l(a,c,d),function(a){b("LIDispatcher").dispatch({dataForContext:a,type:"dataForContextFetched"})},ka)}function ca(a,b){return a.spec&&a.spec.selectedMetricsContext!==b.context?a:ea(a,b)}function da(a){var c=b("PagesInsightsNearbyInfosUtils").genRegionsData(a);b("promiseDone")(c,function(c){var d=C(B(window.location.href),c.postcodePolygon),e=D(window.location.href);$(null,{region:d!=null?d:c.defaultRegion,timeSpan:e!=null?e:"month"},a);b("LIDispatcher").dispatch({defaultRegion:c.defaultRegion,postcodePolygon:c.postcodePolygon,type:"regionsDataFetched"})},function(a){b("LIDispatcher").dispatch({error:a,type:"regionsDataFetchFailed"})})}function ea(a,b){if(b==null)return babelHelpers["extends"]({},a,{dataForContext:b});var c=a.display.status==="boardShown"?a.boardSpec:null;c=fa(c,b);return babelHelpers["extends"]({},a,{dataForContext:b,boardSpec:c,display:{status:"boardShown"},errors:u.create()})}function fa(a,b){a=b.context;return{checkInsMetric:b.checkInsMetric,displayedMetricsContext:a,selectedMetricsContext:a,loadingActivity:"idle",peopleMetricsByDay:b.overallPeopleMetricsPerDay,metricsPivotalDays:b.metricsPivotalDays}}function ga(a,b){switch(b.type){case"learnMoreClick":var c=b.causalElement;b=b.topic;return{causalElement:c,topic:b,visibility:"shown"};case"learnMoreDialogDismiss":return babelHelpers["extends"]({},a,{visibility:"hidden"})}return a}function ha(a,c,d){__p&&__p();switch(c.type){case"promotionDataLoadFailed":return n(c.error);case"promotionDataLoaded":return m(c.promotionData)}if(c.type==="promotionShouldRefresh"||a==null){c=b("PagesInsightsNearbyInfosUtils").genPromotionData(d);b("promiseDone")(c,function(a){b("LIDispatcher").dispatch({promotionData:a,type:"promotionDataLoaded"})},function(a){b("LIDispatcher").dispatch({error:a,type:"promotionDataLoadFailed"})});return o()}return a}function ia(a,b){return b.type==="regionsDataFetched"?b.postcodePolygon:a}function ja(a,b){return babelHelpers["extends"]({},a,{display:{status:"error"},errors:a.errors.push(b)})}function ka(a){b("FBLogger")("local_insights").catching(a).mustfix("Error occured in LIStore"),b("LIDispatcher").dispatch({error:a,type:"errorOccurred"})}e.exports=new a(b("LIDispatcher"))}),null);
__d("LIBoardContainer.react",["cx","AdsLWIDialogUtils","AdsLWIInstanceType","FluxContainer","InsightsLoadingIndicator.react","LIBoard.react","LICriticalError.react","LIDispatcher","LILearnMoreDialog.react","LIStore","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsLWIDialogUtils").openLWIDialog;a=b("AdsLWIInstanceType").createRandomInstanceID;var i=a();c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){var a=c.$13(c.state.promotionData);if(a){a=a.instanceData;h(i,a.pageID,a.placement,a.product,a.boostID,null)}},b)||babelHelpers.assertThisInitialized(c)}c.getStores=function(){return[b("LIStore")]};c.calculateState=function(){return b("LIStore").getOrLoadState()};var d=c.prototype;d.render=function(){var a=this.state,c=a.display;a=a.boardSpec;if(c.status==="error")return b("React").createElement(b("LICriticalError.react"),{className:"_37b7",onTryAgainClick:this.$2});return c.status==="bootstrap"||a==null?b("React").createElement(b("InsightsLoadingIndicator.react"),{size:"large"}):b("React").createElement("div",null,b("React").createElement(b("LIBoard.react"),{adAccountsByID:this.state.adAccountsByID,adIDsJustCreatedByAdAccountID:this.state.adIDsJustCreatedByAdAccountID,adsByID:this.state.adsByID,className:this.props.className,demographicsCategory:this.state.demographicsCategory,demographicsMode:this.state.demographicsMode,introCardVisibility:this.state.introCardVisibility,onClickRequestOptIn:this.$3,onDemographicsCategoryChange:this.$4,onDemographicsModeChange:this.$5,onDidMount:this.$6,onHeaderRegionChange:this.$7,onHeaderTimeSpanChange:this.$8,onIntroCardDismissClick:this.$9,onLearnMoreClick:this.$10,onPromotionRequested:this.$1,onSelectedAdAccountIDChange:this.$11,optIn:this.state.optIn,pageID:this.state.pageID,pageLocation:this.state.pageLocation,postcodePolygon:this.state.postcodePolygon,promotionData:this.state.promotionData,selectedAdAccountID:this.state.selectedAdAccountID,spec:a,survey:this.state.survey}),b("React").createElement(b("LILearnMoreDialog.react"),{state:this.state.learnMoreDialogState,onDismiss:this.$12}))};d.$13=function(a){return a==null||a.loadStatus!=="loaded"||a.value.initialData==null?null:a.value.initialData};d.$2=function(){b("LIDispatcher").dispatch({type:"tryAgain"})};d.$14=function(){b("LIDispatcher").dispatch({type:"promotionShouldRefresh"})};d.$3=function(){b("LIDispatcher").dispatch({type:"clickRequestOptIn"})};d.$4=function(a){b("LIDispatcher").dispatch({category:a,type:"demographicsCategoryChange"})};d.$5=function(a){b("LIDispatcher").dispatch({mode:a,type:"demographicsModeChange"})};d.$12=function(){b("LIDispatcher").dispatch({type:"learnMoreDialogDismiss"})};d.$7=function(a){b("LIDispatcher").dispatch({region:a,type:"headerRegionChange"})};d.$10=function(a,c){b("LIDispatcher").dispatch({causalElement:c,topic:a,type:"learnMoreClick"})};d.$8=function(a){b("LIDispatcher").dispatch({timeSpan:a,type:"headerTimeSpanChange"})};d.$9=function(){b("LIDispatcher").dispatch({type:"introCardDismissClick"})};d.$11=function(a){b("LIDispatcher").dispatch({adAccountID:a,type:"selectedAdAccountIDChange"})};d.$6=function(){b("LIDispatcher").dispatch({type:"boardDidMount"})};return c}(b("React").Component);e.exports=b("FluxContainer").create(c)}),null);