if (self.CavalryLogger) { CavalryLogger.start_js(["nTXP6"]); }

__d("LTVPredictorActionTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SET_AVG_REVENUE_PER_DAU:"SET_AVG_REVENUE_PER_DAU",SET_NUM_DAYS_TO_PREDICT:"SET_NUM_DAYS_TO_PREDICT",SET_CURRENT_REQUEST:"SET_CURRENT_REQUEST",SET_DATA_PERIOD_TO_FIT:"SET_DATA_PERIOD_TO_FIT",SET_RETENTION_DATA:"SET_RETENTION_DATA",VALID_RESPONSE:"VALID_RESPONSE"});e.exports=a}),null);
__d("LTVPredictorDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationReactDispatcher"))({strict:!0})}),null);
__d("LTVPredictorActions",["invariant","AsyncRequest","LTVPredictorActionTypes","LTVPredictorDispatcher"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={sendRequest:function(a){new(b("AsyncRequest"))(a).setHandler(function(c){var d=c.payload.area_under_curve||0,e=c.payload.fitted_y_values;c=c.payload.r_squared||0;e!==null||g(0,5837);b("LTVPredictorDispatcher").dispatch({type:b("LTVPredictorActionTypes").VALID_RESPONSE,requestURI:a,response:{areaUnderCurve:d,fittedYValues:e,rSquared:c}})}).setMethod("POST").send()},setAvgRevPerDAU:function(a){b("LTVPredictorDispatcher").dispatch({type:b("LTVPredictorActionTypes").SET_AVG_REVENUE_PER_DAU,avgRevPerDAU:a})},setCurrentRequest:function(a){b("LTVPredictorDispatcher").dispatch({type:b("LTVPredictorActionTypes").SET_CURRENT_REQUEST,request:a})},setDataPeriodToFit:function(a){b("LTVPredictorDispatcher").dispatch({type:b("LTVPredictorActionTypes").SET_DATA_PERIOD_TO_FIT,dataPeriodToFit:a})},setRetentionData:function(a,c){b("LTVPredictorDispatcher").dispatch({type:b("LTVPredictorActionTypes").SET_RETENTION_DATA,xValues:a,yValues:c})},setNumDaysToPredict:function(a){b("LTVPredictorDispatcher").dispatch({type:b("LTVPredictorActionTypes").SET_NUM_DAYS_TO_PREDICT,numDaysToPredict:a})}};e.exports=a}),null);
__d("LTVPredictorARPUInput.react",["cx","LTVPredictorActions","React","SUIAnalyticsGriffinTheme","SUITextInput.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$1=function(a){var d=Number(a),e;!isNaN(d)?b("LTVPredictorActions").setAvgRevPerDAU(d):e="Please enter a valid number.";c.setState({error:e,currInput:a})};c.state={currInput:"",error:null};return c}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_oqo"},b("React").createElement("h1",null,"Estimated Average Revenue Per DAU"),b("React").createElement(b("SUITextInput.react"),{errorMessage:this.state.error,theme:b("SUIAnalyticsGriffinTheme"),value:this.state.currInput,onChange:this.$1}))};return c}(b("React").Component);e.exports=a}),null);
__d("LTVPredictorCalculateButton.react",["cx","LTVPredictorActions","React","SUIAnalyticsGriffinTheme","SUIButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){var a=d.props.xValues,c=d.props.originalYValues,e=a.indexOf(d.props.dataPeriodToFit[0]),f=a.indexOf(d.props.dataPeriodToFit[1])+1;a=a.slice(e,f);c=c.slice(e,f);b("LTVPredictorActions").setCurrentRequest({modelType:d.props.modelType,yValues:c,xValues:a,lifePeriod:[0,d.props.numDaysToPredict],stepSize:d.props.stepSize})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_oqo"},b("React").createElement(b("SUIButton.react"),{label:"Calculate",theme:b("SUIAnalyticsGriffinTheme"),onClick:this.$1}))};return c}(b("React").Component);e.exports=a}),null);
__d("LTVPredictorCandelaStyleSheet",["CandelaStyleSheet"],(function(a,b,c,d,e,f){"use strict";e.exports=b("CandelaStyleSheet").fromJS({annotationmarker:{stroke:"#000",strokeWidth:1,radius:3},area:{fill:"auto",stroke:"#000",strokeWidth:1,opacity:1},axistitle:{color:"#000",fontSize:12,fontWeight:"normal",textAlign:"center",visibility:"visible"},line:{visibility:"hidden"}})}),null);
__d("LTVPredictorChart.react",["BUIInsightsLineAreaChart.react","CandelaGroupScaleBuilder","LTVPredictorCandelaStyleSheet","React","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("CandelaGroupScaleBuilder").group;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=[];if(!this.props.fittedYValues.length)for(var c=0;c<this.props.xValues.length;c++)a.push({time:this.props.xValues[c],originalYValuesWhite:this.props.originalYValues[c],originalYValuesGray:this.props.originalYValues[c]});else{c=this.props.stepSize.toString().split(".")[1];c=c?c.length:0;var d=0;for(var e=0;e<this.props.fittedYValues.length;e++){var f=e*this.props.stepSize;f===this.props.xValues[d]?(a.push({time:this.props.xValues[d],originalYValuesWhite:this.props.originalYValues[d],originalYValuesGray:this.props.originalYValues[d],fittedYValues:this.props.fittedYValues[e]}),d+=1):(f>this.props.xValues[d]&&(a.push({time:this.props.xValues[d],originalYValuesWhite:this.props.originalYValues[d],originalYValuesGray:this.props.originalYValues[d]}),d+=1),a.push({time:f.toFixed(c),fittedYValues:this.props.fittedYValues[e]}))}for(d;d<this.props.xValues.length;d++)a.push({time:this.props.xValues[d],originalYValuesWhite:this.props.originalYValues[d],originalYValuesGray:this.props.originalYValues[d]})}f={fittedYValues:"#A3E6FF",originalYValuesWhite:"#FFF",originalYValuesGray:"#8E8E8E"};e={time:{type:"number"},fittedYValues:{renderAs:"area",type:"number"},originalYValuesGray:{renderAs:"line",type:"number"},originalYValuesWhite:{renderAs:"line",type:"number"}};c=[];if(this.props.xValues.length){d=this.props.xValues.indexOf(this.props.dataPeriodToFit[0]);var h=this.props.xValues.indexOf(this.props.dataPeriodToFit[1])+1,i=0;for(;i<d;i++)c.push({dependentVariableName:"originalYValuesGray",renderAs:"marker",value:this.props.xValues[i],variableName:"time"});for(;i<h;i++)c.push({dependentVariableName:"originalYValuesWhite",renderAs:"marker",value:this.props.xValues[i],variableName:"time"});for(;i<this.props.xValues.length;i++)c.push({dependentVariableName:"originalYValuesGray",renderAs:"marker",value:this.props.xValues[i],variableName:"time"})}return b("React").createElement(b("BUIInsightsLineAreaChart.react"),{annotations:b("immutable").List(c),autoColors:b("immutable").Map(f),data:a,height:300,interactive:!1,plotX:g("time").setTitle("Time").from(0).niceStepOnly(),plotY:[g("originalYValuesGray","originalYValuesWhite","fittedYValues").from(0)],schema:e,styleSheet:b("LTVPredictorCandelaStyleSheet"),width:600})};return c}(b("React").Component);e.exports=a}),null);
__d("LTVPredictorCohortLifePeriodSelector.react",["cx","FBNumberInput.react","LTVPredictorActions","React","SUIAnalyticsGriffinTheme","SUIButton.react","SUIToggleButtonGroup.react","suiMargin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=0,i=[30,90,180];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){return b("React").createElement("div",{className:"_3-8w"},"Predict for ",b("React").createElement(b("FBNumberInput.react"),{className:"_5_u2",defaultValue:h,maxValue:365,minValue:0,onValueChange:b("LTVPredictorActions").setNumDaysToPredict})," days")};d.render=function(){var a=i.includes(this.props.numDaysToPredict)?this.props.numDaysToPredict:h,c=i.map(function(a){return b("React").createElement(b("SUIButton.react"),{height:"normal",key:a,label:a+" days",theme:b("SUIAnalyticsGriffinTheme"),type:"button",value:a})});return b("React").createElement("div",{className:"_oqo"},b("React").createElement("h1",null,"Select the number of days to predict"),b("React").createElement(b("SUIToggleButtonGroup.react"),{selectedDepressed:!0,theme:b("SUIAnalyticsGriffinTheme"),value:a,onChange:b("LTVPredictorActions").setNumDaysToPredict},c,b("React").createElement(b("SUIButton.react"),{height:"normal",label:"Custom",theme:b("SUIAnalyticsGriffinTheme"),type:"button",value:h})),a===h?this.$1():null)};return c}(b("React").Component);e.exports=a}),null);
__d("LTVPredictorDataStore",["FluxLoadObjectStore","LTVPredictorActions","LTVPredictorActionTypes","LTVPredictorDispatcher","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("gkx")("779516");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__getActionTypes=function(){return g?[this.getActionTypeStartLoad(),b("LTVPredictorActionTypes").VALID_RESPONSE]:null};d.reduce=function(a,c){switch(c.type){case b("LTVPredictorActionTypes").VALID_RESPONSE:return this.__handleOne(a,c.requestURI,c.response);default:return a}};d.__load=function(a){b("LTVPredictorActions").sendRequest(a)};return c}(b("FluxLoadObjectStore"));a.__moduleID=e.id;e.exports=new a(b("LTVPredictorDispatcher"))}),null);
__d("LTVPredictorInputStore",["FluxReduceStore","LTVPredictorActionTypes","LTVPredictorDispatcher","gkx","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("gkx")("779516"),h=b("immutable").Record({avgRevPerDAU:0,dataPeriodToFit:[0,0],numDaysToPredict:30,request:null,xValues:[0],yValues:[0]});a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return h()};d.__getActionTypes=function(){return g?[b("LTVPredictorActionTypes").SET_AVG_REVENUE_PER_DAU,b("LTVPredictorActionTypes").SET_CURRENT_REQUEST,b("LTVPredictorActionTypes").SET_DATA_PERIOD_TO_FIT,b("LTVPredictorActionTypes").SET_NUM_DAYS_TO_PREDICT,b("LTVPredictorActionTypes").SET_RETENTION_DATA]:null};d.reduce=function(a,c){__p&&__p();var d=a.avgRevPerDAU,e=a.dataPeriodToFit,f=a.numDaysToPredict,g=a.request,i=a.xValues,j=a.yValues;switch(c.type){case b("LTVPredictorActionTypes").SET_AVG_REVENUE_PER_DAU:d=c.avgRevPerDAU;break;case b("LTVPredictorActionTypes").SET_NUM_DAYS_TO_PREDICT:f=c.numDaysToPredict;break;case b("LTVPredictorActionTypes").SET_CURRENT_REQUEST:g=c.request;break;case b("LTVPredictorActionTypes").SET_DATA_PERIOD_TO_FIT:e=c.dataPeriodToFit;break;case b("LTVPredictorActionTypes").SET_RETENTION_DATA:i=c.xValues;j=c.yValues;e=[i[0],i[i.length-1]];g=null;break;default:return a}return h({avgRevPerDAU:d,dataPeriodToFit:e,numDaysToPredict:f,request:g,xValues:i,yValues:j})};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("LTVPredictorDispatcher"))}),null);
__d("LTVPredictorResultInfo.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a,c,d;this.props.rSquared!=null&&this.props.rSquared!==0&&(a=b("React").createElement("h1",null,"Fitted model's R-squared: ",Math.round(this.props.rSquared*100)/100));this.props.areaUnderCurve!=null&&this.props.areaUnderCurve!==0&&(c=b("React").createElement("h1",null,"Estimated number of active days per user in this time period: ",Math.round(this.props.areaUnderCurve*100)/100));this.props.areaUnderCurve!=null&&this.props.areaUnderCurve!==0&&this.props.avgRevPerDAU!=null&&this.props.avgRevPerDAU!==0&&(d=b("React").createElement("h1",null,"Recommended bid (estimated revenue per user for selected period): ",Math.round(this.props.areaUnderCurve*this.props.avgRevPerDAU*100)/100));return b("React").createElement("div",{className:"_oqo"},a,c,d)};return c}(b("React").Component);e.exports=a}),null);
__d("XLTVPredictorDataChangeAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/neko_ltv_predictor/update/",{model_type:{type:"String",required:!0},y_values:{type:"FloatVector",required:!0},x_values:{type:"FloatVector",required:!0},life_period:{type:"FloatVector",required:!0},step_size:{type:"Float",required:!0}})}),null);
__d("LTVPredictorUtils",["XLTVPredictorDataChangeAsyncController"],(function(a,b,c,d,e,f){"use strict";a={requestToURI:function(a){return b("XLTVPredictorDataChangeAsyncController").getURIBuilder().setString("model_type",a.modelType).setFloatVector("y_values",a.yValues).setFloatVector("x_values",a.xValues).setFloatVector("life_period",a.lifePeriod).setFloat("step_size",a.stepSize).getURI()}};e.exports=a}),null);
__d("LTVPredictorAnalyticsDialogButtonContainer.react",["cx","fbt","AdsFluxContainer","GriffinButton","Layout.react","LTVPredictorActions","LTVPredictorARPUInput.react","LTVPredictorCalculateButton.react","LTVPredictorChart.react","LTVPredictorCohortLifePeriodSelector.react","LTVPredictorDataStore","LTVPredictorDispatcher","LTVPredictorInputStore","LTVPredictorResultInfo.react","LTVPredictorUtils","React","ScrollableArea.react","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","suiMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("Layout.react").Column,j=b("Layout.react").FillColumn,k=.1;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$5=function(a){c.setState({showDialog:a})},c.$4=function(){c.$5(!0)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){this.$1(a)};d.UNSAFE_componentWillMount=function(){b("LTVPredictorDispatcher").explicitlyRegisterStores([].concat(this.constructor.getStores()))};c.getStores=function(){return[b("LTVPredictorDataStore"),b("LTVPredictorInputStore")]};c.calculateState=function(a){__p&&__p();var c=b("LTVPredictorInputStore").getState(),d=c.avgRevPerDAU,e=c.request,f=c.yValues,g=c.xValues,h=c.dataPeriodToFit;c=c.numDaysToPredict;var i,j=[];if(e){e=b("LTVPredictorUtils").requestToURI(e);e=b("LTVPredictorDataStore").get(e);e=e.getValue();e&&(i=e.areaUnderCurve,j=e.fittedYValues)}return{areaUnderCurve:i,avgRevPerDAU:d,dataPeriodToFit:h,fittedYValues:j,numDaysToPredict:c,originalYValues:f,showDialog:a?a.showDialog:!1,xValues:g}};d.render=function(){return b("React").createElement("div",{className:"_44c3",key:"ltv_predictor"},this.$2(),this.$3())};d.$2=function(){var a=this.props.collationInterval!=="DAILY",c=h._("LTV Predictor"),d=h._("Please use Daily user retention data");return b("React").createElement(b("GriffinButton"),{className:"_3-90","data-tooltip-position":"below",disabled:a,key:"ltv_predictor",label:c,ref:"ltvPredictor",tooltip:a?d:null,onClick:this.$4})};d.$3=function(){return b("React").createElement(b("XUIDialog.react"),{shown:this.state.showDialog,width:975,onToggle:this.$5},b("React").createElement(b("XUIDialogTitle.react"),null,h._("LTV Predictor")),b("React").createElement(b("XUIDialogBody.react"),{useCustomPadding:!0},b("React").createElement(b("Layout.react"),null,b("React").createElement(j,{className:"_46pc"},b("React").createElement(b("ScrollableArea.react"),{height:360,scrollbar:"fade"},b("React").createElement(b("LTVPredictorCohortLifePeriodSelector.react"),{numDaysToPredict:this.state.numDaysToPredict}),b("React").createElement(b("LTVPredictorARPUInput.react"),null),b("React").createElement(b("LTVPredictorCalculateButton.react"),{dataPeriodToFit:this.state.dataPeriodToFit,modelType:"bestfit",numDaysToPredict:this.state.numDaysToPredict,originalYValues:this.state.originalYValues,stepSize:k,xValues:this.state.xValues}))),b("React").createElement(i,{className:"_46pd"},b("React").createElement(b("LTVPredictorChart.react"),{dataPeriodToFit:this.state.dataPeriodToFit,fittedYValues:this.state.fittedYValues,numDaysToPredict:this.state.numDaysToPredict,originalYValues:this.state.originalYValues,stepSize:k,xValues:this.state.xValues}),b("React").createElement(b("LTVPredictorResultInfo.react"),{areaUnderCurve:this.state.areaUnderCurve,avgRevPerDAU:this.state.avgRevPerDAU})))))};d.$1=function(a){if(a.cohortAverageRetention&&a.cohortAverageRetention.length>0){a=a.cohortAverageRetention.map(function(a){return(a.value||0)/100});var c=Array.from(a.keys());b("LTVPredictorActions").setRetentionData(c,a)}};return c}(b("React").Component);e.exports=b("AdsFluxContainer").create(a,{name:e.id})}),null);
__d("SignalsNavigationSourceConstants",[],(function(a,b,c,d,e,f){"use strict";a="analytics";b="am_delivery";e.exports={AM_DELIVERY2EM:b,FBA2EM_NAVSOURCE:a}}),null);
__d("SignalsHomeTabsEnum",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({EVENTS:"EVENTS",SETTINGS:"SETTINGS",DIAGNOSTICS:"DIAGNOSTICS",HISTORY:"HISTORY",REAL_TIME_FIRES:"REAL_TIME_FIRES",VERIFY:"VERIFY"});e.exports=a}),null);
__d("InsightsLegendScrollableVert.react",["InsightsLegend_DEPRECATED.react","LayoutScrollableView.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("LayoutScrollableView.react"),{height:this.props.height,width:this.props.width},b("React").createElement(b("InsightsLegend_DEPRECATED.react"),{className:this.props.className,layout:b("InsightsLegend_DEPRECATED.react").layout.STACKED},this.props.children))};return c}(b("React").Component);c.propTypes={height:a.number.isRequired,width:a.number.isRequired};e.exports=c}),null);
__d("AnalyticsBreakdownTableCreateMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"AnalyticsBreakdownTableCreateData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"LinkedField",alias:null,name:"breakdown_table",storageKey:null,args:null,concreteType:"AnalyticsStoredBreakdownTable",plural:!1,selections:[c]},e={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"AnalyticsBreakdownTableCreateMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_breakdown_table_create",storageKey:null,args:b,concreteType:"AnalyticsBreakdownTableCreateResponsePayload",plural:!1,selections:[d,{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"breakdown_tables",storageKey:null,args:null,concreteType:"AnalyticsBreakdownTablesConnection",plural:!1,selections:[{kind:"FragmentSpread",name:"AnalyticsBreakdownTableSection_breakdownTables",args:null}]}]}]}]},operation:{kind:"Operation",name:"AnalyticsBreakdownTableCreateMutation",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_breakdown_table_create",storageKey:null,args:b,concreteType:"AnalyticsBreakdownTableCreateResponsePayload",plural:!1,selections:[d,{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"breakdown_tables",storageKey:null,args:null,concreteType:"AnalyticsBreakdownTablesConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"AnalyticsStoredBreakdownTable",plural:!0,selections:[c,{kind:"ScalarField",alias:null,name:"is_internal",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_system_generated",args:null,storageKey:null},e,{kind:"LinkedField",alias:null,name:"aggregation_queries",storageKey:null,args:null,concreteType:"AppEventQuerySpec",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"breakdowns",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"event_name",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"time_last_seen",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"entity_id",args:null,storageKey:null},e,c]}]}]},c]}]}]},params:{operationKind:"mutation",name:"AnalyticsBreakdownTableCreateMutation",id:"2181917641899851",text:null,metadata:{}}}}();e.exports=a}),null);
__d("AnalyticsBreakdownTableDeleteMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"AnalyticsBreakdownTableDeleteData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"AnalyticsBreakdownTableDeleteMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_breakdown_table_delete",storageKey:null,args:b,concreteType:"AnalyticsBreakdownTableDeleteResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"breakdown_tables",storageKey:null,args:null,concreteType:"AnalyticsBreakdownTablesConnection",plural:!1,selections:[{kind:"FragmentSpread",name:"AnalyticsBreakdownTableSection_breakdownTables",args:null}]}]}]}]},operation:{kind:"Operation",name:"AnalyticsBreakdownTableDeleteMutation",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_breakdown_table_delete",storageKey:null,args:b,concreteType:"AnalyticsBreakdownTableDeleteResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"breakdown_tables",storageKey:null,args:null,concreteType:"AnalyticsBreakdownTablesConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"AnalyticsStoredBreakdownTable",plural:!0,selections:[c,{kind:"ScalarField",alias:null,name:"is_internal",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_system_generated",args:null,storageKey:null},d,{kind:"LinkedField",alias:null,name:"aggregation_queries",storageKey:null,args:null,concreteType:"AppEventQuerySpec",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"breakdowns",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"event_name",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"time_last_seen",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"entity_id",args:null,storageKey:null},d,c]}]}]},c]}]}]},params:{operationKind:"mutation",name:"AnalyticsBreakdownTableDeleteMutation",id:"2058575574199132",text:null,metadata:{}}}}();e.exports=a}),null);
__d("AnalyticsBreakdownTableEditMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"AnalyticsBreakdownTableEditData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"analytics_breakdown_table_edit",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"AnalyticsBreakdownTableEditResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"breakdown_table",storageKey:null,args:null,concreteType:"AnalyticsStoredBreakdownTable",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_internal",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"aggregation_queries",storageKey:null,args:null,concreteType:"AppEventQuerySpec",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"breakdowns",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"event_name",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"time_last_seen",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"AnalyticsBreakdownTableEditMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"AnalyticsBreakdownTableEditMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"AnalyticsBreakdownTableEditMutation",id:"1342302312548252",text:null,metadata:{}}}}();e.exports=a}),null);
__d("AnalyticsCohortCreateMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"AnalyticsCohortCreateData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"LinkedField",alias:null,name:"cohort",storageKey:null,args:null,concreteType:"AnalyticsStoredCohort",plural:!1,selections:[c]},e={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},f=[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"event_name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"serialized_filter",args:null,storageKey:null},c];return{kind:"Request",fragment:{kind:"Fragment",name:"AnalyticsCohortCreateMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_cohort_create",storageKey:null,args:b,concreteType:"AnalyticsCohortCreateResponsePayload",plural:!1,selections:[d,{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"stored_cohorts",storageKey:null,args:null,concreteType:"AnalyticsStoredCohortsConnection",plural:!1,selections:[{kind:"FragmentSpread",name:"AnalyticsCohortSection_cohorts",args:null}]}]}]}]},operation:{kind:"Operation",name:"AnalyticsCohortCreateMutation",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_cohort_create",storageKey:null,args:b,concreteType:"AnalyticsCohortCreateResponsePayload",plural:!1,selections:[d,{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"stored_cohorts",storageKey:null,args:null,concreteType:"AnalyticsStoredCohortsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"AnalyticsStoredCohort",plural:!0,selections:[c,e,{kind:"LinkedField",alias:null,name:"cohort_queries",storageKey:null,args:null,concreteType:"AppEventCohortQuerySpec",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"follow_up_event",storageKey:null,args:null,concreteType:null,plural:!1,selections:f},{kind:"LinkedField",alias:null,name:"initial_event",storageKey:null,args:null,concreteType:null,plural:!1,selections:f}]},{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"entity_id",args:null,storageKey:null},e,c]},{kind:"ScalarField",alias:null,name:"is_internal",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_system_generated",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"time_last_seen",args:null,storageKey:null}]}]},c]}]}]},params:{operationKind:"mutation",name:"AnalyticsCohortCreateMutation",id:"1688940077878305",text:null,metadata:{}}}}();e.exports=a}),null);
__d("AnalyticsCohortDeleteMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"AnalyticsCohortDeleteData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},e=[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"event_name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"serialized_filter",args:null,storageKey:null},c];return{kind:"Request",fragment:{kind:"Fragment",name:"AnalyticsCohortDeleteMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_cohort_delete",storageKey:null,args:b,concreteType:"AnalyticsCohortDeleteResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"stored_cohorts",storageKey:null,args:null,concreteType:"AnalyticsStoredCohortsConnection",plural:!1,selections:[{kind:"FragmentSpread",name:"AnalyticsCohortSection_cohorts",args:null}]}]}]}]},operation:{kind:"Operation",name:"AnalyticsCohortDeleteMutation",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_cohort_delete",storageKey:null,args:b,concreteType:"AnalyticsCohortDeleteResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"stored_cohorts",storageKey:null,args:null,concreteType:"AnalyticsStoredCohortsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"AnalyticsStoredCohort",plural:!0,selections:[c,d,{kind:"LinkedField",alias:null,name:"cohort_queries",storageKey:null,args:null,concreteType:"AppEventCohortQuerySpec",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"follow_up_event",storageKey:null,args:null,concreteType:null,plural:!1,selections:e},{kind:"LinkedField",alias:null,name:"initial_event",storageKey:null,args:null,concreteType:null,plural:!1,selections:e}]},{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"entity_id",args:null,storageKey:null},d,c]},{kind:"ScalarField",alias:null,name:"is_internal",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_system_generated",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"time_last_seen",args:null,storageKey:null}]}]},c]}]}]},params:{operationKind:"mutation",name:"AnalyticsCohortDeleteMutation",id:"1850911318311117",text:null,metadata:{}}}}();e.exports=a}),null);
__d("AnalyticsCohortEditMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"AnalyticsCohortEditData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={kind:"ScalarField",alias:null,name:"event_name",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"serialized_filter",args:null,storageKey:null},e=[c,d],f={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"is_internal",args:null,storageKey:null},h={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"time_last_seen",args:null,storageKey:null};c=[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},c,d,f];return{kind:"Request",fragment:{kind:"Fragment",name:"AnalyticsCohortEditMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_cohort_edit",storageKey:null,args:b,concreteType:"AnalyticsCohortEditResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"cohort",storageKey:null,args:null,concreteType:"AnalyticsStoredCohort",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"cohort_queries",storageKey:null,args:null,concreteType:"AppEventCohortQuerySpec",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"follow_up_event",storageKey:null,args:null,concreteType:null,plural:!1,selections:e},{kind:"LinkedField",alias:null,name:"initial_event",storageKey:null,args:null,concreteType:null,plural:!1,selections:e}]},f,g,h,i]}]}]},operation:{kind:"Operation",name:"AnalyticsCohortEditMutation",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_cohort_edit",storageKey:null,args:b,concreteType:"AnalyticsCohortEditResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"cohort",storageKey:null,args:null,concreteType:"AnalyticsStoredCohort",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"cohort_queries",storageKey:null,args:null,concreteType:"AppEventCohortQuerySpec",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"follow_up_event",storageKey:null,args:null,concreteType:null,plural:!1,selections:c},{kind:"LinkedField",alias:null,name:"initial_event",storageKey:null,args:null,concreteType:null,plural:!1,selections:c}]},f,g,h,i]}]}]},params:{operationKind:"mutation",name:"AnalyticsCohortEditMutation",id:"1492447437508937",text:null,metadata:{}}}}();e.exports=a}),null);
__d("AnalyticsFunnelCreateMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"AnalyticsFunnelCreateData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"LinkedField",alias:null,name:"funnel",storageKey:null,args:null,concreteType:"AnalyticsStoredFunnel",plural:!1,selections:[c]},e={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"AnalyticsFunnelCreateMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_funnel_create",storageKey:null,args:b,concreteType:"AnalyticsFunnelCreateResponsePayload",plural:!1,selections:[d,{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"funnels",storageKey:null,args:null,concreteType:"AnalyticsFunnelsConnection",plural:!1,selections:[{kind:"FragmentSpread",name:"GriffinFunnelSection_funnels",args:null}]}]}]}]},operation:{kind:"Operation",name:"AnalyticsFunnelCreateMutation",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_funnel_create",storageKey:null,args:b,concreteType:"AnalyticsFunnelCreateResponsePayload",plural:!1,selections:[d,{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"funnels",storageKey:null,args:null,concreteType:"AnalyticsFunnelsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"AnalyticsStoredFunnel",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"entity_id",args:null,storageKey:null},e,c]},{kind:"ScalarField",alias:null,name:"breakdown",args:null,storageKey:null},c,{kind:"ScalarField",alias:null,name:"is_internal",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_system_generated",args:null,storageKey:null},e,{kind:"LinkedField",alias:null,name:"stages",storageKey:null,args:null,concreteType:null,plural:!0,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"event_rule_name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"serialized_filter",args:null,storageKey:null},c]},{kind:"ScalarField",alias:null,name:"time_last_seen",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"time_constraint",args:null,storageKey:null}]}]},c]}]}]},params:{operationKind:"mutation",name:"AnalyticsFunnelCreateMutation",id:"2384676128272130",text:null,metadata:{}}}}();e.exports=a}),null);
__d("AnalyticsFunnelDeleteMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"AnalyticsFunnelDeleteData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"AnalyticsFunnelDeleteMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_funnel_delete",storageKey:null,args:b,concreteType:"AnalyticsFunnelDeleteResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"funnels",storageKey:null,args:null,concreteType:"AnalyticsFunnelsConnection",plural:!1,selections:[{kind:"FragmentSpread",name:"GriffinFunnelSection_funnels",args:null}]}]}]}]},operation:{kind:"Operation",name:"AnalyticsFunnelDeleteMutation",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_funnel_delete",storageKey:null,args:b,concreteType:"AnalyticsFunnelDeleteResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"funnels",storageKey:null,args:null,concreteType:"AnalyticsFunnelsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"AnalyticsStoredFunnel",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"analytics_entity",storageKey:null,args:null,concreteType:"AnalyticsEntity",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"entity_id",args:null,storageKey:null},c,d]},{kind:"ScalarField",alias:null,name:"breakdown",args:null,storageKey:null},d,{kind:"ScalarField",alias:null,name:"is_internal",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_system_generated",args:null,storageKey:null},c,{kind:"LinkedField",alias:null,name:"stages",storageKey:null,args:null,concreteType:null,plural:!0,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"event_rule_name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"serialized_filter",args:null,storageKey:null},d]},{kind:"ScalarField",alias:null,name:"time_last_seen",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"time_constraint",args:null,storageKey:null}]}]},d]}]}]},params:{operationKind:"mutation",name:"AnalyticsFunnelDeleteMutation",id:"2283053081769819",text:null,metadata:{}}}}();e.exports=a}),null);
__d("AnalyticsFunnelEditMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"AnalyticsFunnelEditData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"is_internal",args:null,storageKey:null},e={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"breakdown",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"event_rule_name",args:null,storageKey:null},h={kind:"ScalarField",alias:null,name:"serialized_filter",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"time_last_seen",args:null,storageKey:null},j={kind:"ScalarField",alias:null,name:"time_constraint",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"AnalyticsFunnelEditMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_funnel_edit",storageKey:null,args:b,concreteType:"AnalyticsFunnelEditResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"funnel",storageKey:null,args:null,concreteType:"AnalyticsStoredFunnel",plural:!1,selections:[c,d,e,f,{kind:"LinkedField",alias:null,name:"stages",storageKey:null,args:null,concreteType:null,plural:!0,selections:[g,h]},i,j]}]}]},operation:{kind:"Operation",name:"AnalyticsFunnelEditMutation",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"analytics_funnel_edit",storageKey:null,args:b,concreteType:"AnalyticsFunnelEditResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"funnel",storageKey:null,args:null,concreteType:"AnalyticsStoredFunnel",plural:!1,selections:[c,d,e,f,{kind:"LinkedField",alias:null,name:"stages",storageKey:null,args:null,concreteType:null,plural:!0,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},g,h,c]},i,j]}]}]},params:{operationKind:"mutation",name:"AnalyticsFunnelEditMutation",id:"2439950236016964",text:null,metadata:{}}}}();e.exports=a}),null);
__d("AnalyticsDashboardActions",["AnalyticsActionType","AnalyticsDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AnalyticsActionType").DASHBOARDS;a={resizeChart:function(a){b("AnalyticsDispatcher").dispatchAction({type:g.CHART_RESIZE,data:{id:a}})},startCreateChart:function(a,c){b("AnalyticsDispatcher").dispatchAction({type:g.START_CREATE_CHART,chartConfig:c,dashboardID:a})},startEditChart:function(a,c){b("AnalyticsDispatcher").dispatchAction({type:g.START_EDIT_CHART,chartConfig:c,dashboardID:a})},startViewDashboard:function(a){b("AnalyticsDispatcher").dispatchAction({type:g.START_VIEW_DASHBOARD,dashboard:a})},setChartConfig:function(a){b("AnalyticsDispatcher").dispatchAction({type:g.SET_CHART_CONFIG,chartConfig:a})},setSettingModal:function(a){b("AnalyticsDispatcher").dispatchAction({type:g.SET_SETTING_MODAL,settingModal:a})},setDashboardMutationMode:function(a,c){b("AnalyticsDispatcher").dispatchAction({type:g.SET_MUTATION_MODE,chartConfig:c,mutationMode:a})}};e.exports=a}),null);
__d("AnalyticsDashboardErrorNotice",["AnalyticsBackfillRequestUtils","AnalyticsErrorCodes","AnalyticsErrorMessages","BonsaiText","FalcorErrorNotice","GriffinDashboardUtils","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.chartSize==="TILE"?b("GriffinDashboardUtils").tileChartHeight:b("GriffinDashboardUtils").chartHeight;return b("React").createElement(b("FalcorErrorNotice"),{message:this.$1(),style:{height:a,boxSizing:"border-box"}},this.props.chartSize==="TILE"?null:(a=this.$2())!=null?a:this.props.children)};d.$1=function(){var a=this.props,c=a.title;a=a.errorCode;if(c!=null)return c;return a!=null?b("AnalyticsErrorMessages").getMessageByCode(a):null};d.$2=function(){var a;return(a=this.$3())!=null?a:this.$4()};d.$3=function(){switch(this.props.errorCode){case b("AnalyticsErrorCodes").NOT_ENOUGH_USERS:return b("BonsaiText").errors.not_enough_data;default:return null}};d.$4=function(){return this.props.title===b("AnalyticsErrorMessages").getMessageByCode(b("AnalyticsErrorCodes").ANALYTICS_INVALID_DATE_RANGE)?b("AnalyticsBackfillRequestUtils").getDataNotAvailableDescription():null};return c}(b("React").PureComponent);a.defaultProps={errorCode:null};e.exports=a}),null);
__d("AnalyticsDashboardLoadingCard",["AnalyticsLoadingCard","GriffinDashboardUtils","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.chartSize==="TILE"?b("GriffinDashboardUtils").tileChartHeight:b("GriffinDashboardUtils").chartHeight;return b("React").createElement(b("AnalyticsLoadingCard"),{className:this.props.className,height:a,text:this.props.text})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("AnalyticsPercentageBarTable",["cx","fbt","AnalyticsDownloadButton","AnalyticsQueryCurrency","FalcorPaginatedDataTable","InsightsNumUtils","InsightsTimeUtils","React","SUIBusinessTheme","SUISearchInput.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={searchString:""},d.$1=d.props.showPercentage?null:d.props.data[0].value,d.renderValue=function(a){var c=d.$1,e=d.props,f=e.isCurrencyEvent;e=e.isTimeEvent;if(c==null||c===0)return null;var g=b("InsightsNumUtils").prettyPercentQuotient({denominator:c,numerator:a,precision:2});c=b("InsightsNumUtils").prettyPercentQuotient({denominator:c,numerator:c-a,precision:2});f?f=b("InsightsNumUtils").prettyCurrency(b("AnalyticsQueryCurrency").get(),a):e?f=b("InsightsTimeUtils").secondsToDisplay(a,!1):f=b("InsightsNumUtils").prettyShortFloat(a,2);return b("React").createElement("div",{className:"_4jip"},b("React").createElement("div",{className:"_n_5",style:{width:g}}),b("React").createElement("div",{className:"_n_i",style:{width:c}}),b("React").createElement("div",{className:"_n_r"},f))},d.$2=function(a){d.setState({searchString:a}),d.refs.table.onSearchChange({target:{value:a}})},d.$3=function(){__p&&__p();var a=[],b=d.getColumns();a.push(b.map(function(a){return a.label}));d.$4().forEach(function(c){return a.push(b.map(function(a){a=c[a.id];return a.toString()}))});var c=d.props,e=c.breakdownLabel;c=c.filterName;c=c!=null&&c!==""?e.toString()+"_"+c:e.toString();return{data:a,fileName:c}},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.showPercentage,c=this.props.data.map(function(c){return{title:b("React").createElement("div",null,c.title),titleKey:c.title.toString(),value:a?c.ratio:c.value}}),d=b("React").createElement(b("SUISearchInput.react"),{className:"_4fjp",hasTooltip:!1,onChange:this.$2,theme:b("SUIBusinessTheme"),value:this.state.searchString||""});return b("React").createElement("div",{className:"_4fjq"},b("React").createElement("div",{className:"_4fjt"},b("React").createElement("div",{className:"_4fju"},h._("Search")),d,b("React").createElement("div",{className:"_4fjv"},b("React").createElement(b("AnalyticsDownloadButton"),{getExportData:this.$3,showLabel:!0,theme:b("SUIBusinessTheme")}))),b("React").createElement("div",{className:"_4fjw"},b("React").createElement(b("FalcorPaginatedDataTable"),{columns:this.getColumns(),columnToSortBy:"value",pageSize:Infinity,ref:"table",rows:c,searchFieldName:"titleKey"})))};d.getColumns=function(){return[{id:"title",label:this.props.breakdownLabel,width:210},{cellRenderer:this.props.showPercentage?this.renderPercentage:this.renderValue,comparator:function(a,b){return b.value-a.value},id:"value",label:this.props.metricLabel,sortable:!0}]};d.renderPercentage=function(a){var c=b("InsightsNumUtils").prettyPercent(a);a=b("InsightsNumUtils").prettyPercent(1-a);return b("React").createElement("div",{className:"_4jip"},b("React").createElement("div",{className:"_n_5",style:{width:c}}),b("React").createElement("div",{className:"_n_i",style:{width:a}}),b("React").createElement("div",{className:"_n_r"},c))};d.$4=function(){__p&&__p();var a=this.state.searchString,b=this.props.data.slice(0);if(a){var c=a.toLocaleLowerCase();b=b.filter(function(a){if(!a||!a.title)return!1;a=a.title.toString().toLocaleLowerCase();return a.includes(c)})}return b};return c}(b("React").PureComponent);e.exports=a}),null);
__d("AnalyticsAggregationBarChart",["cx","fbt","invariant","AnalyticsBarChartQueryRenderer","AnalyticsBarChartType","AnalyticsCandelaUtils","AnalyticsChartSize","AnalyticsDashboardErrorNotice","AnalyticsDashboardLoadingCard","AnalyticsErrorCodes","AnalyticsMetricConfigs","AnalyticsPercentageBarTable","AnalyticsQueryBreakdownUtils","AnalyticsQueryCurrency","AppCustomEventType","BUIInsightsHoverCardChart.react","BUIInsightsVerticalBarChart.react","CandelaConstants","CandelaGroupScaleBuilder","FBAColorPalette","FBAEmptyFilterSetListing","FBAFilterSetListing","FBAMetaLoggerWWW","GriffinResizableChart","GriffinToggleableLegend.react","InsightsChartWithLegend.react","LayerFadeOnHide","React","ShimButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogCloseButton.react","XUIDialogFooter.react","XUIDialogTitle.react","immutable","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("CandelaConstants").ScaleType,k=b("CandelaGroupScaleBuilder").group,l=b("FBAMetaLoggerWWW").META_LOGGER,m=b("immutable").List;b("immutable").OrderedSet;var n=b("immutable").Set,o=300,p=90;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={chartWidth:null,disabledKeys:n(),showAllBreakdowns:!1},c.$4=function(a){c.setState({chartWidth:a})},c.$7=function(a){var b=c.state.disabledKeys;b.has(a.key)?b=b["delete"](a.key):b=b.add(a.key);c.setState({disabledKeys:b})},c.$10=function(){c.setState({showAllBreakdowns:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidUpdate=function(a,c){__p&&__p();if(!this.props.isLoading){var d=this.props.data;if(d!=null){var e=this.props,f=e.breakdownType;e=e.chartSize;if(f===b("AnalyticsBarChartType").MULTI_EVENT_NO_BREAKDOWN&&d.length>5){var g=c.disabledKeys;f=d.slice(5).map(function(a){return a.event_name});e===b("AnalyticsChartSize").SMALL&&(a.isLoading||a.chartSize===b("AnalyticsChartSize").LARGE)&&f.map(function(a){g=g.add(String(a))});a.chartSize===b("AnalyticsChartSize").SMALL&&e===b("AnalyticsChartSize").LARGE&&f.map(function(a){g.has(String(a))&&(g=g["delete"](String(a)))});this.setState({disabledKeys:g})}}}};d.render=function(){__p&&__p();var a=this.props,c=a.chart,d=a.isLoading,e=a.aggregationQueryResults,f=a.error;a=a.breakdownType;if(d)return b("React").createElement(b("AnalyticsDashboardLoadingCard"),null);else if(f!=null&&f!=="")return b("React").createElement(b("AnalyticsDashboardErrorNotice"),{title:f});d=b("AnalyticsCandelaUtils").Generic.getTotalRows(e);if(!d||b("nullthrows")(this.props.data).length===0)return b("React").createElement(b("AnalyticsDashboardErrorNotice"),{errorCode:b("AnalyticsErrorCodes").NOT_ENOUGH_USERS});f=e.map(function(a){return a.metric});d=c.queries[0].metric;var g=b("nullthrows")(this.props.breakdowns),h=b("nullthrows")(this.props.schema),i=b("nullthrows")(this.props.data),j=this.$1(i,f[0]),l=c.queries,m=n(l.map(function(a){return a.event_name})).toArray(),p=k(g[0]),q=this.$2(g,h,f[0]),r=b("AnalyticsCandelaUtils").BarChart.getTitleElementFactory(g[0],m[0]),s=this.$3(g,h),t=b("FBAColorPalette").get(s.map(function(a){return a.key}).toJS(),{sortSeriesNames:!1}),u=b("AnalyticsMetricConfigs").getValueFormatterFactory({currency:b("AnalyticsQueryCurrency").get(),eventName:c.queries[0].event_name,hasCurrencyValue:e[0].result.hasCurrencyValue(),metric:c.queries[0].metric,"short":!0});u=b("React").createElement(b("GriffinResizableChart"),{onChangeWidth:this.$4},b("React").createElement(b("BUIInsightsHoverCardChart.react"),{displayClosestSeriesItemOnly:!0,formatterFactory:u,items:s,titleElementGetter:r},b("React").createElement(b("BUIInsightsVerticalBarChart.react"),{autoColors:t,axisMarkFormatterFactory:b("AnalyticsCandelaUtils").BarChart.getAxisFormatter(g[0],m[0]),barLabelFormatterFactory:b("AnalyticsCandelaUtils").BarChart.getBarLabelFormatterFactory(e,d,a),data:j,height:o,plotX:p,plotY:q,ref:"chart",schema:h,styles:this.$5(j)})));s=l[0];r=b("FBAFilterSetListing").resolve({behavior:c.segment_behavior,global:b("FBAEmptyFilterSetListing"),local:s.filter_set_listing});t=b("AnalyticsCandelaUtils").BarChart.getDescriptionForDashboardBarChart(m,f[0],g,a,this.props.chartSize);p=this.$6(i,g,h,s.event_name);q=b("FBAColorPalette").get(p.map(function(a){return a.key}).toJS(),{sortSeriesNames:!1});j=a===b("AnalyticsBarChartType").SINGLE_EVENT_ONE_BREAKDOWN;return b("React").createElement(b("InsightsChartWithLegend.react"),{chart:u,items:p,title:t},b("React").createElement("div",{className:j?"_im-":""},b("React").createElement("span",{className:"_15jj"},b("React").createElement(b("GriffinToggleableLegend.react"),{autoColors:q,chartID:c.id,disabledKeys:this.state.disabledKeys,items:p,onToggle:this.$7,title:t})),b("React").createElement("span",{className:"_2-k5"},j?this.$8(i):null),this.renderLayers(g,m,f[0],d,h,e,r.getName())))};d.$1=function(a,c){__p&&__p();var d=this,e=this.props,f=e.breakdownType;e=e.breakdowns;var g=this.props.chartSize===b("AnalyticsChartSize").LARGE;if(f===b("AnalyticsBarChartType").SINGLE_EVENT_ONE_BREAKDOWN){var h=g?10:5;c=b("AnalyticsCandelaUtils").Generic.getKeyForMetric(c);return b("AnalyticsCandelaUtils").BarChart.getTopKData(a,h,c,e[0],!1)}if(f===b("AnalyticsBarChartType").MULTI_EVENT_NO_BREAKDOWN){a.forEach(function(a,b){a.$meta={className:"data"+b}});return a.filter(function(a){return typeof a.event_name==="string"&&!d.state.disabledKeys.has(a.event_name)})}return f===b("AnalyticsBarChartType").MULTI_EVENT_ONE_BREAKDOWN?g?a:a.slice(0,5):a};d.$5=function(a){__p&&__p();var c=this.state.chartWidth,d=this.props.breakdownType;c={'axis[orientation="horizontal"]>axisbucketmark':{textOverflow:"ellipsis",whiteSpace:"normal"},'axis[orientation="vertical"][alignment="left"]':{width:70},bargroup:{maxWidth:this.$9(c==null?500:c,a)}};if(d===b("AnalyticsBarChartType").MULTI_EVENT_NO_BREAKDOWN){d=m(b("FBAColorPalette").getColors());for(var e=0;e<a.length;e++){var f;c=babelHelpers["extends"]({},c,(f={},f["bar.data"+e]={fill:d.get(e%d.count())},f["bar.data"+e+">barlabel"]={color:d.get(e%d.count())},f))}}return c};d.$9=function(a,c){__p&&__p();var d=this.props,e=d.breakdownType;d=d.chartSize;var f=1;switch(e){case b("AnalyticsBarChartType").SINGLE_EVENT_NO_BREAKDOWN:f=2;break;case b("AnalyticsBarChartType").SINGLE_EVENT_ONE_BREAKDOWN:case b("AnalyticsBarChartType").SINGLE_EVENT_MULTI_BREAKDOWN:f=Math.max(2,c.length);break;case b("AnalyticsBarChartType").MULTI_EVENT_NO_BREAKDOWN:case b("AnalyticsBarChartType").MULTI_EVENT_ONE_BREAKDOWN:f=b("AnalyticsCandelaUtils").BarChart.shouldShowTop5Events(c.length,d)?5:c.length;break}e=a-p;return e/(f*2-1)};d.$2=function(a,c,d){var e=this,f=a[0]===b("AnalyticsCandelaUtils").BarChart.eventNameKey;c=b("AnalyticsCandelaUtils").BarChart.getPlotY(c,d,a[1],f);d=c.getSeriesNames().filter(function(a){return!e.state.disabledKeys.has(a)});c.seriesNames(d);return[c]};d.$3=function(a,c){return b("AnalyticsCandelaUtils").BarChart.isAgeGenderChart(a)?b("AnalyticsCandelaUtils").BarChart.getItemsForAgeAndGenderChart(c):b("AnalyticsCandelaUtils").BarChart.getItemsFromSchema(c)};d.$6=function(a,c,d,e){var f=this.props.breakdownType;if(b("AnalyticsCandelaUtils").BarChart.isAgeGenderChart(c))return b("AnalyticsCandelaUtils").BarChart.getItemsForAgeAndGenderChart(d);else if(f===b("AnalyticsBarChartType").SINGLE_EVENT_ONE_BREAKDOWN)return b("AnalyticsCandelaUtils").BarChart.getItemsFromEventName(e);else if(f===b("AnalyticsBarChartType").MULTI_EVENT_ONE_BREAKDOWN)return b("AnalyticsCandelaUtils").BarChart.getItemsFromSchema(d);else return b("AnalyticsCandelaUtils").BarChart.getItemsFromResult(a,d,c[0],e)};d.$8=function(a){var c=this,d=this.props.chartSize===b("AnalyticsChartSize").LARGE?10:5;return a.length<=d?null:b("React").createElement(b("ShimButton.react"),{className:"_ctw _2aax",inline:!0,onClick:function(){l.logEvent("Breakdowns_SeeAllLink_Click"),c.setState({showAllBreakdowns:!0})}},h._("View full breakdown"))};d.renderLayers=function(a,c,d,e,f,g,k){__p&&__p();if(!this.state.showAllBreakdowns)return null;a.length===1&&c.length===1||i(0,586);var l=b("nullthrows")(this.props.rawData),m=h._("Breakdown by {breakdown name}",[h._param("breakdown name",b("AnalyticsQueryBreakdownUtils").getBreakdownTypeDisplayString(a[0],c[0]))]);g=b("AnalyticsCandelaUtils").BarChart.shouldShowPercentage(e,g);l=b("AnalyticsCandelaUtils").BarChart.getTableData(a[0],l,d,g,c[0]);d=b("AnalyticsQueryBreakdownUtils").getBreakdownTypeDisplayString(a[0],c[0]);a=b("AnalyticsMetricConfigs").getMetricLabel(e,c[0]);e=Object.keys(f).filter(function(a){var b;return((b=f)!=null?(b=b[a])!=null?b.type:b:b)===j.CURRENCY}).length===1;c=c[0]===b("AppCustomEventType").FB_MOBILE_DEACTIVATE_APP;return b("React").createElement(b("XUIDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},isStrictlyControlled:!0,key:"showAll",onHide:this.$10,shown:this.state.showAllBreakdowns,width:window.innerWidth*.6},b("React").createElement(b("XUIDialogTitle.react"),null,m),b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement(b("AnalyticsPercentageBarTable"),{breakdownLabel:d,data:l,filterName:k,isCurrencyEvent:e,isTimeEvent:c,metricLabel:a,showPercentage:g})),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogCloseButton.react"),null)))};return c}(b("React").PureComponent);e.exports=b("AnalyticsBarChartQueryRenderer").createContainer(a)}),null);
__d("AnalyticsFunnelChartConversionInfo",["cx","fbt","AnalyticsFunnelChartUtils","FBAColorPalette","React","lastx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.breakdown;a=a.funnelData;if(a==null)return null;c=c!=null;var d=b("AnalyticsFunnelChartUtils").getOverallCompletionTimeDisplayText(a);a=b("AnalyticsFunnelChartUtils").getOverallConversionRateText(a);a=b("React").createElement("div",{className:"_ss8"},h._("{Percentage value} funnel conversion",[h._param("Percentage value",a)]));d=b("React").createElement("div",{className:"_ss8"},h._("{Completion time} median completion time",[h._param("Completion time",d)]));var e=c?{}:this.$1();return b("React").createElement("div",{className:"_ss9"+(c?" _61pq":"")+(c?"":" _61pp"),style:e},a,d)};d.$1=function(){return{color:b("FBAColorPalette").getRootColor({breakdown:this.props.breakdown,eventName:this.props.funnelData!=null?b("lastx")(this.props.funnelData.getEvents()):null,metric:"UNIQUE_USERS"})}};return c}(b("React").PureComponent);e.exports=a}),null);
__d("AnalyticsDashboardTimeSeriesChart",["AnalyticsCandelaUtils","AnalyticsDashboardErrorNotice","AnalyticsDashboardLoadingCard","AnalyticsErrorCodes","AnalyticsTimeSeriesChart","AnalyticsTimeSeriesChartQueryRenderer","React","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=328;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.aggregationQueryResults,d=a.data,e=a.isLoading,f=a.error,g=a.kpiQueryResult;a=a.schema;if(e)return b("React").createElement(b("AnalyticsDashboardLoadingCard"),null);else if(f!=null&&f!=="")return b("React").createElement(b("AnalyticsDashboardErrorNotice"),{title:f});e=b("AnalyticsCandelaUtils").Generic.getTotalRows(this.props.aggregationQueryResults);return!e?b("React").createElement(b("AnalyticsDashboardErrorNotice"),{errorCode:b("AnalyticsErrorCodes").NOT_ENOUGH_USERS}):b("React").createElement(b("AnalyticsTimeSeriesChart"),{aggregationQueryResults:c,annotations:this.props.annotations,chart:this.props.chart,currency:this.props.currency,data:b("nullthrows")(d),error_bounds:this.props.error_bounds,goal:this.props.goal,height:this.$1(),hideLegendMargins:!1,inheritedDateRange:this.props.inheritedDateRange,inheritedDateRangeType:this.props.inheritedDateRangeType,inheritedFilterSet:this.props.inheritedFilterSet,kpiQueryResult:g,schema:b("nullthrows")(a),showLegendTitle:!0,showValuesInLegend:!1,timezoneID:this.props.timezoneID})};d.$1=function(){return this.props.chartHeight!=null?this.props.chartHeight:g};return c}(b("React").PureComponent);e.exports=b("AnalyticsTimeSeriesChartQueryRenderer").createContainer(a)}),null);
__d("AnalyticsBreakdownTableCreateMutation",["CurrentUser","RelayFBEnvironment","RelayModern","nullthrows","AnalyticsBreakdownTableCreateMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("AnalyticsBreakdownTableCreateMutation.graphql")};function a(a,c){return g(b("RelayFBEnvironment"),{mutation:h,onCompleted:function(a){return i(a,(a=c)!=null?a.onCompleted:a)},onError:c&&c.onError,variables:{input:babelHelpers["extends"]({actor_id:b("CurrentUser").getAccountID()},a)}})}function i(a,c){if(!c)return;a=b("nullthrows")((a=a)!=null?(a=a.analytics_breakdown_table_create)!=null?(a=a.breakdown_table)!=null?a.id:a:a:a);c(a)}e.exports={commit:a}}),null);
__d("AnalyticsBreakdownTableDeleteMutation",["CurrentUser","RelayFBEnvironment","RelayModern","AnalyticsBreakdownTableDeleteMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("AnalyticsBreakdownTableDeleteMutation.graphql")};function a(a,c){return g(b("RelayFBEnvironment"),{mutation:h,onCompleted:c&&c.onCompleted,onError:c&&c.onError,variables:{input:babelHelpers["extends"]({actor_id:b("CurrentUser").getAccountID()},a)}})}e.exports={commit:a}}),null);
__d("AnalyticsBreakdownTableEditMutation",["CurrentUser","RelayFBEnvironment","RelayModern","nullthrows","AnalyticsBreakdownTableEditMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("AnalyticsBreakdownTableEditMutation.graphql")};function a(a,c){return g(b("RelayFBEnvironment"),{mutation:h,onCompleted:function(a){return i(a,(a=c)!=null?a.onCompleted:a)},onError:c&&c.onError,variables:{input:babelHelpers["extends"]({actor_id:b("CurrentUser").getAccountID()},a)}})}function i(a,c){if(!c)return;a=b("nullthrows")((a=a)!=null?(a=a.analytics_breakdown_table_edit)!=null?(a=a.breakdown_table)!=null?a.id:a:a:a);c(a)}e.exports={commit:a}}),null);
__d("AnalyticsCohortCreateMutation",["CurrentUser","RelayFBEnvironment","RelayModern","nullthrows","AnalyticsCohortCreateMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("AnalyticsCohortCreateMutation.graphql")};function i(a,c){if(!c)return;a=b("nullthrows")((a=a)!=null?(a=a.analytics_cohort_create)!=null?(a=a.cohort)!=null?a.id:a:a:a);c(a)}function a(a,c){return g(b("RelayFBEnvironment"),{mutation:h,onCompleted:function(a){return i(a,(a=c)!=null?a.onCompleted:a)},onError:c&&c.onError,variables:{input:{actor_id:b("CurrentUser").getAccountID(),analytics_entity_id:a.analytics_entity_id,cohort_queries:[{follow_up_event:JSON.stringify(a.cohort_query.follow_up_event),initial_event:JSON.stringify(a.cohort_query.initial_event)}],is_internal:a.is_internal,name:a.name}}})}e.exports={commit:a}}),null);
__d("AnalyticsCohortDeleteMutation",["CurrentUser","RelayFBEnvironment","RelayModern","AnalyticsCohortDeleteMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("AnalyticsCohortDeleteMutation.graphql")};function a(a,c){return g(b("RelayFBEnvironment"),{mutation:h,onCompleted:c&&c.onCompleted,onError:c&&c.onError,variables:{input:babelHelpers["extends"]({actor_id:b("CurrentUser").getAccountID()},a)}})}e.exports={commit:a}}),null);
__d("AnalyticsCohortEditMutation",["CurrentUser","RelayFBEnvironment","RelayModern","nullthrows","AnalyticsCohortEditMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("AnalyticsCohortEditMutation.graphql")};function i(a,c){if(!c)return;a=b("nullthrows")((a=a)!=null?(a=a.analytics_cohort_edit)!=null?(a=a.cohort)!=null?a.id:a:a:a);c(a)}function a(a,c){var d=a.cohort_query;d=d?[{follow_up_event:JSON.stringify(d.follow_up_event),initial_event:JSON.stringify(d.initial_event)}]:null;return g(b("RelayFBEnvironment"),{mutation:h,onCompleted:function(a){return i(a,(a=c)!=null?a.onCompleted:a)},onError:c&&c.onError,variables:{input:{actor_id:b("CurrentUser").getAccountID(),cohort_id:a.cohort_id,cohort_queries:d,name:a.name}}})}e.exports={commit:a}}),null);
__d("AnalyticsFunnelCreateMutation",["CurrentUser","RelayFBEnvironment","RelayModern","nullthrows","AnalyticsFunnelCreateMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("AnalyticsFunnelCreateMutation.graphql")};function i(a,c){if(!c)return;a=b("nullthrows")((a=a)!=null?(a=a.analytics_funnel_create)!=null?(a=a.funnel)!=null?a.id:a:a:a);c(a)}function a(a,c){return g(b("RelayFBEnvironment"),{mutation:h,onCompleted:function(a){return i(a,(a=c)!=null?a.onCompleted:a)},onError:c&&c.onError,variables:{input:{actor_id:b("CurrentUser").getAccountID(),analytics_entity_id:a.analytics_entity_id,breakdown:a.breakdown,is_internal:a.is_internal,name:a.name,stages:a.stages.map(function(a){return JSON.stringify(a)}),time_constraint:a.time_constraint}}})}e.exports={commit:a}}),null);
__d("AnalyticsFunnelDeleteMutation",["CurrentUser","RelayFBEnvironment","RelayModern","AnalyticsFunnelDeleteMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("AnalyticsFunnelDeleteMutation.graphql")};function a(a,c){return g(b("RelayFBEnvironment"),{mutation:h,onCompleted:c&&c.onCompleted,onError:c&&c.onError,variables:{input:babelHelpers["extends"]({actor_id:b("CurrentUser").getAccountID()},a)}})}e.exports={commit:a}}),null);
__d("AnalyticsFunnelEditMutation",["CurrentUser","RelayFBEnvironment","RelayModern","nullthrows","AnalyticsFunnelEditMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("AnalyticsFunnelEditMutation.graphql")};function i(a,c){if(!c)return;a=b("nullthrows")((a=a)!=null?(a=a.analytics_funnel_edit)!=null?(a=a.funnel)!=null?a.id:a:a:a);c(a)}function a(a,c){var d=a.stages?a.stages.map(function(a){return JSON.stringify(a)}):void 0,e=null;a.filterSet&&!a.filterSet.isEmpty()?e=a.filterSet.serialize():a.segment!=null&&(e=JSON.stringify(a.segment));return g(b("RelayFBEnvironment"),{mutation:h,onCompleted:function(a){return i(a,(a=c)!=null?a.onCompleted:a)},onError:c&&c.onError,variables:{input:{actor_id:b("CurrentUser").getAccountID(),breakdowns:a.breakdowns,funnel_id:a.funnel_id,name:a.name,segment_id:a.segment_id,serialized_filter:e,stages:d,time_constraint:a.time_constraint}}})}e.exports={commit:a}}),null);
__d("AnalyticsColumnSelectorDropdown",["cx","fbt","ContextualDialogArrow","InputLabel.react","LayerHideOnBlur","LayerHideOnEscape","React","XUICheckboxInput.react","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogTitle.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();b("immutable").OrderedMap;var i={ContextualDialogArrow:b("ContextualDialogArrow"),LayerHideOnBlur:b("LayerHideOnBlur"),LayerHideOnEscape:b("LayerHideOnEscape")};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=function(a){a=a.target.value;c.props.onChange(c.props.columns.get(a)?c.props.columns.set(a,!1):c.props.columns.set(a,!0))},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=h._("COLUMNS");return b("React").createElement(b("XUIContextualDialog.react"),{alignment:"right",behaviors:i,contextRef:this.props.contextRef,label:a,offsetY:8,onToggle:this.props.onToggle,position:"below",shown:this.props.shown,width:165},b("React").createElement("div",{className:"_2pi1"},b("React").createElement(b("XUIContextualDialogTitle.react"),null,b("React").createElement("span",{className:"_79-"},a)),b("React").createElement(b("XUIContextualDialogBody.react"),null,this.$1())))};d.$1=function(){var a=this;return this.props.columns.map(function(b,c){return a.$2(b,c)}).toList().toJS()};d.$2=function(a,c){return b("React").createElement(b("InputLabel.react"),{className:"_79z",key:c,label:this.props.columnRenderer(c)},b("React").createElement(b("XUICheckboxInput.react"),{checked:a,name:c,onChange:this.$3,value:c}))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("AnalyticsColumnSelectorButton",["ix","fbt","AnalyticsColumnSelectorDropdown","FBAMetaLoggerWWW","GriffinButton","Image.react","React","asset","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FBAMetaLoggerWWW").META_LOGGER;b("immutable").OrderedMap;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={showDialog:!1},c.$2=function(){c.setState({showDialog:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this;return b("React").createElement("div",null,this.props.showSettingButton?this.$1():null,b("React").createElement(b("AnalyticsColumnSelectorDropdown"),{columns:this.props.columns,columnRenderer:this.props.columnRenderer,onChange:this.props.onChange,contextRef:function(){return a.refs.button},shown:this.state.showDialog,onToggle:function(b){a.setState({showDialog:b}),b&&i.logEvent("Breakdowns_AggregationSelector_Open",{feature_id:a.props.breakdownTableID})}}))};d.$1=function(){var a=b("React").createElement(b("Image.react"),{alt:"setting",ref:"button",src:g("490844"),tabIndex:0});return b("React").createElement(b("GriffinButton"),{onClick:this.$2,icon:a,width:32,tooltip:h._("Choose the data you want to see.")})};return c}(b("React").Component);e.exports=a}),null);
__d("BonsaiErrorNotice",["React","XUINotice.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("XUINotice.react"),this.props,this.props.message)};return c}(b("React").Component);e.exports=a}),null);
__d("InsightsBreakdownTableAggregationColumns",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COUNT:"count",COUNT_PERCENT:"count_percent",COUNT_PER_USER:"count_per_user",VALUE:"value",VALUE_PERCENT:"value_percent",VALUE_PER_EVENT:"value_per_event",UNIQUE_USERS:"unique_users",UNIQUE_USERS_PERCENT:"unique_users_percent"})}),null);
__d("AnalyticsAdHocBreakdownTable",["cx","fbt","Promise","AnalyticsBreakdownIDsToNamesResolver","AnalyticsBreakdownTableChartUtils","AnalyticsCard","AnalyticsColumnSelectorButton","AnalyticsExportUtils","AnalyticsLoadingCard","AnalyticsQueryApi","AnalyticsQueryCurrency","AnalyticsUIUtils","AppEventQueryAggregationPeriod","BonsaiColors","BonsaiErrorNotice","CurrentAnalyticsEntity","CustomEventStore","DateTime","FalcorBreakdownsTextUtils","FalcorDataTooltip","FalcorDataTooltipMixin","FalcorErrorNotice","FalcorPaginatedDataTable","FBAMetaLoggerWWW","FlexLayout.react","GriffinPinButton","GriffinSearchInput","GriffinSections","InsightsBreakdownTableAggregationColumns","InsightsNumUtils","InternalAnalyticsQueryBuilder","React","Timezone","URI","analyticsGetCurrentURI","areEqual","createObjectFrom","first","immutable","mapObject","objectValues","suiMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FBAMetaLoggerWWW").META_LOGGER,j=b("Timezone").PST8PDT,k=b("immutable").OrderedMap,l=["COUNT","SUM","USD_SUM","USERS"],m=Object.freeze({COUNT:"count",SUM:"value",USD_SUM:"usd_value",USERS:"unique_users"}),n=[b("InsightsBreakdownTableAggregationColumns").COUNT,b("InsightsBreakdownTableAggregationColumns").VALUE,b("InsightsBreakdownTableAggregationColumns").UNIQUE_USERS],o=[b("InsightsBreakdownTableAggregationColumns").VALUE,b("InsightsBreakdownTableAggregationColumns").VALUE_PERCENT,b("InsightsBreakdownTableAggregationColumns").VALUE_PER_EVENT];a=b("React").createClass({displayName:"AnalyticsAdHocBreakdownTable",statics:{getKey:function(){return b("GriffinSections").BREAKDOWN_TABLE}},mixins:[b("FalcorDataTooltipMixin")],getInitialState:function(){return{aggregationsColumns:this._getAggregationsColumnsMap(this.props.aggregationsColumns||n),apiData:null,apiErrorMessage:null,breakdownsColumns:[],isApiDataEmpty:!1,isPopErrorOrEmpty:!1,mediaLoaded:!1,popApiData:null,queries:[],searchString:null,uniqueUsersTotal:null,popUniqueUsersTotal:null}},_getAggregationsColumnsMap:function(a){return k(this._getAllAggregationsColumns().map(function(b){return[b,a.includes(b)]}))},UNSAFE_componentWillMount:function(){this._loadBreakdownsData(this.props,this.state)},componentDidUpdate:function(a,c){__p&&__p();var d=this;this._isLoading(c)&&!this._isLoading(this.state)&&(this.props.onLoad&&this.props.onLoad());c=this.props;var e=c.appliedFilterSet,f=c.breakdownTable,g=c.breakdownTableID,h=c.endTime;c=c.startTime;var i=f.event_name,j=f.breakdowns;f=f.id;var k=a.breakdownTable,l=k.event_name,m=k.breakdowns;k=k.id;c=a.startTime!==c||a.endTime!==h;h=a.breakdownTableID!==g||f!==k;g=m.some(function(a,b){return a!==j[b]});f=j.length!==m.length;k=i!==l;m=!b("areEqual")(e,a.appliedFilterSet);i=!b("areEqual")(this.props.aggregationsColumns,a.aggregationsColumns);l=c||h||k||g||f||m||i;l&&this.setState(function(a){return{aggregationsColumns:d.props.aggregationsColumns?d._getAggregationsColumnsMap(d.props.aggregationsColumns):a.aggregationsColumns}},function(){d._loadBreakdownsData(d.props,d.state)})},componentWillUnmount:function(){this._cancelQuery()},_renderHeaderButtons:function(a){return this.props.hideControls?null:b("React").createElement(b("AnalyticsColumnSelectorButton"),{breakdownTableID:this.props.breakdownTableID,columnRenderer:b("AnalyticsBreakdownTableChartUtils").getAggregationColumnLabel,columns:this.state.aggregationsColumns,onChange:this._onAggregationsChange,showSettingButton:a})},_getAllAggregationsColumns:function(){return b("objectValues")(b("InsightsBreakdownTableAggregationColumns"))},_getAggregationsColumnsAsArray:function(){return this.state.aggregationsColumns.filter(function(a){return a}).keySeq().toJS()},_renderBreakdownTable:function(){__p&&__p();var a,c=this.state.breakdownsColumns,d=this._getRows();if(d.length===0)return this._getNoDataNotice();var e=this._getAggregationsColumnsConfig(this._getAggregationsColumnsAsArray());c=this._getBreakdownsColumnsConfig(c);c=c.concat(e);e=this._getSortByColumn();a=(a=this.props.pageSize)!=null?a:Infinity;return b("React").createElement(b("FalcorPaginatedDataTable"),{className:"_56wn",columns:c,columnToSortBy:e,compactRowsAndHeader:this.props.compactRowsAndHeader,fixTableLayout:!0,getExportValueFromCell:b("AnalyticsExportUtils").getExportValueFromCell,height:this.props.height,onSort:function(a){return i.logEvent("Breakdowns_TableHeader_Click",{column:a})},pageNumberPosition:"bottom",pageSize:d.length>a?a:Infinity,ref:"breakdownsTable",reverseSort:!0,rows:d,showHeader:!0})},_getSortByColumn:function(){var a=new(b("URI"))(b("analyticsGetCurrentURI")()).getQueryData();a=a.sort_by_column_name;return!this._getAggregationsColumnsAsArray()?b("InsightsBreakdownTableAggregationColumns").UNIQUE_USERS:this._getAggregationsColumnsAsArray().includes(a)?a:this._getAggregationsColumnsAsArray().includes(b("InsightsBreakdownTableAggregationColumns").COUNT)?b("InsightsBreakdownTableAggregationColumns").COUNT:b("first")(this._getAggregationsColumnsAsArray())},_getRows:function(){__p&&__p();var a=this,c=this,d=this.state,e=d.apiData,f=d.isPopErrorOrEmpty,g=d.popApiData,h=d.popUniqueUsersTotal;d=d.uniqueUsersTotal;if(e==null)return[];var i=e.totals,j=!!i.usdSumTotal,k=this._getBreakdownsRows(e,!0),l=this._getAggregationsRows(e,d,j),m=null;!f&&g&&h!=null&&h!=0&&(m=this._getBreakdownsToAggregationsMap(g,h,j));var n=[];i=function(d){__p&&__p();if(a.props.rowLimit&&n.length===a.props.rowLimit)return"break";var e={},f=null;if(m){var g=k[d].key;f=m[g]}b("mapObject")(l[d],function(a,g){var h=b("AnalyticsBreakdownTableChartUtils").getAggregationColumnLabel(g);e[g]=c._renderAggregationsCell(h,g,a,f?f[g]:null,g+"_"+d,j)});g=k[d];if(a.props.filterUnknownValues){var h=!1;for(var i in g)if(b("FalcorBreakdownsTextUtils").isBreakdownValueExplicitUnknown(g[i])||b("FalcorBreakdownsTextUtils").isBreakdownValueUnknown(g[i])){h=!0;continue}if(h)return"continue"}var o={};b("mapObject")(k[d],function(b,a){o[a]=b});g=babelHelpers["extends"]({},o,e);n.push(g)};_loop:for(var e=0;e<l.length;e++){d=i(e);switch(d){case"break":break _loop;case"continue":continue}}return n},_getBreakdownsToAggregationsMap:function(a,b,c){var d=this._getBreakdownsRows(a,!1),e=this._getAggregationsRows(a,b,c),f={};d.map(function(a,b){a=a.key;f[a]=e[b]});return f},_getAggregationsRows:function(a,c,d){__p&&__p();var e=a.columns,f=a.totals;a=a.rows;var g=e.aggregations.map(function(a){return m[a]}).toJS(),h=f.countTotal,i=f.sumTotal;e=f.usdSumTotal;d&&(i=e);return a.toJS().map(function(a){a=a.aggregations;a=b("createObjectFrom")(g,a);var e=a.count,f=a.value,j=a.usd_value;a=a.unique_users;d&&(f=j);j=h!=null&&h!==0?e/h:0;var k=a?e/a:0,l=i!=null&&i!==0?f/i:0,m=e?f/e:0,n=c!=null&&c!==0?a/c:0;return{count:e,count_per_user:k,count_percent:j,unique_users:a,unique_users_percent:n,value:f,value_per_event:m,value_percent:l}})},_getBreakdownsRows:function(a,c){__p&&__p();var d=this,e=a.columns;a=a.rows;var f=e.breakdowns.toJS(),g=!this.state.mediaLoaded&&c,h=[];e=a.toJS().map(function(a){var c=f.map(function(c,d){g&&b("AnalyticsBreakdownIDsToNamesResolver").isSupportedBreakdown(c)&&h.push(b("AnalyticsBreakdownIDsToNamesResolver").resolveBreakdownAsync(c,a.breakdowns[d]));return a.breakdowns[d]});c=b("createObjectFrom")(f,c);return c});h.length>0&&b("Promise").all(h)["finally"](function(){return d.setState({mediaLoaded:!0})});return e},_renderAggregationsCell:function(a,c,d,e,f,g){__p&&__p();var h=this,i=null;e!=null&&e!==0&&(i=b("AnalyticsUIUtils").calculatePercentageChange(d,e));var j="";i&&(i.value>0?j=b("BonsaiColors").ANALYTICS_GREEN:i.value<0&&(j=b("BonsaiColors").ANALYTICS_RED));var k="";e=b("AnalyticsQueryCurrency").get();switch(c){case"count":case"unique_users":case"count_per_user":k=b("InsightsNumUtils").prettyInt(d);break;case"value":k=g?b("InsightsNumUtils").prettyCurrency(e,d):b("InsightsNumUtils").prettyFloat(Math.round(d*100)/100);break;case"count_percent":case"value_percent":case"unique_users_percent":k=b("InsightsNumUtils").prettyPercent(d);break;case"value_per_event":k=g?b("InsightsNumUtils").prettyCurrency(e,d):b("InsightsNumUtils").prettyFloat(Math.round(d*100)/100);break}var l=10,m=i?-20:-12;return b("React").createElement("span",{data:d,onMouseOut:this.onHideTooltipWithDelay,onMouseOver:function(){return h.onShowTooltip(f,function(){return b("FalcorDataTooltip").getBreakdownTableTooltip(a,k,i,h.props.startTime,h.props.endTime)},j,"right",l,m)},ref:f,tabIndex:0},k)},render:function(){__p&&__p();var a=this,c=this.state,d=c.apiData,e=c.apiErrorMessage,f=c.isApiDataEmpty;c=c.uniqueUsersTotal;var g=this.props.breakdownTable.event_name;g=b("CustomEventStore").getAppEventDisplayName(g);var i=this.props.title?this.props.title:h._("{Event name of breakdown table object}",[h._param("Event name of breakdown table object",g)]);g={key:"BreakdownsListView",title:g};var j=b("React").createElement(b("GriffinPinButton"),{chartKey:"breakdown",key:"pin"});if(e!=null&&e!==""){e=b("React").createElement(b("FalcorErrorNotice"),{message:h._("{Error message}",[h._param("Error message",e)])},h._("Please try again later."));return this.props.skipEnclosingCard?e:b("React").createElement(b("AnalyticsCard"),{cardKey:"adhoc_breakdown_error"}," ",e," ")}else if(f)return this.props.skipEnclosingCard?this._getNoDataNotice():b("React").createElement(b("AnalyticsCard"),{buttons:this._renderHeaderButtons(!1),cardKey:"breakdown_card",compactHeader:this.props.compactRowsAndHeader,helpText:this.props.hideControls?null:g,key:"breakdown_card",pinButton:this.props.hideControls?null:j,title:i,url:this.props.url},b("React").createElement(b("FalcorErrorNotice"),{message:h._("No data")},h._("There's no data to show for this breakdown. Try editing the date range, the segment conditions or the types of breakdowns to include more data.")));else if(d===null||c===null){e=b("React").createElement(b("AnalyticsLoadingCard"),{height:300});return this.props.skipEnclosingCard?e:b("React").createElement(b("AnalyticsCard"),{cardKey:"adhoc_breakdown_table_loading","data-testid":"loading"},e)}return this.props.skipEnclosingCard?b("React").createElement(b("React").Fragment,null,this.props.hideControls||b("React").createElement(b("FlexLayout.react"),{className:"_3-94 _3-8-"},b("React").createElement(b("GriffinSearchInput"),{margin:"_3-90",onChange:function(b){return a._onSearchChange({target:{value:b}})},style:{flex:1},value:(f=this.state.searchString)!=null?f:""}),b("React").createElement("span",null,this._renderHeaderButtons(!0))),b("React").createElement("div",{className:"_3-8r"},this._renderBreakdownTable())):b("React").createElement(b("AnalyticsCard"),{buttons:this._renderHeaderButtons(!0),cardKey:"breakdown_card",compactHeader:this.props.compactRowsAndHeader,getExportData:this.props.hideControls?null:this.getExportData,helpText:this.props.hideControls?null:g,key:"breakdown_card",onSearchChange:this.props.hideControls?null:this._onSearchChange,pinButton:this.props.hideControls?null:j,searchString:this.props.hideControls?null:this.state.searchString,showLine:!this.props.hideHeaderLine,title:i,tooltip:this.props.tooltip,url:this.props.url},this._renderBreakdownTable())},_isLoading:function(a){return(a.apiErrorMessage==null||a.apiErrorMessage==="")&&!a.isApiDataEmpty&&(a.apiData==null||a.uniqueUsersTotal==null)},_getNoDataNotice:function(){var a=h._("Not enough data to show for date range and\/or segment");return b("React").createElement(b("BonsaiErrorNotice"),{className:"_3-8t _3-96",message:a})},_onAggregationsChange:function(a){i.logEvent("Breakdowns_AggregationSelector_Change",{aggregations:a.toJS(),event:this.props.breakdownTable.event_name,feature_id:this.props.breakdownTable.id}),this.setState({aggregationsColumns:a})},_onSearchChange:function(a){a=a.target.value;this.setState({searchString:a});this.refs.breakdownsTable.onSearchChange(a);i.logEvent("Breakdowns_SearchBar_Change",null,null,!0)},_getAggregationsColumnsConfig:function(a){return a.map(function(a){return b("AnalyticsBreakdownTableChartUtils").getAggregationColumnConfig(a)})},_getBreakdownsColumnsConfig:function(a){var c=this;return a.map(function(a){return b("AnalyticsBreakdownTableChartUtils").getBreakdownColumnConfig(a,c.props.breakdownTable.event_name,c.props.breakdownWidthWeight)})},getExportData:function(){return{data:this.refs.breakdownsTable.getExportData(),fileName:this._getExportFileName()}},_getExportFileName:function(){return[this.props.breakdownTable.name,b("DateTime").fromLegacyArgs(this.props.startTime*1e3,j).format("Y-m-d"),b("DateTime").fromLegacyArgs(this.props.endTime*1e3,j).format("Y-m-d")].join("_")},_cancelQuery:function(){var a=this.state.queries;a.forEach(function(a){return a.cancelQuery()})},_loadBreakdownsData:function(a,c){__p&&__p();var d=this;c=a.appliedFilterSet;var e=a.breakdownTable,f=a.startTime,g=a.endTime,h=a.popDateRange;a=a.sessionLoggerID;this._cancelQuery();if(!e)return;var j=e.breakdowns,k=e.event_name,m=[],n=b("CurrentAnalyticsEntity").getID(),p=this.props.rowLimit;p&&p!==void 0&&this.props.filterUnknownValues&&p++;var q=b("AnalyticsQueryCurrency").get();p=new(b("InternalAnalyticsQueryBuilder"))().setAnalyticsEntityID(n).setEventName(k).setBreakdowns(j).setAggregations(l).setIntervalsToAggregate(0).setAggregationPeriod(b("AppEventQueryAggregationPeriod").RANGE).setFilterSet(c).setOrderingColumns(["USERS"]).setOrderingType("DESCENDING").setLimit(p).setOnSuccess(function(a){__p&&__p();var c=a.getDatapointsRollupResult();c||d.setState({isApiDataEmpty:!0});a=a.getTotals();var f=a.sumTotal;a=a.usdSumTotal;var g=f>0||a>0;d.setState(function(a){a=b("immutable").Set.fromKeys(a.aggregationsColumns.filter(function(a){return a}));var e=a.size;a=g?a.add(b("InsightsBreakdownTableAggregationColumns").VALUE):a.subtract(o);a.size<e&&(a=a.union([b("InsightsBreakdownTableAggregationColumns").COUNT,b("InsightsBreakdownTableAggregationColumns").UNIQUE_USERS,b("InsightsBreakdownTableAggregationColumns").COUNT_PERCENT]));return{aggregationsColumns:d._getAggregationsColumnsMap(a.toJS()),apiData:c}});i.logEvent("Breakdowns_AsyncTask_End_Success",{event:k,feature_id:e.id})}).setOnError(function(a){d.setState({apiErrorMessage:a.getMessage()})}).setSince(f).setUntil(g).setSessionLoggerID(a).setTag("breakdown_"+(this.props.breakdownTable.name||k)).setCurrency(q).getQuery();m.push(p);p=new(b("InternalAnalyticsQueryBuilder"))().setAnalyticsEntityID(n).setEventName(k).setAggregations(["USERS"]).setIntervalsToAggregate(0).setAggregationPeriod(b("AppEventQueryAggregationPeriod").RANGE).setFilterSet(c).setOrderingColumns(["USERS"]).setOrderingType("DESCENDING").setOnSuccess(function(a){a=a.getUniquesTotalDangerously();a||d.setState({isApiDataEmpty:!0});d.setState({uniqueUsersTotal:a})}).setOnError(function(a){d.setState({apiErrorMessage:a.getMessage()})}).setSince(f).setUntil(g).setSessionLoggerID(a).setTag("breakdown_unique_"+(this.props.breakdownTable.name||k)).getQuery();m.push(p);h&&(p=new(b("InternalAnalyticsQueryBuilder"))().setAnalyticsEntityID(n).setEventName(k).setBreakdowns(j).setAggregations(l).setAggregationPeriod(b("AppEventQueryAggregationPeriod").RANGE).setIntervalsToAggregate(0).setFilterSet(c).setOrderingColumns(["USERS"]).setOrderingType("DESCENDING").setOnSuccess(function(a){a=a.getDatapointsRollupResult();a||d.setState({isPopErrorOrEmpty:!0});d.setState({popApiData:a})}).setOnError(function(a){d.setState({isPopErrorOrEmpty:!0})}).setDateRangeUTC(h).setSessionLoggerID(a).setTag("breakdown_pop_"+(this.props.breakdownTable.name||k)).setCurrency(q).getQuery(),m.push(p),q=new(b("InternalAnalyticsQueryBuilder"))().setAnalyticsEntityID(n).setEventName(k).setAggregations(["USERS"]).setIntervalsToAggregate(0).setAggregationPeriod(b("AppEventQueryAggregationPeriod").RANGE).setFilterSet(c).setOrderingColumns(["USERS"]).setOrderingType("DESCENDING").setOnSuccess(function(a){a=a.getUniquesTotalDangerously();a||d.setState({isPopErrorOrEmpty:!0});d.setState({popUniqueUsersTotal:a})}).setOnError(function(a){d.setState({isPopErrorOrEmpty:!0})}).setDateRangeUTC(h).setSessionLoggerID(a).setTag("breakdown_pop_unique_"+(this.props.breakdownTable.name||k)).getQuery(),m.push(q));b("AnalyticsQueryApi").queryAppEventData(m);b("FBAMetaLoggerWWW").logCardView({card:"breakdown_table_data",dateRange:{since:new Date(f*1e3),until:new Date(g*1e3)},params:{breakdown1:j[0],breakdown2:j[1],breakdown3:j[2],event:k,feature_id:e.id,feature_name:e.name}});this.setState({apiData:null,apiErrorMessage:null,breakdownsColumns:j,isApiDataEmpty:!1,isPopErrorOrEmpty:!h,mediaLoaded:!1,popApiData:null,popUniqueUsersTotal:null,queries:m,uniqueUsersTotal:null})}});e.exports=a}),null);
__d("AnalyticsBreakdownBuilder",["fbt","AnalyticsFeatureDialogOptions","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=(a={},a[b("AnalyticsFeatureDialogOptions").SAVE]={descriptionText:g._("Would you like to save your breakdown with this name?"),errorText:g._("There was an error while saving the chart. Please try again."),loadingText:g._("Saving breakdown"),showTextInput:!0,title:g._("Save")},a[b("AnalyticsFeatureDialogOptions").SAVE_AS]={descriptionText:g._("Please name the new breakdown you are creating."),errorText:g._("There was an error while saving the chart. Please try again."),loadingText:g._("Creating new breakdown"),showTextInput:!0,title:g._("Save As")},a[b("AnalyticsFeatureDialogOptions").SAVE_INTERNAL]={descriptionText:g._("Would you like to save your breakdown with this name?"),errorText:g._("There was an error while saving the chart. Please try again."),loadingText:g._("Saving internal breakdown"),showTextInput:!0,title:g._("Save as internal")},a[b("AnalyticsFeatureDialogOptions").DELETE]={descriptionText:g._("Are you sure that you want to delete this breakdown?"),errorText:g._("There was an error while deleting the chart. Please try again."),loadingText:g._("Deleting breakdown"),showTextInput:!1,title:g._("Delete")},a);d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){throw new Error("Deprecated")};return b}(b("React").PureComponent);d.DialogConfigs=c;e.exports=d}),null);
__d("GriffinBreakdownSearchableSelector",["fbt","AnalyticsBuiltInBreakdowns","AnalyticsOnlyModeConfirmDialog","AnalyticsOnlyModeDialog","AnalyticsOnlyModeDialogStatus","AnalyticsOnlyModeUtils","AnalyticsQueryBreakdownCategory","AnalyticsQueryBreakdownCategoryLabels","AnalyticsQueryBreakdownUtils","AppUserPropertyConfigStore","BonsaiApiBreakdown","FluxContainer","GriffinSearchableSelector","React","SearchableEntry","StaticSearchSource","areEqual","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AnalyticsQueryBreakdownUtils").ageGenderBreakdownsString,i=b("AnalyticsQueryBreakdownUtils").ageGenderBreakdownsDisplayString,j=[b("AnalyticsBuiltInBreakdowns").AGE,b("AnalyticsBuiltInBreakdowns").CITY_CODE,b("AnalyticsBuiltInBreakdowns").GENDER,b("AnalyticsBuiltInBreakdowns").COUNTRY,b("AnalyticsBuiltInBreakdowns").REGION_CODE,h],k=new(b("SearchableEntry"))({title:b("AnalyticsQueryBreakdownUtils").getBreakdownTypeDisplayString(b("BonsaiApiBreakdown").NONE),uniqueID:b("BonsaiApiBreakdown").NONE});a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={activeUserProperties:null,analyticsOnlyModeConfirmStatus:b("AnalyticsOnlyModeDialogStatus").HIDDEN,analyticsOnlyModeDialogVisible:!1},d.$5=function(a){if(b("AnalyticsOnlyModeUtils").isAnalyticsOnlyMode()&&j.includes(a.getUniqueID()))return b("AnalyticsOnlyModeUtils").getTooltipForShowBy(d.$7);else if(b("gkx")("678317")&&j.includes(a.getUniqueID()))return g._("Breakdowns based on demographic information are currently unavailable.");var c=d.props,e=c.disabledEntryIDs;c=c.hasDisabledTooltip;return c&&e&&e.has(a.getUniqueID())?g._("Not applicable"):b("AnalyticsQueryBreakdownUtils").getTooltip(a.getUniqueID(),!1)},d.$7=function(){d.setState({analyticsOnlyModeDialogVisible:!0})},d.$2=function(){d.setState({analyticsOnlyModeDialogVisible:!1})},d.$4=function(){d.$3(b("AnalyticsOnlyModeDialogStatus").HIDDEN)},d.$3=function(a){d.setState({analyticsOnlyModeConfirmStatus:a})},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("AppUserPropertyConfigStore")]};c.calculateState=function(a){return{activeUserProperties:b("AppUserPropertyConfigStore").getActiveProperties(),analyticsOnlyModeConfirmStatus:b("AnalyticsOnlyModeDialogStatus").HIDDEN,analyticsOnlyModeDialogVisible:!1}};var d=c.prototype;d.shouldComponentUpdate=function(a,b){a=b.activeUserProperties;var c=this.state.activeUserProperties;if(!a)return c!=null;else if(!c)return!0;return a.length!==c.length?!0:a.some(function(a,b){return a!==c[b]})};d.componentDidUpdate=function(a){var c=this;!b("areEqual")(a.events,this.props.events)&&this.props.showOverall&&this.$1().every(function(a){return a.getUniqueID()!==c.props.selectedBreakdown})&&this.props.onChange(k)};d.render=function(){var a=this.props.disabledEntryIDs;(b("gkx")("678317")||b("AnalyticsOnlyModeUtils").isAnalyticsOnlyMode())&&(a=new Set([].concat(a||[],j)));var c=this.state.analyticsOnlyModeDialogVisible?b("React").createElement(b("AnalyticsOnlyModeDialog"),{onHideDialog:this.$2,setConfirmDialogState:this.$3}):null,d=this.state.analyticsOnlyModeConfirmStatus===b("AnalyticsOnlyModeDialogStatus").HIDDEN?null:b("React").createElement(b("AnalyticsOnlyModeConfirmDialog"),{onHideDialog:this.$4,status:this.state.analyticsOnlyModeConfirmStatus});a=b("React").createElement(b("GriffinSearchableSelector"),{className:this.props.className,disabledEntryIDs:a,dropdownWidth:"auto",getTooltipForEntry:this.$5,hasCategories:!0,header:this.props.header,isDisabled:this.props.isDisabled,onChange:this.props.onChange,onOpened:this.props.onOpened,placeholder:this.props.placeholder,searchSource:new(b("StaticSearchSource"))(this.$1()),showSelectedSubtitle:!1,value:this.$6(),width:this.props.width});return b("React").createElement("div",null,c,d,a)};d.$1=function(){var a=this.props,c=a.events,d=a.showAgeGenderBreakdown,e=a.showUserProperties,f=a.showSessionProperties;a=a.showWebParams;var g=new Set([b("AnalyticsQueryBreakdownCategory").BUILT_IN,b("AnalyticsQueryBreakdownCategory").CUSTOM_PARAM]);e&&g.add(b("AnalyticsQueryBreakdownCategory").USER_PROPERTY);f&&g.add(b("AnalyticsQueryBreakdownCategory").SESSION_PROPERTY);e=this.props.showOverall?[k]:[];return e.concat(b("AnalyticsQueryBreakdownUtils").getAllBreakdowns(d||!1,a||!1,g,c).map(function(a){return new(b("SearchableEntry"))({title:a.label,type:b("AnalyticsQueryBreakdownCategoryLabels")[a.category],uniqueID:a.name})}))};d.$6=function(){var a=this.props,c=a.selectedBreakdown;a=a.events;if(!c)return null;a=c===h?i:b("AnalyticsQueryBreakdownUtils").getBreakdownTypeDisplayString(c,(a=a)!=null?a[0]:a);return new(b("SearchableEntry"))({title:a,uniqueID:c})};return c}(b("React").Component);a.defaultProps={hasDisabledTooltip:!1,selectedBreakdown:"",showAgeGenderBreakdown:!1,showHighCardinalityBreakdowns:!0,showOverall:!1,showSessionProperties:!0,showUserProperties:!0,width:"100%"};e.exports=b("FluxContainer").create(a)}),null);
__d("AnalyticsBreakdownTableGraphQLUtils",["fbt","AnalyticsBreakdownTableCreateMutation","AnalyticsBreakdownTableDeleteMutation","AnalyticsBreakdownTableEditMutation","AnalyticsNavigationUtils","FalcorCommonViews","GriffinSections"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=g._("Untitled breakdown").toString();a={create:function(a,c,d,e,f,g){b("AnalyticsBreakdownTableCreateMutation").commit({analytics_entity_id:a,breakdowns:d,event_name:e,is_internal:f,name:c||h},{onCompleted:function(a){b("AnalyticsNavigationUtils").getSectionInsightsURI(b("GriffinSections").BREAKDOWN_TABLE,a,b("FalcorCommonViews").DETAILS).go(),g&&g.onCompleted&&g.onCompleted(a)},onError:g&&g.onError})},"delete":function(a,c){b("AnalyticsBreakdownTableDeleteMutation").commit({breakdown_table_id:a},{onCompleted:function(){b("AnalyticsNavigationUtils").getSectionInsightsURI(b("GriffinSections").BREAKDOWN_TABLE,null,b("FalcorCommonViews").LIST).go(),c&&c.onCompleted&&c.onCompleted()},onError:c&&c.onError})},update:function(a,c,d,e,f){b("AnalyticsBreakdownTableEditMutation").commit({breakdown_table_id:a,breakdowns:d,event_name:e,name:c||h},{onCompleted:function(){b("AnalyticsNavigationUtils").getSectionInsightsURI(b("GriffinSections").BREAKDOWN_TABLE,a,b("FalcorCommonViews").DETAILS).go(),f&&f.onCompleted&&f.onCompleted()},onError:f&&f.onError})},updateTimeLastSeen:function(a){b("AnalyticsBreakdownTableEditMutation").commit({breakdown_table_id:a})}};e.exports=a}),null);
__d("AnalyticsCohortGraphQLUtils",["AnalyticsCohortCreateMutation","AnalyticsCohortDeleteMutation","AnalyticsCohortEditMutation","AnalyticsNavigationUtils","FalcorCommonViews","GriffinSections"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={create:function(a,c,d,e,f,g){b("AnalyticsCohortCreateMutation").commit({analytics_entity_id:a,cohort_query:{follow_up_event:f,initial_event:e},is_internal:d,name:c},{onCompleted:function(a){b("AnalyticsNavigationUtils").getSectionInsightsURI(b("GriffinSections").COHORTS,a,b("FalcorCommonViews").DETAILS).go(),g&&g.onCompleted&&g.onCompleted(a)},onError:g&&g.onError})},"delete":function(a,c){b("AnalyticsCohortDeleteMutation").commit({cohort_id:a},{onCompleted:function(){b("AnalyticsNavigationUtils").getSectionInsightsURI(b("GriffinSections").COHORTS,null,b("FalcorCommonViews").LIST).go(),c&&c.onCompleted&&c.onCompleted()},onError:c&&c.onError})},update:function(a,c,d,e,f){b("AnalyticsCohortEditMutation").commit({cohort_id:a,cohort_query:{follow_up_event:e,initial_event:d},name:c},{onCompleted:function(){b("AnalyticsNavigationUtils").getSectionInsightsURI(b("GriffinSections").COHORTS,a,b("FalcorCommonViews").DETAILS).go(),f&&f.onCompleted&&f.onCompleted()},onError:f&&f.onError})},updateTimeLastSeen:function(a){b("AnalyticsCohortEditMutation").commit({cohort_id:a})}};e.exports=a}),null);
__d("FBAMetaChartRules",["invariant","AnalyticsBuiltInBreakdowns","AnalyticsCohortSupportedCollationIntervals","AnalyticsDateRangeType","AnalyticsQueryBreakdownUtils","AnalyticsQueryMetric","FBACohortQuerySpec","FBADateRange","FBAEventQuerySpec","FBAFunnelQuerySpec","FBAMetaChartRuleUtils","areEqual"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBAMetaChartRuleUtils").createDefaultCohortQuery,i=b("FBAMetaChartRuleUtils").createDefaultEventQuery,j=b("FBAMetaChartRuleUtils").createDefaultFunnelQuery,k=b("FBAMetaChartRuleUtils").doesFirstEventMetricInChartSupportBreakdown,l=b("FBAMetaChartRuleUtils").doesFirstEventMetricInChartSupportDemographicBreakdown,m=b("FBAMetaChartRuleUtils").getBestFollowupEventForCohort,n=b("FBAMetaChartRuleUtils").getBreakdownsFromChart,o=b("FBAMetaChartRuleUtils").getEventNamesFromChart,p=b("FBAMetaChartRuleUtils").getEventSegmentsFromChart,q=b("FBAMetaChartRuleUtils").getFirstAggregationPeriodFromChart,r=b("FBAMetaChartRuleUtils").getFirstCollationIntervalFromChart,s=b("FBAMetaChartRuleUtils").getFirstDateRangeFromChart,t=b("FBAMetaChartRuleUtils").getFirstDaysInDateRangeFromChart,u=b("FBAMetaChartRuleUtils").getFirstEventMetricFromChart,v=b("FBAMetaChartRuleUtils").getFirstFilterFromChart,w=b("FBAMetaChartRuleUtils").getSupportedBreakdownsFromEventNamesOfChart,x=b("FBAMetaChartRuleUtils").getSupportedCollationIntervalsFromChart,y=b("FBAMetaChartRuleUtils").getSupportedEventMetricsFromEventNamesOfChart,z=b("FBAMetaChartRuleUtils").getUniquesFilter,A=b("FBAMetaChartRuleUtils").hasChartBreakdowns,B=b("FBAMetaChartRuleUtils").hasChartMultipleEvents,C=function(){function a(a){this.aggregationPeriod=a}var c=a.prototype;c.apply=function(a){var c=this.aggregationPeriod;return a.update({queries:a.getQueries().map(function(a){return a instanceof b("FBAEventQuerySpec")?a.update({aggregationPeriod:c}):a})})};return a}();a=function(){function a(a){this.aggregationPeriod=a}var b=a.prototype;b.apply=function(a){return q(a)==="RANGE"?new C(this.aggregationPeriod).apply(a):a};return a}();var D=function(){function a(a){this.breakdowns=a}var b=a.prototype;b.apply=function(a){var b=this;return a.update({queries:a.getQueries().map(function(a){return a.update({breakdowns:b.breakdowns})})})};return a}();c=function(){__p&&__p();function a(a){this.defaultBreakdowns=a}var b=a.prototype;b.apply=function(a){var b=n(a);if(b.length>0)return a;b=this.defaultBreakdowns;return new $([new D(b)]).apply(a)};return a}();var E=function(){function a(a){this.chartSize=a}var b=a.prototype;b.apply=function(a){return a.update({chartSize:this.chartSize})};return a}();d=function(){function a(a){this.chartSize=a}var b=a.prototype;b.apply=function(a){return a.getChartSize()==="TILE"?new E(this.chartSize).apply(a):a};return a}();f=function(){function a(a){this.metric=a}var c=a.prototype;c.apply=function(a){var c=this.metric;return a.update({queries:a.getQueries().map(function(a){return a instanceof b("FBACohortQuerySpec")?a.update({metric:c}):a})})};return a}();var F=function(){function a(a){this.collationInterval=a}var c=a.prototype;c.apply=function(a){var c=this.collationInterval;return a.update({queries:a.getQueries().map(function(a){return a instanceof b("FBACohortQuerySpec")?a.update({collationInterval:c}):a})})};return a}(),G=function(){function a(){}var c=a.prototype;c.apply=function(a){var c=u(a);return c===b("AnalyticsQueryMetric").MAU_WAU_DAU||c===b("AnalyticsQueryMetric").STICKINESS?new C("DAY").apply(a):a};return a}(),H=function(){function a(a){this.dateRange=a}var b=a.prototype;b.apply=function(a){var b=this.dateRange;return a.update({queries:a.getQueries().map(function(a){return a.update({dateRange:b})})})};return a}(),I=function(){function a(a){this.metric=a}var c=a.prototype;c.apply=function(a){var c=this.metric;return a.update({queries:a.getQueries().map(function(a){return a instanceof b("FBAEventQuerySpec")?a.update({metric:c}):a})})};return a}(),J=function(){function a(a){this.metric=a}var c=a.prototype;c.apply=function(a){var c=this.metric;return a.update({queries:a.getQueries().map(function(a){return a instanceof b("FBAFunnelQuerySpec")?a.update({metric:c}):a})})};return a}(),K=function(){function a(a){this.timeConstraint=a}var c=a.prototype;c.apply=function(a){var c=this.timeConstraint;return a.update({queries:a.getQueries().map(function(a){return a instanceof b("FBAFunnelQuerySpec")?a.update({timeConstraint:c}):a})})};return a}(),L=function(){function a(){}var b=a.prototype;b.apply=function(a){return u(a)==="MAU_WAU_DAU"&&(A(a)||B(a))?new I("UNIQUE_USERS").apply(a):a};return a}(),M=function(){function a(a){this.allowedMetrics=a}var b=a.prototype;b.apply=function(a){var b=u(a),c=this.allowedMetrics;return c.includes(b)?a:new I("UNIQUE_USERS").apply(a)};return a}(),N=function(){function a(){}var b=a.prototype;b.apply=function(a){var b=u(a),c=y(a);return c.includes(b)?a:new I("UNIQUE_USERS").apply(a)};return a}(),O=function(){__p&&__p();function a(a,c){this.query=a,c.length>0||g(0,4940),a instanceof b("FBACohortQuerySpec")&&c.length===1?this.eventStages=c.concat([m(c[0])]):this.eventStages=c}var c=a.prototype;c.apply=function(a){var c=this.query,d=this.eventStages,e=[];c instanceof b("FBAEventQuerySpec")?e=d.map(function(a){return a.event_rules[0].event_rule.event_name}).filter(z()).map(function(a){return c.update({eventName:a})}):c instanceof b("FBACohortQuerySpec")?e=[c.update({followUpEvent:d[1],initialEvent:d[0]})]:c instanceof b("FBAFunnelQuerySpec")&&(e=[c.update({stages:d})]);return a.update({queries:e})};return a}(),P=function(){function a(a){this.filter=a}var b=a.prototype;b.apply=function(a){var b=this.filter;return a.update({queries:a.getQueries().map(function(a){return a.update({filterSetListing:b})})})};return a}(),Q=function(){function a(){}var c=a.prototype;c.apply=function(a){return a.update({queries:a.getQueries().map(function(a){return a.getDateRange().getType()===b("AnalyticsDateRangeType").LAST_24_HOURS?a.update({dateRange:new(b("FBADateRange"))({range:b("AnalyticsDateRangeType").TODAY})}):a})})};return a}(),R=function(){__p&&__p();function a(a){this.typesToKeep=new Set(a)}var c=a.prototype;c.apply=function(a){var c=this;if(!A(a))return a;var d=function(a){a=b("AnalyticsQueryBreakdownUtils").getBreakdownCategory(a);return a!=null&&c.typesToKeep.has(a)};return a.update({queries:a.getQueries().map(function(a){return a.update({breakdowns:a.getBreakdowns().filter(function(a){return d(a)})})})})};return a}(),S=function(){__p&&__p();function a(){}var c=a.prototype;c.apply=function(a){if(!A(a))return a;var c=k(a),d=l(a);if(!c)return a.update({queries:a.getQueries().map(function(a){return a.update({breakdowns:[]})})});return!d?a.update({queries:a.getQueries().map(function(a){return a.update({breakdowns:a.getBreakdowns().filter(function(a){return!b("AnalyticsQueryBreakdownUtils").isDemographicBreakdown(a)})})})}):a};return a}(),T=function(){__p&&__p();function a(){}var c=a.prototype;c.apply=function(a){if(!A(a))return a;var c=new Set(w(a).map(function(a){return a.name}).concat([b("AnalyticsBuiltInBreakdowns").WEB_TRAFFIC_SOURCE,b("AnalyticsBuiltInBreakdowns").WEB_TRAFFIC_SEARCH_SOURCE,b("AnalyticsBuiltInBreakdowns").WEB_TRAFFIC_SOCIAL_SOURCE]));return a.update({queries:a.getQueries().map(function(a){return a.update({breakdowns:a.getBreakdowns().filter(function(a){return c.has(a)})})})})};return a}(),U=function(){function a(){}var b=a.prototype;b.apply=function(a){var b=a.getGoal();return!b?a:a.update({goal:null})};return a}(),V=function(){function a(){}var b=a.prototype;b.apply=function(a){return a.update({queries:a.getQueriesWithTag("CHART")})};return a}(),W=function(){function a(){}var b=a.prototype;b.apply=function(a){return a.update({queries:a.getCohortQueries()})};return a}(),X=function(){function a(){}var b=a.prototype;b.apply=function(a){return a.update({queries:a.getEventQueries()})};return a}(),Y=function(){function a(){}var b=a.prototype;b.apply=function(a){return a.update({queries:a.getFunnelQueries()})};return a}(),aa=function(){function a(){}var b=a.prototype;b.apply=function(a){var b=o(a);b.length?b=a.getQueries():b=[];return a.update({queries:b})};return a}(),ba=function(){function a(){}var c=a.prototype;c.apply=function(a){var c=x(a),d=r(a);d=b("AnalyticsCohortSupportedCollationIntervals").apply(d,c);return new F(d).apply(a)};return a}(),ca=function(){function a(){}var c=a.prototype;c.apply=function(a){var c=t(a)||0;c=b("AnalyticsCohortSupportedCollationIntervals").getBest(c);return new F(c).apply(a)};return a}(),da=function(){__p&&__p();function a(a){this.queryClass=a}var c=a.prototype;c.apply=function(a){__p&&__p();var c=this.queryClass,d=a.getQueries().filter(function(a){return!(a instanceof c)}),e=n(a),f=s(a),g=v(a);if(d.length!==0){d=p(a.update({queries:d}));var k;c===b("FBACohortQuerySpec")?k=h():c===b("FBAFunnelQuerySpec")?k=j():k=i();k=[new O(k,d),new D(e)];f&&k.push(new H(f));g!=null&&k.push(new P(g));d=new $(k).apply(a);return a.update({queries:[].concat(a.getQueries().filter(function(a){return a instanceof c}),d.getQueries())})}return a};return a}(),ea=function(){function a(a){this.limit=a}var b=a.prototype;b.apply=function(a){return a.getQueries().length>1?new Z(this.limit).apply(a):a};return a}(),Z=function(){function a(a){this.limit=a}var b=a.prototype;b.apply=function(a){var b=n(a),c=b.slice(0,this.limit);return a.update({queries:a.getQueries().map(function(a){return a.update({breakdowns:a.getBreakdowns().filter(function(a){return c.includes(a)})})})})};return a}(),fa=function(){function a(a){this.limit=a}var c=a.prototype;c.apply=function(a){var c=n(a);return b("areEqual")(c,b("AnalyticsQueryBreakdownUtils").ageGenderBreakdowns)?a:new Z(this.limit).apply(a)};return a}(),ga=function(){__p&&__p();function a(a){this.limit=a}var c=a.prototype;c.apply=function(a){var c=this;return a.update({queries:a.getQueries().map(function(a){if(!(a instanceof b("FBAFunnelQuerySpec")))return a;var d=a.getStages();return d.length<=c.limit?a:a.update({stages:d.slice(0,c.limit)})})})};return a}(),ha=function(){function a(a){this.limit=a}var b=a.prototype;b.apply=function(a){return a.update({queries:a.getQueries().slice(0,this.limit)})};return a}(),$=function(){function a(a){this.rules=[].concat(a)}var b=a.prototype;b.apply=function(a){var b=a;this.rules.forEach(function(a){b=a.apply(b)});return b};return a}();e.exports={ApplyAggregationPeriodIfRangeQueryRule:a,ApplyAggregationPeriodRule:C,ApplyBestCollationIntervalIfNotSupportedByDateRangeRule:ba,ApplyBestCollationIntervalRule:ca,ApplyBreakdownsIfNoBreakdownsRule:c,ApplyBreakdownsRule:D,ApplyChartSizeIfTileSizeRule:d,ApplyChartSizeRule:E,ApplyCohortMetricRule:f,ApplyCollationIntervalRule:F,ApplyDailyAggregationPeriodIfMauWauDauOrStickinessEventMetricRule:G,ApplyDateRangeRule:H,ApplyEventMetricRule:I,ApplyFilterRule:P,ApplyFunnelMetricRule:J,ApplyFunnelTimeConstraintRule:K,ApplyNewQueriesUsingEventStagesRule:O,ApplyTodayDateRangeIfLast24HoursRule:Q,ApplyUserEventMetricIfMauWauDauEventMetricWithBreakdownsOrMultipleEventsRule:L,ApplyUserEventMetricIfNotInXRule:M,ApplyUserEventMetricIfNotSupportedByEventNamesRule:N,ClearBreakdownsIfNotSupportedByEventMetricRule:S,ClearBreakdownsIfNotSupportedByEventNamesRule:T,ClearBreakdownsIfNotTypeXRule:R,ClearGoalRule:U,ClearNonChartQueriesRule:V,ClearNonCohortQueriesRule:W,ClearNonEventQueriesRule:X,ClearNonFunnelQueriesRule:Y,ClearQueriesIfNoEventRule:aa,ConvertOtherQueriesToNewQueriesOfTypeXRule:da,LimitToXBreakdownsIfMultipleQueriesRule:ea,LimitToXBreakdownsIfNotAgeGenderRule:fa,LimitToXBreakdownsRule:Z,LimitToXFunnelStagesRule:ga,LimitToXQueriesRule:ha,RuleSet:$}}),null);
__d("AnalyticsDashboardChartPinModal",["AnalyticsDashboardChartCreateMutation","FBAFilterSetListing","FBAMetaChartRules","FBAMetaChartRuleUtils","GriffinDashboardChartPinModalBase","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartRules").ApplyFilterRule,h=b("FBAMetaChartRuleUtils").getFirstFilterFromChart;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.createChart=function(a,c,d,e,f){d=this.props.globalFilterSetListing;a=this.props.chart.update({title:a});d=b("FBAFilterSetListing").resolve({behavior:a.getSegmentBehavior(),global:d,local:h(a)});a=new g(d).apply(a);b("promiseDone")(b("AnalyticsDashboardChartCreateMutation").commit(a,c),e,f)};return c}(b("GriffinDashboardChartPinModalBase"));e.exports=a}),null);
__d("AnalyticsDashboardHeaderChartNameEditor",["cx","fbt","AnalyticsDashboardActions","AnalyticsDashboardSectionStore","FDSTextInput.react","FluxContainer","GriffinDashboardUtils","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){var c=d.state.chartConfig;a.length<=30&&b("AnalyticsDashboardActions").setChartConfig(c.update({title:a}))},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("AnalyticsDashboardSectionStore")]};c.calculateState=function(a){return{chartConfig:b("AnalyticsDashboardSectionStore").getChartConfig()}};var d=c.prototype;d.render=function(){return b("React").createElement("div",{style:{alignItems:"center",display:"flex"}},this.$1())};d.$1=function(){var a=this.state.chartConfig;a=((a=a.getTitle())!=null?a:"").toString();return b("React").createElement("div",{className:"_8075"},b("React").createElement(b("FDSTextInput.react"),{label:b("GriffinDashboardUtils").defaultChartName,labelIsHidden:!0,onChange:this.$2,placeholder:this.$3(),size:"medium",value:a}))};d.$3=function(){var a;return h._("Untitled {the type of the chart}",[h._param("the type of the chart",(a=this.props.chartTitle)!=null?a:"")])};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("GoalDatePicker",["fbt","AnalyticsDateRangeType","ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","LayerHideOnBlur","React","SUIAnalyticsGriffinTheme","SUIDateTimeRangePicker.react","SUISelectorButton.react","XUIDateRangePickerUtil"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=g._("Indefinite"),i="M j, Y";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$2=function(){d.setState({isLayerVisible:!d.state.isLayerVisible})};d.$3=function(a){d.setState({isLayerVisible:a})};d.$4=function(){d.setState({isLayerVisible:!1})};d.$5=function(a,b){d.setState({rangeEnd:b,rangeStart:a})};d.$6=function(){d.setState({isLayerVisible:!1}),d.props.onChange(b("AnalyticsDateRangeType").DATE_RANGE,d.state.rangeStart,d.state.rangeEnd)};d.state={isLayerVisible:!1,rangeEnd:c.rangeEnd,rangeStart:c.rangeStart};return d}var d=c.prototype;d.render=function(){var a=this,c=this.props,d=c.dateRangeType,e=c.dateRestraints,f=c.rangeStart,g=c.rangeEnd;c=c.errorMessage;f=this.$1(d,f,g);return b("React").createElement("div",null,b("React").createElement(b("SUISelectorButton.react"),{disabled:!1,errorMessage:c,errorTooltipPosition:c!=null&&c!==""?"right":void 0,label:f,onClick:this.$2,ref:"selector",theme:b("SUIAnalyticsGriffinTheme"),value:d}),b("React").createElement(b("ContextualLayer.react"),{behaviors:{ContextualLayerAutoFlip:b("ContextualLayerAutoFlip"),ContextualLayerUpdateOnScroll:b("ContextualLayerUpdateOnScroll"),LayerHideOnBlur:b("LayerHideOnBlur")},contextRef:function(){return a.refs.selector},onToggle:this.$3,position:"below",shown:this.state.isLayerVisible},b("React").createElement(b("SUIDateTimeRangePicker.react"),{dateRestraints:e,hasTimeSelectors:!1,onCancel:this.$4,onChange:this.$5,onClose:this.$6,rangeEnd:this.state.rangeEnd,rangeStart:this.state.rangeStart,theme:b("SUIAnalyticsGriffinTheme")})))};d.$1=function(a,c,d){return a===b("AnalyticsDateRangeType").ALL?h:b("XUIDateRangePickerUtil").formatDateRangeWithConfig(this.props.rangeStart.getUnixTimestamp(),this.props.rangeEnd.getUnixTimestamp(),i)};return c}(b("React").Component);e.exports=a}),null);
__d("GriffinDashboardGoalCard",["cx","fbt","invariant","AnalyticsDateRangeStore","AnalyticsDateRangeType","AnalyticsDateRangeUtils","AnalyticsDateUtils","DatePickerRestraints","DateTime","FBADateRange","FBAMetaLoggerWWW","GoalDatePicker","LocalDate","React","SUIBusinessTheme","SUIButton.react","SUICloseButton.react","SUIHelpMessage.react","SUILink.react","SUITextInput.react","Timezone","areEqual","intlNumUtils"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=b("FBAMetaLoggerWWW").META_LOGGER,k=b("Timezone").UTC,l=h._("My goal");a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$5=function(a){d.setState({nameInput:a})};d.$6=function(a){var b=null;!a?b=h._("Goal value must not be empty."):d.$16(a)||(b=h._("The goal value must be a positive number."));d.setState({valueInput:{errorMessage:b,value:a}})};d.$10=function(){d.setState({showMoreOptions:!d.state.showMoreOptions})};d.$8=function(a){var b=null;a&&!d.$16(a)&&(b=h._("The goal start value must be a positive number."));d.setState({startValueInput:{errorMessage:b,value:a}})};d.$12=function(a,c,e){d.setState({dateErrorMessage:null,dateRangeTypeInput:a,rangeEndInput:b("LocalDate").fromDateTime(e),rangeStartInput:b("LocalDate").fromDateTime(c)})};d.$13=function(){d.setState({dateRangeTypeInput:b("AnalyticsDateRangeType").ALL,rangeEndInput:null,rangeStartInput:null})};d.$14=function(){__p&&__p();var a=d.state,c=a.valueInput,e=a.startValueInput,f=a.dateRangeTypeInput,g=a.rangeStartInput;a=a.rangeEndInput;if((c.errorMessage==null||c.errorMessage==="")&&(e.errorMessage==null||e.errorMessage===""))if(c.value)if(e.value&&f===b("AnalyticsDateRangeType").ALL){var i=h._("A date range must be selected if you entered a goal start value.");d.$17(i);d.setState({dateErrorMessage:i})}else{i=d.$18(c.value);f=f!==b("AnalyticsDateRangeType").ALL&&g!=null&&a!=null?{dateRange:new(b("FBADateRange"))({range:{since:g,until:a}}),startValue:d.$19(e.value)}:null;d.$17();d.props.onApplyGoal({goalBound:f,name:d.state.nameInput,value:i})}else{g=h._("Goal value must not be empty.");d.$17(g);d.setState({valueInput:{errorMessage:g,value:""}})}else d.$17(c.errorMessage!=null?c.errorMessage:e.errorMessage)};d.$15=function(){d.props.onDeleteGoal()};if(c.goal){var e,f=c.goal,g=f.name,i=f.value;f=f.goalBound;c=(c=c.goal)!=null?(c=c.goalBound)!=null?c.startValue:c:c;e=(e=f)!=null?e.dateRange:e;var j=e?e.getType():b("AnalyticsDateRangeType").ALL;d.state={dateErrorMessage:null,dateRangeTypeInput:j,displayName:g?g:l,nameInput:g,rangeEndInput:e?e.getUntil():null,rangeStartInput:e?e.getSince():null,showMoreOptions:f!=null,startValueInput:{errorMessage:null,value:c!=null?c.toString():""},valueInput:{errorMessage:null,value:i.toString()}}}else d.state={dateErrorMessage:null,dateRangeTypeInput:b("AnalyticsDateRangeType").ALL,displayName:"",nameInput:"",rangeEndInput:null,rangeStartInput:null,showMoreOptions:!1,startValueInput:{errorMessage:null,value:""},valueInput:{errorMessage:null,value:""}};return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();if(!b("areEqual")(this.props.goal,a.goal))if(a.goal){var c,d=a.goal,e=d.name,f=d.value;d=d.goalBound;a=(a=a.goal)!=null?(a=a.goalBound)!=null?a.startValue:a:a;c=(c=d)!=null?c.dateRange:c;var g=c?c.getType():b("AnalyticsDateRangeType").ALL;this.setState({dateRangeTypeInput:g,displayName:e?e:l,nameInput:e,rangeEndInput:c?c.getUntil():null,rangeStartInput:c?c.getSince():null,showMoreOptions:d!=null,startValueInput:{errorMessage:null,value:a!=null?a.toString():""},valueInput:{errorMessage:null,value:f.toString()}})}else this.setState({dateErrorMessage:null,dateRangeTypeInput:b("AnalyticsDateRangeType").ALL,displayName:"",nameInput:"",rangeEndInput:null,rangeStartInput:null,showMoreOptions:!1,startValueInput:{errorMessage:null,value:""},valueInput:{errorMessage:null,value:""}})};d.render=function(){return b("React").createElement("div",null,this.$1(),this.$2(),this.$3(),this.$4())};d.$1=function(){var a=this.state.valueInput;return b("React").createElement("div",null,b("React").createElement("div",{className:"_mtk"},b("React").createElement("div",{className:"_62ey"},h._("Goal name")),b("React").createElement(b("SUITextInput.react"),{maxLength:30,onChange:this.$5,placeholder:h._("My goal"),style:{width:"100%"},value:this.state.nameInput})),b("React").createElement("div",{className:"_mtk"},b("React").createElement("div",{className:"_62ey"},h._("Goal value")),b("React").createElement(b("SUITextInput.react"),{errorMessage:a.errorMessage,errorTooltipPosition:a.errorMessage!=null&&a.errorMessage!==""?"right":void 0,onChange:this.$6,placeholder:h._("E.g. 100,000"),style:{width:"100%"},value:this.state.valueInput.value})))};d.$2=function(){var a=this.state.showMoreOptions;if(a){a=this.state.startValueInput;return b("React").createElement("div",null,b("React").createElement("div",{className:"_mtk"},b("React").createElement("div",{className:"_62ey"},h._("Start value"),b("React").createElement("span",{className:"_4y2d"},this.$7())),b("React").createElement(b("SUITextInput.react"),{errorMessage:a.errorMessage,errorTooltipPosition:a.errorMessage!=null&&a.errorMessage!==""?"right":void 0,onChange:this.$8,placeholder:h._("E.g. 10,000"),style:{width:"100%"},value:a.value})),this.$9())}else return b("React").createElement("div",{className:"_4qq6"},b("React").createElement(b("SUILink.react"),{onClick:this.$10,theme:b("SUIBusinessTheme")},h._("More options")))};d.$7=function(){var a=h._("By setting a start value that's different to your goal value, you can create a diagonal goal line to track your progress towards your goal.");return b("React").createElement(b("SUIHelpMessage.react"),{theme:b("SUIBusinessTheme"),value:a})};d.$9=function(){var a=this.state,c=a.dateRangeTypeInput,d=a.rangeStartInput,e=a.rangeEndInput;a=a.dateErrorMessage;var f=b("AnalyticsDateRangeStore").getTimezoneID();d=d&&e?{since:d.toUTCDate(),until:e.toUTCDate()}:b("AnalyticsDateUtils").getDateRange(c,f);e=[b("DatePickerRestraints").enforceDateIsNoEarlierThan(b("AnalyticsDateRangeUtils").getTwoYearDateRange(!1).since.toDate()),b("DatePickerRestraints").enforceDateIsNoLaterThan(b("AnalyticsDateRangeUtils").getTwoYearDateRange(!0).until.toDate())];return b("React").createElement("div",{className:"_mtk"},b("React").createElement("div",{className:"_62ey"},h._("Date range"),b("React").createElement("span",{className:"_4y2d"},this.$11())),b("React").createElement(b("GoalDatePicker"),{dateRangeType:c,dateRestraints:e,errorMessage:a,onChange:this.$12,rangeEnd:b("DateTime").fromDate(d.until,k),rangeStart:b("DateTime").fromDate(d.since,k)}),b("React").createElement("div",{className:"_62qk"},b("React").createElement(b("SUILink.react"),{onClick:this.$13},h._("Reset to indefinite date"))))};d.$11=function(){var a=h._("Here you can set a start and end date for your goal. For example, you can set a goal that you want to reach this month by selecting a date range from the beginning to the end of this month.");return b("React").createElement(b("SUIHelpMessage.react"),{theme:b("SUIBusinessTheme"),value:a})};d.$3=function(){var a=h._("Apply Goal"),c=h._("Please select an event first");return b("React").createElement("div",{className:"_62ez"},b("React").createElement(b("SUIButton.react"),{disabled:!this.props.canApply,label:a,onClick:this.$14,tooltip:this.props.canApply?null:c,use:"default"}))};d.$4=function(){return!this.props.applyGoalline?null:b("React").createElement("div",null,b("React").createElement("hr",{className:"_3km6"}),b("React").createElement("div",{className:"_3km7"},b("React").createElement("div",{className:"_3kmw"},this.state.displayName),b("React").createElement("div",{className:"_3kmx"}),b("React").createElement("div",{className:"_3kmy"},b("React").createElement(b("SUICloseButton.react"),{onClick:this.$15,size:"large"}))))};d.$17=function(a){var b=this.state,c=b.nameInput,d=b.valueInput,e=b.startValueInput,f=b.dateRangeTypeInput,g=b.rangeStartInput;b=b.rangeEndInput;j.logEvent("DashboardGoal_ApplyButton_Click",{errorMessage:a,goalDateRangeType:f,goalName:c,goalRangeEnd:JSON.stringify(b),goalRangeStart:JSON.stringify(g),goalStartValue:e.value,goalValue:d.value})};d.$16=function(a){a=b("intlNumUtils").parseNumber(a);return a!=null&&a>=0?!0:!1};d.$19=function(a){return a?this.$18(a):null};d.$18=function(a){a=b("intlNumUtils").parseNumber(a);a!=null&&a>=0||i(0,4623);return a};return c}(b("React").PureComponent);e.exports=a}),null);
__d("GriffinTypeaheadSelector",["cx","React","SUIAnalyticsGriffinTheme","SUITypeahead.react"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={query:""},c.$2=function(a){c.props.onSelect(a),c.setState({query:""})},c.$1=function(a){c.setState({query:a})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.placeholder;a=a.searchSource;var d=this.state.query;return b("React").createElement(b("SUITypeahead.react"),{autoHighlight:!0,blurOnWindowBlur:!1,className:"_w0r",hideViewWithEntries:!0,maxEntries:300,onChange:this.$1,onFocus:this.props.onFocus,onSelectAttempt:this.$2,placeholder:c,presenter:{extraRendererProps:{style:{maxHeight:295,overflowY:"auto"}}},queryString:d,searchSource:a,showEntriesOnFocus:!0,theme:b("SUIAnalyticsGriffinTheme")})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FalcorAppEventSelector",["fbt","BonsaiConstants","CustomEventStore","FalcorSearchSource","GriffinSearchableSelector","GriffinTypeaheadSelector","React","SearchableEntry"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b,c)||this;c=b.props.excludeAppEvents;var d=b.$1(c);c=b.$2(c);b.state={appEventsUnique:d,searchSource:c};return b}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();if(a.value){var c=this.$3();if(c){var d=this.$4(this.state.appEventsUnique),e=d.find(function(a){return a.id===c.id});if(!e&&c.id!==b("BonsaiConstants").EVENT_SELECTOR_DEFAULT_VALUE){d.push(c);e=new(b("FalcorSearchSource"))(d);this.setState({searchSource:e})}}}else if(a.excludeAppEvents){d=this.$2(a.excludeAppEvents);this.setState({searchSource:d})}};d.$1=function(a){var c=b("CustomEventStore").getEventList().filter(function(b){return!a.includes(b.name)&&!b.is_deprecated}),d={};c.map(function(a){d[a.name]=babelHelpers["extends"]({},a)});return d};d.$2=function(a){a=this.$1(a);a=this.$4(a);a=new(b("FalcorSearchSource"))(a);return a};d.$3=function(){var a=this.state.appEventsUnique,b;this.props.value&&(a[this.props.value]==null?b={id:this.props.value,name:this.props.value}:b={id:a[this.props.value].name,name:a[this.props.value].display_name});return b};d.$4=function(a){var c=[],d=Object.keys(a).map(function(b){return{id:a[b].name,name:a[b].display_name}});c=c.concat(d);if(this.props.enableCreateNewAppEvent){d=g._("Create new app event...");c.push({id:b("BonsaiConstants").EVENT_SELECTOR_NEW_VALUE,name:d})}return c};d.$5=function(a){return a===null||a===void 0||a.name===b("BonsaiConstants").EVENT_SELECTOR_DEFAULT_VALUE?null:new(b("SearchableEntry"))({title:a.name,uniqueID:a.id})};d.render=function(){var a=this.state.searchSource,c=this.props.placeholder;c=c?c:g._("Select event");var d=this.$3();d=this.$5(d);if(this.props.useTypeahead)return!a?null:b("React").createElement(b("GriffinTypeaheadSelector"),{onFocus:this.props.onOpen,onSelect:this.props.onSelect,placeholder:c,searchSource:a});else return b("React").createElement("div",null,b("React").createElement(b("GriffinSearchableSelector"),{className:this.props.className,dropdownWidth:300,isDisabled:this.props.disabled,onChange:this.props.onSelect,onOpened:this.props.onOpen,placeholder:c,searchSource:this.state.searchSource,value:d,width:this.props.width}))};return c}(b("React").Component);a.defaultProps={excludeAppEvents:[],useTypeahead:!1,width:"auto"};e.exports=a}),null);
__d("GriffinMultiEventSelectorEventToken",["cx","CustomEventStore","React","SUICloseButton.react"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$4=function(){c.props.onDelete(c.props.event)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_2r3s"},this.$1(),this.$2(),this.$3())};d.$1=function(){var a=this.props.event;a=b("CustomEventStore").getAppEventDisplayName(a);return b("React").createElement("div",{className:"_2r3t"},a)};d.$2=function(){return b("React").createElement("div",{className:"_2r3u",style:{backgroundColor:this.props.color}})};d.$3=function(){return b("React").createElement("div",{className:"_2r3v"},b("React").createElement(b("SUICloseButton.react"),{onClick:this.$4,size:"large"}))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("GriffinMultiEventSelectorCard",["cssVar","cx","fbt","FalcorAppEventSelector","FBAColorPalette","FBAMetaLoggerWWW","GriffinMultiEventSelectorEventToken","React","SUIAtlasIcon.react"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=b("FBAMetaLoggerWWW").logDashboardEvent;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=function(a){var b=c.props,d=b.canAddEvent;b=b.events;if(d!==!0)return;else if(b.some(function(b){return b===a.getUniqueID()}))return;c.props.onAddEvent(a.getUniqueID())},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return b("React").createElement("div",null,this.$1(),b("React").createElement("hr",{className:"_3vxh"}),this.$2())};d.$1=function(){var a=i._("Search for an event"),c=this.props,d=c.canAddEvent;c=c.events;return b("React").createElement("div",{className:"_3vxi"},b("React").createElement("div",{className:"_3vxj"},i._("Add events")),b("React").createElement(b("FalcorAppEventSelector"),{disabled:!d,excludeAppEvents:c,onOpen:function(){return j("DashboardChart_EventSelector_Focus",{})},onSelect:this.$3,placeholder:a,useTypeahead:!0,value:null}),b("React").createElement(b("SUIAtlasIcon.react"),{colorDefault:"#4b4f56",name:"search",style:{fontSize:25,marginLeft:-32,marginRight:7,paddingTop:8,zIndex:1}}))};d.$2=function(){var a=this;if(this.props.events.length===0)return b("React").createElement("div",{className:"_399v"},b("React").createElement("div",null,c.TEXT_CHOOSE_EVENT),b("React").createElement("div",null,i._("You can add more than one event in a chart.")));var d=b("FBAColorPalette").get(this.props.events),e=this.props.events.map(function(c){return b("React").createElement(b("GriffinMultiEventSelectorEventToken"),{color:d.get(c),event:c,key:c,onDelete:a.props.onRemoveEvent})});return b("React").createElement("div",{className:"_3vy2"},e)};return c}(b("React").PureComponent);a.TEXT_CHOOSE_EVENT=i._("Choose events to start adding charts.");e.exports=a}),null);
__d("GriffinAdHocFunnelBuilder",["fbt","AnalyticsFeatureDialogOptions","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=(a={},a[b("AnalyticsFeatureDialogOptions").SAVE]={descriptionText:g._("Would you like to save your funnel with this name?"),errorText:g._("There was an error while saving the chart. Please try again."),loadingText:g._("Saving funnel"),showTextInput:!0,title:g._("Save")},a[b("AnalyticsFeatureDialogOptions").SAVE_AS]={descriptionText:g._("Please name the new funnel you are creating."),errorText:g._("There was an error while saving the chart. Please try again."),loadingText:g._("Creating new funnel"),showTextInput:!0,title:g._("Save As")},a[b("AnalyticsFeatureDialogOptions").SAVE_INTERNAL]={descriptionText:g._("Would you like to save your funnel with this name?"),errorText:g._("There was an error while saving the chart. Please try again."),loadingText:g._("Saving internal funnel"),showTextInput:!0,title:g._("Save as internal")},a[b("AnalyticsFeatureDialogOptions").DELETE]={descriptionText:g._("Are you sure you want to delete this funnel?"),errorText:g._("There was an error while deleting the chart. Please try again."),loadingText:g._("Deleting funnel"),showTextInput:!1,title:g._("Delete")},a);d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){throw new Error("deprecated component")};return b}(b("React").Component);d.DialogConfigs=c;e.exports=d}),null);
__d("GriffinTimeConstraintPicker",["cx","fbt","InsightsTimeUtils","React","SUIBusinessTheme","SUIButton.react","SUIHorizontalLayout.react","SUIText.react","SUITextInput.react","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=Object.freeze({DAYS:"days",HOURS:"hours",MINUTES:"minutes",SECONDS:"seconds"}),j=(a={},a[i.DAYS]={dateRangeErrorMessage:h._("Number of days should be within your overall date range."),errorMessage:h._("Days must be a number between 0 and 99."),label:h._("days"),placeholder:h._("0-99 days")},a[i.HOURS]={errorMessage:h._("Hours must be a number between 0 and 23."),label:h._("Hours"),placeholder:h._("0-23 hours")},a[i.MINUTES]={errorMessage:h._("Minutes must be a number between 0 and 59."),label:h._("Minutes"),placeholder:h._("0-59 minutes")},a[i.SECONDS]={errorMessage:h._("Seconds must be a number between 0 and 59."),label:h._("Seconds"),placeholder:h._("0-59 seconds")},a);c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$2=function(a){var b=d.props.daysInRange;if(d.$1(a)){var c=Number(a);if(c>=0&&c<=99){c<=b?d.setState({days:{hasError:!1,value:a},hasDateRangeError:!1}):d.setState({days:{hasError:!0,value:a},hasDateRangeError:!0});return}}d.setState({days:{hasError:!0,value:a},hasDateRangeError:!1})};d.$3=function(a){if(d.$1(a)){var b=Number(a);if(b>=0&&b<=23){d.setState({hours:{hasError:!1,value:a}});return}}d.setState({hours:{hasError:!0,value:a}})};d.$4=function(a){if(d.$1(a)){var b=Number(a);if(b>=0&&b<=59){d.setState({minutes:{hasError:!1,value:a}});return}}d.setState({minutes:{hasError:!0,value:a}})};d.$5=function(a){if(d.$1(a)){var b=Number(a);if(b>=0&&b<=59){d.setState({seconds:{hasError:!1,value:a}});return}}d.setState({seconds:{hasError:!0,value:a}})};d.$6=function(){if(d.$7()){var a={days:Number(d.state.days.value),hours:Number(d.state.hours.value),minutes:Number(d.state.minutes.value),seconds:Number(d.state.seconds.value)};d.props.onApply(a)}};var e=b("InsightsTimeUtils").secondsToDetailedFields(c.timeConstraintInSeconds,3);d.state={days:{hasError:!1,value:e[0].toString()},hasDateRangeError:e[0]>c.daysInRange,hours:{hasError:!1,value:e[1].toString()},minutes:{hasError:!1,value:e[2].toString()},seconds:{hasError:!1,value:e[3].toString()}};return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){if(a.timeConstraintInSeconds!==this.props.timeConstraintInSeconds){var c=b("InsightsTimeUtils").secondsToDetailedFields(a.timeConstraintInSeconds,3);this.setState({days:{hasError:!1,value:c[0].toString()},hasDateRangeError:c[0]>a.daysInRange,hours:{hasError:!1,value:c[1].toString()},minutes:{hasError:!1,value:c[2].toString()},seconds:{hasError:!1,value:c[3].toString()}})}};d.$1=function(a){return a===""||String(parseInt(a,10))===a};d.$7=function(){var a=this;return this.state.hasDateRangeError?!1:!Object.keys(i).some(function(b){b=i[b];return a.state[b].hasError})};d.render=function(){__p&&__p();var a=this,c=Object.keys(i).map(function(c){__p&&__p();c=i[c];var d=j[c],e=a.state[c].value,f=a.state[c].hasError,g;c===i.DAYS&&a.state.hasDateRangeError?g=j[i.DAYS].dateRangeErrorMessage:g=f?d.errorMessage:null;var h;switch(c){case i.DAYS:h=a.$2;break;case i.HOURS:h=a.$3;break;case i.MINUTES:h=a.$4;break;case i.SECONDS:h=a.$5;break}return b("React").createElement("div",{className:"_4fo_",key:c},b("React").createElement(b("SUIHorizontalLayout.react"),{display:"block",theme:b("SUIBusinessTheme")},b("React").createElement(b("SUIText.react"),{size:"meta1",weight:"bold"},d.label),b("React").createElement(b("SUITextInput.react"),{errorMessage:g,errorTooltipPosition:f?"right":void 0,onChange:h,placeholder:d.placeholder,style:{width:100},value:e})))});return b("React").createElement("div",{className:"_4fp0"},c,b("React").createElement("div",{className:"_4fp5"},b("React").createElement(b("SUIButton.react"),{label:h._("Apply"),onClick:this.$6,style:{marginLeft:"4px"},theme:b("SUIBusinessTheme"),use:"confirm"}),b("React").createElement(b("SUIButton.react"),{label:h._("Cancel"),onClick:this.props.onCancel,style:{marginLeft:"4px"},theme:b("SUIBusinessTheme"),use:"default"})))};return c}(b("React").Component);c.defaultProps={onApply:b("emptyFunction"),onCancel:b("emptyFunction"),timeConstraintInSeconds:0};e.exports=c}),null);
__d("AnalyticsTimeConstraintUtils",["fbt","AnalyticsDateUtils","InsightsTimeUtils","filterNulls"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;a=0;c=86400;d=3600;f=60;var i=Object.freeze({TIME_1D:"time_1d",TIME_1H:"time_1h",TIME_5MIN:"time_5min",TIME_CUSTOM:"time_custom",TIME_DEFAULT:"time_default"});h=(h={},h[i.TIME_DEFAULT]={label:g._("Any time"),value:a},h[i.TIME_5MIN]={label:g._("5 minutes"),value:f*5},h[i.TIME_1H]={label:g._("1 hour"),value:d},h[i.TIME_1D]={label:g._("1 day"),value:c},h[i.TIME_CUSTOM]={label:g._("Custom"),value:-1},h);var j={ANYTIME:a,SECS_IN_DAY:c,SECS_IN_HOUR:d,SECS_IN_MINUTE:f,Options:i,TimeConfig:h,secondsToLabel:function(a,c){c===void 0&&(c=Infinity);return a===0||!b("AnalyticsDateUtils").isWithinDateRange(a,c)?null:j._secondsToDetailedDisplay(a)},_secondsToDetailedDisplay:function(a){a=b("InsightsTimeUtils").secondsToDetailedFields(a,3);var c=a[0],d=a[1],e=a[2];a=a[3];c=c>0?g._({"*":"{number of days} days","_1":"{number of days} day"},[g._param("number of days",c),g._plural(c)]):null;d=d>0?g._({"*":"{number of hours} hours","_1":"{number of hours} hour"},[g._param("number of hours",d),g._plural(d)]):null;e=e>0?g._({"*":"{number of minutes} minutes","_1":"{number of minutes} minute"},[g._param("number of minutes",e),g._plural(e)]):null;a=a>0?g._({"*":"{number of seconds} seconds","_1":"{number of seconds} second"},[g._param("number of seconds",a),g._plural(a)]):null;return b("filterNulls")([c,d,e,a]).map(function(a){return a.toString()}).join(" ")},timeInDetailedFieldsToSeconds:function(a){return a.days*j.SECS_IN_DAY+a.hours*j.SECS_IN_HOUR+a.minutes*j.SECS_IN_MINUTE+a.seconds}};e.exports=j}),null);
__d("GriffinTimeConstraintSelector",["cx","fbt","AnalyticsDateUtils","AnalyticsTimeConstraintUtils","ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","FlexLayout.react","GriffinSelectorOption","GriffinTimeConstraintPicker","LayerHideOnBlur","React","SUIAnalyticsGriffinUniversalBuilderTheme","SUIBusinessTheme","SUISelector.react","SUISelectorButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isLayerVisible:!1},d.$1=function(a){a!==b("AnalyticsTimeConstraintUtils").Options.TIME_CUSTOM?d.props.onTimeConstraintChange(b("AnalyticsTimeConstraintUtils").TimeConfig[a].value):d.setState({isLayerVisible:!0})},d.$5=function(){d.setState({isLayerVisible:!1})},d.$6=function(a){d.setState({isLayerVisible:a})},d.$7=function(a){d.setState({isLayerVisible:!1});a=b("AnalyticsTimeConstraintUtils").timeInDetailedFieldsToSeconds(a);a>d.props.daysInRange*b("AnalyticsTimeConstraintUtils").SECS_IN_DAY&&(a=b("AnalyticsTimeConstraintUtils").ANYTIME);d.props.onTimeConstraintChange(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$2=function(){var a=this.props.timeConstraintInSeconds;switch(a){case b("AnalyticsTimeConstraintUtils").ANYTIME:return b("AnalyticsTimeConstraintUtils").Options.TIME_DEFAULT;case b("AnalyticsTimeConstraintUtils").SECS_IN_MINUTE*5:return b("AnalyticsTimeConstraintUtils").Options.TIME_5MIN;case b("AnalyticsTimeConstraintUtils").SECS_IN_HOUR:return b("AnalyticsTimeConstraintUtils").Options.TIME_1H;case b("AnalyticsTimeConstraintUtils").SECS_IN_DAY:return b("AnalyticsTimeConstraintUtils").Options.TIME_1D;default:return b("AnalyticsDateUtils").isWithinDateRange(a,this.props.daysInRange)?b("AnalyticsTimeConstraintUtils").Options.TIME_CUSTOM:b("AnalyticsTimeConstraintUtils").Options.TIME_DEFAULT}};d.$3=function(){var a;return(a=b("AnalyticsTimeConstraintUtils").secondsToLabel(this.props.timeConstraintInSeconds,this.props.daysInRange))!=null?a:this.$4()};d.$4=function(){return b("AnalyticsTimeConstraintUtils").TimeConfig[b("AnalyticsTimeConstraintUtils").Options.TIME_DEFAULT].label};d.$8=function(){if(this.props.theme==="UNIVERSAL_BUILDER")return b("React").createElement("span",{className:"_629y"},h._("completed within"));else return null};d.$9=function(){switch(this.props.theme){case"UNIVERSAL_BUILDER":return b("SUIAnalyticsGriffinUniversalBuilderTheme");default:return b("SUIBusinessTheme")}};d.render=function(){var a=this,c=Object.keys(b("AnalyticsTimeConstraintUtils").Options).map(function(a){a=b("AnalyticsTimeConstraintUtils").Options[a];var c=b("AnalyticsTimeConstraintUtils").TimeConfig[a];return b("React").createElement(b("GriffinSelectorOption"),{key:a,value:a},c.label)});return b("React").createElement(b("FlexLayout.react"),{align:"center",direction:"horizontal"},this.$8(),b("React").createElement(b("SUISelector.react"),{button:b("React").createElement(b("SUISelectorButton.react"),{label:b("React").createElement("span",{className:"_7oaf"},this.$3())}),onChange:this.$1,ref:"time_selector",theme:this.$9(),value:this.$2()},c),b("React").createElement(b("ContextualLayer.react"),{behaviors:{ContextualLayerAutoFlip:b("ContextualLayerAutoFlip"),ContextualLayerUpdateOnScroll:b("ContextualLayerUpdateOnScroll"),LayerHideOnBlur:b("LayerHideOnBlur")},contextRef:function(){return a.refs.time_selector},onToggle:this.$6,position:"below",shown:this.state.isLayerVisible},b("React").createElement(b("GriffinTimeConstraintPicker"),{daysInRange:this.props.daysInRange,onApply:this.$7,onCancel:this.$5,timeConstraintInSeconds:this.props.timeConstraintInSeconds})))};return c}(b("React").Component);e.exports=a}),null);
__d("AnalyticsFunnelGraphQLUtils",["AnalyticsFunnelCreateMutation","AnalyticsFunnelDeleteMutation","AnalyticsFunnelEditMutation","AnalyticsNavigationUtils","FalcorCommonViews","GriffinSections"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={create:function(a,c){var d=a.analyticsEntityID,e=a.breakdown,f=a.funnelName,g=a.isInternal,h=a.stages;a=a.timeConstraint;b("AnalyticsFunnelCreateMutation").commit({analytics_entity_id:d,breakdown:e,is_internal:g,name:f,stages:h,time_constraint:a},{onCompleted:function(a){b("AnalyticsNavigationUtils").getSectionInsightsURI(b("GriffinSections").FUNNELS,a,b("FalcorCommonViews").DETAILS).go(),c&&c.onCompleted&&c.onCompleted(a)},onError:c&&c.onError})},"delete":function(a,c){b("AnalyticsFunnelDeleteMutation").commit({funnel_id:a},{onCompleted:function(){b("AnalyticsNavigationUtils").getSectionInsightsURI(b("GriffinSections").FUNNELS,null,b("FalcorCommonViews").LIST).go(),c&&c.onCompleted&&c.onCompleted()},onError:c&&c.onError})},update:function(a,c){var d=a.funnelID,e=a.breakdown,f=a.funnelName,g=a.stages;a=a.timeConstraint;b("AnalyticsFunnelEditMutation").commit({breakdowns:e!=null?[e]:[],funnel_id:d,name:f,stages:g,time_constraint:a},{onCompleted:function(){b("AnalyticsNavigationUtils").getSectionInsightsURI(b("GriffinSections").FUNNELS,d,b("FalcorCommonViews").DETAILS).go(),c&&c.onCompleted&&c.onCompleted()},onError:c&&c.onError})},updateTimeLastSeen:function(a){b("AnalyticsFunnelEditMutation").commit({funnel_id:a})}};e.exports=a}),null);
__d("AnalyticsOverlapUtils",["fbt","AnalyticsQueryBreakdownUtils","AppEventsReservedBreakdownValues","FBAColorPalette","InsightsNumUtils","intlList"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=0,i=Array(11).fill(0);a=.01;var j="u",k=5,l=3,m=10;c=100;var n={LOW_VALUE_THRESHOLD:a,NULL_VALUE:j,OVERLAP_LIMIT:m,OVERLAP_MAU_THRESHOLD:c,VENN_OVERLAP_LIMIT:l,_getOverlapLimit:function(a){return a?l:m},getTotalCount:function(a,b){b===void 0&&(b=!1);var c=this._getOverlapLimit(b);b=a.find(function(a){return a.slice(0,c).every(function(a){return a===h})});return b?b[c]:0},getRawResult:function(a,b){b===void 0&&(b=!1);if(a==null||a.length==0||a[0].length<3)return[];var c=this._getOverlapLimit(b);return JSON.parse(a[0][2].toString()).map(function(a){return a.map(function(a){return a===j?h:a})}).sort(function(a,b){return b[c]-a[c]})},getFilterResult:function(a){var b=a.some(function(a){return a.slice(0,m).reduce(function(a,b){return a+b})>1}),c=b?1:0;return this._chooseNColumns(a.filter(function(a){return a.slice(0,m).reduce(function(a,b){return a+b})>c}),k)},getBreakdownValues:function(a){if(a==null||a.length===0||a[0].length<2)return[];a=JSON.parse(a[0][1].toString());return a===j?[]:a},getMeta:function(a,c,d,e){if(a==null||a.length===0||a[0].length<2)return[];a=this.getBreakdownValues(a);a=a.map(function(a){return b("AnalyticsQueryBreakdownUtils").getBreakdownValueDisplayString(d,a?a.toString():b("AppEventsReservedBreakdownValues").UNKNOWN,c)});return e!=null&&e!==0?a.slice(0,e):a},_chooseNColumns:function(a,b){a=a.slice();for(var c=a.length;c<b;c++)a.push(i);return a.slice(0,b)},isLowValue:function(a){a=n.getRawResult(a);var b=n.getFilterResult(a);a=n.getTotalCount(a);return a===0||b[0][n.OVERLAP_LIMIT]/a<n.LOW_VALUE_THRESHOLD},isSingleBucket:function(a){return JSON.parse(a[0][1].toString()).length<=1},getSetsWithSingleValue:function(a){return a.filter(function(a){return a.sets.length===1}).sort(function(a,b){return b[l]-a[l]})},getAllSubsets:function(a,b){var c=n._getCurrentOverlapIds(b);return a.filter(function(a){var b=a.sets.reduce(function(a,b,d){return c.includes(b)?a:a.concat(d)},[]);return b.length===0&&a.sets.length>1}).concat(b)},_getCurrentOverlapIds:function(a){return a.reduce(function(a,b,c){return b.sets.length===1?a.concat(b.sets[0]):a},[])},getColors:function(){return b("FBAColorPalette").get(["Dropdown0","Dropdown1","Dropdown2"]).toArray()},getLabelForOverlap:function(a){return b("intlList")(a,b("intlList").CONJUNCTIONS.AND)},getTotalPercentTitle:function(a,c){c=b("InsightsNumUtils").prettyPercentQuotient({denominator:c,numerator:a,precision:2});return g._("{Percent of overlap size\/total} of total users",[g._param("Percent of overlap size/total",c)])}};e.exports=n}),null);
__d("AnalyticsOverlapDataAdapter",["AnalyticsOverlapUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={transformRawResults:function(a,c,d){return a.map(function(a){var e=a.reduce(function(a,b,d){return b===1&&c[d]!=null?a.concat(c[d]):a},[]),f=a.reduce(function(a,b,e){var f;f=(f=d)!=null?f:c;return b===1&&f[e]!=null?a.concat(f[e].toString()):a},[]);return{label:b("AnalyticsOverlapUtils").getLabelForOverlap(e).toString(),sets:f,size:Number(a[b("AnalyticsOverlapUtils").VENN_OVERLAP_LIMIT])}})}};e.exports=a}),null);
__d("AnalyticsOverlapDataTable",["cx","fbt","invariant","AnalyticsCard","FalcorPaginatedDataTable","InsightsNumUtils","React","naturalComparator"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j="overlapDataTable",k="overlapLabel",l="overlapSize";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.vennSets;return b("React").createElement(b("AnalyticsCard"),{cardKey:"overlap_data_table",getExportData:null,showLine:!0},b("React").createElement("div",{className:"_5i-s"},b("React").createElement(b("FalcorPaginatedDataTable"),{columns:this.getColumns(),columnToSortBy:l,key:j,pageSize:Infinity,rows:this.$1(a)})))};d.getExportData=function(){var a=[h._("Overlap set"),h._("Unique users")],b=[].concat(this.props.vennSets).sort(function(a,b){return b.size-a.size}).map(function(a){var b=a.originalSize!=null?Math.round(a.originalSize):Math.round(a.size);return[a.label,b]});return[a].concat(b)};d.getColumns=function(){return[{comparator:function(a,c){c||i(0,1818);return b("naturalComparator")(a.overlapLabel,c.overlapLabel)},id:k,isNumeric:!1,label:h._("Overlap set"),sortable:!0},{comparator:function(a,b){b||i(0,1818);return parseInt(b.overlapSize.replace(/,/g,""),10)-parseInt(a.overlapSize.replace(/,/g,""),10)},id:l,isNumeric:!0,label:h._("Unique users"),sortable:!0}]};d.$1=function(a){return a.map(function(a,c){c=a.label||h._("Overlap {index}",[h._param("index",c)]).toString();a=b("InsightsNumUtils").prettyInt(a.originalSize||a.size);return{overlapLabel:c,overlapSize:a}})};return c}(b("React").PureComponent);e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/7mbzuXyG_-9/
 */
__d("venn",["d3v4-selection","d3v4-transition"],(function(a,b,c,d,e,f){__p&&__p();(function(c,d){typeof f==="object"&&typeof e!=="undefined"?d(f,b("d3v4-selection"),b("d3v4-transition")):typeof define==="function"&&define.amd?define(["exports","d3-selection","d3-transition"],d):d(c.venn={},c.d3,c.d3)})(this,function(a,b,c){"use strict";__p&&__p();var d=1e-10;function e(a,b){__p&&__p();var c=h(a),e=c.filter(function(b){return g(b,a)}),f=0,k=0,l=[],n;if(e.length>1){var o=m(e);for(n=0;n<e.length;++n){var p=e[n];p.angle=Math.atan2(p.x-o.x,p.y-o.y)}e.sort(function(a,b){return b.angle-a.angle});p=e[e.length-1];for(n=0;n<e.length;++n){o=e[n];k+=(p.x+o.x)*(o.y-p.y);var q={x:(o.x+p.x)/2,y:(o.y+p.y)/2},r=null;for(var s=0;s<o.parentIndex.length;++s)if(p.parentIndex.indexOf(o.parentIndex[s])>-1){var t=a[o.parentIndex[s]],u=Math.atan2(o.x-t.x,o.y-t.y),v=Math.atan2(p.x-t.x,p.y-t.y);u=v-u;u<0&&(u+=2*Math.PI);v=v-u/2;u=j(q,{x:t.x+t.radius*Math.sin(v),y:t.y+t.radius*Math.cos(v)});(r===null||r.width>u)&&(r={circle:t,width:u,p1:o,p2:p})}r!==null&&(l.push(r),f+=i(r.circle.radius,r.width),p=o)}}else{v=a[0];for(n=1;n<a.length;++n)a[n].radius<v.radius&&(v=a[n]);t=!1;for(n=0;n<a.length;++n)if(j(a[n],v)>Math.abs(v.radius-a[n].radius)){t=!0;break}t?f=k=0:(f=v.radius*v.radius*Math.PI,l.push({circle:v,p1:{x:v.x,y:v.y+v.radius},p2:{x:v.x-d,y:v.y+v.radius},width:v.radius*2}))}k/=2;b&&(b.area=f+k,b.arcArea=f,b.polygonArea=k,b.arcs=l,b.innerPoints=e,b.intersectionPoints=c);return f+k}function g(a,b){for(var c=0;c<b.length;++c)if(j(a,b[c])>b[c].radius+d)return!1;return!0}function h(a){__p&&__p();var b=[];for(var c=0;c<a.length;++c)for(var d=c+1;d<a.length;++d){var e=l(a[c],a[d]);for(var f=0;f<e.length;++f){var g=e[f];g.parentIndex=[c,d];b.push(g)}}return b}function i(a,b){return a*a*Math.acos(1-b/a)-(a-b)*Math.sqrt(b*(2*a-b))}function j(a,b){return Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y))}function k(a,b,c){if(c>=a+b)return 0;if(c<=Math.abs(a-b))return Math.PI*Math.min(a,b)*Math.min(a,b);var d=a-(c*c-b*b+a*a)/(2*c);c=b-(c*c-a*a+b*b)/(2*c);return i(a,d)+i(b,c)}function l(a,b){__p&&__p();var c=j(a,b),d=a.radius,e=b.radius;if(c>=d+e||c<=Math.abs(d-e))return[];e=(d*d-e*e+c*c)/(2*c);d=Math.sqrt(d*d-e*e);var f=a.x+e*(b.x-a.x)/c;e=a.y+e*(b.y-a.y)/c;var g=-(b.y-a.y)*(d/c);b=-(b.x-a.x)*(d/c);return[{x:f+g,y:e-b},{x:f-g,y:e+b}]}function m(a){var b={x:0,y:0};for(var c=0;c<a.length;++c)b.x+=a[c].x,b.y+=a[c].y;b.x/=a.length;b.y/=a.length;return b}function n(a,b,c,d){__p&&__p();d=d||{};var e=d.maxIterations||100;d=d.tolerance||1e-10;var f=a(b),g=a(c),h=c-b;if(f*g>0)throw"Initial bisect points must have opposite signs";if(f===0)return b;if(g===0)return c;for(var g=0;g<e;++g){h/=2;c=b+h;var i=a(c);i*f>=0&&(b=c);if(Math.abs(h)<d||i===0)return c}return b+h}function o(a){var b=new Array(a);for(var c=0;c<a;++c)b[c]=0;return b}function p(a,b){return o(a).map(function(){return o(b)})}function q(a,b){var c=0;for(var d=0;d<a.length;++d)c+=a[d]*b[d];return c}function r(a){return Math.sqrt(q(a,a))}function s(a,b,c){for(var d=0;d<b.length;++d)a[d]=b[d]*c}function t(a,b,c,d,e){for(var f=0;f<a.length;++f)a[f]=b*c[f]+d*e[f]}function u(a,b,c){__p&&__p();c=c||{};var d=c.maxIterations||b.length*200,e=c.nonZeroDelta||1.05,f=c.zeroDelta||.001,g=c.minErrorDelta||1e-6,h=c.minErrorDelta||1e-5,i=c.rho!==void 0?c.rho:1,j=c.chi!==void 0?c.chi:2,k=c.psi!==void 0?c.psi:-.5,l=c.sigma!==void 0?c.sigma:.5,m=b.length,n=new Array(m+1);n[0]=b;n[0].fx=a(b);n[0].id=0;for(var o=0;o<m;++o){var p=b.slice();p[o]=p[o]?p[o]*e:f;n[o+1]=p;n[o+1].fx=a(p);n[o+1].id=o+1}function q(b){for(var a=0;a<b.length;a++)n[m][a]=b[a];n[m].fx=b.fx}p=function(a,b){return a.fx-b.fx};e=b.slice();f=b.slice();var r=b.slice();b=b.slice();for(var s=0;s<d;++s){n.sort(p);if(c.history){var u=n.map(function(a){var b=a.slice();b.fx=a.fx;b.id=a.id;return b});u.sort(function(a,b){return a.id-b.id});c.history.push({x:n[0].slice(),fx:n[0].fx,simplex:u})}u=0;for(o=0;o<m;++o)u=Math.max(u,Math.abs(n[0][o]-n[1][o]));if(Math.abs(n[0].fx-n[m].fx)<g&&u<h)break;for(o=0;o<m;++o){e[o]=0;for(var u=0;u<m;++u)e[o]+=n[u][o];e[o]/=m}u=n[m];t(f,1+i,e,-i,u);f.fx=a(f);if(f.fx<n[0].fx)t(b,1+j,e,-j,u),b.fx=a(b),b.fx<f.fx?q(b):q(f);else if(f.fx>=n[m-1].fx){var v=!1;f.fx>u.fx?(t(r,1+k,e,-k,u),r.fx=a(r),r.fx<u.fx?q(r):v=!0):(t(r,1-k*i,e,k*i,u),r.fx=a(r),r.fx<f.fx?q(r):v=!0);if(v){if(l>=1)break;for(o=1;o<n.length;++o)t(n[o],1-l,n[0],l,n[o]),n[o].fx=a(n[o])}}else q(f)}n.sort(p);return{fx:n[0].fx,x:n[0]}}function v(a,b,c,d,e,f,g){__p&&__p();var h=c.fx,i=q(c.fxprime,b),j=h,k=h,l=i,m=0;e=e||1;f=f||1e-6;g=g||.1;function n(m,n,o){__p&&__p();for(var k=0;k<16;++k){e=(m+n)/2;t(d.x,1,c.x,e,b);j=d.fx=a(d.x,d.fxprime);l=q(d.fxprime,b);if(j>h+f*e*i||j>=o)n=e;else{if(Math.abs(l)<=-g*i)return e;l*(n-m)>=0&&(n=m);m=e;o=j}}return 0}for(var o=0;o<10;++o){t(d.x,1,c.x,e,b);j=d.fx=a(d.x,d.fxprime);l=q(d.fxprime,b);if(j>h+f*e*i||o&&j>=k)return n(m,e,k);if(Math.abs(l)<=-g*i)return e;if(l>=0)return n(e,m,j);k=j;m=e;e*=2}return e}function w(a,b,c){__p&&__p();var d={x:b.slice(),fx:0,fxprime:b.slice()},e={x:b.slice(),fx:0,fxprime:b.slice()},f=b.slice(),g,h=1;c=c||{};b=c.maxIterations||b.length*20;d.fx=a(d.x,d.fxprime);g=d.fxprime.slice();s(g,d.fxprime,-1);for(var i=0;i<b;++i){h=v(a,g,d,e,h);c.history&&c.history.push({x:d.x.slice(),fx:d.fx,fxprime:d.fxprime.slice(),alpha:h});if(!h)s(g,d.fxprime,-1);else{t(f,1,e.fxprime,-1,d.fxprime);var j=q(d.fxprime,d.fxprime);j=Math.max(0,q(f,e.fxprime)/j);t(g,j,g,-1,e.fxprime);j=d;d=e;e=j}if(r(d.fxprime)<=1e-5)break}c.history&&c.history.push({x:d.x.slice(),fx:d.fx,fxprime:d.fxprime.slice(),alpha:h});return d}function x(a,b){__p&&__p();b=b||{};b.maxIterations=b.maxIterations||500;var c=b.initialLayout||D;a=A(a);var d=c(a);c=[];var e=[],f;for(f in d)d.hasOwnProperty(f)&&(c.push(d[f].x),c.push(d[f].y),e.push(f));c=u(function(c){var f={};for(var g=0;g<e.length;++g){var b=e[g];f[b]={x:c[2*g],y:c[2*g+1],radius:d[b].radius}}return G(f,a)},c,b);b=c.x;for(var c=0;c<e.length;++c)f=e[c],d[f].x=b[2*c],d[f].y=b[2*c+1];return d}var y=1e-10;function z(a,b,c){return Math.min(a,b)*Math.min(a,b)*Math.PI<=c+y?Math.abs(a-b):n(function(d){return k(a,b,d)-c},0,a+b)}function A(a){__p&&__p();a=a.slice();var b=[],c={},d,e,f;for(d=0;d<a.length;++d){var g=a[d];g.sets.length==1?b.push(g.sets[0]):g.sets.length==2&&(f=g.sets[0],g=g.sets[1],c[[f,g]]=!0,c[[g,f]]=!0)}b.sort(function(a,b){return a>b});for(d=0;d<b.length;++d){f=b[d];for(e=d+1;e<b.length;++e)g=b[e],[f,g]in c||a.push({sets:[f,g],size:0})}return a}function B(a,b,c){__p&&__p();var d=p(b.length,b.length),e=p(b.length,b.length);a.filter(function(a){return a.sets.length==2}).map(function(a){var f=c[a.sets[0]],g=c[a.sets[1]],h=Math.sqrt(b[f].size/Math.PI),i=Math.sqrt(b[g].size/Math.PI);h=z(h,i,a.size);d[f][g]=d[g][f]=h;i=0;a.size+1e-10>=Math.min(b[f].size,b[g].size)?i=1:a.size<=1e-10&&(i=-1);e[f][g]=e[g][f]=i});return{distances:d,constraints:e}}function C(a,b,c,d){__p&&__p();var e=0,f;for(f=0;f<b.length;++f)b[f]=0;for(f=0;f<c.length;++f){var g=a[2*f],h=a[2*f+1];for(var i=f+1;i<c.length;++i){var j=a[2*i],k=a[2*i+1],l=c[f][i],m=d[f][i],n=(j-g)*(j-g)+(k-h)*(k-h),o=Math.sqrt(n);n=n-l*l;if(m>0&&o<=l||m<0&&o>=l)continue;e+=2*n*n;b[2*f]+=4*n*(g-j);b[2*f+1]+=4*n*(h-k);b[2*i]+=4*n*(j-g);b[2*i+1]+=4*n*(k-h)}}return e}function D(a,b){var c=F(a,b);if(a.length>=8){b=E(a,b);var d=G(b,a);a=G(c,a);d+1e-8<a&&(c=b)}return c}function E(a,b){__p&&__p();b=b||{};var c=b.restarts||10,d=[],e={},f;for(f=0;f<a.length;++f){var g=a[f];g.sets.length==1&&(e[g.sets[0]]=d.length,d.push(g))}g=B(a,d,e);var h=g.distances,i=g.constraints,j=r(h.map(r))/h.length;h=h.map(function(a){return a.map(function(a){return a/j})});a=function(a,b){return C(a,b,h,i)};var k;for(f=0;f<c;++f){e=o(h.length*2).map(Math.random);g=w(a,e,b);(!k||g.fx<k.fx)&&(k=g)}e=k.x;g={};for(f=0;f<d.length;++f){a=d[f];g[a.sets[0]]={x:e[2*f]*j,y:e[2*f+1]*j,radius:Math.sqrt(a.size/Math.PI)}}if(b.history)for(f=0;f<b.history.length;++f)s(b.history[f].x,j);return g}function F(a){__p&&__p();var b={},c={},d;for(var e=0;e<a.length;++e){var f=a[e];f.sets.length==1&&(d=f.sets[0],b[d]={x:1e10,y:1e10,rowid:b.length,size:f.size,radius:Math.sqrt(f.size/Math.PI)},c[d]=[])}a=a.filter(function(a){return a.sets.length==2});for(e=0;e<a.length;++e){f=a[e];var g=f.hasOwnProperty("weight")?f.weight:1,h=f.sets[0],i=f.sets[1];f.size+y>=Math.min(b[h].size,b[i].size)&&(g=0);c[h].push({set:i,size:f.size,weight:g});c[i].push({set:h,size:f.size,weight:g})}i=[];for(d in c)if(c.hasOwnProperty(d)){h=0;for(e=0;e<c[d].length;++e)h+=c[d][e].size*c[d][e].weight;i.push({set:d,size:h})}function j(a,b){return b.size-a.size}i.sort(j);var k={};function m(a){return a.set in k}function n(a,c){b[c].x=a.x,b[c].y=a.y,k[c]=!0}n({x:0,y:0},i[0].set);for(e=1;e<i.length;++e){f=i[e].set;g=c[f].filter(m);d=b[f];g.sort(j);if(g.length===0)throw"ERROR: missing pairwise overlap information";h=[];for(var o=0;o<g.length;++o){var p=b[g[o].set],q=z(d.radius,p.radius,g[o].size);h.push({x:p.x+q,y:p.y});h.push({x:p.x-q,y:p.y});h.push({y:p.y+q,x:p.x});h.push({y:p.y-q,x:p.x});for(var r=o+1;r<g.length;++r){var s=b[g[r].set],t=z(d.radius,s.radius,g[r].size);s=l({x:p.x,y:p.y,radius:q},{x:s.x,y:s.y,radius:t});for(var t=0;t<s.length;++t)h.push(s[t])}}s=1e50;t=h[0];for(o=0;o<h.length;++o){b[f].x=h[o].x;b[f].y=h[o].y;q=G(b,a);q<s&&(s=q,t=h[o])}n(t,f)}return b}function G(a,b){__p&&__p();var c=0;function d(b){return b.map(function(b){return a[b]})}for(var f=0;f<b.length;++f){var g=b[f];if(g.sets.length==1)continue;else if(g.sets.length==2){var h=a[g.sets[0]],i=a[g.sets[1]];h=k(h.radius,i.radius,j(h,i))}else h=e(d(g.sets));i=g.hasOwnProperty("weight")?g.weight:1;c+=i*(h-g.size)*(h-g.size)}return c}function H(a,b,c){__p&&__p();c===null?a.sort(function(a,b){return b.radius-a.radius}):a.sort(c);var d;if(a.length>0){c=a[0].x;var e=a[0].y;for(d=0;d<a.length;++d)a[d].x-=c,a[d].y-=e}if(a.length>1){c=Math.atan2(a[1].x,a[1].y)-b;e=Math.cos(c);c=Math.sin(c);var f,g;for(d=0;d<a.length;++d)f=a[d].x,g=a[d].y,a[d].x=e*f-c*g,a[d].y=c*f+e*g}if(a.length>2){f=Math.atan2(a[2].x,a[2].y)-b;while(f<0)f+=2*Math.PI;while(f>2*Math.PI)f-=2*Math.PI;if(f>Math.PI){g=a[1].y/(1e-10+a[1].x);for(d=0;d<a.length;++d){e=(a[d].x+g*a[d].y)/(1+g*g);a[d].x=2*e-a[d].x;a[d].y=2*e*g-a[d].y}}}}function I(a){__p&&__p();a.map(function(a){a.parent=a});function b(a){a.parent!==a&&(a.parent=b(a.parent));return a.parent}function c(a,c){a=b(a);c=b(c);a.parent=c}for(var d=0;d<a.length;++d)for(var e=d+1;e<a.length;++e){var f=a[d].radius+a[e].radius;j(a[d],a[e])+1e-10<f&&c(a[e],a[d])}f={};for(d=0;d<a.length;++d)e=b(a[d]).parent.setid,e in f||(f[e]=[]),f[e].push(a[d]);a.map(function(a){delete a.parent});c=[];for(e in f)f.hasOwnProperty(e)&&c.push(f[e]);return c}function J(a){var b=function(b){var c=Math.max.apply(null,a.map(function(a){return a[b]+a.radius})),d=Math.min.apply(null,a.map(function(a){return a[b]-a.radius}));return{max:c,min:d}};return{xRange:b("x"),yRange:b("y")}}function K(a,b,c){__p&&__p();b===null&&(b=Math.PI/2);var d=[],e;for(e in a)if(a.hasOwnProperty(e)){var f=a[e];d.push({x:f.x,y:f.y,radius:f.radius,setid:e})}f=I(d);for(e=0;e<f.length;++e){H(f[e],b,c);a=J(f[e]);f[e].size=(a.xRange.max-a.xRange.min)*(a.yRange.max-a.yRange.min);f[e].bounds=a}f.sort(function(a,b){return b.size-a.size});d=f[0];var g=d.bounds,h=(g.xRange.max-g.xRange.min)/50;function i(a,b,c){if(!a)return;var e=a.bounds,f;b?b=g.xRange.max-e.xRange.min+h:(b=g.xRange.max-e.xRange.max,f=(e.xRange.max-e.xRange.min)/2-(g.xRange.max-g.xRange.min)/2,f<0&&(b+=f));c?c=g.yRange.max-e.yRange.min+h:(c=g.yRange.max-e.yRange.max,f=(e.yRange.max-e.yRange.min)/2-(g.yRange.max-g.yRange.min)/2,f<0&&(c+=f));for(var e=0;e<a.length;++e)a[e].x+=b,a[e].y+=c,d.push(a[e])}a=1;while(a<f.length)i(f[a],!0,!1),i(f[a+1],!1,!0),i(f[a+2],!0,!0),a+=3,g=J(d);b={};for(e=0;e<d.length;++e)b[d[e].setid]=d[e];return b}function L(a,b,c,d){__p&&__p();var e=[],f=[];for(var g in a)a.hasOwnProperty(g)&&(f.push(g),e.push(a[g]));b-=2*d;c-=2*d;var h=J(e),i=h.xRange;h=h.yRange;if(i.max==i.min||h.max==h.min)return a;a=b/(i.max-i.min);var j=c/(h.max-h.min);j=Math.min(j,a);a=(b-(i.max-i.min)*j)/2;b=(c-(h.max-h.min)*j)/2;c={};for(var k=0;k<e.length;++k){var l=e[k];c[f[k]]={radius:j*l.radius,x:d+a+(l.x-i.min)*j,y:d+b+(l.y-h.min)*j}}return c}function c(){__p&&__p();var a=600,c=350,d=15,e=1e3,f=Math.PI/2,g=!0,h=!0,i=!0,j=null,k=null,l={},m=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n=0,o=function(a){if(a in l)return l[a];a=l[a]=m[n];n+=1;n>=m.length&&(n=0);return a},p=x;function q(l){__p&&__p();var m=l.datum(),n=p(m);g&&(n=K(n,f,k));var q=L(n,a,c,d),r=Q(q,m),s={};m.forEach(function(a){a.label&&(s[a.sets]=a.label)});function t(a){if(a.sets in s)return s[a.sets];if(a.sets.length==1)return""+a.sets[0]}l.selectAll("svg").data([q]).enter().append("svg");n=l.select("svg").attr("width",a).attr("height",c);var u={},v=!1;n.selectAll(".venn-area path").each(function(a){var c=b.select(this).attr("d");a.sets.length==1&&c&&(v=!0,u[a.sets[0]]=T(c))});var w=function(b){return function(d){var e=b.sets.map(function(b){var e=u[b];b=q[b];e||(e={x:a/2,y:c/2,radius:1});b||(b={x:a/2,y:c/2,radius:1});return{x:e.x*(1-d)+b.x*d,y:e.y*(1-d)+b.y*d,radius:e.radius*(1-d)+b.radius*d}});return U(e)}};n=n.selectAll(".venn-area").data(m,function(a){return a.sets});m=n.enter().append("g").attr("class",function(a){return"venn-area venn-"+(a.sets.length==1?"circle":"intersection")}).attr("data-venn-sets",function(a){return a.sets.join("_")});var x=m.append("path"),y=m.append("text").attr("class","label").text(function(a){return t(a)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",a/2).attr("y",c/2);i&&(x.style("fill-opacity","0").filter(function(a){return a.sets.length==1}).style("fill",function(a){return a.color||o(a.sets)}).style("fill-opacity",".25"),y.style("fill",function(a){return a.color||(a.sets.length==1?o(a.index):"#444")}));x=l;v?(x=l.transition("venn").duration(e),x.selectAll("path").attrTween("d",w)):x.selectAll("path").attr("d",function(a){return U(a.sets.map(function(a){return q[a]}))});l=x.selectAll("text").filter(function(a){return a.sets in r}).text(function(a){return t(a)}).attr("x",function(a){return Math.floor(r[a.sets].x)}).attr("y",function(a){return Math.floor(r[a.sets].y)});h&&(v?"on"in l?l.on("end",M(q,t)):l.each("end",M(q,t)):l.each(M(q,t)));w=n.exit().transition("venn").duration(e).remove();var z=w.selectAll("text").attr("x",a/2).attr("y",c/2);j!==null&&(y.style("font-size","0px"),l.style("font-size",j),z.style("font-size","0px"));return{circles:q,textCentres:r,nodes:n,enter:m,update:x,exit:w}}q.wrap=function(a){if(!arguments.length)return h;h=a;return q};q.width=function(b){if(!arguments.length)return a;a=b;return q};q.colorScheme=function(a){if(!arguments.length)return m;m=a;return q};q.height=function(a){if(!arguments.length)return c;c=a;return q};q.padding=function(a){if(!arguments.length)return d;d=a;return q};q.colours=function(a){if(!arguments.length)return o;o=a;return q};q.fontSize=function(a){if(!arguments.length)return j;j=a;return q};q.duration=function(a){if(!arguments.length)return e;e=a;return q};q.layoutFunction=function(a){if(!arguments.length)return p;p=a;return q};q.normalize=function(a){if(!arguments.length)return g;g=a;return q};q.styled=function(a){if(!arguments.length)return i;i=a;return q};q.orientation=function(a){if(!arguments.length)return f;f=a;return q};q.orientationOrder=function(a){if(!arguments.length)return k;k=a;return q};return q}function M(a,c){__p&&__p();return function(){__p&&__p();var d=b.select(this),e=d.datum(),f=a[e.sets[0]].radius||50;e=c(e)||"";var g=e.split(/\s+/).reverse(),h=3;e=(e.length+g.length)/h;h=g.pop();var i=[h],j,k=0,l=1.1,m=d.text(null).append("tspan").text(h);while(!0){h=g.pop();if(!h)break;i.push(h);j=i.join(" ");m.text(j);j.length>e&&m.node().getComputedTextLength()>f&&(i.pop(),m.text(i.join(" ")),i=[h],m=d.append("tspan").text(h),k++)}var n=.35-k*l/2;j=d.attr("x");i=d.attr("y");d.selectAll("tspan").attr("x",j).attr("y",i).attr("dy",function(a,b){return n+b*l+"em"})}}function N(a,b,c){var d=b[0].radius-j(b[0],a),e,f;for(e=1;e<b.length;++e)f=b[e].radius-j(b[e],a),f<=d&&(d=f);for(e=0;e<c.length;++e)f=j(c[e],a)-c[e].radius,f<=d&&(d=f);return d}function O(a,b){__p&&__p();var c=[],d;for(d=0;d<a.length;++d){var f=a[d];c.push({x:f.x,y:f.y});c.push({x:f.x+f.radius/2,y:f.y});c.push({x:f.x-f.radius/2,y:f.y});c.push({x:f.x,y:f.y+f.radius/2});c.push({x:f.x,y:f.y-f.radius/2})}f=c[0];var g=N(c[0],a,b);for(d=1;d<c.length;++d){var h=N(c[d],a,b);h>=g&&(f=c[d],g=h)}h=u(function(c){return-1*N({x:c[0],y:c[1]},a,b)},[f.x,f.y],{maxIterations:500,minErrorDelta:1e-10}).x;g={x:h[0],y:h[1]};c=!0;for(d=0;d<a.length;++d)if(j(g,a[d])>a[d].radius){c=!1;break}for(d=0;d<b.length;++d)if(j(g,b[d])<b[d].radius){c=!1;break}if(!c)if(a.length==1)g={x:a[0].x,y:a[0].y};else{f={};e(a,f);f.arcs.length===0?g={x:0,y:-1e3,disjoint:!0}:f.arcs.length==1?g={x:f.arcs[0].circle.x,y:f.arcs[0].circle.y}:b.length?g=O(a,[]):g=m(f.arcs.map(function(a){return a.p1}))}return g}function P(a){__p&&__p();var b={},c=[];for(var d in a)d!=="__ARRAY_ENUMERATION_GUARD__"&&(c.push(d),b[d]=[]);for(var e=0;e<c.length;e++){var f=a[c[e]];for(var g=e+1;g<c.length;++g){var h=a[c[g]],i=j(f,h);i+h.radius<=f.radius+1e-10?b[c[g]].push(c[e]):i+f.radius<=h.radius+1e-10&&b[c[e]].push(c[g])}}return b}function Q(a,b){__p&&__p();var c={},d=P(a);for(var e=0;e<b.length;++e){var f=b[e].sets,g={},h={};for(var i=0;i<f.length;++i){g[f[i]]=!0;var j=d[f[i]];for(var k=0;k<j.length;++k)h[j[k]]=!0}k=[];j=[];for(var l in a)l in g?k.push(a[l]):l in h||j.push(a[l]);i=O(k,j);c[f]=i;i.disjoint&&b[e].size>0}return c}function R(a,b){__p&&__p();var c=P(a.selectAll("svg").datum()),d={};for(var e=0;e<b.sets.length;++e){var f=b.sets[e];for(var g in c){var h=c[g];for(var i=0;i<h.length;++i)if(h[i]==f){d[g]=!0;break}}}function j(b){for(var a=0;a<b.length;++a)if(!(b[a]in d))return!1;return!0}a.selectAll("g").sort(function(a,c){if(a.sets.length!=c.sets.length)return a.sets.length-c.sets.length;if(a==b)return j(c.sets)?-1:1;return c==b?j(a.sets)?1:-1:c.size-a.size})}function S(a,b,c){var d=[];d.push("\nM",a,b);d.push("\nm",-c,0);d.push("\na",c,c,0,1,0,c*2,0);d.push("\na",c,c,0,1,0,-c*2,0);return d.join(" ")}function T(a){a=a.split(" ");return{x:parseFloat(a[1]),y:parseFloat(a[2]),radius:-parseFloat(a[4])}}function U(a){__p&&__p();var b={};e(a,b);a=b.arcs;if(a.length===0)return"M 0 0";else if(a.length==1){b=a[0].circle;return S(b.x,b.y,b.radius)}else{b=["\nM",a[0].p2.x,a[0].p2.y];for(var c=0;c<a.length;++c){var d=a[c],f=d.circle.radius,g=d.width>f;b.push("\nA",f,f,0,g?1:0,1,d.p1.x,d.p1.y)}return b.join(" ")}}a.intersectionArea=e;a.circleCircleIntersection=l;a.circleOverlap=k;a.circleArea=i;a.distance=j;a.venn=x;a.greedyLayout=F;a.scaleSolution=L;a.normalizeSolution=K;a.bestInitialLayout=D;a.lossFunction=G;a.disjointCluster=I;a.distanceFromIntersectArea=z;a.VennDiagram=c;a.wrapText=M;a.computeTextCentres=Q;a.computeTextCentre=O;a.sortAreas=R;a.circlePath=S;a.circleFromPath=T;a.intersectionAreaPath=U;Object.defineProperty(a,"__esModule",{value:!0})})}),null);
__d("AnalyticsOverlapVennChart",["AnalyticsOverlapUtils","BUIInsightsHoverCard.react","CandelaConstants","FBAMetaLoggerWWW","GriffinCandelaTheme","InsightsNumUtils","React","d3-old/d3","immutable","uuid","venn"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaLoggerWWW").META_LOGGER,h=b("immutable").OrderedSet,i=b("venn").VennDiagram,j=b("venn").sortAreas;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1="venn"+b("uuid")(),d.state={chart:null,showTooltip:!1,tooltipContext:{offsetX:0,offsetY:0,overlap:null,referencedCircle:{}}},c)||babelHelpers.assertThisInitialized(d)}c.getDerivedStateFromProps=function(a,b){if(b.chart)return{chart:b.chart.width(a.width).height(a.height)};else return null};var d=c.prototype;d.componentDidMount=function(){var a=this.props.vennSets,c=i().width(this.props.width).height(this.props.height).colorScheme(b("AnalyticsOverlapUtils").getColors()).fontSize(0),d=b("d3-old/d3").select("#"+this.$1);d.datum(a).call(c);this.$2();this.setState({chart:c})};d.componentDidUpdate=function(a,c){a=this.props.vennSets;b("d3-old/d3").select("#"+this.$1).datum(a).call(this.state.chart);this.$2()};d.$2=function(){__p&&__p();var a=this,c=b("d3-old/d3").select("#"+this.$1);b("d3-old/d3").selectAll("path").each(function(a){if(a==null)return;var c=b("d3-old/d3").select(this);c.style("stroke-opacity",1).style("stroke",a.color).style("stroke-width",1)});var d=c.selectAll("g");d.on("mouseover",function(e,f){j(c,e);var h="ref"+f;f=b("d3-old/d3").select(d[0][f]).select("path").attr("ref",h).style("fill-opacity",e.sets.length==1?.8:.4);h=f.node().getBBox();g.logEvent("Overlap_Chart_Hover");a.setState({showTooltip:!0,tooltipContext:{offsetX:h.width/2,offsetY:10,referencedCircle:f[0][0],overlap:e}})}).on("mouseout",function(c,e){a.setState({showTooltip:!1}),b("d3-old/d3").select(d[0][e]).select("path").style("fill-opacity",c.sets.length==1?.2:0)})};d.$3=function(){var a=this.state.tooltipContext,c=a.offsetX,d=a.offsetY,e=a.overlap,f=a.referencedCircle;if(e==null)return null;a=b("React").createElement("span",{style:{color:e.color}},e.label);e=e.originalSize||e.size;var g=b("AnalyticsOverlapUtils").getTotalPercentTitle(e,this.props.total);return b("React").createElement(b("BUIInsightsHoverCard.react"),{contextRef:function(){return f},items:h([{key:"overlap_set",richLabel:a,value:b("InsightsNumUtils").prettyInt(e)}]),offsetX:c,offsetY:d,shown:this.state.showTooltip,target:b("CandelaConstants").ShapeType.AREA,theme:b("GriffinCandelaTheme"),title:g})};d.render=function(){return b("React").createElement("div",null,b("React").createElement("div",{id:this.$1,style:{margin:"0 auto",width:this.props.width}}),this.$3())};return c}(b("React").Component);a.defaultProps={height:500,width:800};e.exports=a}),null);
__d("AnalyticsOverlapVennView",["cx","fbt","AnalyticsLoadingCard","AnalyticsOverlapDataTable","AnalyticsOverlapUtils","AnalyticsOverlapVennChart","AnalyticsQueryBreakdownUtils","BUIInsightsSelectableLegend.react","CustomEventStore","FalcorErrorNotice","FBAColorPalette","FBAMetaLoggerWWW","FluxContainer","GriffinSections","InsightsNumUtils","React","SUIBusinessTheme","SUISpinner.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FBAMetaLoggerWWW").META_LOGGER,j=b("immutable").Map,k=b("immutable").OrderedSet,l={chart:"_1b86",root:"_3wnl"},m={bucketLabel:"_ecj",chart:"_ecl",root:"_ecm",title:"_ecu"};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,b)||babelHelpers.assertThisInitialized(c)}c.getStores=function(){return[b("CustomEventStore")]};c.calculateState=function(a){return{isCustomEventsLoaded:b("CustomEventStore").isInitialized()}};var d=c.prototype;d.render=function(){__p&&__p();var a=this,c,d=this.props,e=d.breakdown,f=d.eventName;d=d.section;var g=this.props,n=g.selectedSetsWithSingleValue,o=g.totalUniqueUsers,p=g.dropdownItems,q=g.loadingSelection;g=d===b("GriffinSections").DASHBOARDS?m:l;if(o===0||p==null||n==null)return!this.state.isCustomEventsLoaded?b("React").createElement(b("AnalyticsLoadingCard"),null):b("React").createElement("div",{className:g.root},b("React").createElement(b("FalcorErrorNotice"),{message:h._("No data")},h._("There's no data to show for this overlap. Try editing the date range, the segment conditions or the types of overlap to include more data.")));var r=k(n.map(function(c,d){return a.$2(c.label,b("InsightsNumUtils").prettyInt(c.size),d,q)})),s=k(p.map(function(b,c){return a.$2(b.label,b.breakdownValue,c)}));p=j().withMutations(function(b){n.forEach(function(c,d){c=c.label!=null?c.label:a.$3(d);b.set(c,s)})});c=b("FBAColorPalette").get(((c=this.props.dropdownItems)!=null?c:[]).map(function(a){return a.label.toString()}),{breakdown:this.props.breakdown,eventName:this.props.eventName,metric:"UNIQUE_USERS"});var t=this.$4(c);o=b("React").createElement(b("AnalyticsOverlapVennChart"),{total:o,vennSets:t});var u=b("CustomEventStore").getAppEventDisplayName(f),v=b("AnalyticsQueryBreakdownUtils").getBreakdownTypeDisplayString(e,f);d=d===b("GriffinSections").DASHBOARDS?b("React").createElement("div",{className:m.title},h._("{event}{separator} show by {parameter}",[h._param("event",u),h._param("separator",":"),h._param("parameter",v)])):null;if(d!=null&&!this.state.isCustomEventsLoaded)return b("React").createElement(b("AnalyticsLoadingCard"),null);i.logEvent("Overlap_Chart_View",{breakdown:e,event:f,source:this.props.section});return b("React").createElement("div",null,b("React").createElement("div",null,b("React").createElement(b("BUIInsightsSelectableLegend.react"),{autoColors:c,className:this.props.loadingSelection!=null?"_68a0":null,display:"stacked",items:r,onSelect:function(b,c){a.props.handleSelect(b,c)},selectableItemsByKey:p})),b("React").createElement("div",{className:g.root},d,b("React").createElement("div",{className:g.chart},o)),b("React").createElement("div",null,b("React").createElement(b("AnalyticsOverlapDataTable"),{breakdownLabel:e,ref:function(b){return a.$1=b},vennSets:t})))};d.getExportData=function(){var a=this.$1;return a&&a.getExportData&&a.getExportData()};d.$2=function(a,c,d,e){d=a!=null?a:this.$3(d);e=e===a?b("React").createElement("div",null,b("React").createElement(b("SUISpinner.react"),{theme:b("SUIBusinessTheme")})):null;return babelHelpers["extends"]({label:d,key:d.toString(),value:c},e!=null?{richLabel:e}:{})};d.$3=function(a){return h._("Overlap {Overlap index}:",[h._param("Overlap index",a)])};d.$4=function(a){var c=this.props,d=c.overlapData;c=c.selectedSetsWithSingleValue;return d==null||c==null?[]:b("AnalyticsOverlapUtils").getAllSubsets(d,c).map(function(b){return{color:a.get(String(b.label)),label:b.label,originalSize:b.size,sets:b.sets,size:Math.sqrt(b.size)}})};return c}(b("React").Component);e.exports=b("FluxContainer").create(a)}),null);
__d("FalcorAppEventRuleDataUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={validateAppEventRuleParameter:function(a){__p&&__p();if(!a||!a.parameter_name)return"Invalid App Event Parameter - parameter is undefined";var b=Object.keys(a);for(var c=0;c<b.length;c++){var d=b[c];if(d!=="parameter_name"&&d!=="operator"&&d!=="values"&&d!=="ruleType")return"Invalid App Event Parameter - unknown property: "+d}if(!a.operator)return"Invalid App Event Parameter - missing parameter operator";return!a.values||a.values.length===0?"Invalid App Event Parameter - missing parameter values":null},isAppEventRuleParameterValid:function(a){return!this.validateAppEventRuleParameter(a)}};e.exports=a}),null);
__d("FalcorParameterRuleBuilderSearchSource",["AbstractSearchSource","FalcorBreakdownsTextUtils","GriffinConstants","SearchableEntry"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("GriffinConstants").BreakdownsToAppearAtBottom;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;c.parameterPossibleValues=[];c.setValues(b);return c}var d=c.prototype;d.setValues=function(a){a=a.filter(function(a){return!b("FalcorBreakdownsTextUtils").isRedactedBreakdownValue(a.uniqueID.toString())});a.sort(function(a,b){if(g.has(a.title.toString()))return g.has(b.title.toString())?a.title.toString().localeCompare(b.title.toString()):1;else if(g.has(b.title.toString()))return-1;return a.title.toString().localeCompare(b.title.toString())});this.parameterPossibleValues=a};d.isEmpty=function(){return this.parameterPossibleValues.length===0};d.searchImpl=function(a,c){var d=a.toLowerCase(),e=this.parameterPossibleValues.filter(function(a){return a.uniqueID.toString().toLowerCase().includes(d)||a.title.toString().toLowerCase().includes(d)}).map(function(a){return new(b("SearchableEntry"))(a)});c(e,a)};return c}(b("AbstractSearchSource"));e.exports=a}),null);
__d("GriffinParameterRuleBuilder",["cx","fbt","invariant","ix","AnalyticsBreakdownTableChartUtils","AnalyticsPredefinedBreakdowns","AnalyticsUntypedSegmentUtils","FalcorAppEventRuleDataUtils","FalcorParameterRuleBuilderSearchSource","FalcorSearchSource","FalcorSegmentRuleUtils","FBAMetaLoggerWWW","FlexLayout.react","GriffinButton","GriffinComposerField","GriffinSearchableSelector","GriffinSegmentOperatorConfig","GriffinSegmentRules","GriffinSelector","GriffinSelectorOption","Image.react","React","SearchableEntry","SUIAnalyticsGriffinTheme","SUITokenizer.react","URI","XUICloseButton.react","isEmpty","joinClasses","objectKeys","objectValues","suiMargin","update"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("FBAMetaLoggerWWW").META_LOGGER,l=b("GriffinSegmentRules").Types.APP_EVENT;function m(a){return a.parameters.map(function(a,b){return{id:String(b),name:(b=a.display_name)!=null?b:a.parameter_name}})}function n(a){a=m(a);a=new(b("FalcorSearchSource"))(a);return{loadingValues:!1,parameterSearchSource:a,valueSearchQuery:"",valueSearchSource:new(b("FalcorParameterRuleBuilderSearchSource"))([])}}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state=n(d.props),d.$14=function(a){d.$22(a.getUniqueID())},d.$21=function(a){d.$24(a.getUniqueID())},d.$17=function(a){var c=d.props.parameterRule;c=c.values.indexOf(a.getUniqueID());if(c<0)return;k.logEvent("SegmentBuilder_BuilderRule_Change",{operator:d.props.parameterRule.operator,parameter:d.props.parameterRule.parameter_name,underlyingEvent:"rule_builder_value_removed",value:a.getTitle()});a=b("update")(d.props.parameterRule,{values:{$splice:[[c,1]]}});d.props.onChange(a)},d.$15=function(){if(!d.state.valueSearchQuery||!d.props.allowCustomValue)return;d.$22(d.state.valueSearchQuery)},d.$16=function(a){if(d.props.parameterRule.values.length>0&&!d.$9().isArray[d.props.parameterRule.operator])return;a.target.value!=null||i(0,5883);a=String(a.target.value);var c=b("AnalyticsUntypedSegmentUtils").doesRuleAllowOnlyNumericValue(d.props.parameterRule.ruleType,d.props.parameterRule.parameter_name);if(c&&a.length>0&&!/^\d+\.?\d*$/.test(a))return;d.setState({valueSearchQuery:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1()};d.componentDidUpdate=function(a,c){if(!this.props.parameterRule||b("isEmpty")(this.props.parameterRule))return;(!a.parameterRule||a.parameterRule.parameter_name!==this.props.parameterRule.parameter_name||a.searchSourceHash!==this.props.searchSourceHash)&&this.$1();if(this.props.parameters!==a.parameters){c=m(this.props);a=new(b("FalcorSearchSource"))(c);this.setState({parameterSearchSource:a})}};d.$1=function(){__p&&__p();var a=this,c=this.props.parameterRule,d=!!c&&!!c.parameter_name,e=babelHelpers["extends"]({},n(this.props),{loadingValues:d});this.setState(e);if(!d)return;e=b("AnalyticsPredefinedBreakdowns").coerceBreakdown(c.parameter_name);var f=e&&b("AnalyticsPredefinedBreakdowns").getDisplayValues(e);this.props.loadParameterValues(c.parameter_name,function(c){var d=c.reduce(function(a,b){a[b.uniqueID]=b;return a},{});f&&b("objectKeys")(f).forEach(function(a){d[a]=babelHelpers["extends"]({},d[a]||{},{title:f[a],uniqueID:a})});a.setState({loadingValues:!1,valueSearchSource:new(b("FalcorParameterRuleBuilderSearchSource"))(b("objectValues")(d))})})};d.render=function(){var a=this.$2(),c=this.$3(),d=this.props.showAnd?h._("AND"):this.props.customLabel,e=this.props.showArrow?b("React").createElement(b("Image.react"),{className:"_3-91",src:j("82643")}):null,f=d?"_57b8":b("joinClasses")(this.props.className,"_57b8");f=b("React").createElement(b("FlexLayout.react"),{className:f,wrap:"wrap"},e,this.$4(a),this.$5(),b("React").createElement(b("FlexLayout.react"),{align:"center"},this.$6(a),this.props.additionalValueInput,c,b("React").createElement("div",null,this.$7())));if(d)return b("React").createElement("div",{className:this.props.className},b("React").createElement(b("GriffinComposerField"),{input:f,inputClass:"_338x",label:d,labelClass:this.props.labelClass}));else return f};d.$3=function(){var a=this.props,c=a.showAddButton;a=a.parameterRule;if(c!==!0||!a.parameter_name)return null;c=a.ruleType===l?b("FalcorAppEventRuleDataUtils").isAppEventRuleParameterValid(a):b("FalcorSegmentRuleUtils").isValidRule(a);return b("React").createElement(b("GriffinButton"),{className:"_57b5",disabled:!c,iconName:"create",onClick:this.props.onAdd})};d.$7=function(){return this.props.onDelete?b("React").createElement(b("XUICloseButton.react"),{className:"_57bc",href:"#",onClick:this.props.onDelete,size:"medium"}):null};d.$4=function(a){var c=this,d;if(a!==null&&a!==void 0){var e=m(this.props);d=e[a]}e=this.props.parameterRule.parameter_name?"_57ca":"_1lo_";a=d?new(b("SearchableEntry"))({title:d.name.toString(),uniqueID:d.id}):null;return this.props.isParameterFixed?b("React").createElement("span",{className:"_1e0l"},a?a.getTitle():null):b("React").createElement(b("GriffinSearchableSelector"),{className:e,dropdownWidth:300,getTooltipForEntry:this.props.getTooltipForParameter,onChange:function(a){c.$8({id:a.getUniqueID(),name:a.getTitle()})},placeholder:this.props.parameterSelectorLabel,ref:"parameterSelector",searchSource:this.state.parameterSearchSource,value:a,width:"auto"})};d.$5=function(){var a=this,c=this.props.parameterRule;if(!c.parameter_name)return null;var d=this.$9(),e=!c||!c.parameter_name||this.state.loadingValues||this.props.isOperatorFixed,f=c?c.operator:d.defaultValue;c=d.operators.find(function(a){return a.value===f});return this.props.isOperatorFixed?b("React").createElement("span",{className:"_1e0l"},c?c.text:f):b("React").createElement(b("GriffinSelector"),{disabled:e,onChange:function(b){return a.$10({value:b})},value:f},d.operators.map(function(a){return b("React").createElement(b("GriffinSelectorOption"),{key:a.value,value:a.value},a.text)}))};d.$11=function(a,d,e,f){var g=this.state,h=g.valueSearchSource;g=g.valueSearchQuery;var i=this.$12()?[new(b("SearchableEntry"))({title:g,uniqueID:g})]:void 0;i={additionalEntries:i,entries:a,isDisabled:d,placeholder:e};return b("React").createElement(b("SUITokenizer.react"),babelHelpers["extends"]({},i,{className:this.$13(),maxEntries:c.TYPEAHEAD_LIMIT,onAddEntry:this.$14,onAddEntryAttempt:this.$14,onEnterWithoutSelection:this.$15,onInputBlur:this.$15,onQueryStringChange:f?this.$16:null,onRemoveEntry:this.$17,queryString:g,searchSource:h,selectOnTab:!0,showEntriesOnFocus:f,theme:b("SUIAnalyticsGriffinTheme")}))};d.$6=function(a){__p&&__p();var c=this.props.parameterRule;if(!c.parameter_name)return null;if(!c||b("isEmpty")(c)||a===null||a===void 0)return this.$11([],!0,"",!1);a=this.$18();var d=this.$19(),e=d.length!==0?d[0]:null,f=c.operator;f=this.$20(f);c=f||c.values.length<1;f=f||this.state.valueSearchSource.parameterPossibleValues.length===0||this.props.allowCustomValue;return f?this.$11(d,this.state.loadingValues,a,c):b("React").createElement("div",{className:this.$13()},b("React").createElement(b("GriffinSearchableSelector"),{dropdownWidth:"auto",isDisabled:this.state.loadingValues,onChange:this.$21,placeholder:a,searchSource:this.state.valueSearchSource,value:e,width:"100%"}))};d.$9=function(){var a=this.props.parameterRule,c=a?a.parameter_name:null;return b("GriffinSegmentOperatorConfig").getSupportedOperators(a.ruleType,c)};d.$22=function(a){this.$23(a,"$push")};d.$24=function(a){this.$23(a,"$set")};d.$25=function(a,b,c){k.logEvent("SegmentBuilder_BuilderRule_Change",{comparisonValue:c,operator:a,parameter:b,underlyingEvent:"rule_builder_value_added"})};d.$23=function(a,c){a=a.trim();var d=this.props.parameterRule;if(d.values.indexOf(a)>=0)return;b("AnalyticsBreakdownTableChartUtils").isURLBreakdown(d.parameter_name)&&(a=o(a));this.$25(d.operator,d.parameter_name,a);c=b("update")(d,{values:(d={},d[c]=[a],d)});this.setState({valueSearchQuery:""});this.props.onChange(c)};d.$2=function(){var a=this.props.parameterRule,b=this.props.parameters;if(!a)return null;for(var c=0;c<b.length;c++)if(b[c].parameter_name===a.parameter_name)return c;return null};d.$8=function(a){a=Number(a.id);a=this.props.parameters[a];var c=b("GriffinSegmentOperatorConfig").getSupportedOperators(this.props.parameterRule.ruleType,a.parameter_name).defaultValue;k.logEvent("SegmentBuilder_BuilderRule_Change",{newParameter:a.parameter_name,underlyingEvent:"rule_builder_parameter_changed"});c=babelHelpers["extends"]({},this.props.parameterRule,{operator:c,parameter_name:a.parameter_name,values:[]});this.props.onChange(c)};d.$10=function(a){a=a.value;var b=babelHelpers["extends"]({},this.props.parameterRule,{operator:a});k.logEvent("SegmentBuilder_BuilderRule_Change",{newOperator:a,parameter:b.parameter_name,underlyingEvent:"rule_builder_operator_changed"});a=this.$20(a);a||(b.values=b.values.slice(0,1));this.props.onChange(b)};d.$20=function(a){return this.$9().isArray[a]||!1};d.$12=function(){var a=this.state,b=a.valueSearchSource,c=a.valueSearchQuery;return Boolean(this.props.allowCustomValue&&c&&!b.parameterPossibleValues.some(function(a){return a.uniqueID.toString().toLowerCase()===c.toLowerCase()}))};d.$19=function(){var a=this,c=this.props.parameterRule,d=b("AnalyticsPredefinedBreakdowns").coerceBreakdown(c.parameter_name);return c.values.map(function(e){var f=d&&b("AnalyticsPredefinedBreakdowns").getDisplayValue(d,e);return new(b("SearchableEntry"))({title:(f=f)!=null?f:a.props.getParameterDisplayValue?a.props.getParameterDisplayValue(c.parameter_name,e):e,uniqueID:e})})};d.$18=function(){return this.state.loadingValues?h._("Loading..."):h._("Enter a value")};d.$13=function(){var a=this.props,b=a.isOperatorFixed;a=a.showAddButton;return(a?"_57ch":"")+(b?"":" _57cg")+(b?" _1e0m":"")};return c}(b("React").Component);a.TYPEAHEAD_LIMIT=300;a.defaultProps={parameterSelectorLabel:h._("Select parameter")};function o(a){var c=b("URI").isValidURI(a);if(c){c=new(b("URI"))(a);var d=c.getProtocol();if(d)return c.getDomain()+c.getPath()}return a}e.exports=a}),null);
__d("AnalyticsOverlapVennViewContainer",["cx","fbt","invariant","AnalyticsBreakdownIDsToNamesResolver","AnalyticsDateUtils","AnalyticsLoadingCard","AnalyticsOverlapDataAdapter","AnalyticsOverlapUtils","AnalyticsOverlapVennView","AnalyticsQueryAggregationMethod","AnalyticsQueryApi","AnalyticsQueryBreakdownUtils","AnalyticsQueryMetricParamKey","CurrentAnalyticsEntity","FalcorBreakdownsTextUtils","FBAMetaLoggerWWW","GriffinErrorCard","GriffinParameterRuleBuilder","InternalAnalyticsQueryBuilder","React"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("FBAMetaLoggerWWW").META_LOGGER;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={apiError:null,cancellablePromise:null,dropdownItems:[],loadingSelection:null,overlapData:null,selectedSetsWithSingleValue:null,totalUniqueUsers:0},c.$2=null,c.$6=function(a,b){__p&&__p();var d=c.state,e=d.dropdownItems;d=d.selectedSetsWithSingleValue;var f=c.props,g=f.eventName,h=f.breakdown;f=f.section;if(d==null)return;j.logEvent("Overlap_BreakdownSelector_Change",{breakdown:h,dropdownSelection:a.label,event:g,source:f});c.setState({loadingSelection:b.label});var i=c.$7(a,b,e,d);c.$8(e.filter(function(a){return i.find(function(b){return b.label===a.label.toString()})!=null}).map(function(a){return a.breakdownValue}),g,h,i)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this.props,b=a.eventName;a=a.breakdown;b!=null&&a!=null&&this.$3(this.props)};d.componentDidUpdate=function(a,b){var c=this.props,d=c.eventName;c=c.breakdown;d!=null&&c!=null&&(d!==a.eventName||c!==a.breakdown||a.appliedSegment!==this.props.appliedSegment||a.appliedFilterSet!==this.props.appliedFilterSet||a.visibleDateRange!==this.props.visibleDateRange)&&this.$3(this.props);this.$4(a,b)&&this.$5(this.props,this.state)&&(this.props.onLoad&&this.props.onLoad())};d.componentWillUnmount=function(){var a=this.state.cancellablePromise;a&&a.cancel()};d.$4=function(a,b){return a.eventName!=null&&a.breakdown!=null&&b.apiError==null&&b.overlapData==null};d.$5=function(a,b){return a.eventName!=null&&a.breakdown!=null&&b.apiError==null&&b.overlapData!=null};d.render=function(){var a=this,c=this.state,d=c.apiError,e=c.overlapData,f=c.selectedSetsWithSingleValue,g=c.totalUniqueUsers,i=c.dropdownItems;c=c.loadingSelection;var j=this.props,k=j.eventName;j=j.breakdown;var l;k==null||j==null?l=b("React").createElement("div",{className:"_60v7"},b("React").createElement("div",{className:"_13k-"},h._("Configure your chart")),b("React").createElement("div",{className:"_13k_"},h._("When you select an event and a parameter, you'll see your overlap report here."))):d?l=b("React").createElement(b("GriffinErrorCard"),{error:d}):!e?l=b("React").createElement(b("AnalyticsLoadingCard"),null):l=b("React").createElement(b("AnalyticsOverlapVennView"),{breakdown:j,dropdownItems:i,eventName:k,handleSelect:this.$6,loadingSelection:c,overlapData:e,ref:function(b){return a.$2=b},selectedSetsWithSingleValue:f,totalUniqueUsers:g});return l};d.getExportData=function(){var a=this.$2;return a&&a.getExportData&&a.getExportData()};d.$7=function(a,b,c,d){var e=c.find(function(b){return b.label===a.label});return d.map(function(a){if(e!=null&&a.label!=null&&a.label===b.label)return{color:a.color,label:e.label.toString(),sets:[e.label.toString()],size:e.aggregationValue};else return a})};d.$3=function(a){__p&&__p();var c=this;a=this.props;var d=a.eventName,e=a.breakdown;a=a.visibleDateRange;var f=this.state.cancellablePromise;f&&f.cancel();this.$1&&!this.$1.isCancelled()&&this.$1.cancelQuery();this.setState({apiError:null,cancellablePromise:null,overlapData:null});if(d==null||e==null)return;this.$1=new(b("InternalAnalyticsQueryBuilder"))().setAnalyticsEntityID(b("CurrentAnalyticsEntity").getID()).setEventName(d).setBreakdowns([e]).setLimit(b("GriffinParameterRuleBuilder").TYPEAHEAD_LIMIT).setSince(b("AnalyticsDateUtils").getTimestampForQueryAPI(a.since)).setUntil(b("AnalyticsDateUtils").getTimestampForQueryAPI(a.until)).setFilterSet(this.props.appliedFilterSet).setFilters(this.props.appliedSegment).setOnSuccess(function(a){__p&&__p();c.$1&&(c.$1=null);var f=a.getResultAsRows().toJS(),g=a.getColumnNames().toJS(),h=g.indexOf(e);if(b("AnalyticsBreakdownIDsToNamesResolver").isSupportedBreakdown(e)){a=f.filter(function(a){return a[h]!==b("AnalyticsOverlapUtils").NULL_VALUE}).map(function(a){return a[h]});b("AnalyticsBreakdownIDsToNamesResolver").resolveBreakdownValues(e,a,function(a){c.$9(g,f,h,e,d);a=c.$10();c.$8(a,d,e)})}else{c.$9(g,f,h,e,d);a=c.$10();c.$8(a,d,e)}}).setOnError(function(a){c.setState({apiError:a})}).getTopUniquesInDateRangeQuery();b("AnalyticsQueryApi").queryAppEventData([this.$1])};d.$10=function(){var a=this.props.chartConfig.getEventQueries();if(a!=null&&a.length>0){a=a[0].getMetricParams();if(b("AnalyticsQueryMetricParamKey").BREAKDOWN_VALUES in a)return JSON.parse(a[b("AnalyticsQueryMetricParamKey").BREAKDOWN_VALUES])}return this.state.dropdownItems.slice(0,b("AnalyticsOverlapUtils").VENN_OVERLAP_LIMIT).map(function(a){return a.breakdownValue})};d.$9=function(a,c,d,e,f){__p&&__p();var g=a.indexOf(b("AnalyticsQueryAggregationMethod").USERS);f=c.filter(function(a){return a[d]!==b("AnalyticsOverlapUtils").NULL_VALUE}).map(function(a){var c=a[d];a=parseFloat(a[g]);var f=b("AnalyticsQueryBreakdownUtils").getBreakdownName(e||"");f=b("FalcorBreakdownsTextUtils").getBreakdownValueDisplayString(f,c);return{aggregationValue:a,breakdownValue:c,label:f}}).sort(function(a,b){return b.aggregationValue-a.aggregationValue});this.setState({dropdownItems:f})};d.$8=function(a,c,d,e){__p&&__p();var f=this,g=b("AnalyticsDateUtils").getTimestampForQueryAPI(this.props.visibleDateRange.since),h=b("AnalyticsDateUtils").getTimestampForQueryAPI(this.props.visibleDateRange.until),i=this.props,j=i.appliedSegment;i=i.analyticsEntityID;var k={};j=j?{event_info_rules:j.event_info_rules,event_rules:j.event_rules,percentile_rules:j.percentile_rules,user_property_rules:j.user_property_rules,web_param_rules:j.web_param_rules}:{};a.length>0&&d!=null&&(k[b("AnalyticsQueryMetricParamKey").BREAKDOWN_VALUES]=JSON.stringify(a));a=new(b("InternalAnalyticsQueryBuilder"))().setAnalyticsEntityID(i).setEventName(c).setBreakdowns([d]).setAggregations([b("AnalyticsQueryAggregationMethod").OVERLAP]).setIntervalsToAggregate(0).setFilterSet(this.props.appliedFilterSet).setFilters(j).setMetricParams(k).setSince(g).setUntil(h).setTag("overlapDataQuery").setSessionLoggerID(this.props.sessionLoggerID).getQueryAsPromise();this.$11(k);a.promise.done(function(a){a=a.getResultAsRows().toJS();f.setStateFromApiData(a,c,d,e)},function(a){f.setState({apiError:a})});this.setState({cancellablePromise:a})};d.$11=function(a){var b=this.props,c=b.chartConfig;b=b.onChangeDO_NOT_USE;var d=c.getEventQueries();d!=null&&d.length>0||i(0,14993);d=d[0].update({metricParams:a});a=c.update({queries:[d]});b&&b(a)};d.setStateFromApiData=function(a,c,d,e){if(a==null||c==null||d==null)return;var f=b("AnalyticsOverlapUtils").getRawResult(a,!0);c=b("AnalyticsOverlapUtils").getMeta(a,c,d);d=b("AnalyticsOverlapDataAdapter").transformRawResults(f,c);c=e||b("AnalyticsOverlapUtils").getSetsWithSingleValue(d).slice(0,3).map(function(a,c){return{color:b("AnalyticsOverlapUtils").getColors()[c],label:a.label,sets:a.sets,size:a.size}});this.setState(a==null||a.length===0?{loadingSelection:null,overlapData:[],selectedSetsWithSingleValue:[],totalUniqueUsers:0}:{loadingSelection:null,overlapData:d,selectedSetsWithSingleValue:c,totalUniqueUsers:b("AnalyticsOverlapUtils").getTotalCount(f,!0)})};return c}(b("React").Component);e.exports=a}),null);
__d("AnalyticsFeatureActionLabel",["BonsaiContextualHelp","React","SUIBusinessTheme","SUISimplePopover.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return this.$1()&&this.props.helpKey!=null&&this.props.helpKey!==""?b("React").createElement("span",null,this.props.label,b("React").createElement(b("SUISimplePopover.react"),{content:b("React").createElement(b("BonsaiContextualHelp"),{helpKey:this.props.helpKey}),theme:b("SUIBusinessTheme")})):this.props.label};d.$1=function(){return this.props.isFeatureImported&&(this.props.action==="SAVE"||this.props.action==="DELETE")};return c}(b("React").PureComponent);e.exports=a}),null);
__d("GriffinContextualDrawer",["cx","AnalyticsErrorBoundary","React","ReactDOM","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={leftOffset:0},c.$1=function(a){var b=c.$2();(!a||a.leftOffset!==b)&&c.setState({leftOffset:b})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){window.addEventListener("resize",this.$1),this.$1()};d.componentDidUpdate=function(a,b){this.$1(b)};d.componentWillUnmount=function(){window.removeEventListener("resize",this.$1)};d.$2=function(){__p&&__p();var a=this.props.anchor;if(a==null||!(a instanceof Element))return 0;a=b("ReactDOM").findDOMNode(a);var c=b("ReactDOM").findDOMNode(this),d=b("ReactDOM").findDOMNode(this.refs.arrow);if(!(a instanceof HTMLElement)||!(c instanceof HTMLElement)||!(d instanceof HTMLElement))return 0;var e=a.offsetParent,f=0;e&&(f=e.getBoundingClientRect().left-c.getBoundingClientRect().left);e=a.offsetLeft+f;c=a.offsetWidth/2;f=d.offsetWidth/2;return e+c-f};d.render=function(){return b("React").createElement("div",{className:this.$3(),style:this.props.style},b("React").createElement("div",{className:"_20kh"+(this.props.anchor?"":" hidden_elem"),style:{left:this.state.leftOffset},ref:"arrow"}),b("React").createElement(b("AnalyticsErrorBoundary"),{cardKey:this.props.cardKey},this.props.children))};d.$3=function(){var a="_20kg"+(this.props.overridePositioning?"":" _1i0c");return this.props.className!==""&&this.props.className!=null?b("joinClasses")(a,this.props.className):a};return c}(b("React").PureComponent);e.exports=a}),null);
__d("GriffinEventToken",["ix","cssVar","cx","fbt","FalcorAppEventSelector","FBAMetaLoggerWWW","GriffinButton","Image.react","React","SUIAnalyticsGriffinTheme","emptyFunction","fbglyph","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("FBAMetaLoggerWWW").META_LOGGER;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){c.props.onEventChange(a.getUniqueID())},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.className,d=a.draggable,e=a.eventName,f=a.isPlaceholder,h=a.isSelected,i=a.onClick,l=a.onRemove;a=a.removable;var m=j._("Edit"),n;d&&(n=b("React").createElement("div",{className:"_405o"},b("React").createElement(b("Image.react"),{className:"_405p",src:g("125401"),draggable:!1}),b("React").createElement(b("Image.react"),{className:"_405p",src:g("125401"),draggable:!1})));var o;a&&(o=b("React").createElement(b("Image.react"),{className:"_405s",draggable:!1,onClick:l,src:g("125921")}));var p;e!=null&&e!==""&&(p=b("React").createElement("div",null,b("React").createElement(b("GriffinButton"),{className:"_405r",isDepressed:h,label:m,onClick:i,ref:"refine",tooltip:j._("Name your step and refine by parameter.")})));return b("React").createElement("div",{className:b("joinClasses")(c,"_405l"+(f?" _405n":"")+(d?" _10cw":"")+(a?" _10cx":""))},n,b("React").createElement(b("FalcorAppEventSelector"),{className:"_405q",onOpen:function(){return k.logEvent("Global_EventSelector_Open")},onSelect:this.$1,value:e}),p,o)};return c}(b("React").Component);a.defaultProps={draggable:!1,isPlaceholder:!1,isSelected:!1,onClick:b("emptyFunction"),onEventChange:b("emptyFunction"),onRemove:b("emptyFunction"),removable:!1};e.exports=a}),null);
__d("GriffinLooseParameterRuleBuilder",["cx","fbt","FalcorSearchSource","GriffinParameterRuleBuilder","GriffinSearchableSelector","GriffinSegmentOperatorConfig","React","update"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$4=function(a){a=a.getUniqueID();var b=c.props.parameterRule.ruleType;c.props.onChange({parameter_name:a,ruleType:b})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props.parameterRule;a=this.$1(a);return a?this.$2(a):this.$3()};d.$3=function(){var a="_1lo_",c=h._("Select parameter"),d=this.props.parameters.map(function(a){var b;return{id:a.parameter_name,name:(b=a.display_name)!=null?b:a.parameter_name}});d=new(b("FalcorSearchSource"))(d);return b("React").createElement(b("GriffinSearchableSelector"),{className:a,dropdownWidth:300,getTooltipForEntry:this.props.getTooltipForParameter,onChange:this.$4,placeholder:c,searchSource:d})};d.$2=function(a){a=b("update")(this.props,{parameterRule:{$set:a}});return b("React").createElement(b("GriffinParameterRuleBuilder"),a)};d.$1=function(a){var c=a.parameter_name,d=a.ruleType;if(c==null||d==null)return null;var e=a.operator!=null?a.operator:b("GriffinSegmentOperatorConfig").getSupportedOperators(d,c).defaultValue;a=a.values||[];return{operator:e,parameter_name:c,ruleType:d,values:a}};return c}(b("React").Component);a.defaultProps={allowCustomValue:!0,customLabel:"",isOperatorFixed:!1,isParameterFixed:!1,showAnd:!0,showArrow:!1};e.exports=a}),null);
__d("GriffinParameterBuilderDrawer",["cx","fbt","AnalyticsParamValueConfig","AnalyticsQueryBreakdownUtilsShared","AnalyticsRefinementParamUtils","GriffinContextualDrawer","GriffinLooseParameterRuleBuilder","GriffinSegmentRules","List.react","React","joinClasses","promiseDone","update"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$8=function(){var a=b("update")(d.props.eventRule,{event_rule:{parameters:{$push:[{}]}}});d.props.onChangeEventRule(a)},d.$3=function(a,c,e){__p&&__p();var f=d.props.eventRule,g=f.event_rule.event_name;f=b("AnalyticsRefinementParamUtils").getRefinementParams(g).map(function(a){return babelHelpers["extends"]({},a)});e=c===e.length-1;var i=g+"_param_"+c,j=h._("REFINE BY");return b("React").createElement(b("GriffinLooseParameterRuleBuilder"),{customLabel:j,getParameterDisplayValue:function(a,b){return d.$4(g,a,b)},key:i,labelClass:"_2rit",loadParameterValues:function(a,b){d.$1&&!d.$1.isCancelled()&&d.$1.cancelQuery(),d.$1=d.$5(g,a,b)},onAdd:d.$8,onChange:function(a){d.$6(c,babelHelpers["extends"]({},a))},onDelete:function(){return d.$7(c)},parameterRule:b("update")(a,{ruleType:{$set:b("GriffinSegmentRules").Types.APP_EVENT}}),parameters:f,showAddButton:e,showAnd:c!==0})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$2=function(){var a=this.props.eventRule.event_rule.parameters;a=a.length===0?[{}].map(this.$3):a.map(this.$3);return b("React").createElement(b("List.react"),{border:"none",spacing:"none"},a)};d.$4=function(a,c,d){return b("AnalyticsQueryBreakdownUtilsShared").getBreakdownValueDisplayString(c,d,a)};d.$5=function(a,c,d){b("promiseDone")(b("AnalyticsParamValueConfig").loadValuesAsSearchableEntryData({eventName:a,parameterName:c}),d)};d.$6=function(a,c){a=b("update")(this.props.eventRule,{event_rule:{parameters:{$splice:[[a,1,c]]}}});this.props.onChangeEventRule(a)};d.$7=function(a){a=b("update")(this.props.eventRule,{event_rule:{parameters:{$splice:[[a,1]]}}});this.props.onChangeEventRule(a)};d.render=function(){var a=this.props,c=a.anchor;a=a.className;return b("React").createElement(b("GriffinContextualDrawer"),{anchor:c,cardKey:"parameter_builder",className:b("joinClasses")(a,"_3o9n"),ref:"builder"},b("React").createElement("div",{className:"_3o9o"},this.$2()))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("GriffinAdHocCohortBuilder",["cx","fbt","invariant","AnalyticsCohortGraphQLUtils","AnalyticsFeatureActionLabel","AnalyticsFeatureDialogOptions","AnalyticsPermissions","AnalyticsSegmentUtils","CurrentAnalyticsEntity","FalcorCommonViews","FalcorSegmentRuleUtils","FBAMetaLoggerWWW","GriffinButton","GriffinContextualDrawer","GriffinEditFeatureDialog","GriffinEventToken","GriffinParameterBuilderDrawer","GriffinSelector","GriffinSelectorOption","React","areEqual","nullthrows","suiMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("FBAMetaLoggerWWW").META_LOGGER,k=!0,l=!1,m=Object.freeze({FIRST:"first_event",FOLLOWUP:"followup_event"}),n=(a={},a[b("AnalyticsFeatureDialogOptions").SAVE]={descriptionText:h._("Would you like to save your cohort with this name?"),errorText:h._("There was an error while saving the chart. Please try again."),hidden:function(){return!b("AnalyticsPermissions").canViewerWriteFeatures()},loadingText:h._("Saving cohort"),showTextInput:!0,title:h._("Save")},a[b("AnalyticsFeatureDialogOptions").SAVE_AS]={descriptionText:h._("Please name the new cohort you are creating."),errorText:h._("There was an error while saving the chart. Please try again."),hidden:function(){return!b("AnalyticsPermissions").canViewerWriteFeatures()},loadingText:h._("Creating new cohort"),showTextInput:!0,title:h._("Save As")},a[b("AnalyticsFeatureDialogOptions").SAVE_INTERNAL]={descriptionText:h._("Would you like to save your cohort with this name?"),errorText:h._("There was an error while saving the chart. Please try again."),hidden:function(){return!b("AnalyticsPermissions").canViewerWriteInternOnlyFeatures()},loadingText:h._("Saving internal cohort"),showTextInput:!0,title:h._("Save Internal")},a[b("AnalyticsFeatureDialogOptions").DELETE]={descriptionText:h._("Are you sure you want to delete this cohort?"),errorText:h._("There was an error while deleting the chart. Please try again."),hidden:function(a){return!b("AnalyticsPermissions").canViewerWriteFeatures()&&!(b("AnalyticsPermissions").canViewerWriteInternOnlyFeatures()&&a.isInternal)},loadingText:h._("Deleting cohort"),showTextInput:!1,title:h._("Delete")},a),o=h._("Apply"),p={DELETE:"CohortBuilderDeleteImportedTooltip",SAVE:"CohortBuilderSaveImportedTooltip"};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=function(){var a=d.props.cohortsID,c=!a;j.logEvent("Cohorts_SaveButton_Click",{feature_id:a,view:b("FalcorCommonViews").DETAILS});d.$2(a,l,c)};d.$3=function(){var a=d.props.cohortsID;j.logEvent("Cohorts_SaveAsButton_Click",{original_feature_id:a,view:b("FalcorCommonViews").CREATE});d.$2(a,l,!0)};d.$4=function(){var a=d.props.cohortsID;j.logEvent("Cohorts_SaveInternalButton_Click",{original_feature_id:a,view:b("FalcorCommonViews").CREATE});d.$2(a,k,!0)};d.$7=function(){var a=d.props.cohortsID;j.logEvent("Cohorts_DeleteButton_Click",{feature_id:a});b("AnalyticsCohortGraphQLUtils")["delete"](b("nullthrows")(a))};d.$6=function(){var a=d.$5(),c=d.props.cohortsID,e=c!=null&&c!=="";e=e?b("FalcorCommonViews").DETAILS:b("FalcorCommonViews").CREATE;j.logEvent("Cohorts_ApplyButton_Click",{feature_id:c,view:e});d.props.onApply&&d.props.onApply(a)};d.$10=function(a){var c=d.state.firstEvent;c=babelHelpers["extends"]({},c,{event_rule:babelHelpers["extends"]({},c.event_rule,{application:b("CurrentAnalyticsEntity").getID(),event_name:a,parameters:[]})});d.$11(c)};d.$12=function(a){var c=d.state.followupEvent;c=babelHelpers["extends"]({},c,{event_rule:babelHelpers["extends"]({},c.event_rule,{application:b("CurrentAnalyticsEntity").getID(),event_name:a,parameters:[]})});d.$13(c)};d.$15=function(a){d.setState({dialogType:a,showDialog:!0})};d.$16=function(){d.setState({dialogType:null,showDialog:!1})};d.$17=function(a){d.setState({cohortName:a})};d.state={cohortName:c.cohortName,dialogType:null,firstEvent:c.firstEvent,followupEvent:c.followupEvent,selectedKey:null,showDialog:!1};return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){var b=a.cohortName,c=a.firstEvent,d=a.followupEvent,e=this.props.isLoading&&!a.isLoading;e&&this.setState({cohortName:b,firstEvent:c,followupEvent:d});(this.props.firstEvent!==a.firstEvent||this.props.followupEvent!==a.followupEvent)&&this.setState({cohortName:b,firstEvent:c,followupEvent:d})};d.$2=function(a,c,d){var e=this.$5();d?b("AnalyticsCohortGraphQLUtils").create(b("CurrentAnalyticsEntity").getID(),e.name,c,b("AnalyticsSegmentUtils").createFromEventRuleData(e.first_event),b("AnalyticsSegmentUtils").createFromEventRuleData(e.followup_event)):b("AnalyticsCohortGraphQLUtils").update(b("nullthrows")(a),e.name,b("AnalyticsSegmentUtils").createFromEventRuleData(e.first_event),b("AnalyticsSegmentUtils").createFromEventRuleData(e.followup_event));this.$6()};d.$8=function(a){a=a===this.state.selectedKey?null:a;this.setState({selectedKey:a})};d.$5=function(){var a=this.state,c=a.cohortName,d=a.firstEvent;a=a.followupEvent;d=this.$9(d);a=this.$9(a);return{first_event:d,followup_event:a,name:b("nullthrows")(c)}};d.$9=function(a){var c=a.event_rule.parameters;c=c.filter(function(a){return b("FalcorSegmentRuleUtils").isValidParameter(a)});return b("AnalyticsSegmentUtils").assertEventRuleData(babelHelpers["extends"]({},a,{event_rule:babelHelpers["extends"]({},a.event_rule,{parameters:c})}))};d.$14=function(a,b){b===m.FIRST?this.$11(a):this.$13(a)};d.$11=function(a){this.setState({firstEvent:a})};d.$13=function(a){this.setState({followupEvent:a})};d.$18=function(){__p&&__p();var a=this,c=this.state,d=c.dialogType;c=c.cohortName;d!=null||i(0,213);var e=n[d],f;switch(d){case b("AnalyticsFeatureDialogOptions").SAVE:f=this.$1;break;case b("AnalyticsFeatureDialogOptions").SAVE_AS:f=this.$3;break;case b("AnalyticsFeatureDialogOptions").SAVE_INTERNAL:f=this.$4;break;case b("AnalyticsFeatureDialogOptions").DELETE:f=this.$7;break}return b("React").createElement(b("GriffinEditFeatureDialog"),{descriptionText:e.descriptionText,isLoading:!1,loadingText:e.loadingText,name:c,onButtonClick:function(){f(),a.$16()},onClose:this.$16,onNameChange:this.$17,showTextInput:e.showTextInput,title:e.title})};d.$19=function(){var a=this.state,b=a.firstEvent;a=a.followupEvent;return!b||!a||!b.event_rule||!a.event_rule};d.$20=function(){__p&&__p();var a=this,c=this.props.cohortsID;c=!c;var d=this.$19(),e=h._("More actions");if(c){c=n[b("AnalyticsFeatureDialogOptions").SAVE];return b("React").createElement(b("GriffinButton"),{disabled:d,label:c.title,onClick:function(){return a.$15(b("AnalyticsFeatureDialogOptions").SAVE)}})}c=Object.keys(b("AnalyticsFeatureDialogOptions")).filter(function(c){c=b("AnalyticsFeatureDialogOptions")[c];if(n[c].hidden(a.props))return!1;return d?c==="DELETE":!0}).map(function(c){var d=b("AnalyticsFeatureDialogOptions")[c],e=n[d];return b("React").createElement(b("GriffinSelectorOption"),{disabled:a.$21(c),key:d,value:d},b("React").createElement(b("AnalyticsFeatureActionLabel"),{action:c,helpKey:p[c],isFeatureImported:!!a.props.isImported,label:e.title}))});return c.length===0?null:b("React").createElement(b("GriffinSelector"),{onChange:this.$15,placeholder:e,value:null},c)};d.$21=function(a){var b=this.props.isImported!=null&&this.props.isImported!=="";return b&&(a==="SAVE"||a==="DELETE")};d.render=function(){__p&&__p();var a=this,c=this.props.anchor,d=this.state,e=d.firstEvent,f=d.followupEvent,g=d.selectedKey;d=d.showDialog;var i=g===m.FIRST,j=g===m.FOLLOWUP,k=e&&e.event_rule?e.event_rule.event_name:null,l=f&&f.event_rule?f.event_rule.event_name:null,n;if(g!=null&&g!==""){e=i?e:f;n=b("React").createElement(b("GriffinParameterBuilderDrawer"),{anchor:this.refs[g].refs.refine,className:"_36cu",eventRule:e,onChangeEventRule:function(b){a.$14(b,g)}})}f=d?this.$18():null;e=b("React").createElement(b("GriffinEventToken"),{draggable:!1,eventName:k,isSelected:i,key:m.FIRST,onClick:function(){return a.$8(m.FIRST)},onEventChange:this.$10,ref:m.FIRST,removable:!1});d=b("React").createElement(b("GriffinEventToken"),{draggable:!1,eventName:l,isSelected:j,key:m.FOLLOWUP,onClick:function(){return a.$8(m.FOLLOWUP)},onEventChange:this.$12,ref:m.FOLLOWUP,removable:!1});return b("React").createElement(b("GriffinContextualDrawer"),{anchor:c,cardKey:"cohort_builder"},b("React").createElement("span",null,h._("{firstEventBuilder}{(padding)} then {(padding)}{followupEventBuilder}",[h._param("firstEventBuilder",e),h._param("(padding)",b("React").createElement("span",{className:"_3-8r"})),h._param("followupEventBuilder",d)])),n,b("React").createElement("div",{className:"_36cv"},b("React").createElement(b("GriffinButton"),{disabled:!this.$22(),label:o,onClick:this.$6,style:{marginRight:"8px"},use:"confirm"}),this.$20(),f))};d.$22=function(){var a=this;return!["firstEvent","followupEvent"].every(function(c){return b("areEqual")(a.props[c],a.state[c])})};return c}(b("React").PureComponent);c.DialogConfigs=n;e.exports=c}),null);
__d("FalcorSamplingVariance",["fbt","BonsaiTooltip","InsightsNumUtils","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={calculateVariance:function(a,b){b=b;a=a;return Math.round(.98*Math.sqrt(1/(a*b)-1/a)*a)},renderVarianceTooltip:function(a,c){a=this._getVarianceText(a,c,!1);return a===null?null:b("React").createElement(b("BonsaiTooltip"),{tooltip:a})},getSamplingTooltipSentence:function(a){return a<=.99?g._("Based on a {sampling rate with \u0025} sampling rate.",[g._param("sampling rate with %",b("InsightsNumUtils").prettyPercent(a))]):null},getVarianceSentence:function(a,b){return this._getVarianceText(a,b,!0)},getVarianceTooltipSentence:function(a,b){return this._getVarianceText(a,b,!1)},_getVarianceText:function(a,c,d){if(c>.99)return null;var e=h.calculateVariance(a,c);a>0?d=g._("{total count}+\/- {percent variance} ({absolute variance}) based on a {sampling rate} sampling rate.",[g._param("total count",d?b("InsightsNumUtils").prettyInt(a)+" users ":""),g._param("percent variance",b("InsightsNumUtils").prettyPercent(e/a)),g._param("absolute variance",b("InsightsNumUtils").prettyInt(e)),g._param("sampling rate",b("InsightsNumUtils").prettyPercent(c))]):d=g._("Empty population based on {sampling rate} sampling rate.",[g._param("sampling rate",b("InsightsNumUtils").prettyPercent(c))]);return d}};e.exports=h}),null);
__d("AnalyticsRetentionNUXURIAdapter",["analyticsGetCurrentURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){var a=this;this.uriParam="show_retention_nux";this.uriValue=String(!0);this.removeNUXParamFromURI=function(){b("analyticsGetCurrentURI")().removeQueryData(a.uriParam).go()}}var c=a.prototype;c.currentURIHasShowNUXParam=function(){return Object.prototype.hasOwnProperty.call(b("analyticsGetCurrentURI")().getQueryData(),this.uriParam)};c.getQueryDataForShowingNUXParam=function(){var a;return a={},a[this.uriParam]=this.uriValue,a};return a}();e.exports=new a()}),null);
__d("HighlightChartSeriesOnHoverMixin",["CandelaStructs","immutable","isEmpty"],(function(a,b,c,d,e,f){"use strict";var g=b("CandelaStructs").Highlight,h=b("immutable").Set;a={getInitialState:function(){return{highlights:h()}},_onMouseEnter:function(a){b("isEmpty")(a.data)||this.setState({highlights:h(Object.keys(a.data).map(function(a){return new g({dependentSeriesName:a})}))}),this.props.onMouseEnter&&this.props.onMouseEnter(a)},_onMouseLeave:function(a){this.setState({highlights:h()}),this.props.onMouseLeave&&this.props.onMouseLeave(a)}};e.exports=a}),null);
__d("FalcorInsightsLineAreaChart.react",["HighlightChartSeriesOnHoverMixin","InsightsLineAreaChart.react","InsightsThemeableChartMixin","React","ReactComponentWithPureRenderMixin","GriffinCandelaTheme"],(function(a,b,c,d,e,f){a=b("React").createClass({displayName:"FalcorInsightsLineAreaChart",mixins:[b("HighlightChartSeriesOnHoverMixin"),b("InsightsThemeableChartMixin")(function(){return b("GriffinCandelaTheme")}),b("ReactComponentWithPureRenderMixin")],statics:{getComponentTheming:function(){return{styleSheet:{'gridline[orientation="horizontal"]:last-child':{visibility:"hidden"},'gridline[orientation="horizontal"]:last-child:only-child':{visibility:"visible"}}}}},render:function(){return b("React").createElement(b("InsightsLineAreaChart.react"),babelHelpers["extends"]({highlights:this.state.highlights,onMouseEnter:this._onMouseEnter,onMouseOut:this._onMouseOut,theme:this.state.theme},this.props))}});e.exports=a}),null);
__d("GriffinCohortsBreakdownChartView",["cx","AnalyticsBreakdownIDsToNamesResolver","AnalyticsExportUtils","AnalyticsQueryBreakdownUtils","AnalyticsQueryConstants","BonsaiColors","CandelaConstants","CandelaGroupScaleBuilder","CandelaStyleSheet","FalcorInsightsHoverCardChart","FalcorInsightsLineAreaChart.react","FalcorNotEnoughDataNotice","GriffinLegendItem","GriffinResizableChart","InsightsCohortsUtils","InsightsLegendScrollableVert.react","Layout.react","React","Tooltip","immutable","mapObject"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("CandelaConstants").RenderAs,i=b("CandelaConstants").ScaleType,j=b("CandelaGroupScaleBuilder").group,k=b("immutable").OrderedSet,l=b("Layout.react").Column,m=b("Layout.react").FillColumn,n=320,o="#dddfe2",p="xAxis",q=b("CandelaStyleSheet").fromJS({'axis[orientation="vertical"]':{width:55},'gridline[orientation="vertical"]':{visibility:"hidden"}});a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var d,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(d=e=a.call.apply(a,[this].concat(g))||this,e.$1=null,e.$2=!0,e.state=c.getStateFromProps(e.props),e.$3=function(){if(!e.$2)return;e.setState(function(a){return{averageLines:b("mapObject")(a.averageLines,function(a){return babelHelpers["extends"]({},a,{label:b("AnalyticsQueryBreakdownUtils").getBreakdownValueDisplayString(e.props.breakdown,a.key,null,Object.keys(e.props.breakdownCohortData).length>=b("AnalyticsQueryConstants").cardinality_limit)})})}})},d)||babelHelpers.assertThisInitialized(e)}c.calculateState=function(a,b){return c.getStateFromProps(b)};var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){(this.props.breakdownCohortData!==a.breakdownCohortData||this.props.metric!==a.metric||this.props.collationInterval!==a.collationInterval)&&this.setState(c.getStateFromProps(a))};d.componentDidMount=function(){this.loadMedia(null)};d.componentDidUpdate=function(a){this.loadMedia(a)};d.componentWillUnmount=function(){this.$2=!1};d.loadMedia=function(a){var c=this.props,d=c.breakdown;c=c.breakdownCohortData;if(d===(a==null?void 0:a.breakdown)&&c===(a==null?void 0:a.breakdownCohortData))return;a=Object.keys(c);c=b("AnalyticsQueryBreakdownUtils").getBreakdownName(d);b("AnalyticsBreakdownIDsToNamesResolver").isSupportedBreakdown(c)&&b("AnalyticsBreakdownIDsToNamesResolver").resolveBreakdownValues(c,a,this.$3)};d.getExportData=function(){var a=this.$1;if(!a)return null;var c=a.data;a=a.schema;return b("AnalyticsExportUtils").getFormattedData(c,a)};d.render=function(){__p&&__p();var a=this,c=this.state,d=c.averageLines;c=c.hoveredPointIndex;var e=this.props,f=e.metric,g=e.collationInterval,o=e.currency,r=e.breakdownCohortData;e=Object.keys(d);if(e.length===0)return b("React").createElement(b("FalcorNotEnoughDataNotice"),{height:n});var s=[],t={},u={},v=d[e[0]].data.map(function(a,b){a={};a[p]=b.toString();return a});t[p]={type:i.NUMBER};var w=e.reduce(function(a,b){return a||r[b].isCurrencyValues},!1),x=b("InsightsCohortsUtils").getCandelaScale(f,w);e.forEach(function(a,b){__p&&__p();b=d[a];var c=b.color,e=b.data,f=b.label;b=b.legendTooltip;if(c==null||c==="")return;s.push(a);t[a]={currencyCode:x===i.CURRENCY?o:null,label:f,legendTooltip:b,renderAs:h.LINE,type:x};u[a]=c;e.forEach(function(b,c){v[c][a]=x===i.PERCENTAGE?b/100:b})});w=k(Object.keys(v[0]).map(function(a){if(a===p)return{};var b=t[a].label,c=t[a].legendTooltip;return{key:a,label:b,legendTooltip:c}}));v!=null&&t!=null&&(this.$1={data:v,schema:t});return b("React").createElement(b("Layout.react"),null,b("React").createElement(m,null,b("React").createElement("div",{className:"_2dpn"},b("React").createElement("div",{className:"_38wy"},b("InsightsCohortsUtils").getGraphLabelForMetric(f)),b("React").createElement(b("GriffinResizableChart"),null,b("React").createElement(b("FalcorInsightsHoverCardChart"),{auxiliaryItems:k([{key:"interval",value:b("InsightsCohortsUtils").getIntervalAfterTooltipLabel(c,g)}]),hoverCardPosition:"right",items:w},b("React").createElement(b("FalcorInsightsLineAreaChart.react"),{autoColors:b("immutable").Map(u),axisMarkFormatterFactory:b("InsightsCohortsUtils").getCandelaChartAxisFormatterFactory(),data:v,height:n,onMouseMove:function(b){if(!b||!b.data||!b.data[p])return;a.setState({hoveredPointIndex:parseInt(b.data[p].value,10)})},plotX:j(p).stepCountHint(v.length-1),plotY:[j.apply(void 0,s).from(0).niceStepOnly()],schema:t,styleSheet:q,width:500}))),b("React").createElement("div",{className:"_38wz"},b("InsightsCohortsUtils").getCollationIntervalForChartCaption(g)))),b("React").createElement(l,null,this.$4()))};c.getStateFromProps=function(a){var c=a.breakdown,d=a.breakdownCohortData,e={},f=b("InsightsCohortsUtils").getLineChartColors();a=Object.keys(d);var g=a.length>=b("AnalyticsQueryConstants").cardinality_limit;a.forEach(function(a){e[a]={color:f.shift()||null,data:d[a].weightedAverages.map(function(a){return a.value||0}),key:a,label:b("AnalyticsQueryBreakdownUtils").getBreakdownValueDisplayString(c,a,null,g),legendTooltip:b("AnalyticsQueryBreakdownUtils").getBreakdownTooltipDisplayString(c,a)}});return{availableColors:f,averageLines:e,hoveredPointIndex:0}};d.$5=function(a){__p&&__p();var b=this.state,c=b.averageLines;b=b.availableColors;if(Object.keys(c).every(function(b){return b===a||!c[b].color}))return;b=b.slice();var d=c[a].color,e=null;d!=null&&d!==""?b.unshift(d):e=b.shift();e=babelHelpers["extends"]({},c,(d={},d[a]=babelHelpers["extends"]({},c[a],{color:e}),d));this.setState({availableColors:b,averageLines:e})};d.$4=function(){__p&&__p();var a=this,c=this.state,d=c.averageLines,e=c.availableColors;c=Object.keys(d);var f=b("InsightsCohortsUtils").getTooltipForDisabledRowSelect();c=c.map(function(c){var g=d[c],h=g.color,i=g.label;g=g.legendTooltip;var j=!h;j=e.length===0&&j;var k=null;g!=null&&g!==""&&(k=b("React").createElement("span",{title:g},i));return b("React").createElement("div",babelHelpers["extends"]({key:c},b("Tooltip").propsFor(j?f:null),{className:"_4vge"}),b("React").createElement(b("GriffinLegendItem"),{checkboxStyle:{border:"1px solid "+o},color:j?o:((g=h)!=null?g:"")||b("BonsaiColors").WHITE,disabled:j,label:i,onToggle:function(){return a.$5(c)},richLabel:k}))});return b("React").createElement("div",{className:"_4ygo"},b("React").createElement("div",{className:"_4ygp"},b("InsightsCohortsUtils").getSectionNameText(this.props.section)),b("React").createElement(b("InsightsLegendScrollableVert.react"),{height:300,width:140},c))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("InsightsCohortsTableView",["cx","fbt","invariant","AnalyticsCohortCollationInterval","AnalyticsCohortMetric","AnalyticsCohortsTextUtils","AnalyticsErrorLoggerFactory","AnalyticsPredefinedBreakdownValues","AnalyticsUIErrorCause","FalcorDataTooltip","InsightsCohortsUtils","InsightsNumUtils","Link.react","React","SUIBusinessTheme","SUIHelpMessage.react","Tooltip"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=1;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hoveredCell:null},c.$15=function(){var a=c.state.hoveredCell;return a==null?null:c.refs[a]},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_2je1"},b("React").createElement("div",{className:"_2je4"},this.$1()))};d.$2=function(){return b("React").createElement("th",{className:"_2je5",key:"header"},h._({"DAILY":{"retention":"Daily retention","Cohorts":"Daily cohorts","lifetime_value":"Daily lifetime value"},"WEEKLY":{"retention":"Weekly retention","Cohorts":"Weekly cohorts","lifetime_value":"Weekly lifetime value"},"MONTHLY":{"retention":"Monthly retention","Cohorts":"Monthly cohorts","lifetime_value":"Monthly lifetime value"}},[h._enum(this.props.collationInterval,{DAILY:"Daily",WEEKLY:"Weekly",MONTHLY:"Monthly"}),h._enum(this.props.section,{retention:"Retention",Cohorts:"Cohorts",lifetime_value:"Lifetime Value"})]))};d.$3=function(a){var b=this.props.cohortData.retentionTable[a][0],c=this.props.cohortData.rowLabels[a+j];return this.$4(c,a+j,b)};d.$5=function(a){return this.props.cohortData.rowLabels[a+j]};d.$6=function(){var a=this.props.cohortData.colLabels;a=a.map(function(a,c){return b("React").createElement("th",{key:c},b("React").createElement("div",{className:"_2je7"},a))});return b("React").createElement("tr",{key:"_headerRow"},this.$2(),a)};d.$7=function(){var a=this.props.cohortData.weightedAverages;return b("React").createElement("tr",{key:"_weightedAveragesRow"},this.$4(b("React").createElement("span",null,this.props.cohortData.rowLabels[0],b("React").createElement(b("SUIHelpMessage.react"),{theme:b("SUIBusinessTheme"),value:this.$8()})),0,a[0]),this.$9(a))};d.$8=function(){switch(this.props.collationInterval){case b("AnalyticsCohortCollationInterval").DAILY:return h._("The average of all values in a single day, weighted by the number of people in each cohort.");case b("AnalyticsCohortCollationInterval").WEEKLY:return h._("The average of all values in a single week, weighted by the number of people in each cohort.");case b("AnalyticsCohortCollationInterval").MONTHLY:return h._("The average of all values of a single month, weighted by the number of people in each cohort.");default:return""}};d.$9=function(a){var c=this;return a.map(function(a,d){return b("React").createElement("td",{key:d,style:a.value===null?b("InsightsCohortsUtils").getCohortsChartColorRedacted():null},b("React").createElement("div",{className:"_2je8"},c.$10(a)))})};d.$1=function(){__p&&__p();var a=this,c=this.props.cohortData.retentionTable,d=[],e=this.props.cohortData.range.min,f=this.props.cohortData.range.max,g=this.props.cohortData.mean,h=this.props.cohortData.standardDeviation,i=this.$11(),j=this.$12(),k=Math.max(e,g-3*h),l=Math.min(f,g+3*h);k=parseFloat(k.toFixed(2));l=parseFloat(l.toFixed(2));e=-1;d.push(this.$7());for(var m=0;m<c.length;++m){var n=[this.$3(m)],o=c[m];f=function(c){var d=o[c],e=b("InsightsCohortsUtils").getCellColor(d.value,k,l,i,j),f=m+" "+c;n.push(b("React").createElement("td",{key:f,onMouseEnter:function(){return a.$13(f)},onMouseLeave:function(){return a.$14(f)},ref:f,style:b("InsightsCohortsUtils").getCellStyle(e)},a.$10(d)))};for(var g=0;g<o.length;++g)f(g);e<o.length&&(e=o.length);d.push(b("React").createElement("tr",{key:m},n))}return b("React").createElement("div",null,b("React").createElement("table",{className:"_2je3"},b("React").createElement("thead",null,this.$6()),b("React").createElement("tbody",null,d)),b("React").createElement(b("FalcorDataTooltip"),{contextRef:this.$15,offsetX:8,offsetY:-18,position:"right",shown:this.state.hoveredCell!=null},this.$16()))};d.$11=function(){return this.props.followupEvent.event_rule.event_name};d.$12=function(){return this.props.metric};d.$13=function(a){this.setState({hoveredCell:a})};d.$14=function(a){this.setState(function(b){if(b.hoveredCell===a)return{hoveredCell:null};else return{}})};d.$16=function(){__p&&__p();var a,c=this.state.hoveredCell;if(c==null)return null;c=c.split(" ");var d=c[0];c=c[1];d=parseInt(d,10);c=parseInt(c,10);var e=this.props.cohortData.retentionTable;e=e[d];e=e[c];c=this.$5(d);d=(d=this.props.firstEvent)!=null?(d=d.event_rule)!=null?d.event_name:d:d;a=(a=this.props.followupEvent)!=null?(a=a.event_rule)!=null?a.event_name:a:a;if(d==null||a==null){b("AnalyticsErrorLoggerFactory").getLogger("cohort_table").setErrorMessage("event name is undefined or null").setErrorType("value_undefined").setErrorCause(b("AnalyticsUIErrorCause").UNEXPECTED_DATA_ERROR).log();return null}else return this.$17(e,d,a,c)};d.$4=function(a,c,d){__p&&__p();var e=this.props,f=e.onRowSelect,g=e.onRowDeselect;e=null;if(f&&g){var h=this.props.displayCohorts.indexOf(c)!=-1,i=null,j=null;h?(i="_2je9",j=function(){return f(c)}):(i="_2jea",j=function(){return g(c)});var k=b("InsightsCohortsUtils").getMaxSelectableRows();h=!h&&this.props.displayCohorts.length>=k;k=h?b("InsightsCohortsUtils").getTooltipForDisabledRowSelect():null;e=b("React").createElement(b("Link.react"),babelHelpers["extends"]({},b("Tooltip").propsFor(k),{className:i,onClick:j}),a)}else e=b("React").createElement("span",{className:"_2jea"},a);return b("React").createElement("td",{key:c},b("React").createElement("div",{className:"_2je6"},e,b("React").createElement("div",{className:"_2jeb"},this.$18(d))))};d.$17=function(a,c,d,e){__p&&__p();var f=a.intervalsAfter,g=this.props.cohortData.samplingRate;g=g<=.99?b("AnalyticsCohortsTextUtils").getVarianceSentence(g):null;var h=a.value,j,k;if(h===null)j=b("AnalyticsPredefinedBreakdownValues").OTHER.REDACTED;else{h=Number(h);var l=Number(a.followupEventCount),m=Number(a.firstEventCount);a=Number(a.uniqueUsers);var n=b("InsightsCohortsUtils").getCollationIntervalPluralText(this.props.collationInterval,f);k=b("AnalyticsCohortsTextUtils").getSubTitle(c,e);switch(this.props.metric){case b("AnalyticsCohortMetric").USER_RETENTION:j=b("AnalyticsCohortsTextUtils").getTitleForUserRetention(d,h,m,l,f,n);break;case b("AnalyticsCohortMetric").CUMULATIVE_EVENTS:c=h*a;j=b("AnalyticsCohortsTextUtils").getTitleForCumulativeEvents(d,h,c,f,n);break;case b("AnalyticsCohortMetric").LIFETIME_VALUE:c=h*a;j=b("AnalyticsCohortsTextUtils").getTitleForCumulativeValue(d,h,c,f,n,this.props.cohortData.isCurrencyValues,this.props.currency);break;case b("AnalyticsCohortMetric").VALUE_RETENTION:j=b("AnalyticsCohortsTextUtils").getTitleForValueRetention(d,h,l,f,n,this.props.cohortData.isCurrencyValues,this.props.currency);break;default:i(0,223)}}return b("FalcorDataTooltip").getCohortTableTooltip(j,k,g)};d.$18=function(a){return a.value===null?b("AnalyticsPredefinedBreakdownValues").OTHER.REDACTED:h._("{Unique Users value} Users",[h._param("Unique Users value",b("InsightsNumUtils").prettyShortInt(a.uniqueUsers))])};d.$10=function(a){__p&&__p();if(a.value===null)return"";var c=this.props.currency;a=a.value;var d=a>=1?1:2;switch(this.props.metric){case b("AnalyticsCohortMetric").USER_RETENTION:return b("InsightsNumUtils").prettyPercent(a);case b("AnalyticsCohortMetric").CUMULATIVE_EVENTS:return b("InsightsNumUtils").prettyFloat(parseFloat(a.toFixed(d)));case b("AnalyticsCohortMetric").LIFETIME_VALUE:if(!this.props.cohortData.isCurrencyValues)if(a>100)return b("InsightsNumUtils").prettyShortInt(a);else return b("InsightsNumUtils").prettyFloat(parseFloat(a.toFixed(d)));return b("AnalyticsCohortsTextUtils").formatCurrencyValue(a,c);case b("AnalyticsCohortMetric").VALUE_RETENTION:return b("InsightsNumUtils").prettyPercent(a);default:throw new Error("Unknown chart type")}};return c}(b("React").PureComponent);e.exports=a}),null);
__d("GriffinCohortsBreakdownTableView",["cx","fbt","AnalyticsPagePostData","AnalyticsQueryBreakdownUtils","AnalyticsQueryConstants","AnalyticsRetentionNUXURIAdapter","BonsaiApiBreakdown","FBAMetaLoggerWWW","GriffinNUX","GriffinSelectorOption","InsightsCohortsTableView","React","SUIBusinessTheme","SUISelector.react","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FBAMetaLoggerWWW").META_LOGGER;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={breakdownOptions:c.$1(c.props),selectedBucket:c.$2(c.props)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){this.props.breakdownCohortData!==a.breakdownCohortData&&this.setState({breakdownOptions:this.$1(a),selectedBucket:this.$2(a)})};d.getExportData=function(){var a=this.$3();return a?a.exportData:null};d.render=function(){var a=this.$3();if(!a)return null;var c=this.props,d=c.metric,e=c.collationInterval,f=c.currency,g=c.section,h=c.firstEvent;c=c.followupEvent;return b("React").createElement("div",null,b("React").createElement("div",{className:"_2nnq"},this.$4()),b("React").createElement(b("InsightsCohortsTableView"),{cohortData:a,collationInterval:e,currency:f,displayCohorts:[],firstEvent:h,followupEvent:c,metric:d,section:g}))};d.$3=function(){var a=this.props.breakdownCohortData,b=this.state.selectedBucket;return!b?null:a[b]};d.$2=function(a){a=Object.keys(a.breakdownCohortData);if(a.length===0)return null;else return a[0]};d.$1=function(a){__p&&__p();var c=this,d=a.breakdown;a=a.breakdownCohortData;a=Object.keys(a);var e=a.length>=b("AnalyticsQueryConstants").cardinality_limit;b("AnalyticsQueryBreakdownUtils").getBreakdownName(d)===b("BonsaiApiBreakdown").POST&&b("promiseDone")(b("AnalyticsPagePostData").loadAll(a),function(){return c.setState(function(a){return{breakdownOptions:a.breakdownOptions.map(function(a){return babelHelpers["extends"]({},a,{label:b("AnalyticsQueryBreakdownUtils").getBreakdownValueDisplayString(d,a.key,null,e)})})}})});return a.map(function(a){return{key:a,label:b("AnalyticsQueryBreakdownUtils").getBreakdownValueDisplayString(d,a,null,e),tooltip:b("AnalyticsQueryBreakdownUtils").getBreakdownTooltipDisplayString(d,a)}})};d.$4=function(){__p&&__p();var a=this,c=this.props.breakdown,d=this.state,e=d.selectedBucket;d=d.breakdownOptions;if(!e)return null;d=b("React").createElement(b("SUISelector.react"),{onChange:function(b){a.setState({selectedBucket:b}),i.logEvent("Cohorts_BreakdownTableSelector_Change",{breakdown:c,bucket:b})},onOpen:function(){return i.logEvent("Cohorts_BreakdownTableSelector_Open",{breakdown:c,bucket:e})},theme:b("SUIBusinessTheme"),value:e},d.map(function(a){return b("React").createElement(b("GriffinSelectorOption"),{key:a.key,tooltip:a.tooltip,value:a.key},a.label)}));var f=b("AnalyticsRetentionNUXURIAdapter").currentURIHasShowNUXParam();f=f?b("React").createElement(b("GriffinNUX"),{canShow:!0,contextRef:"selector",dismissOnBlur:!1,onDismiss:b("AnalyticsRetentionNUXURIAdapter").removeNUXParamFromURI,position:"left",title:h._("Choose which breakdown group to view the retention heat map for."),width:"normal"},d):d;return b("React").createElement("span",null,h._("Cohorts for: {selector for breakdown bucket value}",[h._param("selector for breakdown bucket value",f)]))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("InsightsCohortsAverageChartView",["cx","fbt","invariant","ix","AnalyticsCard","AnalyticsCohortCollationInterval","AnalyticsCohortMetric","AnalyticsExportUtils","AnalyticsGKNames","AnalyticsGKs","AnalyticsRetentionNUXURIAdapter","AnalyticsSegmentUtils","BonsaiColors","CandelaConstants","CandelaGroupScaleBuilder","CandelaStyleSheet","FalcorCommonViews","FalcorErrorNotice","FalcorInsightsHoverCardChart","FalcorInsightsLineAreaChart.react","FalcorLoadingCard_DEPRECATED","FalcorNotEnoughDataNotice","FBAMetaLoggerWWW","FBASegmentBuilderFeatureLoggerSuccessProxy","FlexibleBlock.react","GriffinAdHocCohortBuilder","GriffinBreakdownSearchableSelector","GriffinButton","GriffinCardHeaderControl","GriffinCohortsBreakdownChartView","GriffinCohortsBreakdownTableView","GriffinLegendItem","GriffinNUX","GriffinPinButton","GriffinSections","GriffinSelector","GriffinSelectorOption","Image.react","InsightsCohortsTableView","InsightsCohortsUtils","InsightsLegendScrollableVert.react","LTVPredictorAnalyticsDialogButtonContainer.react","React","ReactDOM","SUIBusinessTheme","SUIButton.react","SUIToggleButtonGroup.react","Tooltip","emptyFunction","immutable","nullthrows","suiMargin","update"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("CandelaConstants").RenderAs,l=b("CandelaConstants").ScaleType,m=b("FBAMetaLoggerWWW").META_LOGGER,n=b("immutable").Map,o=b("immutable").OrderedSet,p=b("CandelaGroupScaleBuilder").group,q=h._("Edit"),r="xAxis",s=(a={},a[b("GriffinSections").LIFETIME_VALUE]=h._("Measures the value of users, based on the revenue that was generated over time, starting with an initial interaction. An initial interaction can be the first web view for a website, an app install for an app or the first Page view for a Page. Lifetime value can be viewed in daily, weekly or monthly intervals."),a[b("GriffinSections").RETENTION]=h._("Shows the percentage of people who return to your website, app, Page or other channel after initial interaction. An initial interaction can be the first web view for a website, an app install for an app or the first Page view for a Page. Retention can be viewed in daily, week or monthly intervals."),a),t=b("InsightsCohortsUtils").getLineChartColors(),u=b("CandelaStyleSheet").fromJS({'axis[orientation="vertical"]':{width:55},'gridline[orientation="vertical"]':{visibility:"hidden"}}),v=230,w="#dddfe2",x=320;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=null;d.$2=null;d.$3=null;d.$4=null;d.$8=function(){d.$1=b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d)),d.$1&&d.setState({chartWidth:d.$9()})};d.$10=function(){m.logEvent("Cohorts_Builder_Toggle",{feature_id:d.props.cohortsID,view:b("FalcorCommonViews").DETAILS,shown:d.state.showBuilder?"false":"true",ad_hoc:"true"}),d.setState(function(a){a=a.showBuilder;return{showBuilder:!a}})};d.$20=function(a){a=(a=a)!=null?(a=a.data)!=null?a[r]:a:a;if(!a)return;a=b("InsightsCohortsUtils").getIntervalAfterTooltipLabel(a.value,d.props.collationInterval);d.state.auxiliaryItems.first()!==a&&d.setState({auxiliaryItems:o([{key:"interval",value:a}])})};d.$27=function(a){var b=d.state.displayCohorts.findIndex(function(b){return b.index===a});b>=0&&!d.state.displayCohorts[b].disabled&&d.$24(b,!0)};d.$26=function(a){var b=d.state.displayCohorts.findIndex(function(b){return b.index===a});b>=0&&d.$24(b,!1)};d.exportData=function(){__p&&__p();if(d.$4!=null&&d.$4.getExportData!=null)return{data:b("nullthrows")(d.$4.getExportData()),fileName:"NOT_USED"};if(d.$3!=null&&d.$3.getExportData)return{data:b("nullthrows")(d.$3.getExportData()),fileName:"NOT_USED"};if(d.$2!=null){var a=d.$2,c=a.data;a=a.schema;return{data:b("nullthrows")(b("AnalyticsExportUtils").getFormattedData(c,a)),fileName:"NOT_USED"}}a=(c=d.props)!=null?(c=c.cohortData)!=null?c.exportData:c:c;a||i(0,1016);return a};d.state={displayCohorts:d.$5(d.props.cohortData),chartWidth:0,auxiliaryItems:o([{key:"interval",value:b("InsightsCohortsUtils").getIntervalAfterTooltipLabel(0,d.props.collationInterval)}]),showBuilder:!0};return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){if(this.props.cohortData!=a.cohortData){a=this.$5(a.cohortData);this.setState({displayCohorts:a})}};d.componentDidUpdate=function(a){this.$6(a)&&this.$7(this.props)&&b("FBASegmentBuilderFeatureLoggerSuccessProxy").chartUpdated()};d.$6=function(a){var b=(!a.firstEvent.event_rule||!a.followupEvent.event_rule)&&!a.cohortData;return b||a.error||a.isEmptyData?!1:!a.breakdownData&&!a.cohortData};d.$7=function(a){var b=(!a.firstEvent.event_rule||!a.followupEvent.event_rule)&&!a.cohortData;return b||a.error||a.isEmptyData?!1:!!(a.breakdownData||a.cohortData)};d.componentDidMount=function(){this.$8(),window.addEventListener("resize",this.$8)};d.componentWillUnmount=function(){window.removeEventListener("resize",this.$8)};d.$9=function(){var a=window.getComputedStyle(this.$1).width;return parseFloat(a)-v};d.$11=function(){var a=this.props,b=a.breakdownData;a=a.cohortData;return!b&&!a};d.$12=function(){var a=this.props,c=a.allowedCollationIntervals,d=a.cohortsID,e=a.collationInterval;a=a.onCollationIntervalChange;if(!c)return null;var f=Object.keys(b("AnalyticsCohortCollationInterval")).map(function(a){var d=c&&c.indexOf(a)===-1,e=d?b("InsightsCohortsUtils").getTooltipForCollationInterval(a):null,f=b("InsightsCohortsUtils").getDisplayStringForCollationInterval(a);return b("React").createElement(b("GriffinSelectorOption"),{disabled:d,key:a,tooltip:e,value:a},f)}),g=h._("Time interval");return b("React").createElement(b("GriffinCardHeaderControl"),{key:"time_interval_header",label:g},b("React").createElement(b("GriffinSelector"),{disabled:this.$11(),key:"collation_interval_selector",onChange:(g=a)!=null?g:b("emptyFunction"),onOpen:function(){return m.logEvent("Cohorts_IntervalSelector_Open",{feature_id:d})},value:e},f))};d.$13=function(){__p&&__p();var a=this.props,c=a.allowedMetrics,d=a.metric,e=a.cohortsID;a=a.onMetricChange;if(!c)return null;var f=Object.keys(b("AnalyticsCohortMetric")).filter(function(a){return a!==b("AnalyticsCohortMetric").CUMULATIVE_USER_RETENTION}).map(function(a){var d=c&&c.indexOf(a)===-1,e=d?b("InsightsCohortsUtils").getTooltipForMetric(a):null;return b("React").createElement(b("GriffinSelectorOption"),{disabled:d,key:a,tooltip:e,value:a},b("InsightsCohortsUtils").getDisplayStringForMetric(a))}),g=h._("Metric");return b("React").createElement(b("GriffinCardHeaderControl"),{key:"metric_header",label:g},b("React").createElement(b("GriffinSelector"),{key:"chart_type_selector",onChange:a||b("emptyFunction"),onOpen:function(){return m.logEvent("Cohorts_MetricSelector_Open",{feature_id:e})},value:d},f))};d.$14=function(){var a=this.props.section;if(a===b("GriffinSections").RETENTION||a===b("GriffinSections").LIFETIME_VALUE)return null;a=this.state.showBuilder;a=a?"default":"confirm";return b("React").createElement(b("GriffinButton"),{className:"_3-90",key:"edit_button",label:q,onClick:this.$10,ref:"editButton",use:a})};d.$15=function(){__p&&__p();var a=this.props,c=a.cohortData,d=a.error,e=a.firstEvent,f=a.followupEvent;a=a.isEmptyData;e=(!e.event_rule||!f.event_rule)&&!c;if(d)return b("React").createElement(b("FalcorErrorNotice"),{message:d.getMessage()});else if(a)return b("React").createElement(b("FalcorNotEnoughDataNotice"),{height:x});else if(e)return b("React").createElement(b("AnalyticsCard"),{cardKey:"insights_cohorts_average_chart_view",className:"_2kqs"},b("React").createElement(b("Image.react"),{src:j("82508")}),b("React").createElement("div",{className:"_3-8-"},h._("Create your cohort by selecting two events")));else if(this.$11())return b("React").createElement(b("FalcorLoadingCard_DEPRECATED"),{showCard:!1});return b("React").createElement("div",null,this.$16(),this.$17())};d.render=function(){__p&&__p();var a=this.props,c=a.cohortName,d=a.cohortsID,e=a.cohortData,f=a.firstEvent,g=a.followupEvent,i=a.helptext,j=a.isImported,k=a.isLoading,l=a.section,m=a.showDataOnly,n=a.title;a=a.subtitle;var o=this.state.showBuilder;if(k)return b("React").createElement(b("FalcorLoadingCard_DEPRECATED"),null);if(m)return this.$15();m=this.$14();var p=l===b("GriffinSections").RETENTION||l===b("GriffinSections").LIFETIME_VALUE;p=p?null:this.$13();var q=this.$12(),r=this.$18(),t=b("React").createElement(b("GriffinPinButton"),{chartKey:"cohort",key:"pin"}),u=l===b("GriffinSections").COHORTS;o=!(o&&u);u=b("React").createElement("div",{hidden:o},b("React").createElement(b("GriffinAdHocCohortBuilder"),{anchor:this.refs.editButton,cohortName:c,cohortsID:d,firstEvent:b("AnalyticsSegmentUtils").toLooseEventRule(f),followupEvent:b("AnalyticsSegmentUtils").toLooseEventRule(g),isImported:j,isLoading:k,key:"cohort_builder",onApply:this.props.onCohortChange}));c=l!==b("GriffinSections").LIFETIME_VALUE?{key:b("InsightsCohortsUtils").getInfoCMSKey(l),title:h._("Your cohort"),extra:i}:null;d=this.$19();f=this.props.section===b("GriffinSections").RETENTION&&b("AnalyticsGKs").get(b("AnalyticsGKNames").ANALYTICS_PLTV_CHART)?b("React").createElement(b("LTVPredictorAnalyticsDialogButtonContainer.react"),{cohortAverageRetention:e?e.weightedAverages:null,collationInterval:this.props.collationInterval,key:"pltv"}):null;return b("React").createElement(b("AnalyticsCard"),{buttons:[f,d,p,q,r,m],cardKey:"insights_cohorts_average_chart_view",getExportData:this.exportData,helpText:c,pinButton:t,showLine:o,subtitle:a,title:n,tooltip:s[this.props.section]},u,this.$15())};d.$18=function(){var a=this;if(!this.props.onBreakdownChange)return null;var c=h._("Show by"),d=b("React").createElement(b("GriffinBreakdownSearchableSelector"),{events:[this.props.firstEvent.event_rule.event_name,this.props.followupEvent.event_rule.event_name],isDisabled:!1,key:"breakdown_selector",onChange:this.props.onBreakdownChange,onOpened:function(){return m.logEvent("Cohorts_BreakdownSelector_Open",{feature_id:a.props.cohortsID})},ref:"selector",selectedBreakdown:this.props.breakdown,showHighCardinalityBreakdowns:!0,showOverall:!0,showSessionProperties:!1,showWebParams:!1,width:"auto"}),e=b("AnalyticsRetentionNUXURIAdapter").currentURIHasShowNUXParam();e=e?b("React").createElement(b("GriffinNUX"),{canShow:!0,contextRef:"selector",dismissOnBlur:!0,onDismiss:b("AnalyticsRetentionNUXURIAdapter").removeNUXParamFromURI,position:"left",title:h._("Show retention by channels, devices and more."),width:"normal"},d):d;return b("React").createElement(b("GriffinCardHeaderControl"),{key:"show_by_header",label:c},e)};d.$21=function(a,c,d,e,f){__p&&__p();var g=this.props,h=g.metric;g=g.cohortData;g||i(0,5331);var j=g.colLabels.slice(0,f),m=[],q={},s={},t=j.map(function(a){var b={};b[r]=a;return b});q[r]={type:l.NUMBER};var v=b("InsightsCohortsUtils").getCandelaScale(h,g.isCurrencyValues);a.forEach(function(a,b){var f="bucket_"+b;m.push(f);q[f]={type:v,currencyCode:v===l.CURRENCY?d:null,renderAs:k.LINE,label:e.filter(function(a){return a.checked})[b].legend};s[f]=c[b];a.forEach(function(a,b){t[b][f]=a})});j=o(Object.keys(t[0]).map(function(a){if(a===r)return{};var b=q[a].label;return{label:b,key:a}}));t!=null&&q!=null&&(this.$2={data:t,schema:q});return b("React").createElement(b("FalcorInsightsHoverCardChart"),{auxiliaryItems:this.state.auxiliaryItems,hoverCardPosition:"right",items:j},b("React").createElement(b("FalcorInsightsLineAreaChart.react"),{autoColors:n(s),axisMarkFormatterFactory:b("InsightsCohortsUtils").getCandelaChartAxisFormatterFactory(),data:t,height:x,onMouseMove:this.$20,plotX:p(r).stepCountHint(f-1),plotY:[p.apply(void 0,m).from(0).niceStepOnly()],schema:q,styleSheet:u,width:this.state.chartWidth}))};d.$16=function(){__p&&__p();var a=this,c=this.props,d=c.breakdown,e=c.breakdownData,f=c.metric,g=c.cohortData,h=c.collationInterval,j=c.currency,k=c.hideLineChart;c=c.section;if(k===!0)return null;if(e)return b("React").createElement(b("GriffinCohortsBreakdownChartView"),{breakdown:d,breakdownCohortData:e,collationInterval:h,currency:j,metric:f,ref:function(b){return a.$3=b},section:c});g||i(0,5331);var l=[],m=[],n=[],o=-1;this.state.displayCohorts.forEach(function(b){if(b.checked){var c=a.$22(b);l.push(c);b.color!=null&&m.push(b.color);o<c.length&&(o=c.length)}c=g.rowLabels[b.index];n.push({legend:c,checked:b.checked,color:b.color,disabled:b.disabled})});k=this.$21(l,m,j,n,o);return b("React").createElement(b("FlexibleBlock.react"),{"data-testid":"cohorts_chart",flex:"right"},b("React").createElement("div",{className:"_2dpn"},b("React").createElement("div",{className:"_38wy"},b("InsightsCohortsUtils").getGraphLabelForMetric(f)),k,b("React").createElement("div",{className:"_38wz"},b("InsightsCohortsUtils").getCollationIntervalForChartCaption(h))),this.$23(n))};d.$23=function(a){var c=this,d=b("InsightsCohortsUtils").getTooltipForDisabledRowSelect();a=a.map(function(a,e){return b("React").createElement("div",babelHelpers["extends"]({key:e},b("Tooltip").propsFor(a.disabled?d:null),{className:"_4vge"}),b("React").createElement(b("GriffinLegendItem"),{checkboxStyle:{border:"1px solid "+w},color:a.disabled?w:a.color||b("BonsaiColors").WHITE,disabled:a.disabled||!a.checked,label:a.legend,onToggle:function(){return!a.disabled&&c.$24(e,!a.checked)}}))});return b("React").createElement("div",{className:"_4ygo"},this.$25(),b("React").createElement(b("InsightsLegendScrollableVert.react"),{height:300,width:140},a))};d.$25=function(){return b("React").createElement("div",{className:"_4ygp"},b("InsightsCohortsUtils").getSectionNameText(this.props.section))};d.$19=function(){if(!this.props.purchaserToggleValue||!this.props.onPurchaserToggleChange)return null;var a=this.props.onPurchaserToggleChange,c=this.props.purchaserToggleValue;return b("React").createElement("span",{className:"_1w24",key:"purchaser_header"},b("React").createElement(b("SUIToggleButtonGroup.react"),{key:"purchaser_toggle",onChange:a,theme:b("SUIBusinessTheme"),value:c},b("React").createElement(b("SUIButton.react"),babelHelpers["extends"]({},b("Tooltip").propsFor(h._("Includes those who have made a purchase and those who have not."),"below"),{key:"all_users",label:h._("All Users"),value:"all_users"})),b("React").createElement(b("SUIButton.react"),babelHelpers["extends"]({},b("Tooltip").propsFor(h._("Only includes users who have made a purchase."),"below"),{key:"purchaser",label:h._("Paying Users"),value:"purchasers"}))))};d.$17=function(){var a=this,c=this.props,d=c.firstEvent,e=c.followupEvent;c=c.hideHeatmap;if(c===!0)return null;return this.props.breakdownData?b("React").createElement(b("GriffinCohortsBreakdownTableView"),{breakdown:this.props.breakdown,breakdownCohortData:this.props.breakdownData,collationInterval:this.props.collationInterval,currency:this.props.currency,firstEvent:d,followupEvent:e,metric:this.props.metric,ref:function(b){return a.$4=b},section:this.props.section}):b("React").createElement("div",{"data-testid":"cohorts_table"},b("React").createElement(b("InsightsCohortsTableView"),{cohortData:b("nullthrows")(this.props.cohortData),collationInterval:this.props.collationInterval,currency:this.props.currency,displayCohorts:this.state.displayCohorts.filter(function(a){return a.checked&&a.index>=0}).map(function(a){return a.index}),firstEvent:d,followupEvent:e,metric:this.props.metric,onRowDeselect:this.$26,onRowSelect:this.$27,section:this.props.section}))};d.$22=function(a){var c=this.props.cohortData,d;if(!c)return[];a.cohortDataKey?d=c[a.cohortDataKey]:d=c.retentionTable[a.index-1];d=d.filter(function(a){return a.value!=null}).map(function(a){return b("nullthrows")(a.value)});return d};d.$24=function(a,c){__p&&__p();var d={};d[a]={$merge:{checked:c,color:c?this.$28():null}};d=b("update")(this.state.displayCohorts,d);if(d.every(function(a){return!a.checked}))d=this.state.displayCohorts;else{var e=d.filter(function(a){return a.checked}).length,f=e>=b("InsightsCohortsUtils").getMaxSelectableRows();d.forEach(function(a){return a.disabled=!a.checked&&f})}m.logEvent("Cohorts_Chart_Change",{index:a,action:c?"add":"remove",display_count:this.state.displayCohorts.filter(function(a){return a.checked}).length,time_interval:this.props.collationInterval.toLowerCase(),metric:this.props.metric.toLowerCase()});this.setState({displayCohorts:d})};d.$5=function(a){__p&&__p();if(!a)return[];var b=0,c=[{checked:!0,index:b++,cohortDataKey:"weightedAverages",disabled:!1}],d=2;c=c.concat(a.retentionTable.map(function(a,c){return{checked:c<d,index:c+b,disabled:!1}}).filter(function(b,c){return a&&a.retentionTable[c][0].uniqueUsers!=null}));var e=0;c.forEach(function(a){a.color=a.checked?t[e++]:null});return c};d.$28=function(){var a=this.$29();a&&a.length>0||i(0,5332);return a[0]};d.$30=function(){return this.state&&this.state.displayCohorts?this.state.displayCohorts.filter(function(a){return!!a.color}).map(function(a){return b("nullthrows")(a.color)}):[]};d.$29=function(){var a=this.$30();return t.filter(function(b){return a.indexOf(b)===-1})};return c}(b("React").PureComponent);e.exports=c}),null);
__d("GriffinCohortsView",["cx","fbt","invariant","AnalyticsAcquisitionSourceData","AnalyticsBuiltInBreakdowns","AnalyticsCohortCollationInterval","AnalyticsCohortMetric","AnalyticsQueryCurrency","FalcorSamplingVariance","InsightsCohortsAverageChartView","React","promiseDone"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=[b("AnalyticsBuiltInBreakdowns").ACQUISITION_SOURCE_L1,b("AnalyticsBuiltInBreakdowns").ACQUISITION_SOURCE_L2,b("AnalyticsBuiltInBreakdowns").ACQUISITION_SOURCE_L3];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={acquisitionSourceNamesLoaded:!1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1(this.props)};d.componentDidUpdate=function(a){this.props.breakdownData!==a.breakdownData&&this.$1(this.props)};d.$1=function(a){var c=this,d=a.breakdownData;a=a.breakdown;if(!d||j.indexOf(a)<0)return;this.setState({acquisitionSourceNamesLoaded:!1});b("promiseDone")(b("AnalyticsAcquisitionSourceData").loadAll(Object.keys(d)),function(){c.setState({acquisitionSourceNamesLoaded:!0})})};d.getExportData=function(){var a;try{a=this.refs.view&&this.refs.view.exportData().data}catch(b){a=null}return a};d.render=function(){var a=this.props,c=a.allowedMetrics,d=a.allowedCollationIntervals,e=a.breakdown,f=a.metric,g=a.cohortName,h=a.cohortsID,i=a.collationInterval,j=a.error,k=a.firstEvent,l=a.followupEvent,m=a.hideHeatmap,n=a.hideLineChart,o=a.isEmptyData,p=a.isImported,q=a.isLoading,r=a.onBreakdownChange,s=a.onMetricChange,t=a.onCohortChange,u=a.onCollationIntervalChange,v=a.onPurchaserToggleChange,w=a.purchaserToggleValue,x=a.section,y=a.showDataOnly,z=a.subtitle;a=a.title;return b("React").createElement(b("InsightsCohortsAverageChartView"),{allowedCollationIntervals:d,allowedMetrics:c,breakdown:e,breakdownData:this.$2(),cohortData:this.$3(),cohortName:g,cohortsID:h,collationInterval:i,currency:b("AnalyticsQueryCurrency").get(),error:j,firstEvent:k,followupEvent:l,helptext:this.$4(),hideHeatmap:m,hideLineChart:n,isEmptyData:Boolean(o),isImported:p,isLoading:Boolean(q),metric:f,onBreakdownChange:r,onCohortChange:t,onCollationIntervalChange:u,onMetricChange:s,onPurchaserToggleChange:v,purchaserToggleValue:w,ref:"view",section:x,showDataOnly:y,subtitle:z,title:a})};d.$2=function(){var a=this,b=this.props,c=b.metric,d=b.breakdownData;if(!d)return null;var e="Breakdown_cohorts",f={};Object.keys(d).forEach(function(b){f[b]=a.$5(c,d[b],e)});return f};d.$5=function(a,c,d){switch(a){case b("AnalyticsCohortMetric").USER_RETENTION:return c.getUserRetentionData(d);case b("AnalyticsCohortMetric").CUMULATIVE_EVENTS:return c.getCumulativeCountData(d);case b("AnalyticsCohortMetric").LIFETIME_VALUE:return c.getCumulativeValueData(d);case b("AnalyticsCohortMetric").VALUE_RETENTION:return c.getValueRetentionData(d);default:i(0,4482)}};d.$3=function(){var a=this.props,b=a.metric,c=a.cohortData;a=a.isEmptyData;if(!c||a===!0)return null;a="Retention";return this.$5(b,c,a)};d.$4=function(){__p&&__p();var a=this.props.cohortData;if(!a)return null;var c=a.getSamplingRate(),d=a.getFirstEventUniquesCount();a=a.getFollowupEventUniquesCount();d=b("FalcorSamplingVariance").getVarianceSentence(d,c);var e=null;d!==null&&(e=b("React").createElement("div",null,h._("Initial event: {first event's variance sentence}.",[h._param("first event's variance sentence",d)])));d=b("FalcorSamplingVariance").getVarianceSentence(a,c);a=null;d!==null&&(a=b("React").createElement("div",null,h._("Follow-up event: {followup event's variance sentence}.",[h._param("followup event's variance sentence",d)])));c=null;!e&&!a?c=h._("This report is based on unsampled data"):c=h._("This report is based on sampled data");return b("React").createElement("div",null,b("React").createElement("div",{className:"_13i9"},c),e,a)};return c}(b("React").Component);e.exports=a}),null);
__d("GriffinSegmentDemographicsRuleBuilder",["ix","cx","fbt","invariant","AnalyticsPredefinedBreakdowns","AnalyticsQueryApi","AnalyticsQueryBreakdownUtils","AnalyticsSegmentUtils","AppCustomEventType","AppEventsAggregatingColumn","AppUserPropertyAPIBuiltinField","AppUserPropertyConfigStore","CurrentAnalyticsEntity","FalcorBreakdownsTextUtils","FalcorSegmentTextUtils","FluxContainer","GriffinLooseParameterRuleBuilder","GriffinParameterRuleBuilder","GriffinSegmentOperatorConfig","GriffinSegmentRules","InternalAnalyticsQueryBuilder","React","SUIAnalyticsGriffinTheme","SUIBusinessTheme","SUIGlyphIcon.react","SUISpinner.react","SUITooltip.react","XUICloseButton.react","asset"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={userProperties:b("AppUserPropertyConfigStore").getActiveProperties()},d.$3=function(a,c){__p&&__p();if(a==null){c([]);return}var e=a;d.props.rule.ruleType===b("GriffinSegmentRules").Types.USER_PROPERTY&&(e===b("AppUserPropertyAPIBuiltinField").GENDER?e=b("AppEventsAggregatingColumn").GENDER:e=b("AnalyticsQueryBreakdownUtils").getUserProperty(e));var f=d.$5(e);if(f&&e!==b("AppEventsAggregatingColumn").SDK_VERSION){c(f);return}d.$1&&!d.$1.isCancelled()&&d.$1.cancelQuery();d.$1=new(b("InternalAnalyticsQueryBuilder"))().setAnalyticsEntityID(b("CurrentAnalyticsEntity").getID()).setEventName(b("AppCustomEventType").FB_BASE_EVENT).setBreakdowns([e]).setLimit(b("GriffinParameterRuleBuilder").TYPEAHEAD_LIMIT).setOnSuccess(function(a){d.$1&&(d.$1=null);a=a.getBreakdownUniqueValues(e).toJS();a=d.$6(e,a);a=d.$7(a,f);c(a)}).setOnError(function(a){return c([])}).getTopBreakdownCountInLast28DayQuery();b("AnalyticsQueryApi").queryAppEventData([d.$1])},d.$4=function(a){a.ruleType=d.props.rule.ruleType,d.props.onChange(babelHelpers["extends"]({},a))},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("AppUserPropertyConfigStore")]};c.calculateState=function(a){return{userProperties:b("AppUserPropertyConfigStore").getActiveProperties()}};var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.props.rule.ruleType===b("GriffinSegmentRules").Types.USER_PROPERTY;if(c){c=this.state.userProperties;if(c==null)return b("React").createElement(b("SUISpinner.react"),{theme:b("SUIBusinessTheme")});c=c.map(function(a){return{parameter_name:a,display_name:b("FalcorSegmentTextUtils").getUserPropertyLabel(a)}})}else{this.props.rule.ruleType!=null||j(0,1010);var d=b("GriffinSegmentRules").TypeValues[this.props.rule.ruleType];c=Object.keys(d).map(function(a){return{parameter_name:a,display_name:b("FalcorSegmentTextUtils").getDemographicLabel(a)}}).filter(function(b){return a.props.hiddenParameterNames.indexOf(b.parameter_name)===-1})}d=this.props.rule.parameter_name;if(this.props.disabledDemographicRule){var e=b("React").createElement(b("XUICloseButton.react"),{className:"_3kul",href:"#",onClick:this.props.onRemoveRule,size:"medium"});return b("React").createElement("div",{className:"_87px"},e,b("React").createElement("div",{className:"_87py"},b("React").createElement(b("SUITooltip.react"),{theme:b("SUIAnalyticsGriffinTheme"),tooltip:i._("Demographic conditions are currently unavailable.")},b("React").createElement(b("SUIGlyphIcon.react"),{srcDefault:g("479819"),style:{verticalAlign:"sub"}}))))}return b("React").createElement("div",{className:"_2cnx"},b("React").createElement(b("GriffinLooseParameterRuleBuilder"),{allowCustomValue:this.$2(d),getParameterDisplayValue:function(c,d){return b("FalcorBreakdownsTextUtils").getBreakdownValueDisplayString(c,d,null,a.props.rule.ruleType)},loadParameterValues:this.$3,onAdd:this.props.onAdd,onChange:this.$4,onDelete:this.props.onRemoveRule,parameterRule:this.props.rule,parameterSelectorLabel:this.props.defaultParamName,parameters:c,showAddButton:this.props.showAddButton,showAnd:!1}))};d.$2=function(a){if(a==null)return!1;var c=b("AnalyticsPredefinedBreakdowns").coerceBreakdown(a);if(this.props.rule.ruleType===b("GriffinSegmentRules").Types.USER_PROPERTY)return a!==b("AppUserPropertyAPIBuiltinField").GENDER;return a===b("GriffinSegmentRules").Demographic[b("AppEventsAggregatingColumn").CITY_CODE]||a===b("GriffinSegmentRules").Demographic[b("AppEventsAggregatingColumn").REGION_CODE]?!1:!(c&&b("AnalyticsPredefinedBreakdowns").getDisplayValues(c))};d.$5=function(a){if(a===b("AppEventsAggregatingColumn").EVENT_SOURCE)return Array.from(b("CurrentAnalyticsEntity").getEventSources()).map(function(a){return{uniqueID:String(a.id),title:a.name}});a=b("AnalyticsPredefinedBreakdowns").coerceBreakdown(a);var c=a&&b("AnalyticsPredefinedBreakdowns").getDisplayValues(a);if(c)return Object.keys(c).map(function(a){return{uniqueID:a,title:c[a]}});else return null};d.$6=function(a,c){return c.map(function(c){return{uniqueID:c,title:b("AnalyticsQueryBreakdownUtils").getBreakdownValueDisplayString(a,c)}})};d.$7=function(a,c){return!c||c.length===0?[].concat(a):b("AnalyticsSegmentUtils").dedupArray(a.concat(c),this.$8)};d.$8=function(a,b){return a.uniqueID===b.uniqueID};return c}(b("React").Component);a.defaultProps={disabledDemographicRule:!1,rule:{},showAddButton:!1};e.exports=b("FluxContainer").create(a)}),null);
__d("GriffinSegmentInstallSourceRuleBuilder",["fbt","invariant","AnalyticsAcquisitionSourceData","AnalyticsDateRangeStore","AnalyticsPredefinedBreakdownValues","AnalyticsQueryAggregationMethod","AppCustomEventType","CurrentAnalyticsEntity","CustomEventStore","FalcorBreakdownsTextUtils","FalcorSegmentRuleUtils","FBAMetaLoggerWWW","GriffinAcquisitionSourceUtils","GriffinLooseParameterRuleBuilder","GriffinSegmentRules","GriffinSelector","GriffinSelectorOption","InsightsGraphAPI","InternalAnalyticsQueryBuilder","React","immutable","isValidID","update"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("FBAMetaLoggerWWW").META_LOGGER,j=b("immutable").List,k=b("immutable").Map,l=b("GriffinSegmentRules").Operators,m=b("GriffinSegmentRules").Types.ACQUISITION_SOURCE,n=b("GriffinAcquisitionSourceUtils").ACQUISITION_SOURCE_TOP_LEVEL,o=b("GriffinAcquisitionSourceUtils").ACQUISITION_SOURCE_L1,p=b("GriffinAcquisitionSourceUtils").ACQUISITION_SOURCE_L2,q=b("GriffinAcquisitionSourceUtils").ACQUISITION_SOURCE_L3,r=b("GriffinAcquisitionSourceUtils").ACQUISITION_SOURCES,s=b("GriffinAcquisitionSourceUtils").ACQUISITION_TYPE,t=b("GriffinAcquisitionSourceUtils").ACQUISITION_SOURCE_WILDCARD_KEY;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.state={searchSources:r.toMap().flip().map(function(a){return null})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){i.logEvent("InstallSource_Builder_Open")};d.UNSAFE_componentWillReceiveProps=function(a){var b=this.$2(this.props.rule);a=this.$2(a.rule);if(!b||!a)return;b=this.$3(b,a);b&&this.$4(b)};d.componentWillUnmount=function(){this.$1&&this.$1.cancel()};d.render=function(){var a=this,c=r.filter(function(b){return a.$5(b)}).map(function(b){return a.$6(b)});return b("React").createElement("div",null,c)};d.$3=function(a,b){return r.find(function(c){return!j(a.get(c)).equals(j(b.get(c)))})};d.$5=function(a){return!this.$7(a,this.$8())};d.$9=function(a){var b=this.$10(),c=[o,p,q].map(function(a){return b.get(a)}),d=c[0],e=c[1];c=c[2];switch(a){case n:return d!==void 0&&d.length>0||e!==void 0&&e.length>0||c!==void 0&&c.length>0;case o:return e!==void 0&&e.length>0||c!==void 0&&c.length>0;case p:return c!==void 0&&c.length>0;case q:return!1;default:h(0,880)}};d.$8=function(){switch(this.props.rule.parameter_name){case n:return n;case o:return o;case p:return p;case q:return q;default:return n}};d.$11=function(a){switch(a){case n:case o:return n;case p:return o;case q:return p;default:h(0,880)}};d.$12=function(a){switch(a){case n:return o;case o:return p;case p:case q:return q;default:h(0,880)}};d.$7=function(a,b){return a!==s&&b!==s&&r.indexOf(a)>r.indexOf(b)};d.$2=function(a){a=a.values;if(a&&a.length!==0)try{return k(JSON.parse(a[0]))}catch(a){return null}else return null};d.$10=function(){__p&&__p();var a=this.props.rule.values;if(a&&a.length!==0){var b=this.$2(this.props.rule);if(b)return b;else{var c=a[0].split("/");return r.toMap().flip().map(function(a,b){return a<c.length?[c[a]]:[]})}}else return r.toMap().flip().map(function(){return[]})};d.$13=function(a){var b;b=(b=this.props.rule.operator)!=null?b:l.ieq;var c=a,d=m;a=this.$10().get(c,this.$9(a)?[t]:[]);return{operator:b,parameter_name:c,ruleType:d,values:a}};d.$14=function(a){a=this.state.searchSources.get(a);return a?a.toArray():[]};d.$15=function(a){a=this.state.searchSources.get(a);return a!==null};d.$16=function(a,c){__p&&__p();var d=this,e=this.$13(this.$11(a));e.values=this.props.rule.values?[JSON.stringify(this.$10())]:[];e=b("FalcorSegmentRuleUtils").isValidRule(e)&&a!==n?{event_info_rules:[e],event_rules:[],percentile_rules:[],user_property_rules:[]}:null;var f=b("CustomEventStore").hasEvent(b("AppCustomEventType").FB_MOBILE_ACTIVATE_APP)?b("AppCustomEventType").FB_MOBILE_ACTIVATE_APP:b("AppCustomEventType").FB_MOBILE_INSTALL;this.$1&&this.$1.cancel();this.$1=new(b("InternalAnalyticsQueryBuilder"))().setAnalyticsEntityID(b("CurrentAnalyticsEntity").getID()).setEventName(f).setFilters(e).setAggregations([b("AnalyticsQueryAggregationMethod").COUNT]).setBreakdowns([a.toLowerCase()]).setOrderingColumns(["COUNT"]).setOrderingType("DESCENDING").setIntervalsToAggregate(0).setDateRangeUTC(b("AnalyticsDateRangeStore").getVisibleDateRange()).getQueryAsPromise();var g=function(c,d){c=c.map(function(c){var e=c[d];c=b("FalcorBreakdownsTextUtils").getBreakdownValueDisplayString(a,c[d]);return{title:c,uniqueID:e}});return c.push({title:b("AnalyticsAcquisitionSourceData").getWildcardDisplayName(),uniqueID:t})};this.$1!==null&&this.$1!==void 0||h(0,881);this.$1.promise.done(function(e){var f=b("immutable").List(e.getResultAsRows().toJS());e=e.getColumnNames().toJS();e=e.indexOf(a.toLowerCase());f=g(f,e);return d.$17(a,f).then(function(b){d.setState({searchSources:d.state.searchSources.set(a,b)},function(){d.$5(a)&&c&&c(d.$14(a))})})})};d.$17=function(a,c){__p&&__p();return b("InsightsGraphAPI").cachedObjectsGet("Ad Campaign/Ad Set/Ad",c.map(function(a){return a.title}).filter(function(a){return!!a}).map(function(a){return a.toString()}).filter(function(a){return b("isValidID")(a)}).toArray(),{fields:"name"}).then(function(a){var d=function(b){var c=b.title.toString();return a[c]?a[c].name+" ("+c+")":b.title};return c.map(function(a){return b("update")(a,{title:{$set:d(a)}})}).sort(function(a,b){return a.title.toString().localeCompare(b.title.toString())})})};d.$4=function(a,b){var c=this,d=this.state.searchSources.merge(r.toMap().flip().filter(function(b,d){return c.$7(d,a)}).map(function(a){return null}));this.setState({searchSources:d},b)};d.$18=function(a,b){var c=this;return JSON.stringify(this.$10().set(a,b).map(function(b,d){return c.$7(d,a)?[]:b}))};d.$19=function(a,c){c.operator!==this.props.rule.operator&&i.logEvent("InstallSource_OperatorSelector_Change",{newOperator:c.operator});var d=c.values,e=this.$10().get(a);d!==void 0&&(e===void 0||d.length!==e.length)&&i.logEvent("InstallSource_Tokenizer_Change",{breakdown:a,nTokens:d.length});e=b("update")(c,{values:{$set:[this.$18(a,d)]}});this.props.onChange(e)};d.$20=function(a,b,c){this.$15(a)?c(this.$14(a)):this.$16(a,c)};d.$21=function(a){a=this.$12(a);i.logEvent("InstallSource_AddButton_Click",{newBreakdown:a});var b=this.$13(a);this.$19(a,b)};d.$22=function(a,b,c){b=this.state.searchSources.get(a);if(!b)return c;a=b.find(function(a){return a.uniqueID===c});return a?a.title:c};d.$23=function(a){switch(a){case n:return g._("App install source");case o:return g._("Campaign");case p:return g._("Ad set");case q:return g._("Ad");default:return g._("Breakdown")}};d.$24=function(a){a=this.$11(a);i.logEvent("InstallSource_RemoveButton_Click",{oldBreakdown:a});var c=b("update")(this.props.rule,{parameter_name:{$set:a},values:{$set:this.$10().get(a)}});this.$19(a,c)};d.$6=function(a){var c=this.$22.bind(this,a),d=this.$20.bind(this,a),e=this.$21.bind(this,a),f=this.$19.bind(this,a),g=this.$24.bind(this,a),h=a===this.$8()&&a!==n,i=this.$13(a),j=i.values&&i.values.length!==0&&a!==q&&a===this.$8(),k=a!==n,l=this.state.searchSources.hashCode(),o={display_name:this.$23(a),parameter_name:i.parameter_name},p=a===n?this.$25():null;return b("React").createElement(b("GriffinLooseParameterRuleBuilder"),{additionalValueInput:p,getParameterDisplayValue:c,isOperatorFixed:k,isParameterFixed:!0,key:a,loadParameterValues:d,onAdd:e,onChange:f,onDelete:h?g:this.props.onRemoveRule,parameterRule:b("update")(i,{ruleType:{$set:m}}),parameters:[o],searchSourceHash:l,showAddButton:j,showAnd:!1})};d.$25=function(){var a=this.$10().get(n);if(!a||a.length===0)return null;a=this.$10().get(s);a=a?a[0]||"":"";var c=b("AnalyticsPredefinedBreakdownValues").acquisition_type,d=[b("React").createElement(b("GriffinSelectorOption"),{key:"all",value:""},g._("Any attribution"))].concat(Object.keys(c).map(function(a){return b("React").createElement(b("GriffinSelectorOption"),{key:a,value:a},c[a])}));return b("React").createElement(b("GriffinSelector"),{onChange:this.$26.bind(this),value:a},d)};d.$26=function(a){i.logEvent("InstallSource_Tokenizer_Change",{breakdown:s});a=a===""?[]:[a];a=b("update")(this.props.rule,{values:{$set:[this.$18(s,a)]}});this.props.onChange(a)};return c}(b("React").Component);e.exports=a}),null);
__d("GriffinEventRefinementSegmentRuleBuilder",["cx","fbt","invariant","AnalyticsActiveSection","AnalyticsGKNames","AnalyticsGKs","AnalyticsOnlyModeConfirmDialog","AnalyticsOnlyModeDialog","AnalyticsOnlyModeDialogStatus","AnalyticsOnlyModeUtils","AnalyticsParamValueConfig","AnalyticsQueryBreakdownUtilsShared","AnalyticsRefinementParamUtils","AnalyticsTextUtils","AppEventsAggregatingColumn","CurrentAnalyticsEntity","CustomEventStore","FalcorSegmentRuleUtils","FalcorSegmentTextUtils","GriffinLooseParameterRuleBuilder","GriffinSegmentDemographicsRuleBuilder","GriffinSegmentInstallSourceRuleBuilder","GriffinSegmentRules","GriffinSelector","GriffinSelectorOption","React","XUICloseButton.react","gkx","promiseDone","update"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("GriffinSegmentRules").Types;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={analyticsOnlyModeDisableDialogVisible:!1,analyticsOnlyModeConfirmStatus:b("AnalyticsOnlyModeDialogStatus").HIDDEN},d.$5=function(){d.props.onRemoveRule()},d.$1=function(){d.setState({analyticsOnlyModeDisableDialogVisible:!0})},d.$2=function(){d.setState({analyticsOnlyModeDisableDialogVisible:!1})},d.$4=function(){d.$3(b("AnalyticsOnlyModeDialogStatus").HIDDEN)},d.$3=function(a){d.setState({analyticsOnlyModeConfirmStatus:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.onRemoveRule=function(){this.props.onRemoveRule(this.props.orderedIndex)};d.onChangeRule=function(a){this.props.onChangeRule(a,this.props.orderedIndex)};d.onAdd=function(){this.props.onAdd&&this.props.onAdd()};d.shouldShowRuleType=function(a){if(a===j.PERCENTILE)return!1;if(a===j.WEB_PARAMS&&!(b("AnalyticsGKs").get(b("AnalyticsGKNames").ANALYTICS_CROSS_DEVICE_WEB_PARAMS)&&b("CustomEventStore").hasWebEvent()))return!1;if(a===j.USER_PROPERTY&&!b("CurrentAnalyticsEntity").isApp()&&!b("CurrentAnalyticsEntity").isFacebookPixel()&&!b("CurrentAnalyticsEntity").isEventSourceGroup())return!1;var c=this.props.enabledRuleTypes;return!c?!0:c.contains(a)};d.getRuleTypeSelector=function(){var a=this,c=Object.keys(j).filter(function(b){return a.shouldShowRuleType(b)}).map(function(c){var d=!1,e=h._("You can only select conditions that contain app events or device info conditions and app events.");a.props.disablePushConditions&&(d=c===j.USER_PROPERTY||c===j.DEMOGRAPHIC||c===j.ACQUISITION_SOURCE||c===j.WEB_PARAMS);b("gkx")("678317")&&c===j.DEMOGRAPHIC?(d=!0,e=h._("This feature is currently unavailable.")):b("AnalyticsOnlyModeUtils").isAnalyticsOnlyMode()&&c===j.DEMOGRAPHIC&&(d=!0,e=b("AnalyticsOnlyModeUtils").getTooltipForRefinement(a.$1));return b("React").createElement(b("GriffinSelectorOption"),{disabled:d,key:c,tooltip:d?e:null,value:c},a.getRuleTypeLabel(c))}),d=h._("Select condition");return b("React").createElement(b("GriffinSelector"),{onChange:function(b){return a.onChangeRule({ruleType:b})},placeholder:d,value:this.getRuleTypeWithAcquisitionSourceCheck(this.props.rule)},c)};d.getFirstRuleLabel=function(){return b("React").createElement("div",null,h._("Refine by"))};d.getRuleTypeLabel=function(a){if(a===j.APP_EVENT)return h._("Parameter");else return b("FalcorSegmentTextUtils").getRuleTypeLabel(a)};d.getHiddenParameterNames=function(){return[b("AppEventsAggregatingColumn").USING_FB_LOGIN]};d.renderAppEventRuleBuilder=function(){var a=this,c="_3w9i",d=this.props.orderedIndex,e=this.props.eventName,f=b("AnalyticsRefinementParamUtils").getRefinementParams(this.props.eventName).map(function(a){return babelHelpers["extends"]({},a)}),g=function(a,c){return b("AnalyticsQueryBreakdownUtilsShared").getBreakdownValueDisplayString(a,c,e)},h=function(a,c){b("promiseDone")(b("AnalyticsParamValueConfig").loadValuesAsSearchableEntryData({eventName:e,parameterName:a}),c)},i=b("update")(this.props.rule,{ruleType:{$set:j.APP_EVENT}});return b("React").createElement(b("GriffinLooseParameterRuleBuilder"),{getParameterDisplayValue:g,getTooltipForParameter:b("AnalyticsTextUtils").getTooltip.bind(this,e),key:d,labelClass:c,loadParameterValues:h,onAdd:this.props.onAdd,onChange:function(b){return a.onChangeRule(babelHelpers["extends"]({},b))},onDelete:this.props.onRemoveRule.bind(this,d),parameterRule:i,parameters:f,showAddButton:this.props.showAddButton,showAnd:!1,showArrow:!1})};d.getRuleTypeWithAcquisitionSourceCheck=function(a){var c=b("FalcorSegmentRuleUtils").getRuleType(a);return c==j.DEMOGRAPHIC&&a!=null&&a.parameter_name===b("AppEventsAggregatingColumn").ACQUISITION_SOURCE?j.ACQUISITION_SOURCE:c};d.renderRuleBuilder=function(){__p&&__p();var a=this,c=null,d=this.props.rule,e=this.getRuleTypeWithAcquisitionSourceCheck(d),f=b("gkx")("678317")||b("AnalyticsOnlyModeUtils").isAnalyticsOnlyMode();switch(e){case null:return null;case j.DEMOGRAPHIC:case j.TECHNOLOGY:case j.USER_PROPERTY:case j.WEB_PARAMS:c=b("React").createElement(b("GriffinSegmentDemographicsRuleBuilder"),{disabledDemographicRule:f&&e===j.DEMOGRAPHIC,hiddenParameterNames:this.getHiddenParameterNames(),onAdd:function(){return a.onAdd()},onChange:function(b){return a.onChangeRule(b)},onRemoveRule:this.onRemoveRule.bind(this),rule:b("update")(d,{ruleType:{$set:e}}),showAddButton:!!this.props.showAddButton});break;case j.ACQUISITION_SOURCE:f=function(b){return a.onChangeRule(b)};e={rule:d,onChange:f};c=b("React").createElement(b("GriffinSegmentInstallSourceRuleBuilder"),babelHelpers["extends"]({},e,{onRemoveRule:this.onRemoveRule.bind(this)}));break;case j.APP_EVENT:c=this.renderAppEventRuleBuilder();break;default:i(0,6183)}return c};d.render=function(){var a=this.renderRuleBuilder();a!=null&&(a=b("React").createElement("div",{className:"_3kuk _2cnv"},a));var c=this.props.orderedIndex?h._("and"):this.getFirstRuleLabel();c=b("React").createElement("div",{className:"_2kf4"},c);var d=this.props.orderedIndex>0&&!a,e=this.state.analyticsOnlyModeDisableDialogVisible?b("React").createElement(b("AnalyticsOnlyModeDialog"),{onHideDialog:this.$2,setConfirmDialogState:this.$3}):null,f=this.state.analyticsOnlyModeConfirmStatus===b("AnalyticsOnlyModeDialogStatus").HIDDEN?null:b("React").createElement(b("AnalyticsOnlyModeConfirmDialog"),{onHideDialog:this.$4,status:this.state.analyticsOnlyModeConfirmStatus});c=b("React").createElement("div",{className:"_2cnx"},c,b("React").createElement("div",{className:"_3v4d _2cnx"},b("React").createElement("div",{className:"_3kuk"},b("React").createElement("div",{className:"_2cnx"},this.getRuleTypeSelector(),d&&b("React").createElement(b("XUICloseButton.react"),{className:"_3kul",href:"#",onClick:this.$5,size:"medium"}))),a));return b("React").createElement("div",null,e,f,c)};return c}(b("React").Component);e.exports=a}),null);
__d("AnalyticsOnlyModeChartCardContents",["cx","AnalyticsOnlyModeConfirmDialog","AnalyticsOnlyModeDialogStatus","AnalyticsOnlyModeUtils","FBAMetaLoggerWWW","Image.react","React","SUIBusinessTheme","SUIText.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBAMetaLoggerWWW").META_LOGGER;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={analyticsOnlyModeConfirmStatus:b("AnalyticsOnlyModeDialogStatus").HIDDEN},d.$1=function(){h.logEvent("AnalyticsOnly_DeactivateButton_Click",{location:"chart_card"}),b("AnalyticsOnlyModeUtils").disableAnalyticsOnlyMode(d.$6)},d.$5=function(){d.$6(b("AnalyticsOnlyModeDialogStatus").HIDDEN)},d.$6=function(a){d.setState({analyticsOnlyModeConfirmStatus:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=b("AnalyticsOnlyModeUtils").getDisableButton(this.$1),c=this.$2(),d=this.$3(),e=this.$4(),f=this.state.analyticsOnlyModeConfirmStatus===b("AnalyticsOnlyModeDialogStatus").HIDDEN?null:b("React").createElement(b("AnalyticsOnlyModeConfirmDialog"),{onHideDialog:this.$5,status:this.state.analyticsOnlyModeConfirmStatus});d=b("React").createElement("div",{className:"_6z3-"},b("React").createElement("div",{className:"_6z3_"},b("React").createElement("div",null,d,e),b("React").createElement("div",null,a)),c);h.logEvent("AnalyticsOnly_Notice_View",{location:"chart_card"});return b("React").createElement("div",null,f,d)};d.$2=function(){var a=b("AnalyticsOnlyModeUtils").getImageMedium();return b("React").createElement(b("Image.react"),{src:a})};d.$3=function(){var a=b("AnalyticsOnlyModeUtils").getCardHeaderText();return b("React").createElement(b("SUIText.react"),{display:"block",size:"header2",style:{marginBottom:8},textAlign:"left",theme:b("SUIBusinessTheme"),width:404},a)};d.$4=function(){var a=b("AnalyticsOnlyModeUtils").getMessageText();return b("React").createElement(b("SUIText.react"),{color:"secondary",display:"block",size:"body1",style:{marginBottom:20},textAlign:"left",theme:b("SUIBusinessTheme"),width:411},a)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("GriffinEventRefinementSegmentBuilderDrawer",["cx","fbt","invariant","ActiveSectionStore","CurrentAnalyticsEntity","CustomEventStore","FalcorSegmentRuleUtils","FBADomUtils","FBAMetaLoggerWWW","GriffinComposerField","GriffinContextualDrawer","GriffinEventRefinementSegmentRuleBuilder","GriffinSections","GriffinSegmentRules","React","SUIAnalyticsGriffinTheme","SUITextInput.react","joinClasses","suiMargin","update"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("FBAMetaLoggerWWW").META_LOGGER,k=b("GriffinSegmentRules").Types,l=k.APP_EVENT;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={orderedRules:d.$1(d.props),nameChangedByUser:!1},d.$2=0,d.$4=function(a){d.setState({nameChangedByUser:!0});var b=d.$5();b=babelHelpers["extends"]({},d.props.segment,{event_rules:[babelHelpers["extends"]({},b,{name:a})]});d.props.onChangeSegment(b)},d.$6=function(){d.$7({$push:[{ruleType:l}]}),b("ActiveSectionStore").getActiveSectionName()===b("GriffinSections").FUNNELS&&j.logEvent("Funnels_BuilderRule_Add")},d.$8=function(a,c){d.$7({$splice:[[c,1,a]]}),b("ActiveSectionStore").getActiveSectionName()===b("GriffinSections").FUNNELS&&j.logEvent("Funnels_BuilderRule_Change",{parameter:a.parameter_name,ruleType:a.ruleType})},d.$9=function(a){a!=null&&d.$7({$splice:[[a,1]]}),b("ActiveSectionStore").getActiveSectionName()===b("GriffinSections").FUNNELS&&j.logEvent("Funnels_BuilderRule_Remove")},d.$11=function(a,c,e){var f=b("CurrentAnalyticsEntity").getID(),g=d.props.enabledRuleTypes,h=d.$5();return b("React").createElement("div",{className:"_5v7p",key:c},b("React").createElement(b("GriffinEventRefinementSegmentRuleBuilder"),{appID:f,disablePushConditions:!1,enabledRuleTypes:g,eventName:h.event_rule.event_name,onAdd:d.$6,onChangeRule:d.$8,onRemoveRule:d.$9,orderedIndex:c,rule:a,showAddButton:c===e.length-1}))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=b("FBADomUtils").getHeightByRef(this.refs.builder);if(a==null)return;this.$2=a;this.props.onChangeHeight(a)};d.componentDidUpdate=function(){var a=b("FBADomUtils").getHeightByRef(this.refs.builder);if(a==null)return;this.$2!==a&&(this.$2=a,this.props.onChangeHeight(a))};d.$1=function(a){var c=this.$3(a);return[].concat(c.event_rule.parameters.map(function(a){return babelHelpers["extends"]({},a,{ruleType:k.APP_EVENT})}),(a.segment.event_info_rules||[]).map(function(a){return babelHelpers["extends"]({},a,{ruleType:b("FalcorSegmentRuleUtils").getRuleType(a)})}),(a.segment.web_param_rules||[]).map(function(a){return babelHelpers["extends"]({},a,{ruleType:k.WEB_PARAMS})}),(a.segment.user_property_rules||[]).map(function(a){return babelHelpers["extends"]({},a,{ruleType:k.USER_PROPERTY})}))};d.$7=function(a){var c=this.state.orderedRules;c=b("update")(c,a);this.setState({orderedRules:c});a=this.$5();this.props.onChangeSegment(b("FalcorSegmentRuleUtils").createEventRefinementSegmentFromParameterRules(a.name,a.event_rule.event_name,a.event_rule.application,c))};d.$3=function(a){a=a.segment.event_rules;a!==void 0&&a!==null||i(0,1609,this.props.segment);a.length===1||i(0,1610,a);return a[0]};d.$5=function(){return this.$3(this.props)};d.$10=function(){var a=this;if(!this.props.enableEventRuleRename)return null;var c=h._("STEP NAME"),d=this.$5(),e=d.name;d=b("CustomEventStore").getAppEventDisplayName(d.event_rule.event_name);(e==null||e.length===0)&&(e=this.state.nameChangedByUser?"":d);d=b("React").createElement(b("SUITextInput.react"),{margin:"_3-92",onChange:this.$4,onFocus:function(b){return a.refs.ruleNameInput&&a.refs.ruleNameInput.selectInput()},placeholder:d,ref:"ruleNameInput",theme:b("SUIAnalyticsGriffinTheme"),value:e});return b("React").createElement(b("GriffinComposerField"),{input:d,inputClass:"_2riu",label:c,labelClass:"_2rit"})};d.$12=function(){var a=this.state.orderedRules,c;a.length===0?c=[{ruleType:l}].map(this.$11):c=a.map(this.$11);return b("React").createElement("div",{className:"_2cnv"},b("React").createElement("div",null,c))};d.render=function(){var a=this.props,c=a.anchor,d=a.className;a=a.style;return b("React").createElement(b("GriffinContextualDrawer"),{anchor:c,cardKey:"event_refinement_segment_builder",className:b("joinClasses")(d,"_3o9n"),ref:"builder",style:a},b("React").createElement("div",{className:"_3o9o"},this.$10(),this.$12()))};return c}(b("React").PureComponent);a.defaultProps={enableEventRuleRename:!0};e.exports=a}),null);
__d("GriffinOrderableList.react",["cx","React","setTimeout"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={draggedItemKey:null,previewItems:null},d.$1=0,d.$5=function(a){a.preventDefault(),a.dataTransfer.dropEffect="move",d.$1=a.pageX},d.$3=function(a){__p&&__p();var b=a.currentTarget;if(typeof b.getAttribute!=="function")return;var c=b.getAttribute("data-key");b=d.state.previewItems;var e=d.state.draggedItemKey;if(c==null||e==null||e===c||b==null)return;b=b.slice();var f=b.findIndex(function(a){return a.key===e}),g=b[f];b.splice(f,1);f=b.findIndex(function(a){return a.key===c});a=a.pageX>=d.$1?1:0;b.splice(f+a,0,g);d.setState({previewItems:b})},d.$4=function(a){__p&&__p();var c=a.target;if(!(c instanceof Element))return;var e=c.getAttribute("data-key");a.persist();a.dataTransfer.effectAllowed="move";a.dataTransfer.setData("Text",e);d.props.onDragStart(a);b("setTimeout")(function(){d.setState({draggedItemKey:e,previewItems:d.props.items.slice()})})},d.$2=function(a){a=d.state.previewItems;d.setState({draggedItemKey:null,previewItems:null});d.props.onDrop((a=a)!=null?a:[],d.props.items)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this,c=this.state,d=c.draggedItemKey;c=c.previewItems;var e=this.props.items,f=this.props,g=f.auxiliaryItems,h=f.dragDisabled,i=f.renderAuxiliaryItem,j=f.renderItem,k=f.renderPlaceholder;e=c||e;f=e.map(function(e,f,c){return b("React").createElement("div",{className:"_4a0o","data-key":e.key,draggable:!h,key:e.key,onDragEnd:a.$2,onDragEnter:a.$3,onDragStart:a.$4},e.key===d?k(e,f,c):j(e,f,c))});c=g.map(function(a){return i(a)});return b("React").createElement("div",{className:"_15cd",onDragOver:this.$5,onDrop:this.$6},f,c)};d.$6=function(a){a.preventDefault()};return c}(b("React").PureComponent);a.defaultProps={auxiliaryItems:[],dragDisabled:!1};e.exports=a}),null);
__d("AnalyticsActionButtonConfig",["ix","fbt","Image.react","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={label:h._("Download PNG image"),type:"DOWNLOAD_PNG"};c={icon:g("490351"),label:h._("Edit"),type:"EDIT"};d={icon:g("490351"),isDisabled:!0,label:h._("Edit"),type:"EDIT"};f=h._("Export CSV file");var i={icon:b("React").createElement(b("Image.react"),{src:g("514793")}),label:f,type:"EXPORT"};f={icon:b("React").createElement(b("Image.react"),{src:g("579939")}),isDisabled:!0,label:f,type:"EXPORT"};var j={icon:b("React").createElement(b("Image.react"),{src:g("503835")}),label:h._("Delete"),type:"DELETE"},k={icon:b("React").createElement(b("Image.react"),{src:g("536145")}),isDisabled:!0,label:h._("Delete"),type:"DELETE"},l={label:h._("Delete Dashboard"),type:"DELETE_DASHBOARD"},m={label:h._("Duplicate"),type:"DUPLICATE"},n={icon:b("React").createElement(b("Image.react"),{src:g("552103")}),label:h._("Expand chart"),type:"EXPAND"},o={icon:b("React").createElement(b("Image.react"),{src:g("512504")}),label:h._("Report bug\/give feedback"),type:"FEEDBACK"},p={icon:b("React").createElement(b("Image.react"),{src:g("579927")}),isDisabled:!0,label:h._("Report bug\/give feedback"),type:"FEEDBACK"},q={icon:b("React").createElement(b("Image.react"),{src:g("500995")}),label:h._("Help"),type:"HELP"},r={icon:b("React").createElement(b("Image.react"),{src:g("494392")}),isDisabled:!0,label:h._("Help"),type:"HELP"},s={label:h._("Move to"),type:"MOVE_TO"},t={icon:b("React").createElement(b("Image.react"),{src:g("568733")}),label:h._("Pin to dashboard"),type:"PIN"},u={icon:b("React").createElement(b("Image.react"),{src:g("579970")}),isDisabled:!0,label:h._("Pin to dashboard"),type:"PIN"},v={label:h._("Rename Dashboard"),type:"RENAME"},w=Object.freeze({icon:b("React").createElement(b("Image.react"),{src:g("686903")}),label:h._("Save"),type:"SAVE"}),x=Object.freeze({icon:b("React").createElement(b("Image.react"),{src:g("686904")}),isDisabled:!0,label:h._("Save"),type:"SAVE"}),y=Object.freeze({icon:b("React").createElement(b("Image.react"),{src:g("616092")}),label:h._("Save As"),type:"SAVE_AS"}),z=Object.freeze({icon:b("React").createElement(b("Image.react"),{src:g("686907")}),isDisabled:!0,label:h._("Save As"),type:"SAVE_AS"}),A=Object.freeze({icon:b("React").createElement(b("Image.react"),{src:g("582905")}),label:"Save As Internal",type:"SAVE_INTERNAL"}),B=Object.freeze({icon:b("React").createElement(b("Image.react"),{src:g("582906")}),isDisabled:!0,label:"Save As Internal",type:"SAVE_INTERNAL"}),C={icon:b("React").createElement(b("Image.react"),{src:g("568724")}),label:h._("Set goal"),type:"SET_GOAL"},D={icon:b("React").createElement(b("Image.react"),{src:g("579947")}),isDisabled:!0,label:h._("Set goal"),type:"SET_GOAL"},E={icon:b("React").createElement(b("Image.react"),{src:g("494788")}),label:h._("Share"),type:"SHARE"},F={icon:b("React").createElement(b("Image.react"),{src:g("545911")}),isDisabled:!0,label:h._("Share"),type:"SHARE"};b={icon:b("React").createElement(b("Image.react"),{src:g("552096")}),label:h._("Shrink chart"),type:"SHRINK"};g={label:h._("Visibility settings"),type:"VISIBILITY"};h=[a,c,d,i,f,n,j,k,l,m,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,b,g];e.exports={ACTIONS:h}}),null);
__d("AnalyticsActionButton",["cx","invariant","AnalyticsActionButtonConfig","FDSButton.react","FDSDropdownMenu.react","FDSSimplePopover.react","FDSSplitButton.react","FlexLayout.react","React","emptyFunction","filterNulls","flattenArray","intersperse","suiMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("FlexLayout.react"),{align:"center",className:"_7uis",justify:"center"},this.props.renderDialog&&this.props.renderDialog(),b("React").createElement("span",{className:"_3-8_"},this.$1()),this.$2())};d.$1=function(){var a=this.$3(),d=a[0];a=a.slice(1);if(d==null)return null;d.type==="item"||h(0,14521);var e=d.isDisabled,f=d.label,g=d.onClick,i=d.rightContent;i=i==null?void 0:String(i);return a.length===0?b("React").createElement(b("FDSButton.react"),{"data-testid":"AnalyticsActionButton/primaryButton",icon:d.icon,isDisabled:e,label:String(f),labelIsHidden:this.props.primaryActionLabelIsHidden===!0,onClick:g,size:this.props.size,tooltip:i,use:this.props.buttonUseForPrimary}):b("React").createElement(b("FDSSplitButton.react"),{"data-testid":"AnalyticsActionButton/splitButton",isDisabled:e,label:String(f),menu:b("React").createElement(b("FDSDropdownMenu.react"),{items:c.$4(a)}),onClick:g,size:this.props.size,tooltip:i,use:"primary"})};d.$2=function(){var a=this,d=this.props.secondaryActions;if(d.length===0)return null;d=b("flattenArray")(b("intersperse")(d.map(function(b){return c.$4(a.$5(b,a.props.hideSecondaryIcon))}),{type:"separator"}));return b("React").createElement(b("FDSDropdownMenu.react"),{buttonSize:this.props.size,buttonUse:this.props.buttonUseForSecondary,"data-testid":"AnalyticsActionButton/moreButton",isDisabled:this.props.isDropdownMenuDisabled===!0,items:d,label:"",onOpen:this.props.onOpen,useEllipsisIcon:!0})};d.$3=function(){__p&&__p();var a=this.props.primaryActions.slice();if(a.length===0)return[];var b=this.props.disabledActions;if(b!=null&&b.includes(a[0])){var c=a.find(function(a){return!b.includes(a)});c!==null&&a.sort(function(a,b){return a===c?-1:b===c?1:0})}return this.$5(a,this.props.hidePrimaryIcon)};d.$5=function(a,c){__p&&__p();var d=this;return b("filterNulls")(a.map(function(a){return b("AnalyticsActionButtonConfig").ACTIONS.find(function(b){var c=b.type;b=b.isDisabled;b=b===void 0?!1:b;return a===c&&d.props.disabledActions.includes(a)===b})})).map(function(a){var b=a.icon,e=a.isDisabled,f=a.label,g=a.type;a=c===!0?{}:{icon:b};return babelHelpers["extends"]({},a,{isDisabled:e,label:f,rightContent:e===!0?d.props.getDisabledReason(g):null,onClick:function(){return d.props.onClick(g)},type:"item"})})};c.$4=function(a){return a.map(function(a){if(a.type!=="item"&&a.type!=="group")return a;var c=a.rightContent;if(c==null)return a;a.rightContent=b("React").createElement("span",{className:"_3-9a"},b("React").createElement(b("FDSSimplePopover.react"),{alignment:"right",content:c,display:"inline",position:"above"}));return a})};return c}(b("React").PureComponent);a.defaultProps={buttonUseForPrimary:"primary",buttonUseForSecondary:"default",disabledActions:[],getDisabledReason:b("emptyFunction").thatReturnsNull,onClick:b("emptyFunction"),primaryActions:[],secondaryActions:[],size:"medium"};e.exports=a}),null);
__d("FBAMetaBaseChartConfig",["fbt","FBAMetaChartRules","FBAMetaChartRuleUtils","StrSet"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBAMetaChartRules").RuleSet,i=b("FBAMetaChartRuleUtils").getBreakdownsFromChart,j=b("FBAMetaChartRuleUtils").getEventNamesFromChart;a=function(){__p&&__p();function a(a,c){var d=this.getSanitizor();this.__chart=d.apply(a);this.__context=c;this.__sanitizationChangedBreakdowns=i(a).length>i(this.__chart).length;this.__sanitizationChangedEvents=new(b("StrSet"))(j(this.__chart)).difference(new(b("StrSet"))(j(a))).count()!==0}var c=a.prototype;c.getSanitizor=function(){return new h([])};c.getPrimaryActions=function(){return[]};c.getSecondaryActions=function(){return[["FEEDBACK"]]};c.getChart=function(){return this.__chart};c.getContext=function(){return this.__context};c.getOptions=function(){return[]};c.getOptionByType=function(a){var b=this.getOptions();for(var c=0;c<b.length;c++){var d=b[c];if(d instanceof a)return d}return null};c.hasOptionType=function(a){return this.getOptionByType(a)!=null};c.getConfigurationErrorInfo=function(){var a=this.getOptions().find(function(a){return a.getConfigurationErrorInfo()});return a!=null?a.getConfigurationErrorInfo():null};c.isConfigurationValid=function(){return this.getConfigurationErrorInfo()==null};c.getSanitizationWarning=function(){if(this.__sanitizationChangedBreakdowns)return g._("Some breakdowns could not be fully preserved in the new chart configuration.");return this.__sanitizationChangedEvents?g._("Some events could not be fully preserved in the new chart configuration."):null};return a}();e.exports=a}),null);
__d("FBAChartAction",["ix","fbt","Image.react","React","asset","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={category:"TREND_CHART_ONLY",icon:{disabled:g("579947"),normal:g("568724")},label:h._("Set goal"),type:"SET_GOAL"};c={category:"CHART_ACTION",icon:{disabled:g("579939"),normal:g("514793")},label:h._("Export as CSV"),type:"EXPORT"};d={category:"CHART_ACTION",icon:{disabled:g("545911"),normal:g("494788")},label:h._("Share"),type:"SHARE"};f={category:"FEEDBACK",icon:{disabled:g("579927"),normal:g("512504")},label:h._("Report bug\/give feedback"),type:"FEEDBACK"};var i={category:"CHART_ACTION",disabled:!1,icon:{disabled:g("579970"),normal:g("568733")},label:h._("Pin to dashboard"),type:"PIN"},j={category:"SAVE_DELETE",icon:{disabled:g("686904"),normal:g("686903")},label:h._("Save"),type:"SAVE"},k={category:"SAVE_DELETE",icon:{disabled:g("686907"),normal:g("616092")},label:h._("Save As"),type:"SAVE_AS"},l={category:"SAVE_DELETE",icon:{disabled:g("582906"),normal:g("582905")},label:"Save As Internal",type:"SAVE_INTERNAL"},m={category:"SAVE_DELETE",icon:{disabled:g("536145"),normal:g("503835")},label:h._("Delete"),type:"DELETE"},n={category:"SAVE_DELETE",icon:{disabled:g("490351"),normal:g("490351")},label:h._("Edit"),type:"EDIT"};e.exports=Object.freeze({HELP:"HELP",PIN:"PIN",SET_GOAL:"SET_GOAL",EXPORT:"EXPORT",FEEDBACK:"FEEDBACK",SAVE:"SAVE",SAVE_AS:"SAVE_AS",SAVE_INTERNAL:"SAVE_INTERNAL",DELETE:"DELETE",SET_GOAL_ACTION:a,EXPORT_ACTION:c,SHARE_ACTION:d,FEEDBACK_ACTION:f,SAVE_ACTION:j,SAVE_AS_ACTION:k,SAVE_INTERNAL_ACTION:l,DELETE_ACTION:m,EDIT_ACTION:n,createPinAction:function(a){return Object.assign(i,a)},createHelpAction:function(a){return{category:"CHART_ACTION",helpText:a,icon:{disabled:g("494392"),normal:g("500995")},label:h._("Help"),type:"HELP"}},getSUIActionMenuItem:function(a,c){c===void 0&&(c=!1);var d=a.label;a=c?(c=a.icon)==null?void 0:c.disabled:(c=a.icon)==null?void 0:c.normal;return{icon:b("React").createElement(b("Image.react"),{src:a}),label:d,onClick:b("emptyFunction"),type:"item"}}})}),null);
__d("FBAMetaChartConfigUtils",["AnalyticsPermissions","FBAChartAction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AnalyticsPermissions").canViewerWriteFeature,h=b("AnalyticsPermissions").canViewerWriteFeatures,i=b("AnalyticsPermissions").canViewerWriteInternOnlyFeatures,j={DELETE:b("FBAChartAction").DELETE_ACTION,SAVE:b("FBAChartAction").SAVE_ACTION,SAVE_AS:b("FBAChartAction").SAVE_AS_ACTION,SAVE_INTERNAL:b("FBAChartAction").SAVE_INTERNAL_ACTION},k={getPinActionTypeIfPermitted:function(a){a=a.isInternal();return g(a)?"PIN":null},getAvailableSaveDeleteActions:function(a){return k.getPermittedSaveDeleteActions(a).map(function(a){return j[a]})},getPermittedSaveDeleteActions:function(a){__p&&__p();var b=a.isAutoDetected(),c=a.isInternal();a=!a.getChartId();var d=h(),e=i(),f=d;b=!b&&(c?e:d);c=e;d=[];e=a?f:b;e&&d.push("SAVE");e=f&&!a;e&&d.push("SAVE_AS");c&&d.push("SAVE_INTERNAL");f=!a&&b;f&&d.push("DELETE");return d}};e.exports=k}),null);
__d("FBAMetaChartOptionTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({AGGREGATION_PERIOD:"AGGREGATION_PERIOD",BREAKDOWN:"BREAKDOWN",CHART_NAME:"CHART_NAME",CHART_TYPE:"CHART_TYPE",COHORT_COLLATION_INTERVAL:"COHORT_COLLATION_INTERVAL",COHORT_METRIC:"COHORT_METRIC",DATE_RANGE:"DATE_RANGE",EVENT_METRIC:"EVENT_METRIC",EVENT_NAME:"EVENT_NAME",FUNNEL_TIME_CONSTRAINT:"FUNNEL_TIME_CONSTRAINT",SEGMENT:"SEGMENT"});e.exports=a}),null);
__d("FBAMetaChartOptionPlacement",[],(function(a,b,c,d,e,f){"use strict";e.exports=Object.freeze({CHART_NAME:"CHART_NAME",CHART_TYPE:"CHART_TYPE",HEADER:"HEADER",OVERHEAD_LEFT:"OVERHEAD_LEFT",SUBHEADER_LEFT:"SUBHEADER_LEFT",SUBHEADER_RIGHT:"SUBHEADER_RIGHT"})}),null);
__d("FBAMetaChartOptionUtils",["fbt","BUIDateRangeUtils","LocalDate","LocalDateInterval"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getNoBreakdownSelectedErrorInfo:function(){return{message:g._("No breakdown selected"),description:g._("Use 'Show by' to select a breakdown of data")}},getNoDateRangeSelectedErrorInfo:function(){return{message:g._("No date range selected"),description:g._("Use the date range selector to select a date range")}},getNoEventSelectedErrorInfo:function(){return{message:g._("No event selected"),description:g._("Select an event below to get started")}},getNoIntervalSelected:function(){return{message:g._("No interval selected")}},getNoMetricSelectedErrorInfo:function(){return{message:g._("No metric selected")}},getNoSegmentSelectedErrorInfo:function(){return{message:g._("No segment selected")}},getIntervalNotValidErrorInfo:function(){return{message:g._("Invalid interval")}},getMetricNotValidErrorInfo:function(){return{message:g._("Invalid metric")}},getBreakdownNotValidErrorInfo:function(){return{message:g._("Invalid breakdown")}},getBreakdownTableWithoutBreakdownsError:function(){return g._("The breakdown table cannot be saved without any breakdowns")},getBreakdownsOutsideLimitErrorInfo:function(a,b){return{message:a===b?g._("Select {num} breakdowns",[g._param("num",a)]):g._("Select {min} to {max} breakdowns",[g._param("min",a),g._param("max",b)])}},getDateRangeOutOfRangeErrorInfo:function(a,c){return{message:g._("The date range should be within the maximum available date range ({the available date range})",[g._param("the available date range",b("BUIDateRangeUtils").verbose(new(b("LocalDateInterval"))(b("LocalDate").fromUTCDate(a),b("LocalDate").fromUTCDate(c))))])}},getDateRangeTimeTravelErrorInfo:function(){return{message:g._("The date range should have a start date that is earlier than the end date")}},getExportError:function(a){return g._("You can't export data from this chart because: {Reason of being disabled}",[g._param("Reason of being disabled",a.message)])},getEventsOutsideLimitsErrorInfo:function(a,b){return{message:a===b?g._("Select {num} events",[g._param("num",a)]):g._("Select {min} to {max} events",[g._param("min",a),g._param("max",b)])}},getFunnelTimeConstraintExceedMaxErrorInfo:function(){return{message:g._("The number of days must be between 0 and 99.")}},getPinDisabledError:function(a){return a?g._("This chart can't be added to a dashboard because: {Reason of being disabled}",[g._param("Reason of being disabled",a.message)]):g._("Custom dashboards are in beta. This chart can't be added to a dashboard yet.")},getSaveDeleteError:function(a){return g._("You cannot save or delete this chart because: {Reason of being disabled}",[g._param("Reason of being disabled",a.message)])},getSetGoalError:function(a){return g._("You can't set a goal for this chart because: {Reason of being disabled}",[g._param("Reason of being disabled",a.message)])},getDeleteImportedBreakdownError:function(){return g._("Please go to the respective event source (app, Facebook pixel, etc.) to delete the imported breakdown")},getDeleteImportedCohortError:function(){return g._("Please go to the respective event source (app, Facebook pixel, etc.) to delete the imported cohort")},getDeleteImportedFunnelError:function(){return g._("Please go to the respective event source (app, Facebook pixel, etc.) to delete the imported funnel")},getSaveImportedBreakdownError:function(){return g._("Please go to the respective event source (app, Facebook pixel, etc.) to save the imported breakdown")},getSaveImportedCohortError:function(){return g._("Please go to the respective event source (app, Facebook pixel, etc.) to save the imported cohort")},getSaveImportedFunnelError:function(){return g._("Please go to the respective event source (app, Facebook pixel, etc.) to save the imported funnel")}};e.exports=a}),null);
__d("FBAMetaAggregationPeriodChartOption",["fbt","AggregationPeriods$FbtEnum","FBAMetaChartOptionPlacement","FBAMetaChartOptionTypes","FBAMetaChartOptionUtils","FBAMetaChartRules","FBAMetaChartRuleUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBAMetaChartRules").ApplyAggregationPeriodRule,i=b("FBAMetaChartRuleUtils").getFirstAggregationPeriodFromChart;a=function(){__p&&__p();function a(a,c){this.metaEventOnChange="ChartBuilder_IntervalSelector_Change",this.metaEventOnOpen="ChartBuilder_IntervalSelector_Open",this.placement=b("FBAMetaChartOptionPlacement").SUBHEADER_LEFT,this.title="Aggregation Period: ",this.type=b("FBAMetaChartOptionTypes").AGGREGATION_PERIOD,this.chart=a,this.$1=c.supportedAggregationPeriods,this.disabled=c.disabled===!0,this.hidden=c.hidden===!0}var c=a.prototype;c.getConfigurationErrorInfo=function(){var a=this.getCurrentAggregationPeriod();if(a==null)return b("FBAMetaChartOptionUtils").getNoIntervalSelected();else if(!this.$1.includes(a))return b("FBAMetaChartOptionUtils").getIntervalNotValidErrorInfo();return null};c.getCurrentAggregationPeriod=function(){return i(this.chart)};c.getSupportedAggregationPeriods=function(){return this.$1.map(function(a){return{aggregationPeriod:a,label:g._({"HOUR":"Hourly","DAY":"Daily","WEEK":"Weekly","MONTH":"Monthly","RANGE":"Range"},[g._enum(a,b("AggregationPeriods$FbtEnum"))])}})};c.update=function(a){return new h(a).apply(this.chart)};return a}();e.exports=a}),null);
__d("FBAMetaBreakdownChartOption",["fbt","AnalyticsBuiltInBreakdowns","AnalyticsQueryBreakdownUtils","FBAMetaChartOptionPlacement","FBAMetaChartOptionTypes","FBAMetaChartOptionUtils","FBAMetaChartRules","FBAMetaChartRuleUtils","areEqual"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBAMetaChartRules").ApplyBreakdownsRule,i=b("FBAMetaChartRuleUtils").getBreakdownsFromChart,j=b("FBAMetaChartRuleUtils").getEventNamesFromChart;a=function(){__p&&__p();function a(a,c){this.metaEventOnChange="ChartBuilder_BreakdownSelector_Change",this.metaEventOnOpen="ChartBuilder_BreakdownSelector_Open",this.placement=b("FBAMetaChartOptionPlacement").HEADER,this.title="Breakdowns: ",this.type=b("FBAMetaChartOptionTypes").BREAKDOWN,this.chart=a,this.disabled=c.disabled===!0,this.hidden=c.hidden===!0,this.minBreakdowns=c.min!=null?c.min:0,this.maxBreakdowns=c.max!=null?c.max:100,this.supportAgeAndGender=c.supportAgeAndGender===!0,this.supportedCategories=new Set(c.supportedCategories),this.disableDemographicBreakdowns=c.disableDemographicBreakdowns===!0,this.placeholder=c.placeholder===void 0?g._("Select breakdown"):c.placeholder}var c=a.prototype;c.getConfigurationErrorInfo=function(){var a=this,c=this.getCurrentBreakdowns(),d=this.getSupportedBreakdowns();if(c.length===0&&this.minBreakdowns>0)return b("FBAMetaChartOptionUtils").getNoBreakdownSelectedErrorInfo();else if(c.length<this.minBreakdowns||c.length>this.maxBreakdowns)return b("FBAMetaChartOptionUtils").getBreakdownsOutsideLimitErrorInfo(this.minBreakdowns,this.maxBreakdowns);else if(c.some(function(b){return!a.$1(b,d)}))return b("FBAMetaChartOptionUtils").getBreakdownNotValidErrorInfo();return null};c.$1=function(a,c){var d=b("AnalyticsQueryBreakdownUtils").getBreakdownCategory(a);if(!d)return!1;return[b("AnalyticsBuiltInBreakdowns").WEB_TRAFFIC_SOURCE,b("AnalyticsBuiltInBreakdowns").WEB_TRAFFIC_SEARCH_SOURCE,b("AnalyticsBuiltInBreakdowns").WEB_TRAFFIC_SOCIAL_SOURCE].includes(a)?!0:c.some(function(b){return b.name===a})};c.getCurrentBreakdowns=function(){var a=i(this.chart);return this.supportAgeAndGender&&b("areEqual")(a,b("AnalyticsQueryBreakdownUtils").ageGenderBreakdowns)?[b("AnalyticsQueryBreakdownUtils").ageGenderBreakdownsString]:a};c.getSupportedBreakdowns=function(){return b("AnalyticsQueryBreakdownUtils").getAllBreakdowns(this.supportAgeAndGender,!0,this.supportedCategories,j(this.chart))};c.update=function(a){a=a;a[0]===b("AnalyticsQueryBreakdownUtils").ageGenderBreakdownsString&&(a=b("AnalyticsQueryBreakdownUtils").ageGenderBreakdowns);return new h(a).apply(this.chart)};return a}();e.exports=a}),null);
__d("FBAMetaChartNameChartOption",["FBAMetaChartOptionPlacement","FBAMetaChartOptionTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c){__p&&__p();this.disabled=!1;this.hidden=!1;this.placement=b("FBAMetaChartOptionPlacement").OVERHEAD_LEFT;this.title="Chart name: ";this.type=b("FBAMetaChartOptionTypes").CHART_NAME;this.chart=a;if(c){this.disabled=c.disabled===!0;this.hidden=c.hidden===!0;this.placement=(a=c.placement)!=null?a:b("FBAMetaChartOptionPlacement").OVERHEAD_LEFT}}var c=a.prototype;c.getConfigurationErrorInfo=function(){return null};c.getCurrentTitle=function(){return this.chart.getTitle()||""};return a}();e.exports=a}),null);
__d("FBAMetaChartTypeChartOption",["FBAChartTypes","FBAMetaChartOptionPlacement","FBAMetaChartOptionTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=Object.keys(b("FBAChartTypes")).map(function(a){return{category:b("FBAChartTypes")[a].category,chartType:a,icon:b("FBAChartTypes")[a].icon,label:b("FBAChartTypes")[a].title}});a=function(){__p&&__p();function a(a,c){__p&&__p();this.disabled=!1;this.hidden=!1;this.metaEventOnChange="ChartBuilder_ChartTypeSelector_Change";this.metaEventOnOpen="ChartBuilder_ChartTypeSelector_Open";this.placement=b("FBAMetaChartOptionPlacement").CHART_TYPE;this.title="Chart type:";this.type=b("FBAMetaChartOptionTypes").CHART_TYPE;this.chart=a;this.disabled=c.disabled===!0;this.hidden=c.hidden===!0;var d=c.allowedChartTypes;this.__supportedChartTypes=d?g.filter(function(a){return d.includes(a.chartType)}):g}var c=a.prototype;c.getConfigurationErrorInfo=function(){return null};c.getCurrentChartType=function(){return this.chart.getChartType()};c.getSupportedChartTypes=function(){return this.__supportedChartTypes};c.update=function(a){return this.chart.update({chartType:a})};return a}();e.exports=a}),null);
__d("FBAMetaCohortCollationIntervalChartOption",["FBAMetaChartOptionPlacement","FBAMetaChartOptionTypes","FBAMetaChartOptionUtils","FBAMetaChartRules","FBAMetaChartRuleUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartRules").ApplyCollationIntervalRule,h=b("FBAMetaChartRuleUtils").getFirstCollationIntervalFromChart,i=b("FBAMetaChartRuleUtils").getSupportedCollationIntervalsFromChart;a=function(){__p&&__p();function a(a,c){this.metaEventOnChange="ChartBuilder_IntervalSelector_Change",this.metaEventOnOpen="ChartBuilder_IntervalSelector_Open",this.placement=b("FBAMetaChartOptionPlacement").SUBHEADER_LEFT,this.title="Collation Interval: ",this.type=b("FBAMetaChartOptionTypes").COHORT_COLLATION_INTERVAL,this.chart=a,this.disabled=c.disabled===!0,this.hidden=c.hidden===!0}var c=a.prototype;c.getConfigurationErrorInfo=function(){var a=this.getCurrentCollationInterval();if(a==null)return b("FBAMetaChartOptionUtils").getNoIntervalSelected();else if(!this.getSupportedCollationIntervals().some(function(b){return b===a}))return b("FBAMetaChartOptionUtils").getIntervalNotValidErrorInfo();return null};c.getCurrentCollationInterval=function(){return h(this.chart)};c.getSupportedCollationIntervals=function(){return i(this.chart)};c.update=function(a){return new g(a).apply(this.chart)};return a}();e.exports=a}),null);
__d("FBAMetaCohortMetricChartOption",["FBAMetaChartOptionPlacement","FBAMetaChartOptionTypes","FBAMetaChartOptionUtils","FBAMetaChartRules","FBAMetaChartRuleUtils","InsightsCohortsUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartRules").ApplyCohortMetricRule,h=b("FBAMetaChartRuleUtils").getFirstCohortMetricFromChart,i=["CUMULATIVE_EVENTS","LIFETIME_VALUE","USER_RETENTION","VALUE_RETENTION"].map(function(a){return{label:b("InsightsCohortsUtils").getDisplayStringForMetric(a),metric:a}});a=function(){__p&&__p();function a(a,c){this.metaEventOnChange="ChartBuilder_MetricSelector_Change",this.metaEventOnOpen="ChartBuilder_MetricSelector_Open",this.placement=b("FBAMetaChartOptionPlacement").SUBHEADER_LEFT,this.title="Cohort Metric: ",this.type=b("FBAMetaChartOptionTypes").COHORT_METRIC,this.chart=a,this.disabled=c.disabled===!0,this.hidden=c.hidden===!0}var c=a.prototype;c.getConfigurationErrorInfo=function(){return this.getCurrentMetric()==null?b("FBAMetaChartOptionUtils").getNoMetricSelectedErrorInfo():null};c.getCurrentMetric=function(){return h(this.chart)};c.getSupportedMetrics=function(){return i};c.update=function(a){return new g(a).apply(this.chart)};return a}();e.exports=a}),null);
__d("FBAMetaDateRangeChartOption",["DateTime","FBAMetaChartOptionPlacement","FBAMetaChartOptionTypes","FBAMetaChartOptionUtils","FBAMetaChartRules","FBAMetaChartRuleUtils","LocalDate","Timezone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartRules").ApplyDateRangeRule,h=b("FBAMetaChartRuleUtils").getFirstAvailableDateRangeFromChart,i=b("FBAMetaChartRuleUtils").getFirstDateRangeFromChart;a=function(){__p&&__p();function a(a,c){this.metaEventOnChange="ChartBuilder_DatePicker_Change",this.metaEventOnOpen="ChartBuilder_DatePicker_Open",this.placement=b("FBAMetaChartOptionPlacement").HEADER,this.title="Date Range: ",this.type=b("FBAMetaChartOptionTypes").DATE_RANGE,this.chart=a,this.disabled=c.disabled===!0,this.hidden=c.hidden===!0}var c=a.prototype;c.getConfigurationErrorInfo=function(){__p&&__p();var a=this.getCurrentDateRange();if(!a)return b("FBAMetaChartOptionUtils").getNoDateRangeSelectedErrorInfo();var c=a.getSince();a=a.getUntil();if(c&&a&&c.isAfter(a))return b("FBAMetaChartOptionUtils").getDateRangeTimeTravelErrorInfo();var d=this.getAvailableDateRange(),e=d.since;d=d.until;return c&&c.isBefore(b("LocalDate").fromUTCDate(e))||a&&a.isAfter(b("LocalDate").fromUTCDate(d))?b("FBAMetaChartOptionUtils").getDateRangeOutOfRangeErrorInfo(e,d):null};c.getCurrentDateRange=function(){return i(this.chart)};c.getAvailableDateRange=function(){return h(this.chart)};c.getDateConstraints=function(){var a=this.getAvailableDateRange(),c=b("DateTime").localFromDate(a.since),d=b("DateTime").localFromDate(a.until),e=b("Timezone").UTC;return[function(a){return a.toDateTime(e).isSameOrAfter(c)},function(a){return a.toDateTime(e).isSameOrBefore(d)}]};c.update=function(a){return new g(a).apply(this.chart)};return a}();e.exports=a}),null);
__d("FBAMetaEventMetricChartOption",["AnalyticsMetricConfigs","AnalyticsQueryCurrency","FBAMetaChartOptionPlacement","FBAMetaChartOptionTypes","FBAMetaChartOptionUtils","FBAMetaChartRules","FBAMetaChartRuleUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartRules").ApplyEventMetricRule,h=b("FBAMetaChartRuleUtils").getEventNamesFromChart,i=b("FBAMetaChartRuleUtils").getFirstEventMetricFromChart,j=b("FBAMetaChartRuleUtils").getSupportedEventMetricsFromEventNamesOfChart;a=function(){__p&&__p();function a(a,c){__p&&__p();this.metaEventOnChange="ChartBuilder_MetricSelector_Change";this.metaEventOnOpen="ChartBuilder_MetricSelector_Open";this.placement=b("FBAMetaChartOptionPlacement").SUBHEADER_LEFT;this.title="Metric: ";this.type=b("FBAMetaChartOptionTypes").EVENT_METRIC;this.chart=a;this.disabled=c.disabled===!0;this.hidden=c.hidden===!0;a=j(a);a=a.filter(function(a){return c.allowedMetrics.includes(a)});this.supportedMetrics=a}var c=a.prototype;c.getConfigurationErrorInfo=function(){var a=this.getCurrentMetric();if(a==null)return b("FBAMetaChartOptionUtils").getNoMetricSelectedErrorInfo();else if(!this.supportedMetrics.includes(a))return b("FBAMetaChartOptionUtils").getMetricNotValidErrorInfo();return null};c.getCurrentMetric=function(){return i(this.chart)};c.getSupportedMetrics=function(){var a=h(this.chart),c=a.length===1?a[0]:null;return this.supportedMetrics.map(function(a){return{label:b("AnalyticsMetricConfigs").getMetricLabel(a,c,!1,b("AnalyticsQueryCurrency").get()),metric:a}})};c.update=function(a){return new g(a).apply(this.chart)};return a}();e.exports=a}),null);
__d("FBAChartEventDisplayStyle",[],(function(a,b,c,d,e,f){"use strict";e.exports=Object.freeze({FUNNEL:"FUNNEL",COHORT:"COHORT",DEFAULT:"DEFAULT"})}),null);
__d("FBAMetaEventNameChartOption",["fbt","CustomEventStore","FBAChartEventDisplayStyle","FBAMetaChartOptionPlacement","FBAMetaChartOptionTypes","FBAMetaChartOptionUtils","FBAMetaChartRules","FBAMetaChartRuleUtils","React","memoize"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBAMetaChartRules").ApplyNewQueriesUsingEventStagesRule,i=b("FBAMetaChartRuleUtils").getEventNamesFromChart,j=b("FBAMetaChartRuleUtils").getEventSegmentsFromChart;a=function(){__p&&__p();function a(a,c){this.metaEventOnChange="ChartBuilder_EventSelector_Change",this.metaEventOnOpen="ChartBuilder_EventSelector_Open",this.placement=b("FBAMetaChartOptionPlacement").HEADER,this.title="Events: ",this.type=b("FBAMetaChartOptionTypes").EVENT_NAME,this.getSupportedEvents=b("memoize")(function(){return b("CustomEventStore").getEventList().filter(function(a){return!a.is_deprecated}).map(function(a){var c=a.name;a=a.display_name;return{eventName:c,isPredefined:b("CustomEventStore").isPredefinedEvent(c),label:a||c}})}),this.chart=a,this.$1=c.defaultQueryFactory,this.canEditAlias=c.canEditAlias===!0,this.canRefineEvent=c.canRefineEvent===!0,this.disabled=c.disabled===!0,this.displayStyle=c.displayStyle||b("FBAChartEventDisplayStyle").DEFAULT,this.hidden=c.hidden===!0,this.repetition=c.repetition===!0,this.minEvents=c.min!=null?c.min:0,this.maxEvents=c.max!=null?c.max:100,this.placeholder=g._("Select event")}var c=a.prototype;c.getConfigurationErrorInfo=function(){var a=this.getCurrentEventNames();if(a.length===0&&this.minEvents>0)return b("FBAMetaChartOptionUtils").getNoEventSelectedErrorInfo();else if(a.length<this.minEvents||a.length>this.maxEvents)return b("FBAMetaChartOptionUtils").getEventsOutsideLimitsErrorInfo(this.minEvents,this.maxEvents);return null};c.getCurrentEventNames=function(){return i(this.chart)};c.getCurrentEventStages=function(){return j(this.chart)};c.update=function(a){var b=this.chart.getQueries().length>0?this.chart.getQueries()[0]:this.$1();return new h(b,a).apply(this.chart)};return a}();e.exports=a}),null);
__d("FBAMetaFunnelTimeConstraintChartOption",["FBAMetaChartOptionPlacement","FBAMetaChartOptionTypes","FBAMetaChartOptionUtils","FBAMetaChartRules","FBAMetaChartRuleUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartRules").ApplyFunnelTimeConstraintRule,h=b("FBAMetaChartRuleUtils").getFirstDaysInDateRangeFromChart,i=b("FBAMetaChartRuleUtils").getFirstFunnelTimeConstraintFromChart;a=function(){__p&&__p();function a(a,c){this.metaEventOnChange="Funnels_TimeConstraint_Change",this.placement=b("FBAMetaChartOptionPlacement").HEADER,this.title="Time constraint: ",this.type=b("FBAMetaChartOptionTypes").FUNNEL_TIME_CONSTRAINT,this.chart=a,this.disabled=c.disabled===!0,this.hidden=c.hidden===!0}var c=a.prototype;c.getConfigurationErrorInfo=function(){var a=this.getCurrentTimeConstraint();if(a==null||a===0)return null;return Math.floor(a/86400)>=100?b("FBAMetaChartOptionUtils").getFunnelTimeConstraintExceedMaxErrorInfo():null};c.getCurrentTimeConstraint=function(){return i(this.chart)||0};c.getDaysInRange=function(){return h(this.chart)||0};c.update=function(a){return new g(a).apply(this.chart)};return a}();e.exports=a}),null);
__d("FBAMetaSegmentChartOption",["FBAMetaChartOptionPlacement","FBAMetaChartOptionTypes","FBAMetaChartOptionUtils","FBAMetaChartRules","FBAMetaChartRuleUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartRules").ApplyFilterRule,h=b("FBAMetaChartRuleUtils").getFirstFilterFromChart;a=function(){__p&&__p();function a(a,c){this.metaEventOnChange="ChartBuilder_SegmentSelector_Change",this.placement=b("FBAMetaChartOptionPlacement").OVERHEAD_LEFT,this.title="Segment: ",this.type=b("FBAMetaChartOptionTypes").SEGMENT,this.chart=a,this.disabled=c.disabled===!0,this.hidden=c.hidden===!0}var c=a.prototype;c.getConfigurationErrorInfo=function(){var a=this.getCurrentFilter();return!a?b("FBAMetaChartOptionUtils").getNoSegmentSelectedErrorInfo():null};c.getCurrentFilter=function(){return h(this.chart)};c.updateFilter=function(a){return new g(a).apply(this.chart)};return a}();e.exports=a}),null);
__d("FBAMetaChartOptions",["FBAMetaAggregationPeriodChartOption","FBAMetaBreakdownChartOption","FBAMetaChartNameChartOption","FBAMetaChartTypeChartOption","FBAMetaCohortCollationIntervalChartOption","FBAMetaCohortMetricChartOption","FBAMetaDateRangeChartOption","FBAMetaEventMetricChartOption","FBAMetaEventNameChartOption","FBAMetaFunnelTimeConstraintChartOption","FBAMetaSegmentChartOption"],(function(a,b,c,d,e,f){"use strict";a={AggregationPeriodOption:b("FBAMetaAggregationPeriodChartOption"),BreakdownOption:b("FBAMetaBreakdownChartOption"),ChartNameOption:b("FBAMetaChartNameChartOption"),ChartTypeOption:b("FBAMetaChartTypeChartOption"),CohortCollationIntervalOption:b("FBAMetaCohortCollationIntervalChartOption"),CohortMetricOption:b("FBAMetaCohortMetricChartOption"),DateRangeOption:b("FBAMetaDateRangeChartOption"),EventMetricOption:b("FBAMetaEventMetricChartOption"),EventNameOption:b("FBAMetaEventNameChartOption"),FunnelTimeConstraintOption:b("FBAMetaFunnelTimeConstraintChartOption"),SegmentOption:b("FBAMetaSegmentChartOption")};e.exports=a}),null);
__d("FBAMetaBarChartConfig",["AnalyticsChartSegmentBehavior","AnalyticsQueryBreakdownCategory","AnalyticsQueryMetric","FBAEventQuerySpec","FBAMetaBaseChartConfig","FBAMetaChartConfigUtils","FBAMetaChartOptions","FBAMetaChartOptionTypes","FBAMetaChartRules","FBAMetaChartRuleUtils","FBAMetaSegmentChartOption","filterNulls"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartOptions").BreakdownOption,h=b("FBAMetaChartOptions").ChartNameOption,i=b("FBAMetaChartOptions").ChartTypeOption,j=b("FBAMetaChartOptions").DateRangeOption,k=b("FBAMetaChartOptions").EventMetricOption,l=b("FBAMetaChartOptions").EventNameOption;a=b("FBAMetaChartRules").ApplyAggregationPeriodRule;c=b("FBAMetaChartRules").ApplyChartSizeIfTileSizeRule;d=b("FBAMetaChartRules").ApplyTodayDateRangeIfLast24HoursRule;f=b("FBAMetaChartRules").ApplyUserEventMetricIfNotInXRule;var m=b("FBAMetaChartRules").ApplyUserEventMetricIfNotSupportedByEventNamesRule,n=b("FBAMetaChartRules").ClearBreakdownsIfNotSupportedByEventMetricRule,o=b("FBAMetaChartRules").ClearBreakdownsIfNotSupportedByEventNamesRule,p=b("FBAMetaChartRules").ClearBreakdownsIfNotTypeXRule,q=b("FBAMetaChartRules").ClearGoalRule,r=b("FBAMetaChartRules").ClearNonChartQueriesRule,s=b("FBAMetaChartRules").ConvertOtherQueriesToNewQueriesOfTypeXRule,t=b("FBAMetaChartRules").LimitToXBreakdownsIfMultipleQueriesRule,u=b("FBAMetaChartRules").LimitToXBreakdownsIfNotAgeGenderRule,v=b("FBAMetaChartRules").RuleSet,w=b("FBAMetaChartRuleUtils").createDefaultBarChartQuery,x=b("FBAMetaChartRuleUtils").doesFirstEventMetricInChartSupportBreakdown,y=b("FBAMetaChartRuleUtils").hasChartMultipleQueries,z=b("FBAMetaChartRuleUtils").hasChartQueries,A=[b("AnalyticsQueryBreakdownCategory").BUILT_IN,b("AnalyticsQueryBreakdownCategory").CUSTOM_PARAM,b("AnalyticsQueryBreakdownCategory").USER_PROPERTY,b("AnalyticsQueryBreakdownCategory").SESSION_PROPERTY],B=[b("AnalyticsQueryMetric").UNIQUE_USERS,b("AnalyticsQueryMetric").COUNT,b("AnalyticsQueryMetric").COUNT_PER_USER,b("AnalyticsQueryMetric").VALUE,b("AnalyticsQueryMetric").VALUE_PER_EVENT,b("AnalyticsQueryMetric").VALUE_PER_USER,b("AnalyticsQueryMetric").MEDIAN_VALUE,b("AnalyticsQueryMetric").MEDIAN_VALUE_PER_USER,b("AnalyticsQueryMetric").SESSION_BOUNCE_RATE],C=new v([new r(),new q(),new d(),new s(b("FBAEventQuerySpec")),new c("SMALL"),new a("RANGE"),new f(B),new m(),new p(A),new n(),new o(),new u(1),new t(1)]);v=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getSanitizor=function(){return C};d.getPrimaryActions=function(){return b("filterNulls")([b("FBAMetaChartConfigUtils").getPinActionTypeIfPermitted(this.__chart)])};d.getSecondaryActions=function(){return[["EXPORT"],["FEEDBACK"]]};d.getOptions=function(){var a=this.getChart(),c=this.getContext(),d=z(a),e=y(a),f=x(a);return[new h(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_NAME])),new i(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_TYPE])),new l(a,babelHelpers["extends"]({defaultQueryFactory:w,min:1,max:10},c[b("FBAMetaChartOptionTypes").EVENT_NAME])),new g(a,babelHelpers["extends"]({disabled:!d||!f,hidden:!d,supportAgeAndGender:!e,supportedCategories:A,min:0,max:1},c[b("FBAMetaChartOptionTypes").BREAKDOWN])),new k(a,babelHelpers["extends"]({disabled:!d,hidden:!d,allowedMetrics:B},c[b("FBAMetaChartOptionTypes").EVENT_METRIC])),new j(a,babelHelpers["extends"]({disabled:!d,hidden:!d},c[b("FBAMetaChartOptionTypes").DATE_RANGE])),new(b("FBAMetaSegmentChartOption"))(a,babelHelpers["extends"]({disabled:!d,hidden:!d||a.getSegmentBehavior()===b("AnalyticsChartSegmentBehavior").USE_GLOBAL},c[b("FBAMetaChartOptionTypes").SEGMENT]))]};return c}(b("FBAMetaBaseChartConfig"));e.exports=v}),null);
__d("FBAMetaBreakdownTableChartConfig",["AnalyticsChartSegmentBehavior","AnalyticsQueryBreakdownCategory","AnalyticsQueryMetric","FBAChartAction","FBAEventQuerySpec","FBAMetaBaseChartConfig","FBAMetaChartConfigUtils","FBAMetaChartOptions","FBAMetaChartOptionTypes","FBAMetaChartRules","FBAMetaChartRuleUtils","FBAMetaSegmentChartOption","filterNulls","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartOptions").BreakdownOption,h=b("FBAMetaChartOptions").ChartNameOption,i=b("FBAMetaChartOptions").ChartTypeOption,j=b("FBAMetaChartOptions").DateRangeOption,k=b("FBAMetaChartOptions").EventMetricOption,l=b("FBAMetaChartOptions").EventNameOption;a=b("FBAMetaChartRules").ApplyAggregationPeriodRule;c=b("FBAMetaChartRules").ApplyChartSizeIfTileSizeRule;d=b("FBAMetaChartRules").ApplyTodayDateRangeIfLast24HoursRule;f=b("FBAMetaChartRules").ApplyUserEventMetricIfNotInXRule;var m=b("FBAMetaChartRules").ApplyUserEventMetricIfNotSupportedByEventNamesRule,n=b("FBAMetaChartRules").ClearBreakdownsIfNotSupportedByEventMetricRule,o=b("FBAMetaChartRules").ClearBreakdownsIfNotSupportedByEventNamesRule,p=b("FBAMetaChartRules").ClearBreakdownsIfNotTypeXRule,q=b("FBAMetaChartRules").ClearGoalRule,r=b("FBAMetaChartRules").ClearNonChartQueriesRule,s=b("FBAMetaChartRules").ConvertOtherQueriesToNewQueriesOfTypeXRule,t=b("FBAMetaChartRules").LimitToXBreakdownsRule,u=b("FBAMetaChartRules").LimitToXQueriesRule,v=b("FBAMetaChartRules").RuleSet,w=b("FBAMetaChartRuleUtils").createDefaultBreakdownQuery,x=b("FBAMetaChartRuleUtils").hasChartQueries,y=[b("AnalyticsQueryBreakdownCategory").BUILT_IN,b("AnalyticsQueryBreakdownCategory").CUSTOM_PARAM,b("AnalyticsQueryBreakdownCategory").USER_PROPERTY,b("AnalyticsQueryBreakdownCategory").SESSION_PROPERTY],z=b("gkx")("678484")?[b("AnalyticsQueryMetric").COUNT,b("AnalyticsQueryMetric").COUNT_PER_USER,b("AnalyticsQueryMetric").VALUE,b("AnalyticsQueryMetric").VALUE_PER_EVENT,b("AnalyticsQueryMetric").UNIQUE_USERS,b("AnalyticsQueryMetric").MEDIAN_VALUE,b("AnalyticsQueryMetric").MEDIAN_VALUE_PER_USER,b("AnalyticsQueryMetric").SESSION_BOUNCE_RATE]:[b("AnalyticsQueryMetric").COUNT,b("AnalyticsQueryMetric").COUNT_PER_USER,b("AnalyticsQueryMetric").VALUE,b("AnalyticsQueryMetric").VALUE_PER_EVENT,b("AnalyticsQueryMetric").UNIQUE_USERS],A=new v([new r(),new q(),new d(),new s(b("FBAEventQuerySpec")),new c("SMALL"),new a("RANGE"),new f(z),new m(),new p(y),new n(),new o(),new u(1),new t(3)]);v=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getSanitizor=function(){return A};d.getPrimaryActions=function(){return b("FBAMetaChartConfigUtils").getPermittedSaveDeleteActions(this.__chart).filter(function(a){return a!=="DELETE"})};d.getSecondaryActions=function(){var a=b("filterNulls")([b("FBAMetaChartConfigUtils").getPinActionTypeIfPermitted(this.__chart),"HELP","EXPORT"]),c=b("FBAMetaChartConfigUtils").getPermittedSaveDeleteActions(this.__chart).includes("DELETE")?["DELETE"]:null;return b("filterNulls")([a,c,["FEEDBACK"]])};d.getOptions=function(){var a=this.getChart(),c=this.getContext(),d=x(a),e=a.getChartId();e=e!=null&&b("FBAMetaChartConfigUtils").getAvailableSaveDeleteActions(a).includes(b("FBAChartAction").SAVE_ACTION);return[new h(a,babelHelpers["extends"]({disabled:!e},c[b("FBAMetaChartOptionTypes").CHART_NAME])),new i(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_TYPE])),new l(a,babelHelpers["extends"]({defaultQueryFactory:w,min:1,max:1},c[b("FBAMetaChartOptionTypes").EVENT_NAME])),new g(a,babelHelpers["extends"]({disabled:!d,hidden:!d,supportedCategories:y,min:1,max:3},c[b("FBAMetaChartOptionTypes").BREAKDOWN])),new k(a,babelHelpers["extends"]({disabled:!d,hidden:!d,allowedMetrics:z},c[b("FBAMetaChartOptionTypes").EVENT_METRIC])),new j(a,babelHelpers["extends"]({disabled:!d,hidden:!d},c[b("FBAMetaChartOptionTypes").DATE_RANGE])),new(b("FBAMetaSegmentChartOption"))(a,babelHelpers["extends"]({disabled:!d,hidden:!d||a.getSegmentBehavior()===b("AnalyticsChartSegmentBehavior").USE_GLOBAL},c[b("FBAMetaChartOptionTypes").SEGMENT]))]};return c}(b("FBAMetaBaseChartConfig"));e.exports=v}),null);
__d("FBAMetaCohortChartConfig",["AnalyticsChartSegmentBehavior","AnalyticsQueryBreakdownCategory","FBAChartAction","FBAChartEventDisplayStyle","FBACohortQuerySpec","FBAMetaBaseChartConfig","FBAMetaChartConfigUtils","FBAMetaChartOptions","FBAMetaChartOptionTypes","FBAMetaChartRules","FBAMetaChartRuleUtils","FBAMetaSegmentChartOption","filterNulls"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartOptions").BreakdownOption,h=b("FBAMetaChartOptions").ChartNameOption,i=b("FBAMetaChartOptions").ChartTypeOption,j=b("FBAMetaChartOptions").CohortCollationIntervalOption,k=b("FBAMetaChartOptions").CohortMetricOption,l=b("FBAMetaChartOptions").DateRangeOption,m=b("FBAMetaChartOptions").EventNameOption;a=b("FBAMetaChartRules").ApplyBestCollationIntervalIfNotSupportedByDateRangeRule;c=b("FBAMetaChartRules").ApplyChartSizeIfTileSizeRule;d=b("FBAMetaChartRules").ApplyTodayDateRangeIfLast24HoursRule;f=b("FBAMetaChartRules").ClearBreakdownsIfNotSupportedByEventNamesRule;var n=b("FBAMetaChartRules").ClearBreakdownsIfNotTypeXRule,o=b("FBAMetaChartRules").ClearGoalRule,p=b("FBAMetaChartRules").ClearNonChartQueriesRule,q=b("FBAMetaChartRules").ClearQueriesIfNoEventRule,r=b("FBAMetaChartRules").ConvertOtherQueriesToNewQueriesOfTypeXRule,s=b("FBAMetaChartRules").LimitToXBreakdownsRule,t=b("FBAMetaChartRules").LimitToXQueriesRule,u=b("FBAMetaChartRules").RuleSet,v=b("FBAMetaChartRuleUtils").createDefaultCohortQuery,w=b("FBAMetaChartRuleUtils").hasChartQueries,x=[b("AnalyticsQueryBreakdownCategory").BUILT_IN,b("AnalyticsQueryBreakdownCategory").USER_PROPERTY,b("AnalyticsQueryBreakdownCategory").CUSTOM_PARAM],y=new u([new p(),new o(),new d(),new r(b("FBACohortQuerySpec")),new c("SMALL"),new q(),new a(),new n(x),new f(),new t(1),new s(1)]);u=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getSanitizor=function(){return y};d.getPrimaryActions=function(){return b("FBAMetaChartConfigUtils").getPermittedSaveDeleteActions(this.__chart).filter(function(a){return a!=="DELETE"})};d.getSecondaryActions=function(){var a=b("filterNulls")([b("FBAMetaChartConfigUtils").getPinActionTypeIfPermitted(this.__chart),"HELP","EXPORT"]),c=b("FBAMetaChartConfigUtils").getPermittedSaveDeleteActions(this.__chart).includes("DELETE")?["DELETE"]:null;return b("filterNulls")([a,c,["FEEDBACK"]])};d.getOptions=function(){var a=this.getChart(),c=this.getContext(),d=w(a),e=a.getChartId();e=e!=null&&b("FBAMetaChartConfigUtils").getAvailableSaveDeleteActions(a).includes(b("FBAChartAction").SAVE_ACTION);return[new h(a,babelHelpers["extends"]({disabled:!e},c[b("FBAMetaChartOptionTypes").CHART_NAME])),new i(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_TYPE])),new m(a,babelHelpers["extends"]({canRefineEvent:!0,defaultQueryFactory:v,displayStyle:b("FBAChartEventDisplayStyle").COHORT,repetition:!0,min:2,max:2},c[b("FBAMetaChartOptionTypes").EVENT_NAME])),new k(a,babelHelpers["extends"]({disabled:!d,hidden:!d},c[b("FBAMetaChartOptionTypes").COHORT_METRIC])),new j(a,babelHelpers["extends"]({disabled:!d,hidden:!d},c[b("FBAMetaChartOptionTypes").COHORT_COLLATION_INTERVAL])),new g(a,babelHelpers["extends"]({disabled:!d,hidden:!d,supportedCategories:x,min:0,max:1},c[b("FBAMetaChartOptionTypes").BREAKDOWN])),new l(a,babelHelpers["extends"]({disabled:!d,hidden:!d},c[b("FBAMetaChartOptionTypes").DATE_RANGE])),new(b("FBAMetaSegmentChartOption"))(a,babelHelpers["extends"]({disabled:!d,hidden:!d||a.getSegmentBehavior()===b("AnalyticsChartSegmentBehavior").USE_GLOBAL},c[b("FBAMetaChartOptionTypes").SEGMENT]))]};return c}(b("FBAMetaBaseChartConfig"));e.exports=u}),null);
__d("FBAMetaCohortHeatMapChartConfig",["AnalyticsChartSegmentBehavior","FBAChartAction","FBAChartEventDisplayStyle","FBACohortQuerySpec","FBAMetaBaseChartConfig","FBAMetaChartConfigUtils","FBAMetaChartOptions","FBAMetaChartOptionTypes","FBAMetaChartRules","FBAMetaChartRuleUtils","filterNulls"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartOptions").ChartNameOption,h=b("FBAMetaChartOptions").ChartTypeOption,i=b("FBAMetaChartOptions").CohortMetricOption,j=b("FBAMetaChartOptions").DateRangeOption,k=b("FBAMetaChartOptions").EventNameOption,l=b("FBAMetaChartOptions").SegmentOption;a=b("FBAMetaChartRules").ApplyBestCollationIntervalRule;c=b("FBAMetaChartRules").ApplyChartSizeIfTileSizeRule;d=b("FBAMetaChartRules").ApplyTodayDateRangeIfLast24HoursRule;f=b("FBAMetaChartRules").ClearGoalRule;var m=b("FBAMetaChartRules").ClearNonChartQueriesRule,n=b("FBAMetaChartRules").ClearQueriesIfNoEventRule,o=b("FBAMetaChartRules").ConvertOtherQueriesToNewQueriesOfTypeXRule,p=b("FBAMetaChartRules").LimitToXBreakdownsRule,q=b("FBAMetaChartRules").LimitToXQueriesRule,r=b("FBAMetaChartRules").RuleSet,s=b("FBAMetaChartRuleUtils").createDefaultCohortQuery,t=b("FBAMetaChartRuleUtils").hasChartQueries,u=new r([new m(),new f(),new d(),new o(b("FBACohortQuerySpec")),new c("SMALL"),new n(),new a(),new q(1),new p(0)]);r=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getSanitizor=function(){return u};d.getPrimaryActions=function(){return b("filterNulls")([b("FBAMetaChartConfigUtils").getPinActionTypeIfPermitted(this.__chart)])};d.getSecondaryActions=function(){return[["EXPORT"],["FEEDBACK"]]};d.getOptions=function(){var a=this.getChart(),c=this.getContext(),d=t(a),e=a.getChartId();e=e!=null&&b("FBAMetaChartConfigUtils").getAvailableSaveDeleteActions(a).includes(b("FBAChartAction").SAVE_ACTION);return[new g(a,babelHelpers["extends"]({disabled:!e},c[b("FBAMetaChartOptionTypes").CHART_NAME])),new h(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_TYPE])),new k(a,babelHelpers["extends"]({canRefineEvent:!0,defaultQueryFactory:s,displayStyle:b("FBAChartEventDisplayStyle").COHORT,repetition:!0,min:2,max:2},c[b("FBAMetaChartOptionTypes").EVENT_NAME])),new i(a,babelHelpers["extends"]({disabled:!d,hidden:!d},c[b("FBAMetaChartOptionTypes").COHORT_METRIC])),new j(a,babelHelpers["extends"]({disabled:!d,hidden:!d},c[b("FBAMetaChartOptionTypes").DATE_RANGE])),new l(a,babelHelpers["extends"]({disabled:!d,hidden:!d||a.getSegmentBehavior()===b("AnalyticsChartSegmentBehavior").USE_GLOBAL},c[b("FBAMetaChartOptionTypes").SEGMENT]))]};return c}(b("FBAMetaBaseChartConfig"));e.exports=r}),null);
__d("FBAMetaDonutChartConfig",["AnalyticsChartSegmentBehavior","AnalyticsQueryBreakdownCategory","AnalyticsQueryMetric","FBAEventQuerySpec","FBAMetaBaseChartConfig","FBAMetaChartConfigUtils","FBAMetaChartOptions","FBAMetaChartOptionTypes","FBAMetaChartRules","FBAMetaChartRuleUtils","filterNulls"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartOptions").BreakdownOption,h=b("FBAMetaChartOptions").ChartNameOption,i=b("FBAMetaChartOptions").ChartTypeOption,j=b("FBAMetaChartOptions").DateRangeOption,k=b("FBAMetaChartOptions").EventMetricOption,l=b("FBAMetaChartOptions").EventNameOption,m=b("FBAMetaChartOptions").SegmentOption;a=b("FBAMetaChartRules").ApplyAggregationPeriodRule;c=b("FBAMetaChartRules").ApplyChartSizeIfTileSizeRule;d=b("FBAMetaChartRules").ApplyTodayDateRangeIfLast24HoursRule;f=b("FBAMetaChartRules").ApplyUserEventMetricIfNotInXRule;var n=b("FBAMetaChartRules").ApplyUserEventMetricIfNotSupportedByEventNamesRule,o=b("FBAMetaChartRules").ClearBreakdownsIfNotSupportedByEventMetricRule,p=b("FBAMetaChartRules").ClearBreakdownsIfNotSupportedByEventNamesRule,q=b("FBAMetaChartRules").ClearBreakdownsIfNotTypeXRule,r=b("FBAMetaChartRules").ClearGoalRule,s=b("FBAMetaChartRules").ClearNonChartQueriesRule,t=b("FBAMetaChartRules").ConvertOtherQueriesToNewQueriesOfTypeXRule,u=b("FBAMetaChartRules").LimitToXBreakdownsRule,v=b("FBAMetaChartRules").LimitToXQueriesRule,w=b("FBAMetaChartRules").RuleSet,x=b("FBAMetaChartRuleUtils").createDefaultEventQuery,y=b("FBAMetaChartRuleUtils").hasChartQueries,z=[b("AnalyticsQueryMetric").UNIQUE_USERS,b("AnalyticsQueryMetric").COUNT,b("AnalyticsQueryMetric").VALUE],A=[b("AnalyticsQueryBreakdownCategory").BUILT_IN,b("AnalyticsQueryBreakdownCategory").CUSTOM_PARAM,b("AnalyticsQueryBreakdownCategory").USER_PROPERTY,b("AnalyticsQueryBreakdownCategory").SESSION_PROPERTY],B=new w([new s(),new r(),new d(),new t(b("FBAEventQuerySpec")),new c("SMALL"),new a("RANGE"),new f(z),new n(),new q(A),new o(),new p(),new v(1),new u(1)]);w=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getSanitizor=function(){return B};d.getPrimaryActions=function(){return b("filterNulls")([b("FBAMetaChartConfigUtils").getPinActionTypeIfPermitted(this.__chart)])};d.getSecondaryActions=function(){return[["EXPORT"],["FEEDBACK"]]};d.getOptions=function(){var a=this.getChart(),c=this.getContext(),d=y(a);return[new h(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_NAME])),new i(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_TYPE])),new l(a,babelHelpers["extends"]({defaultQueryFactory:x,min:1,max:1},c[b("FBAMetaChartOptionTypes").EVENT_NAME])),new g(a,babelHelpers["extends"]({disabled:!d,hidden:!d,supportedCategories:A,min:1,max:1},c[b("FBAMetaChartOptionTypes").BREAKDOWN])),new k(a,babelHelpers["extends"]({disabled:!d,hidden:!d,allowedMetrics:z},c[b("FBAMetaChartOptionTypes").EVENT_METRIC])),new j(a,babelHelpers["extends"]({disabled:!d,hidden:!d},c[b("FBAMetaChartOptionTypes").DATE_RANGE])),new m(a,babelHelpers["extends"]({disabled:!d,hidden:!d||a.getSegmentBehavior()===b("AnalyticsChartSegmentBehavior").USE_GLOBAL},c[b("FBAMetaChartOptionTypes").SEGMENT]))]};return c}(b("FBAMetaBaseChartConfig"));e.exports=w}),null);
__d("FBAMetaFunnelChartConfig",["AnalyticsChartSegmentBehavior","FBAChartAction","FBAChartEventDisplayStyle","FBAFunnelQuerySpec","FBAMetaBaseChartConfig","FBAMetaChartConfigUtils","FBAMetaChartOptions","FBAMetaChartOptionTypes","FBAMetaChartRules","FBAMetaChartRuleUtils","FBAMetaSegmentChartOption","filterNulls","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartOptions").BreakdownOption,h=b("FBAMetaChartOptions").ChartNameOption,i=b("FBAMetaChartOptions").ChartTypeOption,j=b("FBAMetaChartOptions").DateRangeOption,k=b("FBAMetaChartOptions").EventNameOption,l=b("FBAMetaChartOptions").FunnelTimeConstraintOption;a=b("FBAMetaChartRules").ApplyChartSizeIfTileSizeRule;c=b("FBAMetaChartRules").ApplyTodayDateRangeIfLast24HoursRule;d=b("FBAMetaChartRules").ClearBreakdownsIfNotSupportedByEventNamesRule;f=b("FBAMetaChartRules").ClearBreakdownsIfNotTypeXRule;var m=b("FBAMetaChartRules").ClearGoalRule,n=b("FBAMetaChartRules").ClearNonChartQueriesRule,o=b("FBAMetaChartRules").ClearQueriesIfNoEventRule,p=b("FBAMetaChartRules").ConvertOtherQueriesToNewQueriesOfTypeXRule,q=b("FBAMetaChartRules").LimitToXBreakdownsRule,r=b("FBAMetaChartRules").LimitToXFunnelStagesRule,s=b("FBAMetaChartRules").LimitToXQueriesRule,t=b("FBAMetaChartRules").RuleSet,u=b("FBAMetaChartRuleUtils").createDefaultFunnelQuery,v=b("FBAMetaChartRuleUtils").hasChartQueries,w=b("gkx")("682923")?["BUILT_IN","CUSTOM_PARAM"]:["BUILT_IN"],x=new t([new n(),new m(),new c(),new p(b("FBAFunnelQuerySpec")),new a("SMALL"),new o(),new f(w),new d(),new q(1),new r(10),new s(1)]);t=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getSanitizor=function(){return x};d.getPrimaryActions=function(){return b("FBAMetaChartConfigUtils").getPermittedSaveDeleteActions(this.__chart).filter(function(a){return a!=="DELETE"})};d.getSecondaryActions=function(){var a=b("filterNulls")([b("FBAMetaChartConfigUtils").getPinActionTypeIfPermitted(this.__chart),"HELP","EXPORT"]),c=b("FBAMetaChartConfigUtils").getPermittedSaveDeleteActions(this.__chart).includes("DELETE")?["DELETE"]:null;return b("filterNulls")([a,c,["FEEDBACK"]])};d.getOptions=function(){var a=this.getChart(),c=this.getContext(),d=v(a),e=a.getChartId();e=e!=null&&b("FBAMetaChartConfigUtils").getAvailableSaveDeleteActions(a).includes(b("FBAChartAction").SAVE_ACTION);return[new h(a,babelHelpers["extends"]({disabled:!e},c[b("FBAMetaChartOptionTypes").CHART_NAME])),new i(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_TYPE])),new k(a,babelHelpers["extends"]({canEditAlias:!0,canRefineEvent:!0,defaultQueryFactory:u,displayStyle:b("FBAChartEventDisplayStyle").FUNNEL,repetition:!0,min:1,max:10},c[b("FBAMetaChartOptionTypes").EVENT_NAME])),new g(a,babelHelpers["extends"]({disabled:!d,hidden:!d,supportedCategories:w,min:0,max:1},c[b("FBAMetaChartOptionTypes").BREAKDOWN])),new l(a,babelHelpers["extends"]({disabled:!d,hidden:!d},c[b("FBAMetaChartOptionTypes").FUNNEL_TIME_CONSTRAINT])),new j(a,babelHelpers["extends"]({disabled:!d,hidden:!d},c[b("FBAMetaChartOptionTypes").DATE_RANGE])),new(b("FBAMetaSegmentChartOption"))(a,babelHelpers["extends"]({disabled:!d,hidden:!d||a.getSegmentBehavior()===b("AnalyticsChartSegmentBehavior").USE_GLOBAL},c[b("FBAMetaChartOptionTypes").SEGMENT]))]};return c}(b("FBAMetaBaseChartConfig"));e.exports=t}),null);
__d("FBAMetaKPITileChartConfig",["AnalyticsChartSegmentBehavior","AnalyticsChartSize","AnalyticsQueryMetric","FBAEventQuerySpec","FBAMetaBaseChartConfig","FBAMetaChartConfigUtils","FBAMetaChartOptions","FBAMetaChartOptionTypes","FBAMetaChartRules","FBAMetaChartRuleUtils","filterNulls"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartOptions").ChartNameOption,h=b("FBAMetaChartOptions").ChartTypeOption,i=b("FBAMetaChartOptions").DateRangeOption,j=b("FBAMetaChartOptions").EventMetricOption,k=b("FBAMetaChartOptions").EventNameOption,l=b("FBAMetaChartOptions").SegmentOption;a=b("FBAMetaChartRules").ApplyAggregationPeriodRule;c=b("FBAMetaChartRules").ApplyChartSizeRule;d=b("FBAMetaChartRules").ApplyTodayDateRangeIfLast24HoursRule;f=b("FBAMetaChartRules").ApplyUserEventMetricIfNotInXRule;var m=b("FBAMetaChartRules").ApplyUserEventMetricIfNotSupportedByEventNamesRule,n=b("FBAMetaChartRules").ClearGoalRule,o=b("FBAMetaChartRules").ClearNonChartQueriesRule,p=b("FBAMetaChartRules").ConvertOtherQueriesToNewQueriesOfTypeXRule,q=b("FBAMetaChartRules").LimitToXBreakdownsRule,r=b("FBAMetaChartRules").LimitToXQueriesRule,s=b("FBAMetaChartRules").RuleSet,t=b("FBAMetaChartRuleUtils").createDefaultEventQuery,u=b("FBAMetaChartRuleUtils").hasChartQueries,v=[b("AnalyticsQueryMetric").UNIQUE_USERS,b("AnalyticsQueryMetric").COUNT,b("AnalyticsQueryMetric").COUNT_PER_USER,b("AnalyticsQueryMetric").VALUE,b("AnalyticsQueryMetric").VALUE_PER_EVENT,b("AnalyticsQueryMetric").VALUE_PER_USER,b("AnalyticsQueryMetric").MEDIAN_VALUE,b("AnalyticsQueryMetric").MEDIAN_VALUE_PER_USER,b("AnalyticsQueryMetric").SESSION_BOUNCE_RATE],w=new s([new o(),new n(),new d(),new p(b("FBAEventQuerySpec")),new c(b("AnalyticsChartSize").TILE),new a("RANGE"),new f(v),new m(),new r(1),new q(0)]);s=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getSanitizor=function(){return w};d.getPrimaryActions=function(){return b("filterNulls")([b("FBAMetaChartConfigUtils").getPinActionTypeIfPermitted(this.__chart)])};d.getOptions=function(){var a=this.getChart(),c=this.getContext(),d=u(a);return[new g(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_NAME])),new h(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_TYPE])),new k(a,babelHelpers["extends"]({defaultQueryFactory:t,min:1,max:1},c[b("FBAMetaChartOptionTypes").EVENT_NAME])),new j(a,babelHelpers["extends"]({disabled:!d,hidden:!d,allowedMetrics:v},c[b("FBAMetaChartOptionTypes").EVENT_METRIC])),new i(a,babelHelpers["extends"]({disabled:!d,hidden:!d},c[b("FBAMetaChartOptionTypes").DATE_RANGE])),new l(a,babelHelpers["extends"]({disabled:!d,hidden:!d||a.getSegmentBehavior()===b("AnalyticsChartSegmentBehavior").USE_GLOBAL},c[b("FBAMetaChartOptionTypes").SEGMENT]))]};return c}(b("FBAMetaBaseChartConfig"));e.exports=s}),null);
__d("FBAMetaOverlapChartConfig",["AnalyticsBuiltInBreakdowns","AnalyticsChartSegmentBehavior","AnalyticsQueryBreakdownCategory","FBAEventQuerySpec","FBAMetaBaseChartConfig","FBAMetaChartOptions","FBAMetaChartOptionTypes","FBAMetaChartRules","FBAMetaChartRuleUtils","FBAMetaSegmentChartOption"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartOptions").BreakdownOption,h=b("FBAMetaChartOptions").ChartNameOption,i=b("FBAMetaChartOptions").ChartTypeOption,j=b("FBAMetaChartOptions").DateRangeOption,k=b("FBAMetaChartOptions").EventNameOption;a=b("FBAMetaChartRules").ApplyAggregationPeriodRule;c=b("FBAMetaChartRules").ApplyBreakdownsIfNoBreakdownsRule;d=b("FBAMetaChartRules").ApplyChartSizeIfTileSizeRule;f=b("FBAMetaChartRules").ApplyEventMetricRule;var l=b("FBAMetaChartRules").ApplyTodayDateRangeIfLast24HoursRule,m=b("FBAMetaChartRules").ClearBreakdownsIfNotSupportedByEventMetricRule,n=b("FBAMetaChartRules").ClearBreakdownsIfNotSupportedByEventNamesRule,o=b("FBAMetaChartRules").ClearBreakdownsIfNotTypeXRule,p=b("FBAMetaChartRules").ClearGoalRule,q=b("FBAMetaChartRules").ClearNonChartQueriesRule,r=b("FBAMetaChartRules").ConvertOtherQueriesToNewQueriesOfTypeXRule,s=b("FBAMetaChartRules").LimitToXBreakdownsRule,t=b("FBAMetaChartRules").LimitToXQueriesRule,u=b("FBAMetaChartRules").RuleSet,v=b("FBAMetaChartRuleUtils").createDefaultOverlapQuery,w=b("FBAMetaChartRuleUtils").hasChartQueries,x=[b("AnalyticsQueryBreakdownCategory").BUILT_IN,b("AnalyticsQueryBreakdownCategory").CUSTOM_PARAM],y=new u([new q(),new p(),new l(),new r(b("FBAEventQuerySpec")),new d("SMALL"),new a("RANGE"),new f("OVERLAP"),new o(x),new n(),new m(),new c([b("AnalyticsBuiltInBreakdowns").CHANNEL]),new s(1),new t(1)]);u=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getSanitizor=function(){return y};d.getSecondaryActions=function(){return[["EXPORT"],["FEEDBACK"]]};d.getOptions=function(){var a=this.getChart(),c=this.getContext(),d=w(a);return[new h(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_NAME])),new i(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_TYPE])),new k(a,babelHelpers["extends"]({defaultQueryFactory:v,min:1,max:1},c[b("FBAMetaChartOptionTypes").EVENT_NAME])),new g(a,babelHelpers["extends"]({disabled:!d,hidden:!d,supportedCategories:x,disableDemographicBreakdowns:!0,min:1,max:1},c[b("FBAMetaChartOptionTypes").BREAKDOWN])),new j(a,babelHelpers["extends"]({disabled:!d,hidden:!d},c[b("FBAMetaChartOptionTypes").DATE_RANGE])),new(b("FBAMetaSegmentChartOption"))(a,babelHelpers["extends"]({disabled:!d,hidden:!d||a.getSegmentBehavior()===b("AnalyticsChartSegmentBehavior").USE_GLOBAL},c[b("FBAMetaChartOptionTypes").SEGMENT]))]};return c}(b("FBAMetaBaseChartConfig"));e.exports=u}),null);
__d("FBAChartConst",["fbt","AnalyticsBuiltInBreakdowns","AnalyticsEntityType","AnalyticsPredefinedEventsConfig","AppCustomEventType","AppEventQueryAggregationPeriod","AppEventsAggregatingColumn","AppEventsLowCardinalityAggregatingColumn"],(function(a,b,c,d,e,f,g){"use strict";a=b("AnalyticsPredefinedEventsConfig").events;e.exports={AggregatingColumns:b("AppEventsAggregatingColumn"),AggregationPeriods:["MONTH","WEEK","DAY","HOUR"],BuiltInBreakdowns:b("AnalyticsBuiltInBreakdowns"),CUSTOM_EVENT:g._("Custom events").toString(),CollationIntervals:["MONTHLY","WEEKLY","DAILY"],CustomEvents:b("AppCustomEventType"),LowCardinalityAggregatingColumns:b("AppEventsLowCardinalityAggregatingColumn"),PREDEFINED_EVENT:g._("Predefined events").toString(),PredefinedEvents:a}}),null);
__d("FBAMetaTimeSeriesChartConfig",["AnalyticsChartSegmentBehavior","AnalyticsQueryBreakdownCategory","AnalyticsQueryMetric","FBAChartConst","FBAEventQuerySpec","FBAMetaBaseChartConfig","FBAMetaChartConfigUtils","FBAMetaChartOptions","FBAMetaChartOptionTypes","FBAMetaChartRules","FBAMetaChartRuleUtils","FBAMetaSegmentChartOption","filterNulls"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAChartConst").AggregationPeriods,h=b("FBAMetaChartOptions").AggregationPeriodOption,i=b("FBAMetaChartOptions").BreakdownOption,j=b("FBAMetaChartOptions").ChartNameOption,k=b("FBAMetaChartOptions").ChartTypeOption,l=b("FBAMetaChartOptions").DateRangeOption,m=b("FBAMetaChartOptions").EventMetricOption,n=b("FBAMetaChartOptions").EventNameOption;a=b("FBAMetaChartRules").ApplyAggregationPeriodIfRangeQueryRule;c=b("FBAMetaChartRules").ApplyChartSizeIfTileSizeRule;d=b("FBAMetaChartRules").ApplyDailyAggregationPeriodIfMauWauDauOrStickinessEventMetricRule;f=b("FBAMetaChartRules").ApplyTodayDateRangeIfLast24HoursRule;var o=b("FBAMetaChartRules").ApplyUserEventMetricIfMauWauDauEventMetricWithBreakdownsOrMultipleEventsRule,p=b("FBAMetaChartRules").ApplyUserEventMetricIfNotInXRule,q=b("FBAMetaChartRules").ApplyUserEventMetricIfNotSupportedByEventNamesRule,r=b("FBAMetaChartRules").ClearBreakdownsIfNotSupportedByEventMetricRule,s=b("FBAMetaChartRules").ClearBreakdownsIfNotSupportedByEventNamesRule,t=b("FBAMetaChartRules").ClearBreakdownsIfNotTypeXRule,u=b("FBAMetaChartRules").ClearNonChartQueriesRule,v=b("FBAMetaChartRules").ConvertOtherQueriesToNewQueriesOfTypeXRule,w=b("FBAMetaChartRules").LimitToXBreakdownsIfMultipleQueriesRule,x=b("FBAMetaChartRules").LimitToXBreakdownsRule,y=b("FBAMetaChartRules").RuleSet,z=b("FBAMetaChartRuleUtils").createDefaultTimeSeriesQuery,A=b("FBAMetaChartRuleUtils").doesFirstEventMetricInChartSupportBreakdown,B=b("FBAMetaChartRuleUtils").getFirstEventMetricFromChart,C=b("FBAMetaChartRuleUtils").hasChartQueries,D=[b("AnalyticsQueryBreakdownCategory").BUILT_IN,b("AnalyticsQueryBreakdownCategory").CUSTOM_PARAM,b("AnalyticsQueryBreakdownCategory").USER_PROPERTY,b("AnalyticsQueryBreakdownCategory").SESSION_PROPERTY],E=[b("AnalyticsQueryMetric").COUNT,b("AnalyticsQueryMetric").COUNT_PER_USER,b("AnalyticsQueryMetric").MAU_WAU_DAU,b("AnalyticsQueryMetric").MEDIAN_VALUE,b("AnalyticsQueryMetric").MEDIAN_VALUE_PER_USER,b("AnalyticsQueryMetric").UNIQUE_USERS,b("AnalyticsQueryMetric").SESSION_BOUNCE_RATE,b("AnalyticsQueryMetric").STICKINESS,b("AnalyticsQueryMetric").VALUE,b("AnalyticsQueryMetric").VALUE_PER_EVENT,b("AnalyticsQueryMetric").VALUE_PER_USER],F=new y([new u(),new f(),new v(b("FBAEventQuerySpec")),new c("SMALL"),new a("DAY"),new d(),new p(E),new q(),new t(D),new r(),new s(),new x(1),new w(0),new o()]);y=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getSanitizor=function(){return F};d.getPrimaryActions=function(){return b("filterNulls")([b("FBAMetaChartConfigUtils").getPinActionTypeIfPermitted(this.__chart)])};d.getSecondaryActions=function(){return[["SET_GOAL"],["EXPORT"],["FEEDBACK"]]};d.getOptions=function(){var a=this.getChart(),c=this.getContext(),d=C(a),e=A(a);e=e&&a.getQueries().length<=1;var f=B(a);return[new j(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_NAME])),new k(a,babelHelpers["extends"]({},c[b("FBAMetaChartOptionTypes").CHART_TYPE])),new n(a,babelHelpers["extends"]({defaultQueryFactory:z,min:1,max:10,repetition:!1},c[b("FBAMetaChartOptionTypes").EVENT_NAME])),new i(a,babelHelpers["extends"]({disabled:!d||!e,hidden:!d,supportedCategories:D,min:0,max:e?1:0},c[b("FBAMetaChartOptionTypes").BREAKDOWN])),new m(a,babelHelpers["extends"]({disabled:!d,hidden:!d,allowedMetrics:E},c[b("FBAMetaChartOptionTypes").EVENT_METRIC])),new h(a,babelHelpers["extends"]({disabled:!d||f===b("AnalyticsQueryMetric").MAU_WAU_DAU||f===b("AnalyticsQueryMetric").STICKINESS,hidden:!d,supportedAggregationPeriods:g},c[b("FBAMetaChartOptionTypes").AGGREGATION_PERIOD])),new l(a,babelHelpers["extends"]({disabled:!d,hidden:!d},c[b("FBAMetaChartOptionTypes").DATE_RANGE])),new(b("FBAMetaSegmentChartOption"))(a,babelHelpers["extends"]({disabled:!d,hidden:!d||a.getSegmentBehavior()===b("AnalyticsChartSegmentBehavior").USE_GLOBAL},c[b("FBAMetaChartOptionTypes").SEGMENT]))]};return c}(b("FBAMetaBaseChartConfig"));e.exports=y}),null);
__d("FBAMetaChartConfigs",["AnalyticsChartType","FBAMetaBarChartConfig","FBAMetaBaseChartConfig","FBAMetaBreakdownTableChartConfig","FBAMetaCohortChartConfig","FBAMetaCohortHeatMapChartConfig","FBAMetaDonutChartConfig","FBAMetaFunnelChartConfig","FBAMetaKPITileChartConfig","FBAMetaOverlapChartConfig","FBAMetaTimeSeriesChartConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();switch(a.getChartType()){case b("AnalyticsChartType").FUNNEL:return new(b("FBAMetaFunnelChartConfig"))(a,c);case b("AnalyticsChartType").BAR_CHART:return new(b("FBAMetaBarChartConfig"))(a,c);case b("AnalyticsChartType").COHORT:return new(b("FBAMetaCohortChartConfig"))(a,c);case b("AnalyticsChartType").COHORT_HEATMAP:return new(b("FBAMetaCohortHeatMapChartConfig"))(a,c);case b("AnalyticsChartType").OVERLAP_CHART:return new(b("FBAMetaOverlapChartConfig"))(a,c);case b("AnalyticsChartType").DONUT_CHART:return new(b("FBAMetaDonutChartConfig"))(a,c);case b("AnalyticsChartType").BREAKDOWN_TABLE:return new(b("FBAMetaBreakdownTableChartConfig"))(a,c);case b("AnalyticsChartType").KPI_TILE:return new(b("FBAMetaKPITileChartConfig"))(a,c);case b("AnalyticsChartType").TIME_SERIES:return new(b("FBAMetaTimeSeriesChartConfig"))(a,c);default:throw Error("Unsupported Chart Type")}}e.exports={getMetaChartConfig:a,BarChartConfig:b("FBAMetaBarChartConfig"),BaseChartConfig:b("FBAMetaBaseChartConfig"),BreakdownChartConfig:b("FBAMetaBreakdownTableChartConfig"),CohortChartConfig:b("FBAMetaCohortChartConfig"),FunnelChartConfig:b("FBAMetaFunnelChartConfig"),OverlapChartConfig:b("FBAMetaOverlapChartConfig"),TimeSeriesChartConfig:b("FBAMetaTimeSeriesChartConfig")}}),null);
__d("FBAUniversalBuilderActionRendererUtils",["AnalyticsChartType","FBAMetaChartOptionUtils","FBAMetaChartRuleUtils","React","SUISimplePopover.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartRuleUtils").getBreakdownsFromChart;a={_renderPinToDashboardError:function(a){return this._renderPopover(b("FBAMetaChartOptionUtils").getPinDisabledError(a))},_renderSetGoalError:function(a){return this._renderPopover(b("FBAMetaChartOptionUtils").getSetGoalError(a))},_renderExportError:function(a){return this._renderPopover(b("FBAMetaChartOptionUtils").getExportError(a))},_renderSaveDeleteError:function(a){return this._renderPopover(b("FBAMetaChartOptionUtils").getSaveDeleteError(a))},_renderBreakdownTableWithoutBreakdownError:function(){return this._renderPopover(b("FBAMetaChartOptionUtils").getBreakdownTableWithoutBreakdownsError())},_renderPopover:function(a){return b("React").createElement(b("SUISimplePopover.react"),{content:a})},getDisabledReason:function(a,c){__p&&__p();var d=a.getChart().getChartType(),e=c==="SAVE"||c==="SAVE_AS"||c==="SAVE_INTERNAL";if(a.getChart().isImported())if(e)switch(d){case b("AnalyticsChartType").BREAKDOWN_TABLE:return b("FBAMetaChartOptionUtils").getSaveImportedBreakdownError();case b("AnalyticsChartType").COHORT:return b("FBAMetaChartOptionUtils").getSaveImportedCohortError();case b("AnalyticsChartType").FUNNEL:return b("FBAMetaChartOptionUtils").getSaveImportedFunnelError()}else if(c==="DELETE")switch(d){case b("AnalyticsChartType").BREAKDOWN_TABLE:return b("FBAMetaChartOptionUtils").getDeleteImportedBreakdownError();case b("AnalyticsChartType").COHORT:return b("FBAMetaChartOptionUtils").getDeleteImportedCohortError();case b("AnalyticsChartType").FUNNEL:return b("FBAMetaChartOptionUtils").getDeleteImportedFunnelError()}d=d===b("AnalyticsChartType").BREAKDOWN_TABLE&&!g(a.getChart()).length;if(d&&e)return b("FBAMetaChartOptionUtils").getBreakdownTableWithoutBreakdownsError();d=a.getConfigurationErrorInfo();if(d==null)return null;switch(c){case"PIN":return b("FBAMetaChartOptionUtils").getPinDisabledError(d);case"SET_GOAL":return b("FBAMetaChartOptionUtils").getSetGoalError(d);case"EXPORT":return b("FBAMetaChartOptionUtils").getExportError(d);case"DELETE":case"SAVE":case"SAVE_AS":case"SAVE_INTERNAL":return b("FBAMetaChartOptionUtils").getSaveDeleteError(d)}return null}};e.exports=a}),null);
__d("FBAUniversalBuilderHelpDialog",["fbt","AnalyticsChartType","BonsaiContextualHelp","GriffinDialog","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=(a={},a[b("AnalyticsChartType").BREAKDOWN_TABLE]="BreakdownsCreateEdit",a[b("AnalyticsChartType").COHORT]="CohortsCardInfo",a[b("AnalyticsChartType").COHORT_HEATMAP]="CohortsCardInfo",a),i=(c={},c[b("AnalyticsChartType").BREAKDOWN_TABLE]=g._("Breakdowns"),c[b("AnalyticsChartType").COHORT]=g._("Your cohort"),c[b("AnalyticsChartType").COHORT_HEATMAP]=g._("Your cohort"),c);d=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.chartType,c=i[a];a=h[a];return c==null||a==null?null:b("React").createElement(b("GriffinDialog"),{onClose:this.props.onClose,text:b("React").createElement(b("BonsaiContextualHelp"),{helpKey:a}),title:c})};return c}(b("React").PureComponent);e.exports=d}),null);
__d("FBAUniversalBuilderMetaEventUtils",["ActiveSectionStore","FalcorCommonViews","FBAMetaChartOptionTypes","FBAMetaLoggerWWW","GriffinSections","first","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaLoggerWWW").META_LOGGER,h=b("FBAMetaLoggerWWW").logDashboardEvent,i=(a={},a[b("GriffinSections").CUSTOM_EVENTS]={intervalSelectorChange:"Events_IntervalSelector_Change",intervalSelectorOpen:"Events_IntervalSelector_Open",metricSelectorChange:"Events_MetricSelector_Change",metricSelectorOpen:"Events_MetricSelector_Open"},a[b("GriffinSections").FUNNELS]={breakdownSelectorChange:"Funnels_BreakdownSelector_Change",breakdownSelectorOpen:"Funnels_BreakdownSelector_Open",deleteClick:"Funnels_DeleteButton_Click",eventSelectorOpen:"Funnels_EventSelector_Open",saveAsClick:"Funnels_SaveAsButton_Click",saveClick:"Funnels_SaveButton_Click",saveInternalClick:"Funnels_SaveInternalButton_Click"},a[b("GriffinSections").COHORTS]={breakdownSelectorChange:"Cohorts_BreakdownSelector_Change",breakdownSelectorOpen:"Cohorts_BreakdownSelector_Open",deleteClick:"Cohorts_DeleteButton_Click",intervalSelectorChange:"Cohorts_IntervalSelector_Change",intervalSelectorOpen:"Cohorts_IntervalSelector_Open",metricSelectorChange:"Cohorts_MetricSelector_Change",metricSelectorOpen:"Cohorts_MetricSelector_Open",saveAsClick:"Cohorts_SaveAsButton_Click",saveClick:"Cohorts_SaveButton_Click",saveInternalClick:"Cohorts_SaveInternalButton_Click"},a[b("GriffinSections").DASHBOARDS]={breakdownSelectorChange:"DashboardChart_BreakdownSelector_Change",breakdownSelectorOpen:"DashboardChart_BreakdownSelector_Open",chartSelectorChange:"DashboardChart_ChartTypeSelector_Change",dateSelectorChange:"DashboardChart_DatePicker_Change",intervalSelectorChange:"DashboardChart_IntervalSelector_Change",intervalSelectorOpen:"DashboardChart_IntervalSelector_Open",metricSelectorChange:"DashboardChart_MetricSelector_Change",metricSelectorOpen:"DashboardChart_MetricSelector_Open",segmentSelectorChange:"DashboardChart_SegmentSelector_Change"},a[b("GriffinSections").RETENTION]={breakdownSelectorChange:"Retention_BreakdownSelector_Change",intervalSelectorChange:"Retention_IntervalSelector_Change"},a[b("GriffinSections").LIFETIME_VALUE]={breakdownSelectorChange:"LTV_BreakdownSelector_Change",intervalSelectorChange:"LTV_IntervalSelector_Change"},a[b("GriffinSections").OVERLAP]={breakdownSelectorChange:"Overlap_BreakdownSelector_Change",breakdownSelectorOpen:"Overlap_BreakdownSelector_Open",eventSelectorChange:"Overlap_EventSelector_Change",eventSelectorOpen:"Overlap_EventSelector_Open"},a[b("GriffinSections").BREAKDOWN_TABLE]={breakdownSelectorChange:"Breakdowns_BreakdownSelector_Change",breakdownSelectorOpen:"Breakdowns_BreakdownSelector_Open",deleteClick:"Breakdowns_DeleteButton_Click",eventSelectorChange:"Breakdowns_EventSelector_Change",eventSelectorOpen:"Breakdowns_EventSelector_Open",saveAsClick:"Breakdowns_SaveAsButton_Click",saveClick:"Breakdowns_SaveButton_Click",saveInternalClick:"Breakdowns_SaveInternalButton_Click"},a);c={logAddEventMetaEvent:function(a){var c=b("ActiveSectionStore").getActiveSectionName();a=a.chart;var d=a.getChartId();c===b("GriffinSections").FUNNELS?g.logEvent("Funnels_BuilderRule_Add",{chart_type:a.getChartType(),feature_id:d}):c===b("GriffinSections").DASHBOARDS&&h("DashboardChart_EventSelector_Add",{chart_type:a.getChartType()},{feature_id:d})},logMoveEventMetaEvent:function(a){var c=b("ActiveSectionStore").getActiveSectionName();if(c===b("GriffinSections").FUNNELS){c=a.chart;a=c.getChartId();g.logEvent("Funnels_BuilderRule_Move",{chart_type:c.getChartType(),feature_id:a})}},logRemoveEventMetaEvent:function(a){var c=b("ActiveSectionStore").getActiveSectionName();a=a.chart;var d=a.getChartId();c===b("GriffinSections").FUNNELS?g.logEvent("Funnels_BuilderRule_Remove",{chart_type:a.getChartType(),feature_id:d}):c===b("GriffinSections").DASHBOARDS&&h("DashboardChart_EventSelector_Remove",{chart_type:a.getChartType()},{feature_id:d})},logToggleRefineMetaEvent:function(a,c){var d=b("ActiveSectionStore").getActiveSectionName();a=a.chart;a=a.getChartId();d===b("GriffinSections").FUNNELS&&g.logEvent("Funnels_BuilderRule_Toggle",{feature_id:a,ad_hoc:"true",shown:c});g.logEvent("ChartBuilder_BuilderRule_Toggle",{feature_id:a,ad_hoc:"true",shown:c})},logSelectorOnChangeEvent:function(a,c,d){__p&&__p();var e=c.getChartId(),f=a.metaEventOnChange;a=a.type;var h;switch(a){case b("FBAMetaChartOptionTypes").AGGREGATION_PERIOD:case b("FBAMetaChartOptionTypes").COHORT_COLLATION_INTERVAL:h="intervalSelectorChange";break;case b("FBAMetaChartOptionTypes").BREAKDOWN:h="breakdownSelectorChange";break;case b("FBAMetaChartOptionTypes").CHART_TYPE:h="chartSelectorChange";break;case b("FBAMetaChartOptionTypes").COHORT_METRIC:case b("FBAMetaChartOptionTypes").EVENT_METRIC:h="metricSelectorChange";break;case b("FBAMetaChartOptionTypes").DATE_RANGE:h="dateSelectorChange";break;case b("FBAMetaChartOptionTypes").EVENT_NAME:h="eventSelectorChange";break;case b("FBAMetaChartOptionTypes").SEGMENT:h="segmentSelectorChange";break;default:break}a=babelHelpers["extends"]({chart_type:c.getChartType(),feature_id:e},d);this._logSectionSpecificEvent(h,a);f&&g.logEvent(f,a)},logSelectorOnOpenEvent:function(a){__p&&__p();var c=a.chart,d=a.metaEventOnOpen;a=a.type;var e=c.getChartId(),f;switch(a){case b("FBAMetaChartOptionTypes").AGGREGATION_PERIOD:case b("FBAMetaChartOptionTypes").COHORT_COLLATION_INTERVAL:f="intervalSelectorOpen";break;case b("FBAMetaChartOptionTypes").BREAKDOWN:f="breakdownSelectorOpen";break;case b("FBAMetaChartOptionTypes").COHORT_METRIC:case b("FBAMetaChartOptionTypes").EVENT_METRIC:f="metricSelectorOpen";break;case b("FBAMetaChartOptionTypes").DATE_RANGE:f="dateSelectorOpen";break;case b("FBAMetaChartOptionTypes").EVENT_NAME:f="eventSelectorOpen";break;default:break}a={chart_type:c.getChartType(),feature_id:e};this._logSectionSpecificEvent(f,a);d&&g.logEvent(d,a)},logSaveEvent:function(a,c,d){__p&&__p();var e,f,h;!d?h="saveClick":h=c?"saveInternalClick":"saveAsClick";c=b("ActiveSectionStore").getActiveSectionName();h=(f=i)!=null?(f=f[c])!=null?f[h]:f:f;if(!h)return;f=a.getChartId();var j=d?b("FalcorCommonViews").DETAILS:b("FalcorCommonViews").CREATE,k;switch(c){case b("GriffinSections").BREAKDOWN_TABLE:c=b("nullthrows")(b("first")(a.getEventQueries()));k={feature_id:f,num_breakdowns:c.getBreakdowns().length,ad_hoc:!0};break;case b("GriffinSections").COHORTS:c=d?"original_feature_id":"feature_id";k=(e={},e[c]=f,e.view=j,e);break;case b("GriffinSections").FUNNELS:e=b("nullthrows")(b("first")(a.getFunnelQueries()));c=d?"original_feature_id":"feature_id";k=(a={},a[c]=f,a.view=j,a.num_stages=e.getStages().length,a.ad_hoc="true",a.time_constraint=e.getTimeConstraint(),a);break;default:return}g.logEvent(h,k)},logDeleteEvent:function(a){__p&&__p();var c,d=b("ActiveSectionStore").getActiveSectionName();c=(c=i)!=null?(c=c[d])!=null?c.deleteClick:c:c;if(!c)return;var e;switch(d){case b("GriffinSections").COHORTS:e={feature_id:a};break;case b("GriffinSections").BREAKDOWN_TABLE:case b("GriffinSections").FUNNELS:e={feature_id:a,ad_hoc:"true"};break}g.logEvent(c,e)},logPinEvent:function(){var a=b("ActiveSectionStore").getActiveSectionName();a===b("GriffinSections").FUNNELS&&g.logEvent("Funnels_PinButton_Click")},logActionMenuItemClick:function(a,b){g.logEvent("ChartBuilder_OptionMenu_Click",{feature_id:a,type:b})},logActionMenuOpen:function(a){g.logEvent("ChartBuilder_OptionMenu_Open",{feature_id:a})},_logSectionSpecificEvent:function(a,c){var d;if(!a)return;var e=b("ActiveSectionStore").getActiveSectionName();e=(d=i)!=null?(d=d[e])!=null?d[a]:d:d;if(!e)return;g.logEvent(e,c)}};e.exports=c}),null);
__d("FBAUniversalBuilderSaveEditDialog",["invariant","AnalyticsBreakdownBuilder","AnalyticsBreakdownTableGraphQLUtils","AnalyticsChartType","AnalyticsCohortGraphQLUtils","AnalyticsFeatureDialogOptions","AnalyticsFunnelGraphQLUtils","CurrentAnalyticsEntity","FBAChartAction","FBAUniversalBuilderMetaEventUtils","GriffinAdHocCohortBuilder","GriffinAdHocFunnelBuilder","GriffinEditFeatureDialog","React","first","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=(a={},a[b("FBAChartAction").SAVE]=b("AnalyticsFeatureDialogOptions").SAVE,a[b("FBAChartAction").SAVE_AS]=b("AnalyticsFeatureDialogOptions").SAVE_AS,a[b("FBAChartAction").SAVE_INTERNAL]=b("AnalyticsFeatureDialogOptions").SAVE_INTERNAL,a[b("FBAChartAction").DELETE]=b("AnalyticsFeatureDialogOptions").DELETE,a),i=!0,j=!1;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={hasError:!1,isLoading:!1,name:d.props.chartConfig.getTitle()||""},d.$6=function(){d.setState({hasError:!1,isLoading:!1}),d.props.onClose()},d.$8=function(){d.setState({hasError:!0,isLoading:!1})},d.$7=function(a){d.setState({name:a})},d.$2=function(){var a=!d.props.chartConfig.getChartId();d.$9(j,a)},d.$3=function(){d.$9(j,!0)},d.$4=function(){d.$9(i,!0)},d.$5=function(){var a=b("nullthrows")(d.props.chartConfig.getChartId());switch(d.props.chartConfig.getChartType()){case b("AnalyticsChartType").COHORT:b("AnalyticsCohortGraphQLUtils")["delete"](a,{onError:d.$8});break;case b("AnalyticsChartType").FUNNEL:b("AnalyticsFunnelGraphQLUtils")["delete"](a,{onError:d.$8});break;case b("AnalyticsChartType").BREAKDOWN_TABLE:b("AnalyticsBreakdownTableGraphQLUtils")["delete"](a,{onError:d.$8});break}b("FBAUniversalBuilderMetaEventUtils").logDeleteEvent(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.props,d=c.chartConfig;c=c.dialogType;d=d.getChartType();d=b("nullthrows")(this.$1(d))[h[c]];var e;switch(c){case b("FBAChartAction").SAVE:e=this.$2;break;case b("FBAChartAction").SAVE_AS:e=this.$3;break;case b("FBAChartAction").SAVE_INTERNAL:e=this.$4;break;case b("FBAChartAction").DELETE:e=this.$5;break;default:g(0,2041)}return b("React").createElement(b("GriffinEditFeatureDialog"),{descriptionText:d.descriptionText,errorText:this.state.hasError?d.errorText:void 0,isLoading:this.state.isLoading,loadingText:d.loadingText,name:this.state.name,onButtonClick:function(){a.setState({hasError:!1,isLoading:!0}),e()},onClose:this.$6,onNameChange:this.$7,showTextInput:d.showTextInput,title:d.title})};d.$1=function(a){switch(a){case b("AnalyticsChartType").COHORT:return b("GriffinAdHocCohortBuilder").DialogConfigs;case b("AnalyticsChartType").FUNNEL:return b("GriffinAdHocFunnelBuilder").DialogConfigs;case b("AnalyticsChartType").BREAKDOWN_TABLE:return b("AnalyticsBreakdownBuilder").DialogConfigs;default:return null}};d.$9=function(a,c){__p&&__p();var d=this.props.chartConfig.getChartId(),e=this.props.chartConfig,f=this.state.name,g=b("CurrentAnalyticsEntity").getID();switch(e.getChartType()){case b("AnalyticsChartType").COHORT:var h=b("nullthrows")(b("first")(e.getCohortQueries())),i=h.getInitialEvent();h=h.getFollowUpEvent();c?b("AnalyticsCohortGraphQLUtils").create(g,f.toString(),a,i,h,{onCompleted:this.$6,onError:this.$8}):b("AnalyticsCohortGraphQLUtils").update(b("nullthrows")(d),f.toString(),i,h,{onCompleted:this.$6,onError:this.$8});break;case b("AnalyticsChartType").FUNNEL:i=b("nullthrows")(b("first")(e.getFunnelQueries()));h=i.getStages();var j=b("first")(i.getBreakdowns());i=i.getTimeConstraint();c?b("AnalyticsFunnelGraphQLUtils").create({analyticsEntityID:g,breakdown:j,funnelName:f.toString(),isInternal:a,stages:h,timeConstraint:i},{onCompleted:this.$6,onError:this.$8}):b("AnalyticsFunnelGraphQLUtils").update({breakdown:j,funnelID:b("nullthrows")(d),funnelName:f.toString(),stages:h,timeConstraint:i},{onCompleted:this.$6,onError:this.$8});break;case b("AnalyticsChartType").BREAKDOWN_TABLE:j=b("nullthrows")(b("first")(e.getEventQueries()));h=j.getBreakdowns();i=j.getEventName();c?b("AnalyticsBreakdownTableGraphQLUtils").create(g,f.toString(),h,i,a,{onCompleted:this.$6,onError:this.$8}):b("AnalyticsBreakdownTableGraphQLUtils").update(b("nullthrows")(d),f.toString(),h,i,{onCompleted:this.$6,onError:this.$8});break}b("FBAUniversalBuilderMetaEventUtils").logSaveEvent(this.props.chartConfig,a,c)};return c}(b("React").Component);e.exports=c}),null);
__d("FBAUniversalBuilderSetGoalDialog",["GriffinDashboardGoalCard","GriffinModal","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={applyGoalline:!!c.props.config.getGoal()},c.$1=function(a){c.setState({applyGoalline:!0}),c.props.onChange(c.props.config.update({goal:a}))},c.$2=function(){c.setState({applyGoalline:!1}),c.props.onChange(c.props.config.update({goal:null}))},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props.config;return b("React").createElement(b("GriffinModal"),{content:b("React").createElement(b("GriffinDashboardGoalCard"),{applyGoalline:this.state.applyGoalline,canApply:!!a.getQueries().length,goal:a.getGoal(),onApplyGoal:this.$1,onDeleteGoal:this.$2}),onClose:this.props.onClose,width:600})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderActionRenderer",["fbt","ActiveSectionStore","AnalyticsActionButton","AnalyticsDashboardChartPinModal","AnalyticsFeedbackDialog","FBAChartAction","FBAUniversalBuilderActionRendererUtils","FBAUniversalBuilderHelpDialog","FBAUniversalBuilderMetaEventUtils","FBAUniversalBuilderSaveEditDialog","FBAUniversalBuilderSetGoalDialog","GriffinNUX","GriffinSections","React","SimpleNUXMessage","SimpleNUXMessageTypes","flattenArray","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showDialogType:null},d.$4=function(a){return b("FBAUniversalBuilderActionRendererUtils").getDisabledReason(d.props.config,a)},d.$5=function(a){b("FBAUniversalBuilderMetaEventUtils").logActionMenuItemClick(d.props.config.getChart().getChartId(),a);switch(a){case b("FBAChartAction").HELP:case b("FBAChartAction").SET_GOAL:case b("FBAChartAction").FEEDBACK:case b("FBAChartAction").SAVE:case b("FBAChartAction").SAVE_AS:case b("FBAChartAction").SAVE_INTERNAL:case b("FBAChartAction").DELETE:d.setState({showDialogType:a});break;case b("FBAChartAction").PIN:d.$12();break;case b("FBAChartAction").EXPORT:d.props.onExportData();break}},d.$13=function(){d.setState({showDialogType:null})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){if(!this.props.config.getPrimaryActions().length&&!this.props.config.getSecondaryActions().length)return null;var a=b("ActiveSectionStore").getActiveSectionName(),c=a===b("GriffinSections").DASHBOARDS?b("SimpleNUXMessageTypes").ANALYTICS_UNIVERSAL_BUILDER_DASHBOARD_SECTION_OPTION_MENU:b("SimpleNUXMessageTypes").ANALYTICS_UNIVERSAL_BUILDER_BREAKDOWN_SECTION_OPTION_MENU;return b("React").createElement("div",null,this.$1(),b("React").createElement(b("GriffinNUX"),{canShow:this.$2(),contextRef:"breakdownSectionBuilderNUX",nuxKey:c,offsetX:5,offsetY:10,position:"left",title:a===b("GriffinSections").DASHBOARDS?g._("More options are available by clicking here, including exporting and setting goals."):g._("Click here for more options, including exporting and saving."),width:"normal"},b("React").createElement("span",null)),this.$3(c))};d.$3=function(a){__p&&__p();var c=this,d=this.props.config,e=d.getPrimaryActions();d=d.getSecondaryActions();var f=this.props.chartContext.hiddenActions;f!=null&&(e=e.filter(function(a){return!f.has(a)}),d=d.map(function(a){return a.filter(function(a){return!f.has(a)})}).filter(function(a){return a.length!==0}));var g=[].concat(e,b("flattenArray")(d)).filter(this.$4);return b("React").createElement(b("AnalyticsActionButton"),{disabledActions:g,getDisabledReason:this.$4,hidePrimaryIcon:!0,onClick:this.$5,onOpen:function(){return c.$6(a)},primaryActions:e,secondaryActions:d})};d.$6=function(a){var c=this.props.config.getChart().getChartId();b("FBAUniversalBuilderMetaEventUtils").logActionMenuOpen(c);b("SimpleNUXMessage").markMessageSeenByUser(a);this.forceUpdate()};d.$2=function(){var a=b("ActiveSectionStore").getActiveSectionName();if(a===b("GriffinSections").BREAKDOWN_TABLE||a===b("GriffinSections").COHORTS||a===b("GriffinSections").FUNNELS)return!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").ANALYTICS_UNIVERSAL_BUILDER_BREAKDOWN_SECTION_OPTION_MENU);return a===b("GriffinSections").DASHBOARDS?!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").ANALYTICS_UNIVERSAL_BUILDER_DASHBOARD_SECTION_OPTION_MENU):!1};d.$1=function(){switch(this.state.showDialogType){case b("FBAChartAction").HELP:return this.$7();case b("FBAChartAction").PIN:return this.$8();case b("FBAChartAction").SET_GOAL:return this.$9();case b("FBAChartAction").FEEDBACK:return this.$10();case b("FBAChartAction").SAVE:case b("FBAChartAction").SAVE_AS:case b("FBAChartAction").SAVE_INTERNAL:case b("FBAChartAction").DELETE:return this.$11();default:return null}};d.$12=function(){b("FBAUniversalBuilderMetaEventUtils").logPinEvent(),this.setState({showDialogType:b("FBAChartAction").PIN})};d.$7=function(){return this.state.showDialogType!==b("FBAChartAction").HELP?null:b("React").createElement(b("FBAUniversalBuilderHelpDialog"),{chartType:this.props.config.getChart().getChartType(),onClose:this.$13})};d.$8=function(){if(this.state.showDialogType!==b("FBAChartAction").PIN)return null;var a=this.props,c=a.config;a=a.globalFilterSetListing;c=c.getChart();var d=c.getTitle()||g._("Untitled chart");return b("React").createElement(b("AnalyticsDashboardChartPinModal"),{chart:c,chartType:c.getChartType(),globalFilterSetListing:a,onClose:this.$13,placeholderChartName:d})};d.$9=function(){return this.state.showDialogType!==b("FBAChartAction").SET_GOAL?null:b("React").createElement(b("FBAUniversalBuilderSetGoalDialog"),{config:this.props.config.getChart(),onChange:this.props.onChange,onClose:this.$13})};d.$10=function(){return this.state.showDialogType!==b("FBAChartAction").FEEDBACK?null:b("React").createElement(b("AnalyticsFeedbackDialog"),{onClose:this.$13})};d.$11=function(){var a=this.state.showDialogType;return a!==b("FBAChartAction").SAVE&&a!==b("FBAChartAction").SAVE_AS&&a!==b("FBAChartAction").SAVE_INTERNAL&&a!==b("FBAChartAction").DELETE?null:b("React").createElement(b("FBAUniversalBuilderSaveEditDialog"),{chartConfig:this.props.config.getChart(),dialogType:b("nullthrows")(a),onClose:this.$13})};return c}(b("React").Component);a.defaultProps={chartContext:babelHelpers["extends"]({},void 0)};e.exports=a}),null);
__d("FBAUniversalBuilderSubheaderOptionSelector",["ix","cssVar","Image.react","React","SUIBusinessThemeComponents","SUISelector.react","SUISelectorButton.react","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.disabled,c={background:"white",borderColor:"transparent",color:a?"#BEC3C9":"#606770"};c={typeStyle:babelHelpers["extends"]({},b("SUIBusinessThemeComponents").SUIButton.typeStyle,{color:"#606770",fontSize:"14px",fontWeight:"normal",lineHeight:"20px"}),use:{"default":{active:c,normal:c}}};a={use:{"default":{chevron:a?b("React").createElement(b("Image.react"),{src:g("514922")}):b("React").createElement(b("Image.react"),{src:g("568064")})}}};return b("React").createElement(b("SUISelector.react"),babelHelpers["extends"]({button:b("React").createElement(b("SUISelectorButton.react"),{uniformOverride:a,uniformOverrideButton:c})},this.props),this.props.children)};return c}(b("React").Component);e.exports=a}),null);
__d("FBAUniversalBuilderAggregationPeriodOptionRenderer",["FBAUniversalBuilderMetaEventUtils","FBAUniversalBuilderSubheaderOptionSelector","FlexLayout.react","React","SUIBusinessTheme","SUISelectorOption.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a=d.props.option.update(a);b("FBAUniversalBuilderMetaEventUtils").logSelectorOnChangeEvent(d.props.option,a);d.props.onChange(a)},d.$3=function(){b("FBAUniversalBuilderMetaEventUtils").logSelectorOnOpenEvent(d.props.option)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.option,c=a.hidden;if(c)return null;c=a.getCurrentAggregationPeriod();var d=a.getSupportedAggregationPeriods();return b("React").createElement(b("FlexLayout.react"),null,this.$1(c,d,a.disabled))};d.$1=function(a,c,d){c=c.map(function(a){return b("React").createElement(b("SUISelectorOption.react"),{key:a.aggregationPeriod,value:a.aggregationPeriod},a.label)});return b("React").createElement(b("FBAUniversalBuilderSubheaderOptionSelector"),{disabled:d,onChange:this.$2,onOpen:this.$3,theme:b("SUIBusinessTheme"),value:a},c)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderAddItemButton",["ix","cx","FlexLayout.react","Image.react","React","asset","suiMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.className,d=a.iconOnly,e=a.placeholder;a=a.showChevron;return b("React").createElement(b("FlexLayout.react"),{align:"center",className:c,direction:"horizontal"},b("React").createElement(b("FlexLayout.react"),{align:"center",className:(d?"_3ibe":"")+" _3ibd",direction:"horizontal"},d?null:e),d||!a?null:b("React").createElement(b("Image.react"),{className:"_3-99",src:g("483254")}))};return c}(b("React").Component);a.defaultProps={placeholder:"",showChevron:!0};e.exports=a}),null);
__d("FBAUniversalBuilderBreakdownOptionRenderer",["cssVar","cx","fbt","AnalyticsKeywordSearchSource","AnalyticsOnlyModeConfirmDialog","AnalyticsOnlyModeDialog","AnalyticsOnlyModeDialogStatus","AnalyticsOnlyModeUtils","AnalyticsQueryBreakdownCategoryLabels","AnalyticsQueryBreakdownUtils","BonsaiText","CornerEnum","FBAUniversalBuilderAddItemButton","FBAUniversalBuilderMetaEventUtils","FlexLayout.react","GriffinOrderableList.react","React","SearchableEntry","SUIAnalyticsGriffinUniversalBuilderTheme","SUICloseButton.react","SUILink.react","SUISearchableSelector.react","emptyFunction","suiMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={buttonRoundedCorners:b("CornerEnum").values,dropdownWidth:"auto",hasCategories:!0,theme:b("SUIAnalyticsGriffinUniversalBuilderTheme")};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={analyticsOnlyModeConfirmStatus:b("AnalyticsOnlyModeDialogStatus").HIDDEN,analyticsOnlyModeDialogVisible:!1,searchSource:new(b("AnalyticsKeywordSearchSource"))([])},d.$9=function(){b("FBAUniversalBuilderMetaEventUtils").logSelectorOnOpenEvent(d.props.option)},d.$6=function(a){d.$8(a.map(function(a){return a.item}),"reorder")},d.$10=function(a){if(!b("AnalyticsQueryBreakdownUtils").isDemographicBreakdown(a.getUniqueID()))return b("AnalyticsQueryBreakdownUtils").getTooltip(a.getUniqueID(),!1);a=d.props.option.disableDemographicBreakdowns;if(a)return i._("Not applicable");return b("AnalyticsOnlyModeUtils").isAnalyticsOnlyMode()?b("AnalyticsOnlyModeUtils").getTooltipForShowBy(d.$11):null},d.$4=function(a,c){__p&&__p();c===void 0&&(c=0);var e=d.props.option,f=e.getCurrentBreakdowns(),g=d.$14(),h=null,j=null;if(a!=null){j=a.item;g["delete"](j);h=(a=d.state.searchSource.find(j))!=null?a:new(b("SearchableEntry"))({title:b("AnalyticsQueryBreakdownUtils").getBreakdownTypeDisplayString(j),uniqueID:j})}a=b("React").createElement("span",{className:"_3_xl"+(e.disabled?"":" _7oaf")},h===null?b("BonsaiText").breakdowns.none:h.getTitle());var k=e.maxBreakdowns>1?i._("{=[index] .}",[i._param("=[index] .",b("React").createElement("span",{className:"_1eae"+(f.length>1?" _6asy":"")},i._({"*":"{index}."},[i._param("index",c+1,[0])])))]):null;return b("React").createElement(b("FlexLayout.react"),{align:"center",className:"_1eaf"+(c>0?" _3-99":""),direction:"horizontal",justify:"center",key:(j=j)!=null?j:"default"},k,b("React").createElement(b("SUISearchableSelector.react"),{customLabel:a,disabledEntryIDs:g,dropdownWidth:"auto",getTooltipForEntry:d.$10,hasCategories:!0,header:d.$15(c),isDisabled:e.disabled,onChange:function(a){var b=f.slice();b[c]=a.getUniqueID();d.$8(b,"change")},onOpened:d.$9,searchSource:d.state.searchSource,theme:b("SUIAnalyticsGriffinUniversalBuilderTheme"),value:h}),b("React").createElement(b("FlexLayout.react"),{align:"center",className:"_1eag"+(d.props.option.minBreakdowns>=f.length?" hidden_elem":""),justify:"center"},b("React").createElement(b("SUICloseButton.react"),{margin:"_3-8_",onClick:function(a){a=f.slice();a.splice(c,1);d.$8(a,"remove")},theme:b("SUIAnalyticsGriffinUniversalBuilderTheme")})))},d.$7=function(a){switch(a){case"ADD_ITEM":return d.$16()}return null},d.$11=function(){d.setState({analyticsOnlyModeDialogVisible:!0})},d.$1=function(){d.setState({analyticsOnlyModeDialogVisible:!1})},d.$3=function(){d.$2(b("AnalyticsOnlyModeDialogStatus").HIDDEN)},d.$2=function(a){d.setState({analyticsOnlyModeConfirmStatus:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.option;if(a.hidden)return null;var c=a.getCurrentBreakdowns(),d=this.state.analyticsOnlyModeDialogVisible?b("React").createElement(b("AnalyticsOnlyModeDialog"),{onHideDialog:this.$1,setConfirmDialogState:this.$2}):null,e=this.state.analyticsOnlyModeConfirmStatus===b("AnalyticsOnlyModeDialogStatus").HIDDEN?null:b("React").createElement(b("AnalyticsOnlyModeConfirmDialog"),{onHideDialog:this.$3,status:this.state.analyticsOnlyModeConfirmStatus}),f=a.maxBreakdowns;a=a.minBreakdowns;a=b("React").createElement(b("FlexLayout.react"),{align:"center",className:"_1ip3"+(c.length<f||c.length===a?" _3-91":"")},b("React").createElement("span",{className:"_4yra _3-91"},i._("by")),f===0?this.$4(null):b("React").createElement(b("GriffinOrderableList.react"),{auxiliaryItems:this.$5(),dragDisabled:c.length<=1,items:c.map(function(a,b){return{item:a,key:String(b)}}),onDragStart:b("emptyFunction"),onDrop:this.$6,renderAuxiliaryItem:this.$7,renderItem:this.$4,renderPlaceholder:this.$4}));return b("React").createElement("div",null,d,e,a)};c.getDerivedStateFromProps=function(a,c){a=a.option;if(a.hidden)return null;a=a.getSupportedBreakdowns().map(function(a){return new(b("SearchableEntry"))({title:a.label,type:b("AnalyticsQueryBreakdownCategoryLabels")[a.category],uniqueID:a.name})});return{analyticsOnlyModeConfirmStatus:c.analyticsOnlyModeConfirmStatus,analyticsOnlyModeDialogVisible:c.analyticsOnlyModeDialogVisible,searchSource:new(b("AnalyticsKeywordSearchSource"))(a)}};d.$8=function(a,c){a=this.props.option.update(a);b("FBAUniversalBuilderMetaEventUtils").logSelectorOnChangeEvent(this.props.option,a,{change_type:c});this.props.onChange(a)};d.$5=function(){var a=[],b=this.props.option,c=b.maxBreakdowns,d=b.getCurrentBreakdowns();b=!b.disabled&&d.length<c;b&&a.push("ADD_ITEM");return a};d.$12=function(){var a=this.props.option;return a.getCurrentBreakdowns().length<a.minBreakdowns?{use:{"default":{active:{background:"#1D3C78",color:"white"},normal:{background:"#3578E5",color:"white"}}}}:{use:{"default":{active:{background:"transparent"},normal:{background:"transparent"}}}}};d.$13=function(){var a=this.props.option,c=a.getCurrentBreakdowns();a=c.length<a.minBreakdowns;c=!a&&c.length>0;return b("React").createElement(b("FBAUniversalBuilderAddItemButton"),{className:(a||c?"_2pi9":"")+(!a&&!c?" _7oaf":""),iconOnly:c,placeholder:a?this.props.option.placeholder:b("BonsaiText").breakdowns.none,showChevron:a})};d.$14=function(){var a=this.props.option,c=a.disableDemographicBreakdowns;a=a.getCurrentBreakdowns();var d=c||b("AnalyticsOnlyModeUtils").isAnalyticsOnlyMode()?b("AnalyticsQueryBreakdownUtils").getDemographicBreakdowns():new Set();a.forEach(function(a){return d.add(a)});return d};d.$15=function(a){var c=this,d=this.props.option;return d.minBreakdowns>=d.getCurrentBreakdowns().length?null:b("React").createElement("div",null,b("React").createElement(b("SUILink.react"),{onClick:function(){var b=c.props.option.getCurrentBreakdowns().slice();b.splice(a,1);c.$8(b,"remove")}},i._("Clear Selection")))};d.$16=function(){var a=this,c=this.props.option,d=c.hidden;if(d)return null;var e=c.getCurrentBreakdowns();d=e.length?"add":"add-first";return b("React").createElement(b("SUISearchableSelector.react"),babelHelpers["extends"]({},j,{buttonUniformOverride:this.$12(),disabledEntryIDs:this.$14(),getTooltipForEntry:this.$10,key:d,onChange:function(b){var c=e.slice();c.push(b.getUniqueID());a.$8(c,"add")},onOpened:this.$9,placeholder:this.$13(),searchSource:this.state.searchSource,value:null}))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderChartNameOptionRenderer",["ix","cx","AnalyticsChartType","AnalyticsDashboardHeaderChartNameEditor","FBAChartAction","FBAChartTypes","FBAMetaChartRuleUtils","FBAUniversalBuilderSaveEditDialog","FDSText.react","FlexLayout.react","Image.react","Link.react","React","asset","suiMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FBAMetaChartRuleUtils").getBreakdownsFromChart,j=[b("AnalyticsChartType").BREAKDOWN_TABLE,b("AnalyticsChartType").COHORT,b("AnalyticsChartType").FUNNEL];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isShowingDialog:!1},c.$3=function(){c.setState({isShowingDialog:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.option;a=a.metaChartConfig;var d=c.hidden;if(d)return null;if(this.props.shouldUseNewDesign===!0)return b("React").createElement("div",{className:"_7qml"},b("React").createElement(b("AnalyticsDashboardHeaderChartNameEditor"),{chartTitle:b("FBAChartTypes")[a.getChart().getChartType()].title}));d=c.getCurrentTitle();if(!d)return null;a=c.disabled||this.$1();return b("React").createElement(b("FlexLayout.react"),{align:"center",className:"_3-8p _3-9c",style:{height:30}},this.$2(),b("React").createElement(b("FDSText.react"),{size:"header2"},d),a?null:b("React").createElement(b("Link.react"),{className:"_3-9a",onClick:this.$3},b("React").createElement(b("Image.react"),{src:g("490351")})))};d.$1=function(){var a=this.props.metaChartConfig,c=a.getChart().getChartType();if(a.getChart().isImported()&&j.includes(c))return!0;c=c===b("AnalyticsChartType").BREAKDOWN_TABLE&&!i(a.getChart()).length;return c||a.getConfigurationErrorInfo()!=null};d.$2=function(){var a=this;return!this.state.isShowingDialog?null:b("React").createElement(b("FBAUniversalBuilderSaveEditDialog"),{chartConfig:this.props.metaChartConfig.getChart(),dialogType:b("FBAChartAction").SAVE,onClose:function(){return a.setState({isShowingDialog:!1})}})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderChartTypeOptionRenderer",["ix","cx","fbt","FBAChartTypes","FBAUniversalBuilderMetaEventUtils","FDSText.react","FlexLayout.react","Image.react","React","SUIAnalyticsGriffinUniversalBuilderTheme","SUISelector.react","SUISelectorButton.react","SUISelectorOption.react","asset","suiMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a=d.props.option.update(a);b("FBAUniversalBuilderMetaEventUtils").logSelectorOnChangeEvent(d.props.option,a);d.props.onChange(a)},d.$3=function(){b("FBAUniversalBuilderMetaEventUtils").logSelectorOnOpenEvent(d.props.option)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.option,c=a.hidden;if(c)return null;c=a.getCurrentChartType();var d=a.getSupportedChartTypes();return b("React").createElement(b("FlexLayout.react"),{className:"_3-91"},this.$1(c,d,a.disabled))};d.$1=function(a,c,d){__p&&__p();var e={};c.forEach(function(a){var b=a.category.toString();e[b]||(e[b]=[]);e[b].push(a)});var f=[].concat(c).sort(function(a,c){return b("FBAChartTypes")[a.chartType].sortKey==b("FBAChartTypes")[c.chartType].sortKey?0:b("FBAChartTypes")[a.chartType].sortKey-b("FBAChartTypes")[c.chartType].sortKey});f=this.$4(f);c=c.find(function(b){return b.chartType===a});c=c?b("React").createElement(b("SUISelectorButton.react"),{disabled:d,label:b("React").createElement("span",{className:d?"":"_7oaf"},b("React").createElement(b("Image.react"),{src:b("FBAChartTypes")[c.chartType].iconSmall,style:{verticalAlign:"text-bottom"}}),b("React").createElement("span",{className:"_3-99"+(d?" hidden_elem":"")},b("React").createElement(b("Image.react"),{src:g("507214")})))}):b("React").createElement("span",null);return b("React").createElement(b("SUISelector.react"),{button:c,canCollapseGroups:!1,disabled:d,maxHeight:500,onChange:this.$2,onOpen:this.$3,placeholder:i._("Select chart type"),theme:b("SUIAnalyticsGriffinUniversalBuilderTheme"),value:a},f)};d.$4=function(a){return a.map(function(a){return b("React").createElement(b("SUISelectorOption.react"),{icon:b("React").createElement(b("Image.react"),{src:b("FBAChartTypes")[a.chartType].iconSmall}),key:a.chartType,value:a.chartType},b("React").createElement(b("FlexLayout.react"),{className:"_3-99",direction:"vertical"},a.label,b("React").createElement(b("FDSText.react"),{color:"placeholder",size:"body2"},b("FBAChartTypes")[a.chartType].descShort)))})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderCohortCollationIntervalOptionRenderer",["AnalyticsCohortCollationInterval","FBAUniversalBuilderMetaEventUtils","FBAUniversalBuilderSubheaderOptionSelector","FlexLayout.react","InsightsCohortsUtils","React","SUIBusinessTheme","SUISelectorOption.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a=d.props.option.update(a);b("FBAUniversalBuilderMetaEventUtils").logSelectorOnChangeEvent(d.props.option,a);d.props.onChange(a)},d.$3=function(){b("FBAUniversalBuilderMetaEventUtils").logSelectorOnOpenEvent(d.props.option)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.option,c=a.hidden;if(c)return null;c=a.getCurrentCollationInterval();var d=a.getSupportedCollationIntervals();return b("React").createElement(b("FlexLayout.react"),null,this.$1(c,d,a.disabled))};d.$1=function(a,c,d){var e=Object.keys(b("AnalyticsCohortCollationInterval")).map(function(d){var a=!c.includes(d);return b("React").createElement(b("SUISelectorOption.react"),{disabled:a,key:d,tooltip:a?b("InsightsCohortsUtils").getTooltipForCollationInterval(d):null,value:d},b("InsightsCohortsUtils").getDisplayStringForCollationInterval(d))});return b("React").createElement(b("FBAUniversalBuilderSubheaderOptionSelector"),{disabled:d,onChange:this.$2,onOpen:this.$3,theme:b("SUIBusinessTheme"),value:a},e)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderCohortMetricOptionRenderer",["FBAUniversalBuilderMetaEventUtils","FBAUniversalBuilderSubheaderOptionSelector","FlexLayout.react","React","SUIBusinessTheme","SUISelectorOption.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a=d.props.option.update(a);b("FBAUniversalBuilderMetaEventUtils").logSelectorOnChangeEvent(d.props.option,a);d.props.onChange(a)},d.$3=function(){b("FBAUniversalBuilderMetaEventUtils").logSelectorOnOpenEvent(d.props.option)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.option,c=a.hidden;if(c)return null;c=a.getCurrentMetric();var d=a.getSupportedMetrics();return b("React").createElement(b("FlexLayout.react"),null,this.$1(c,d,a.disabled))};d.$1=function(a,c,d){c=c.map(function(a){return b("React").createElement(b("SUISelectorOption.react"),{key:a.metric,value:a.metric},a.label)});return b("React").createElement(b("FBAUniversalBuilderSubheaderOptionSelector"),{disabled:d,onChange:this.$2,onOpen:this.$3,theme:b("SUIBusinessTheme"),value:a},c)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderDateRangeOptionRenderer",["AnalyticsBackfillRequestUtils","AnalyticsDataUnavailableDialog","AnalyticsDateRangeType","AnalyticsDateUtils","FBADateRange","FBAUniversalBuilderMetaEventUtils","FlexLayout.react","GriffinDatePicker","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showDataUnavailableDialog:!1},d.$3=function(a,c,e){if(b("AnalyticsBackfillRequestUtils").shouldShowDataUnavailableDialog(c.toDate())){d.setState({showDataUnavailableDialog:!0});return}a=d.props.option.update(b("FBADateRange").fromDateRangeConfig(a,{since:c.toDate(),until:e.toDate()}));b("FBAUniversalBuilderMetaEventUtils").logSelectorOnChangeEvent(d.props.option,a);d.props.onChange(a)},d.$4=function(){b("FBAUniversalBuilderMetaEventUtils").logSelectorOnOpenEvent(d.props.option)},d.$1=function(){d.setState({showDataUnavailableDialog:!1})},d.$2=function(){d.setState({showDataUnavailableDialog:!1});var a=b("AnalyticsDateUtils").DateRangeTypes.LAST_28_DAYS;a=b("AnalyticsDateUtils").getDateRange(a);a=d.props.option.update(b("FBADateRange").fromDateRangeConfig(b("AnalyticsDateRangeType").LAST_28_DAYS,a));d.props.onChange(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.option,c=a.hidden;if(c)return null;c=a.getCurrentDateRange();return b("React").createElement(b("FlexLayout.react"),null,b("React").createElement(b("AnalyticsDataUnavailableDialog"),{isDialogVisible:this.state.showDataUnavailableDialog,onHideDialog:this.$1,onResetDates:this.$2}),b("React").createElement(b("GriffinDatePicker"),{dateRangeType:c?c.getType():b("AnalyticsDateRangeType").LAST_28_DAYS,dateRestraints:a.getDateConstraints(),disabled:a.disabled,onChange:this.$3,onOpen:this.$4,styleOverride:"UNIVERSAL_BUILDER",visibleDateRange:this.$5()}))};d.$5=function(){var a=this.props.option,b=a.getCurrentDateRange();if(!b){a=a.getAvailableDateRange();a=a.until;return{since:a,until:a}}return{since:b.getSince().toUTCDate(),until:b.getUntil().toUTCDate()}};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderBarChart",["AnalyticsAggregationBarChart","AnalyticsChartSize","AnalyticsDateRangeStore","AnalyticsErrorBoundary","AnalyticsQueryCurrency","CurrentAnalyticsEntity","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getExportData=function(){var a=this.$1;return a&&a.getExportData&&a.getExportData()};d.render=function(){var a=this,c=this.props.chart,d=c.getEventQueries();if(d.length===0)return null;var e=d[0].getDateRange();e={analyticsEntityID:b("CurrentAnalyticsEntity").getID(),chartSize:b("AnalyticsChartSize").LARGE,currency:b("AnalyticsQueryCurrency").get(),inheritedDateRange:e.getDateRangeInUTC(),inheritedDateRangeType:e.getType(),inheritedFilterSet:this.props.globalFilterSetListing.getFilterSet(),timezoneID:b("AnalyticsDateRangeStore").getTimezoneID()};d={chart_type:"BAR_CHART",goal:null,id:null,name:"",queries:d.map(function(a){return{aggregation_period:a.getAggregationPeriod(),breakdowns:a.getBreakdowns(),date_range:a.getDateRange(),event_name:a.getEventName(),ordering_columns:[],ordering_type:a.getOrderingType(),limit:a.getLimit(),metric:a.getMetric(),metric_params:a.getMetricParams(),filter_set_listing:a.getFilterSetListing()}}),segment_behavior:c.getSegmentBehavior()};return b("React").createElement(b("AnalyticsErrorBoundary"),{cardKey:"universal_builder_bar_chart"},b("React").createElement(b("AnalyticsAggregationBarChart"),babelHelpers["extends"]({},e,{cardKey:"universal_builder_bar_chart",chart:d,onDataLoaded:this.props.onLoad,ref:function(b){return a.$1=b},showLegendTitle:!1})))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderBreakdownTableChart",["cx","ActiveSectionStore","AnalyticsAdHocBreakdownTable","AnalyticsErrorBoundary","AnalyticsRelayUtils","FBAFilterSet","GriffinSections","InsightsBreakdownTableAggregationColumns","React","first"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getExportData=function(){var a=this.$1;try{a=a&&a.getExportData&&a.getExportData().data}catch(b){a=null}return a};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.chart,e=c.globalFilterSetListing;c=c.sessionLoggerID;var f=b("first")(d.getEventQueries());if(!f)return null;var g=b("AnalyticsRelayUtils").assertEnum(f.getMetric(),b("InsightsBreakdownTableAggregationColumns"));g={aggregations:[b("InsightsBreakdownTableAggregationColumns")[g]],breakdowns:f.getBreakdowns(),event_name:f.getEventName(),name:""};var h=f.getDateRange().getDateRangeInSecondsInPacific(),i=f.getDateRange().toPreviousDateRange(),j=b("ActiveSectionStore").getActiveSectionName()===b("GriffinSections").DASHBOARDS;return b("React").createElement(b("AnalyticsErrorBoundary"),{cardKey:"universal_builder_breakdown_table_chart"},b("React").createElement("div",{className:"_3-8u _3-97"},b("React").createElement(b("AnalyticsAdHocBreakdownTable"),{aggregationsColumns:j?g.aggregations:void 0,appliedFilterSet:b("FBAFilterSet").resolve({behavior:d.getSegmentBehavior(),global:e.getFilterSet(),local:f.getFilterSet()}),breakdownTable:g,breakdownTableID:d.getChartId()||void 0,endTime:h.until,hideControls:j,key:JSON.stringify({breakdowns:f.getBreakdowns(),event_name:f.getEventName()}),onLoad:this.props.onLoad,pageSize:j?11:100,popDateRange:i?i.getDateRangeInUTC():void 0,ref:function(b){return a.$1=b},sessionLoggerID:c,skipEnclosingCard:!0,startTime:h.since})))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderCohortChart",["ActiveSectionStore","AnalyticsChartType","AnalyticsErrorBoundary","AnalyticsErrorLoggerFactory","AnalyticsLoadingCard","AnalyticsQueryCurrency","AnalyticsQueryRenderer","AnalyticsUIErrorCause","CurrentAnalyticsEntity","FalcorErrorNotice","FBAFilterSet","FBAMetaLoggerWWW","GriffinCohortsView","GriffinSections","InsightsCohortsUtils","InternalAnalyticsCohortsQueryBuilder","React","first","immutable","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaLoggerWWW").META_LOGGER;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.$4=function(a,c,e){__p&&__p();if(a)return b("React").createElement(b("AnalyticsLoadingCard"),null);a=e.get("cohort_query");if(a)return b("React").createElement(b("FalcorErrorNotice"),{message:a.getMessage()});e=c.get("cohort_query");if(!e)return null;a=b("InsightsCohortsUtils").processCohortQueryResult(e);c=a.breakdownData;e=a.cohortsData;a=a.collationInterval;var f=b("nullthrows")(b("first")(d.props.chart.getCohortQueries()));if(a!==f.getCollationInterval()){b("AnalyticsErrorLoggerFactory").getLogger("universal_builder_cohort_chart").setErrorMessage("Unmatched Cohort collation interval").setErrorType("error").setErrorCause(b("AnalyticsUIErrorCause").UNEXPECTED_DATA_ERROR).log();return b("React").createElement(b("FalcorErrorNotice"),{errorCode:1})}var g=d.props.chart.getChartType(),h=d.$2();return b("React").createElement(b("GriffinCohortsView"),{breakdown:b("first")(f.getBreakdowns())||"none",breakdownData:c,cohortData:e,collationInterval:a,firstEvent:f.getInitialEvent().event_rules[0],followupEvent:f.getFollowUpEvent().event_rules[0],hideHeatmap:g===b("AnalyticsChartType").COHORT&&!h,hideLineChart:g===b("AnalyticsChartType").COHORT_HEATMAP&&!h,isEmptyData:(!e||e.isEmpty())&&!c,isLoading:!1,metric:f.getMetric(),ref:function(a){return d.$1=a},section:b("GriffinSections").COHORTS,showDataOnly:!0,title:null})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getExportData=function(){var a=this.$1;return a&&a.getExportData&&a.getExportData()};d.render=function(){var a=this;return b("React").createElement(b("AnalyticsErrorBoundary"),{cardKey:"universal_builder_cohort_chart"},b("React").createElement(b("AnalyticsQueryRenderer"),{onDoneLoading:function(){a.props.onLoad(),a.$2()&&g.logEvent("Cohorts_AsyncTask_End_Success",{ad_hoc:"true",feature_id:a.props.chart.getChartId()})},queries:this.$3(),render:this.$4}))};d.$3=function(){var a=this.props,c=a.chart;a=a.sessionLoggerID;var d=b("first")(c.getCohortQueries());if(!d)return b("immutable").Map();var e=d.getDateRange().getDateRangeInSecondsInPacific(),f=e.since;e=e.until;f=new(b("InternalAnalyticsCohortsQueryBuilder"))().setAnalyticsEntityID(b("CurrentAnalyticsEntity").getID()).setSince(f).setUntil(e).setFilterSet(b("FBAFilterSet").resolve({behavior:c.getSegmentBehavior(),global:this.props.globalFilterSetListing.getFilterSet(),local:d.getFilterSetListing().getFilterSet()})).setFirstEvent(d.getInitialEvent().event_rules[0]).setFollowupEvent(d.getFollowUpEvent().event_rules[0]).setBreakdown(b("first")(d.getBreakdowns())).setCollationInterval(d.getCollationInterval()).setCurrency(b("AnalyticsQueryCurrency").get()).setTag("universal_builder").setSessionLoggerID(a);return b("immutable").Map([["cohort_query",f]])};d.$2=function(){return[b("GriffinSections").COHORTS,b("GriffinSections").RETENTION,b("GriffinSections").LIFETIME_VALUE].includes(b("ActiveSectionStore").getActiveSectionName())};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderDonutChart",["invariant","AnalyticsDonutBreakdownChart","AnalyticsErrorBoundary","AnalyticsLoadingCard","AnalyticsMetricConfigs","AnalyticsQueryRenderer","AppEventQueryAggregationPeriod","CurrentAnalyticsEntity","FalcorErrorNotice","FalcorNotEnoughDataNotice","FBAChartConfigUtils","FBAFilterSet","InternalAnalyticsQueryBuilder","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").Map;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.$3=function(a,c,e){__p&&__p();if(a)return b("React").createElement(b("AnalyticsLoadingCard"),null);a=c.get("breakdown");c=c.get("total");if(e.get("total")&&e.get("total").isNotEnoughData())return b("React").createElement(b("FalcorNotEnoughDataNotice"),null);if(e.size||!a||!c)return b("React").createElement(b("FalcorErrorNotice"),{errorCode:1});e=d.props.chart;return b("React").createElement(b("AnalyticsDonutBreakdownChart"),{breakdownQueryResult:a,id:(a=e.getChartId())!=null?a:"donut_chart",queryConfig:b("FBAChartConfigUtils").toAggregationChartConfig(e).queries[0],ref:function(a){return d.$1=a},totalQueryResult:c})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getExportData=function(){var a=this.$1;return a&&a.getExportData&&a.getExportData()};d.$2=function(){__p&&__p();var a=this.props,c=a.chart;a=a.globalFilterSetListing;var d=c.getEventQueries()[0],e=b("CurrentAnalyticsEntity").getID(),f=d.getEventName(),i=b("FBAFilterSet").resolve({behavior:c.getSegmentBehavior(),global:a.getFilterSet(),local:d.getFilterSet()});a=d.getDateRange().getDateRangeInSecondsInPacific();var j=a.since,k=a.until;a=b("AnalyticsMetricConfigs").getMetricConfig(d.getMetric(),f);a.length===1||g(0,11201);a=a[0];var l=a.aggregations;return h(["breakdown","total"].map(function(a){return[a,new(b("InternalAnalyticsQueryBuilder"))().setAnalyticsEntityID(e).setEventName(f).setAggregations(l).setBreakdowns(a==="total"?[]:d.getBreakdowns()).setSince(j).setUntil(k).setFilterSet(i).setAggregationPeriod(b("AppEventQueryAggregationPeriod").RANGE).setOrderingColumns(l).setOrderingType("DESCENDING").setLimit(5).setTag(String(c.getChartId())+"_"+a+"_donut")]}))};d.render=function(){return b("React").createElement(b("AnalyticsErrorBoundary"),{cardKey:"universal_builder_donut_chart"},b("React").createElement(b("AnalyticsQueryRenderer"),{onDoneLoading:this.props.onLoad,queries:this.$2(),render:this.$3}))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderEmptyState",["cx","fbt","ix","AnalyticsChartType","FDSText.react","GriffinMultiEventSelectorCard","Image.react","React","suiMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",null,this.$1())};d.$2=function(){__p&&__p();switch(this.props.chartType){case b("AnalyticsChartType").BAR_CHART:return h._("Add an event to compare");case b("AnalyticsChartType").BREAKDOWN_TABLE:return h._("Select an event to analyse");case b("AnalyticsChartType").DONUT_CHART:return h._("Select an event to analyse");case b("AnalyticsChartType").COHORT:return h._("Add the first event to your cohort");case b("AnalyticsChartType").COHORT_HEATMAP:return h._("Add the first event to your cohort");case b("AnalyticsChartType").FUNNEL:return h._("Add the first event in your funnel");case b("AnalyticsChartType").KPI_TILE:return h._("Add an event to track");case b("AnalyticsChartType").OVERLAP_CHART:return h._("Add an event to see overlaps in activity");case b("AnalyticsChartType").TIME_SERIES:return h._("Add an event to see trend information");default:return b("GriffinMultiEventSelectorCard").TEXT_CHOOSE_EVENT}};d.$3=function(){__p&&__p();switch(this.props.chartType){case b("AnalyticsChartType").BAR_CHART:return h._("Bar charts can help you compare quantities of users, events or average purchase values.");case b("AnalyticsChartType").BREAKDOWN_TABLE:return h._("Breakdowns can help you understand multiple categories of information at the same time.");case b("AnalyticsChartType").DONUT_CHART:return h._("Pie charts can help you measure and compare parts of a whole. First, add an event. Then choose how you'd like to break it down.");case b("AnalyticsChartType").COHORT:return h._("Cohorts are groups of people who have two sequential actions in common, so you'll need to add two events.");case b("AnalyticsChartType").COHORT_HEATMAP:return h._("Cohorts are groups of people who have two sequential actions in common, so you'll need to add two events.");case b("AnalyticsChartType").FUNNEL:return h._("Funnels can help you measure things such as conversion and drop-off. You'll need at least two events to make a funnel.");case b("AnalyticsChartType").OVERLAP_CHART:return h._("Overlap charts can help you understand how users behave across channels, devices or other parameters.");case b("AnalyticsChartType").TIME_SERIES:return h._("Trend charts help you track changes in user activity, events or value over time. Add more than one event to compare trends.");default:return""}};d.$4=function(){__p&&__p();switch(this.props.chartType){case b("AnalyticsChartType").COHORT_HEATMAP:return b("React").createElement(b("Image.react"),{src:i("943016")});case b("AnalyticsChartType").FUNNEL:return b("React").createElement(b("Image.react"),{src:i("943018")});case b("AnalyticsChartType").BREAKDOWN_TABLE:return b("React").createElement(b("Image.react"),{src:i("943015")});case b("AnalyticsChartType").BAR_CHART:return b("React").createElement(b("Image.react"),{src:i("943014")});case b("AnalyticsChartType").COHORT:return b("React").createElement(b("Image.react"),{src:i("943017")});case b("AnalyticsChartType").OVERLAP_CHART:return b("React").createElement(b("Image.react"),{src:i("943020")});case b("AnalyticsChartType").TIME_SERIES:return b("React").createElement(b("Image.react"),{src:i("943022")});case b("AnalyticsChartType").DONUT_CHART:return b("React").createElement(b("Image.react"),{src:i("943021")});case b("AnalyticsChartType").KPI_TILE:return b("React").createElement(b("Image.react"),{src:i("943019")});default:return b("React").createElement(b("Image.react"),{src:i("292690")})}};d.$1=function(){return b("React").createElement("div",{className:"_7rt9"},b("React").createElement("div",null,this.$4()),b("React").createElement("div",{className:"_3-8x"},b("React").createElement(b("FDSText.react"),{color:"secondary",size:"header3",weight:"bold"},this.$2())),b("React").createElement("div",{className:"_3-8x"},b("React").createElement(b("FDSText.react"),{color:"placeholder",size:"body1"},this.$3())))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FalcorFunnelsTableMixin",[],(function(a,b,c,d,e,f){__p&&__p();a={getColumns:function(a){var b=[{id:"rowHeader",label:""}],c=a.getEvents();a=a.getEventDisplayNames();for(var d=0;d<c.length;d++)b.push({id:c[d]+d,label:a[d]});return b},getSortableColumns:function(a){var b=this;a=this.getColumns(a);a.forEach(function(a,c){if(c===0)return;a.sortable=!0;a.comparator=b._compareRows(a.id)});return a},_compareRows:function(a){return function(b,c){return b[a].props.exportValue-c[a].props.exportValue}}};e.exports=a}),null);
__d("InsightsFunnelBreakdownTable",["cx","fbt","AnalyticsAcquisitionSourceData","AnalyticsCard","AnalyticsExportUtils","AnalyticsFunnelAggregationMethod","AnalyticsQueryBreakdownUtils","AppEventsAggregatingColumn","DateTime","FalcorDataTooltip","FalcorDataTooltipMixin","FalcorFunnelsTableMixin","FalcorPaginatedDataTable","FalcorSamplingVariance","FBAColorPalette","InsightsNumUtils","InsightsTimeUtils","React","Timezone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=b("Timezone").PST8PDT,j=100;c=b("React").createClass({displayName:"InsightsFunnelBreakdownTable",mixins:[b("FalcorFunnelsTableMixin"),b("FalcorDataTooltipMixin")],propTypes:{breakdownType:a.string.isRequired,endTime:a.number.isRequired,funnelData:a.object.isRequired,funnelName:a.string.isRequired,maxBreakdowns:a.number,samplingRate:a.number.isRequired,showCard:a.bool.isRequired,showLine:a.bool.isRequired,startTime:a.number.isRequired,tableType:a.oneOf(["data","timeData"]).isRequired},getDefaultProps:function(){return{funnelName:"Untitled Funnel",maxBreakdowns:Infinity,showCard:!0,showLine:!1,tableType:"data"}},getInitialState:function(){return{searchString:""}},render:function(){__p&&__p();var a=this.props,c=a.showLine,d=a.showCard;a=a.tableType;this.props.funnelData.setMaxBreakdowns(Infinity);var e=this.props.breakdownType,f=b("AnalyticsQueryBreakdownUtils").getBreakdownTypeDisplayString(e);d=d?null:"none";if(a==="data"){a=h._("Unique People by {itemName}",[h._param("itemName",f)]);var g=this._getRows();return b("React").createElement(b("AnalyticsCard"),{cardKey:"funnel_breakdown_table",getExportData:this.getExportData,onSearchChange:this._onSearchChange,searchString:this.state.searchString,showLine:c,style:{border:d},title:a},b("React").createElement("div",{className:"_5i-s"},b("React").createElement(b("FalcorPaginatedDataTable"),{columns:this.getSortableColumns(this.props.funnelData),getExportValueFromCell:b("AnalyticsExportUtils").getExportValueFromCell,key:""+e,pageSize:j,ref:"table",rows:g,searchFieldName:"rowHeader"})))}else{a=h._("Completion time by {itemName}",[h._param("itemName",f)]);g=this._getTimeRows();return b("React").createElement(b("AnalyticsCard"),{cardKey:"funnel_breakdown_completion_time_table",getExportData:this.getExportData,onSearchChange:this._onSearchChange,searchString:this.state.searchString,showLine:c,style:{border:d},title:a},b("React").createElement("div",{className:"_5i-s"},b("React").createElement(b("FalcorPaginatedDataTable"),{columns:this.getSortableColumns(this.props.funnelData),getExportValueFromCell:b("AnalyticsExportUtils").getExportValueFromCell,key:""+e,pageSize:j,ref:"table",rows:g,searchFieldName:"rowHeader"})))}},_onSearchChange:function(a){this.setState({searchString:a.target.value}),this.refs.table&&this.refs.table.onSearchChange(a)},_getRows:function(){__p&&__p();var a,c=this,d=this.props.funnelData.getCounts(b("AnalyticsFunnelAggregationMethod").UNIQUES),e=this.props.funnelData.getBreakdownPercentages(b("AnalyticsFunnelAggregationMethod").UNIQUES),f=this.props.samplingRate,g=this.props.funnelData.getSelectedBreakdownValues(b("AnalyticsFunnelAggregationMethod").UNIQUES),i=this.props.funnelData.getSelectedBreakdownValuesFromMaxBreakdowns(b("AnalyticsFunnelAggregationMethod").UNIQUES,this.props.maxBreakdowns),j=i.findIndex(function(a){return a===c.props.funnelData.getOtherBreakdownName()}),k=this.props.funnelData.getEvents(),l=this.props.funnelData.getEventDisplayNames(),m=b("FBAColorPalette").getColors(),n=(a={},a[b("AppEventsAggregatingColumn").ACQUISITION_SOURCE_L1]=1,a[b("AppEventsAggregatingColumn").ACQUISITION_SOURCE_L2]=2,a[b("AppEventsAggregatingColumn").ACQUISITION_SOURCE_L3]=3,a),o=e.some(function(a){return a.some(function(a){return a>1})});return g.map(function(a,g){__p&&__p();a=n[c.props.breakdownType]?b("AnalyticsAcquisitionSourceData").getBucketLink(a,n[c.props.breakdownType]):b("AnalyticsQueryBreakdownUtils").getBreakdownValueDisplayString(c.props.breakdownType,a);var p={rowHeader:a};d[g].forEach(function(a,d){var n=h._("{count number} Users",[h._param("count number",b("InsightsNumUtils").prettyInt(a))]),q=function(){return b("FalcorDataTooltip").getFunnelDataTooltip(l[d],n,b("FalcorSamplingVariance").getVarianceTooltipSentence(a,f))},r=g+" "+d,s=o?null:b("React").createElement("div",null,b("InsightsNumUtils").prettyPercent(e[g][d]));p[k[d]+d]=b("React").createElement("div",{exportValue:a.toString(),onMouseEnter:function(){var a;j===-1||g<j?a=g:g+1<i.length?a=g+1:a=j;c.onShowTooltip(r,q,m[a])},onMouseLeave:c.onHideTooltipWithDelay,ref:r,sortValue:a,style:{display:"inline-block"},tabIndex:0},b("React").createElement("div",null,b("InsightsNumUtils").prettyShortInt(a)),s)});return p}).filter(function(a){return a})},_getTimeRows:function(){__p&&__p();var a=this,c=this.props.funnelData.getCountsHidingHiddenBreakdowns(b("AnalyticsFunnelAggregationMethod").PERCENTILE_TIME),d=[],e=[],f=[];for(var g=0;g<c.length;g++)for(var i=0;i<c[g].length;i++)c[g][i]===null?(d[g]=[],e[g]=[],f[g]=[],d[g].push(null),e[g].push(null),f[g].push(null)):(d[g].push(c[g][i][0]),e[g].push(c[g][i][1]),f[g].push(c[g][i][2]));var j=this.props.samplingRate;i=this.props.funnelData.getSelectedBreakdownValues(b("AnalyticsFunnelAggregationMethod").UNIQUES);var k=this.props.funnelData.getSelectedBreakdownValuesFromMaxBreakdowns(b("AnalyticsFunnelAggregationMethod").UNIQUES,this.props.maxBreakdowns),l=k.findIndex(function(b){return b===a.props.funnelData.getOtherBreakdownName()}),m=this.props.funnelData.getEvents(),n=this.props.funnelData.getEventDisplayNames(),o=b("FBAColorPalette").getColors(),p=(g={},g[b("AppEventsAggregatingColumn").ACQUISITION_SOURCE_L1]=1,g[b("AppEventsAggregatingColumn").ACQUISITION_SOURCE_L2]=2,g[b("AppEventsAggregatingColumn").ACQUISITION_SOURCE_L3]=3,g);return i.map(function(c,g){__p&&__p();c=p[a.props.breakdownType]?b("AnalyticsAcquisitionSourceData").getBucketLink(c,p[a.props.breakdownType]):b("AnalyticsQueryBreakdownUtils").getBreakdownValueDisplayString(a.props.breakdownType,c);var i={rowHeader:c};d[g].forEach(function(c,d){__p&&__p();var p=e[g][d],q=f[g][d],r=null,s=null,t=null;if(c===null||p===null||q===null){var u=h._("--");r=u;s=u;t=u}else r=b("InsightsTimeUtils").secondsToDisplay(c,!1),s=b("InsightsTimeUtils").secondsToDisplay(p,!1),t=b("InsightsTimeUtils").secondsToDisplay(q,!1);var v=h._("{=[top 25\u0025 completion time]Top 25\u0025}{=[top 50\u0025 completion time]Top 50\u0025}{=[top 75\u0025 completion time]Top 75\u0025}",[h._param("=[top 25% completion time]Top 25%",b("React").createElement("div",null,h._("{=[top 25\u0025 completion time]}{=Top 25\u0025}",[h._param("=[top 25% completion time]",b("React").createElement("div",{className:"_4yfo"},h._("{top 25\u0025 completion time}",[h._param("top 25% completion time",r)]))),h._param("=Top 25%",b("React").createElement("div",{className:"_4yfs"},h._("Top 25\u0025")))]))),h._param("=[top 50% completion time]Top 50%",b("React").createElement("div",null,h._("{=[top 50\u0025 completion time]}{=Top 50\u0025}",[h._param("=[top 50% completion time]",b("React").createElement("div",{className:"_4yfo"},h._("{top 50\u0025 completion time}",[h._param("top 50% completion time",s)]))),h._param("=Top 50%",b("React").createElement("div",{className:"_4yfs"},h._("Top 50\u0025")))]))),h._param("=[top 75% completion time]Top 75%",b("React").createElement("div",null,h._("{=[top 75\u0025 completion time]}{=Top 75\u0025}",[h._param("=[top 75% completion time]",b("React").createElement("div",{className:"_4yfo"},h._("{top 75\u0025 completion time}",[h._param("top 75% completion time",t)]))),h._param("=Top 75%",b("React").createElement("div",{className:"_4yfs"},h._("Top 75\u0025")))])))]),w=function(){return b("FalcorDataTooltip").getFunnelDataTooltip(n[d],v,b("FalcorSamplingVariance").getSamplingTooltipSentence(j))},x="time "+g+" "+d;u=b("React").createElement("div",null,b("React").createElement("div",null,r),b("React").createElement("div",null,s),b("React").createElement("div",null,t));p=r.toString()+" "+s.toString()+" "+t.toString();i[m[d]+d]=b("React").createElement("div",{exportValue:p,onMouseEnter:function(){var b;l===-1||g<l?b=g:g+1<k.length?b=g+1:b=l;a.onShowTooltip(x,w,o[b])},onMouseLeave:a.onHideTooltipWithDelay,ref:x,sortValue:c,style:{display:"inline-block"},tabIndex:0},u)});return i}).filter(function(a){return a})},getExportData:function(){return{data:this.refs.table.getExportData(),fileName:this._getExportFileName()}},_getExportFileName:function(){var a=b("DateTime").fromLegacyArgs(this.props.startTime*1e3,i).format("Y-m-d"),c=b("DateTime").fromLegacyArgs(this.props.endTime*1e3,i).format("Y-m-d");return[this.props.funnelName,this.props.breakdownType,a,c].join("_")}});e.exports=c}),null);
__d("InsightsFunnelCountsTable",["cx","fbt","AnalyticsCard","AnalyticsExportUtils","AnalyticsFunnelAggregationMethod","DateTime","FalcorDataTooltip","FalcorDataTooltipMixin","FalcorFunnelsTableMixin","FalcorPaginatedDataTable","FalcorSamplingVariance","InsightsNumUtils","InsightsTimeUtils","React","nullthrows","Timezone"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;var i=b("Timezone").PST8PDT,j={event_count_row_header:h._("Events"),events_per_user_row_header:h._("Events per Person"),percent_row_header:h._("Conversion Rates"),title:h._("Unique people in funnel"),user_count_row_header:h._("People"),value_row_header:h._("Values")},k={event_count_row_header:h._("Events"),title:h._("Completion time for each step"),top_25_row_header:h._("Top 25\u0025 of users"),top_50_row_header:h._("Top 50\u0025 of users"),top_75_row_header:h._("Top 75\u0025 of users")};c=b("React").createClass({displayName:"InsightsFunnelCountsTable",_table:null,mixins:[b("FalcorDataTooltipMixin"),b("FalcorFunnelsTableMixin")],propTypes:{currency:a.string.isRequired,endTime:a.number.isRequired,funnelData:a.object.isRequired,funnelName:a.string.isRequired,samplingRate:a.number.isRequired,showCard:a.bool.isRequired,showLine:a.bool.isRequired,startTime:a.number.isRequired,tableType:a.oneOf(["data","timeData"]).isRequired},getDefaultProps:function(){return{funnelName:"Untitled Funnel",showCard:!0,showLine:!1,tableType:"data"}},render:function(){var a=this,c=this.props,d=c.showLine,e=c.showCard;c=c.tableType;e=e?null:"none";if(c==="data")return b("React").createElement(b("AnalyticsCard"),{cardKey:"insights_funnel_counts_table",getExportData:this.getExportData,helpText:{key:"FunnelsDetailView",title:j.title},showLine:d,style:{border:e},title:h._("Unique people in funnel")},b("React").createElement("div",{className:"_5i-s"},b("React").createElement(b("FalcorPaginatedDataTable"),{columns:this.getColumns(this.props.funnelData),getExportValueFromCell:b("AnalyticsExportUtils").getExportValueFromCell,ref:function(b){a._table=b},rows:this._getCountRows()})));else return b("React").createElement(b("AnalyticsCard"),{cardKey:"funnel_counts_table",getExportData:this.getExportData,helpText:{key:"FunnelsCompletionTimeDetailView",title:k.title},showLine:d,style:{border:e},title:h._("Completion time for each step")},b("React").createElement("div",{className:"_5i-s"},b("React").createElement(b("FalcorPaginatedDataTable"),{columns:this.getColumns(this.props.funnelData),getExportValueFromCell:b("AnalyticsExportUtils").getExportValueFromCell,ref:function(b){a._table=b},rows:this._getTimeRows()})))},_getCell:function(a,c,d,e){var f=this;return b("React").createElement("span",{exportValue:c,onMouseOut:this.onHideTooltipWithDelay,onMouseOver:function(){f.onShowTooltip(d,b("FalcorDataTooltip").getFunnelDataTooltip.bind(null,e.title,e.count,e.variance),null,"right",20,-16)},ref:d,tabIndex:0},a)},_getCountRows:function(){var a=this,c=this.props.funnelData.getEvents(),d=this.props.funnelData.getEventDisplayNames(),e=this.props.samplingRate,f=b("FalcorSamplingVariance").getSamplingTooltipSentence(e),g=this.props.funnelData.getSummedCounts(b("AnalyticsFunnelAggregationMethod").COUNT),i=this.props.funnelData.getPercentages(b("AnalyticsFunnelAggregationMethod").UNIQUES),k=this.props.funnelData.getSummedCounts(b("AnalyticsFunnelAggregationMethod").UNIQUES),l=this.props.funnelData.getSummedCounts(b("AnalyticsFunnelAggregationMethod").VALUE_SUM),m=this.props.funnelData.getSummedCounts(b("AnalyticsFunnelAggregationMethod").USD_SUM),n={rowHeader:j.percent_row_header},o={rowHeader:j.user_count_row_header},p={rowHeader:j.event_count_row_header},q={rowHeader:j.value_row_header},r={rowHeader:j.events_per_user_row_header};i.forEach(function(i,j){var s=g[j],t=k[j],u=t?s/t:0,v=m[j]>0?b("InsightsNumUtils").prettyShortCurrency(a.props.currency,m[j]):b("InsightsNumUtils").prettyShortInt(l[j]),w=m[j]>0?b("InsightsNumUtils").prettyCurrency(a.props.currency,m[j]):b("InsightsNumUtils").prettyInt(l[j]),x=b("FalcorSamplingVariance").getVarianceTooltipSentence(t,e);n[c[j]+j]=a._getCell(b("InsightsNumUtils").prettyPercent(i),i,"percent"+j,{count:h._("{conversion rate} of First Stage",[h._param("conversion rate",b("InsightsNumUtils").prettyPercent(i))]),title:d[j],variance:f});o[c[j]+j]=a._getCell(b("InsightsNumUtils").prettyShortInt(t).toString(),t,"user"+j,{count:h._("{count number} Users",[h._param("count number",b("InsightsNumUtils").prettyInt(t))]),title:d[j],variance:x});r[c[j]+j]=a._getCell(b("InsightsNumUtils").prettyShortInt(u).toString(),u,"eventsPerUser"+j,{count:h._("{events per user number} Events",[h._param("events per user number",b("InsightsNumUtils").prettyInt(u))]),title:d[j],variance:f});p[c[j]+j]=a._getCell(b("InsightsNumUtils").prettyShortInt(s).toString(),s,"event"+j,{count:h._("{count number} events",[h._param("count number",b("InsightsNumUtils").prettyInt(s))]),title:d[j],variance:f});q[c[j]+j]=a._getCell(v.toString(),w,"value"+j,{count:h._("{count number} Event Value",[h._param("count number",w)]),title:d[j],variance:f})});return[n,o,r,p,q]},_getTimeRows:function(){__p&&__p();var a=this,c=this.props.funnelData.getEvents(),d=this.props.funnelData.getEventDisplayNames(),e=this.props.samplingRate,f=b("FalcorSamplingVariance").getSamplingTooltipSentence(e);e=this.props.funnelData.getCountsHidingHiddenBreakdowns(b("AnalyticsFunnelAggregationMethod").PERCENTILE_TIME);var g=[],i=[],j=[];for(var l=0;l<e[0].length;l++)e[0][l]===null?(g.push(null),i.push(null),j.push(null)):(g.push(e[0][l][0]),i.push(e[0][l][1]),j.push(e[0][l][2]));var m={rowHeader:k.top_25_row_header},n={rowHeader:k.top_50_row_header},o={rowHeader:k.top_75_row_header};g.forEach(function(e,g){__p&&__p();var k=i[g],l=j[g],p=null,q=null,r=null;if(e===null||k===null||l===null){var s=h._("--");p=s;q=s;r=s}else p=b("InsightsTimeUtils").secondsToDisplay(e,!1),q=b("InsightsTimeUtils").secondsToDisplay(k,!1),r=b("InsightsTimeUtils").secondsToDisplay(l,!1);m[c[g]+g]=a._getCell(p,p,"top25 "+g,{count:h._("{completion time} from last stage",[h._param("completion time",p)]),title:d[g],variance:f});n[c[g]+g]=a._getCell(q,q,"top50 "+g,{count:h._("{completion time} from last stage",[h._param("completion time",q)]),title:d[g],variance:f});o[c[g]+g]=a._getCell(r,r,"top75 "+g,{count:h._("{completion time} from last stage",[h._param("completion time",r)]),title:d[g],variance:f})});return[m,n,o]},getExportData:function(){return{data:b("nullthrows")(this._table).getExportData(),fileName:this._getExportFileName()}},_getExportFileName:function(){return[this.props.funnelName,b("DateTime").fromLegacyArgs(this.props.startTime*1e3,i).format("Y-m-d"),b("DateTime").fromLegacyArgs(this.props.endTime*1e3,i).format("Y-m-d")].join("_")}});e.exports=c}),null);
__d("FBAUniversalBuilderFunnelChart",["cx","ActiveSectionStore","AnalyticsErrorBoundary","AnalyticsExportUtils","AnalyticsFunnelChart.react","AnalyticsFunnelChartConversionInfo","AnalyticsLoadingCard","AnalyticsQueryCurrency","AnalyticsQueryRenderer","AnalyticsSegmentUtils","CurrentAnalyticsEntity","FalcorErrorNotice","FBAFilterSet","FBAMetaLoggerWWW","FBASegmentBuilderFeatureLoggerSuccessProxy","FBAUniversalBuilderActionRenderer","FlexLayout.react","GriffinSections","InsightsFunnelBreakdownTable","InsightsFunnelCountsTable","InsightsFunnelData","InternalAnalyticsFunnelsQueryBuilder","React","emptyFunction","first","immutable","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBAMetaLoggerWWW").META_LOGGER;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.$3=function(a,c,e){__p&&__p();if(a)return b("React").createElement(b("AnalyticsLoadingCard"),null);a=e.get("funnel_query");if(a)return b("React").createElement(b("FalcorErrorNotice"),{message:a.getMessage()});e=c.get("funnel_query");if(!e)return null;a=b("nullthrows")(b("first")(d.props.chart.getFunnelQueries()));c=new(b("InsightsFunnelData"))(e.event_counts,e.breakdown_counts,b("immutable").List(a.getStages().map(function(a){return b("AnalyticsSegmentUtils").toGraphAPISegment(a)})));e=b("first")(a.getBreakdowns());c.setBreakdownType(e);a=a.getDateRange().getDateRangeInSecondsInPacific();var f=a.since;a=a.until;return b("React").createElement(b("AnalyticsErrorBoundary"),{cardKey:"universal_builder_funnel_chart","data-testid":"funnel_chart"},d.$4(c,e),b("React").createElement("div",{className:[b("GriffinSections").DASHBOARDS,b("GriffinSections").PATH_TO_CONVERSION].includes(b("ActiveSectionStore").getActiveSectionName())?"hidden_elem":""},d.$5(c,e,"data",f,a),d.$5(c,e,"timeData",f,a)))},d.$8=function(){var a=d.getExportData();a&&b("AnalyticsExportUtils").exportDataFromChart(a,d.props.metaChartConfig.getChart())},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getExportData=function(){var a=this.$1;return a&&a.getExportData&&a.getExportData().data};d.render=function(){var a=this;return b("React").createElement(b("AnalyticsErrorBoundary"),{cardKey:"universal_builder_funnel_chart"},b("React").createElement(b("AnalyticsQueryRenderer"),{onDoneLoading:function(){b("FBASegmentBuilderFeatureLoggerSuccessProxy").chartUpdated(),b("ActiveSectionStore").getActiveSectionName()===b("GriffinSections").FUNNELS&&h.logEvent("Funnels_AsyncTask_End_Success",{ad_hoc:"true",feature_id:a.props.chart.getChartId()}),a.props.onLoad()},queries:this.$2(),render:this.$3}))};d.$2=function(){__p&&__p();var a=this.props,c=a.chart;a=a.sessionLoggerID;var d=b("first")(c.getFunnelQueries());if(!d)return b("immutable").Map();var e=d.getDateRange().getDateRangeInSecondsInPacific(),f=e.since;e=e.until;f=new(b("InternalAnalyticsFunnelsQueryBuilder"))().setAnalyticsEntityID(b("CurrentAnalyticsEntity").getID()).setSince(f).setUntil(e).setFunnelStages_DEPRECATED(d.getStages().map(function(a){return b("AnalyticsSegmentUtils").toGraphAPISegment(a)})).setBreakdowns(d.getBreakdowns()).setCurrency(b("AnalyticsQueryCurrency").get()).setSecondsConstraint(d.getTimeConstraint()||0).setFilterSet(b("FBAFilterSet").resolve({behavior:c.getSegmentBehavior(),global:this.props.globalFilterSetListing.getFilterSet(),local:d.getFilterSetListing().getFilterSet()})).setTag("universal_builder").setSessionLoggerID(a);return b("immutable").Map([["funnel_query",f]])};d.$4=function(a,c){var d=this,e=b("nullthrows")(b("first")(this.props.chart.getFunnelQueries()));e=e.getStages().map(function(a){return{serializedFilter:b("AnalyticsSegmentUtils").serializeFilter(a)}});a.setMaxBreakdowns(5);return b("React").createElement(b("AnalyticsFunnelChart.react"),{breakdown:c,chartHeight:315,chartSize:"LARGE",funnelData:a,isResizable:!0,renderChartSummary:function(){return d.$6(a,c)},showInterstepConversionRate:(c==null||c==="")&&e.length<5,showLegend:c!=null,showOnlyFirstAndLastStepLabels:!1,stages:e,stepColors:this.props.stepColors})};d.$6=function(a,c){return b("React").createElement(b("FlexLayout.react"),{justify:"all"},this.props.hideChartSummary===!0?b("React").createElement("span",null):b("React").createElement(b("AnalyticsFunnelChartConversionInfo"),{breakdown:c,funnelData:a}),this.props.chart.shouldShowActionButtonInChart()?this.$7():null)};d.$7=function(){return b("React").createElement(b("FBAUniversalBuilderActionRenderer"),{config:this.props.metaChartConfig,globalFilterSetListing:this.props.globalFilterSetListing,onChange:b("emptyFunction"),onExportData:this.$8})};d.$5=function(a,c,d,e,f){var g=this;return c!=null&&c!==""?b("React").createElement(b("InsightsFunnelBreakdownTable"),{breakdownType:c,endTime:f,funnelData:a,funnelName:"",maxBreakdowns:5,ref:function(a){return d==="data"&&(g.$1=a)},samplingRate:1,showCard:!1,showLine:!0,startTime:e,tableType:d}):b("React").createElement(b("InsightsFunnelCountsTable"),{currency:b("AnalyticsQueryCurrency").get(),endTime:f,funnelData:a,funnelName:"",ref:function(a){return d==="data"&&(g.$1=a)},samplingRate:1,showCard:!1,showLine:!0,startTime:e,tableType:d})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderKPITileChart",["fbt","AnalyticsDateRangeStore","AnalyticsErrorBoundary","AnalyticsKPITileChart","AnalyticsKPIUtils","AnalyticsLoadingCard","AnalyticsMetricConfigs","AnalyticsQueryCurrency","AnalyticsQueryRenderer","CurrentAnalyticsEntity","CustomEventStore","FalcorErrorNotice","FBAFilterSet","FDSText.react","FlexLayout.react","GriffinDashboardUtils","InternalAnalyticsQueryBuilder","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").Map;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a,c,e){__p&&__p();if(a)return b("React").createElement(b("AnalyticsLoadingCard"),null);a=d.$5(c,e);if(e.size)return b("React").createElement(b("FalcorErrorNotice"),{message:e.first().getMessage()});else if(!a||!a.length)return b("React").createElement(b("FalcorErrorNotice"),{"short":!0});c=a[0];e=b("GriffinDashboardUtils").chartHeight;a=d.props.chart.getEventQueries()[0].getDateRange();return b("React").createElement(b("FlexLayout.react"),{align:"center",justify:"center",style:{boxSizing:"border-box",height:e,padding:16}},b("React").createElement(b("FlexLayout.react"),{align:"start",direction:"vertical"},b("React").createElement(b("FDSText.react"),{display:"block",size:"header1"},d.$6(c)),b("React").createElement(b("AnalyticsKPITileChart"),{currency:b("AnalyticsQueryCurrency").get(),description:void 0,inheritedDateRange:a.getDateRangeInUTC(),inheritedDateRangeType:a.getType(),queryResult:c,size:"big",timezoneID:b("AnalyticsDateRangeStore").getTimezoneID()})))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement(b("AnalyticsErrorBoundary"),{cardKey:"universal_builder_kpi_chart"},b("React").createElement(b("AnalyticsQueryRenderer"),{onDoneLoading:this.props.onLoad,queries:this.$1(),render:this.$2}))};d.$1=function(){__p&&__p();var a=this,b=this.props.chart.getEventQueries()[0],c=b.getDateRange(),d=c.toPreviousDateRange(),e=this.$3(),f=h();e.forEach(function(e,g){if(d!=null){e=a.$4(b,d);var h=JSON.stringify([g,!0]);f=f.set(h,e)}h=a.$4(b,c);e=JSON.stringify([g,!1]);f=f.set(e,h)});return f};d.$3=function(){var a=this.props.chart.getEventQueries();return a.map(function(a){return{aggregation_period:a.getAggregationPeriod(),breakdowns:a.getBreakdowns(),date_range:a.getDateRange(),event_name:a.getEventName(),ordering_columns:[],ordering_type:a.getOrderingType(),limit:a.getLimit(),metric:a.getMetric(),metric_params:a.getMetricParams(),filter_set_listing:a.getFilterSetListing()}})};d.$4=function(a,c){var d=b("FBAFilterSet").resolve({behavior:this.props.chart.getSegmentBehavior(),global:this.props.globalFilterSetListing.getFilterSet(),local:a.getFilterSet()}),e=b("AnalyticsMetricConfigs").getMetricConfig(a.getMetric(),a.getEventName());e=e[0];e=e.aggregations;return new(b("InternalAnalyticsQueryBuilder"))().setAnalyticsEntityID(b("CurrentAnalyticsEntity").getID()).setEventName(a.getEventName()).setAggregations(e).setMetricParams(a.getMetricParams()).setBreakdowns(a.getBreakdowns()).setFilterSet(d).setDateRangeUTC(c.getDateRangeInUTC()).setAggregationPeriod(a.getAggregationPeriod()).setCurrency(b("AnalyticsQueryCurrency").get())};d.$5=function(a,b){var c=this.$3();return c.map(function(c,d){var e=JSON.stringify([d,!1]);d=JSON.stringify([d,!0]);var f=b.has(e)?b.get(e):null;e=a.has(e)?a.get(e):null;d=a.has(d)?a.get(d):null;return{error:f,nonPopQueryResult:e,popQueryResult:d,queryConfig:c}})};d.$6=function(a){return g._("{The event name that's used in the query}: {The metric name that's used in the query}",[g._param("The event name that's used in the query",b("CustomEventStore").getAppEventDisplayName(a.queryConfig.event_name)),g._param("The metric name that's used in the query",b("AnalyticsKPIUtils").getMetricDisplayName(a))])};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderOverlapChart",["AnalyticsErrorBoundary","AnalyticsErrorLoggerFactory","AnalyticsOverlapVennViewContainer","AnalyticsQueryMetric","AnalyticsUIErrorCause","CurrentAnalyticsEntity","FalcorErrorNotice","FBAFilterSet","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.props,d=c.chart;c=c.sessionLoggerID;var e=d.getEventQueries().find(function(a){return a.getMetric()===b("AnalyticsQueryMetric").OVERLAP});if(!e)return null;var f=e.getBreakdowns();if(f.length!==1){b("AnalyticsErrorLoggerFactory").getLogger("universal_builder_overlap_chart").setErrorMessage("Invalid number of breakdown").setErrorType("error").setErrorCause(b("AnalyticsUIErrorCause").UNEXPECTED_DATA_ERROR).log();return b("React").createElement(b("FalcorErrorNotice"),{errorCode:1})}var g=b("FBAFilterSet").resolve({behavior:d.getSegmentBehavior(),global:this.props.globalFilterSetListing.getFilterSet(),local:e.getFilterSet()});return b("React").createElement(b("AnalyticsErrorBoundary"),{cardKey:"universal_builder_overlap_chart"},b("React").createElement(b("AnalyticsOverlapVennViewContainer"),{analyticsEntityID:b("CurrentAnalyticsEntity").getID(),appliedFilterSet:g,appliedSegment:null,chartConfig:d,eventName:e.getEventName(),breakdown:f[0],onChangeDO_NOT_USE:this.props.onChangeDO_NOT_USE,onLoad:this.props.onLoad,visibleDateRange:e.getDateRange().getDateRangeInUTC(),sessionLoggerID:c,ref:function(b){return a.$1=b}}))};d.getExportData=function(){var a=this.$1;return a&&a.getExportData&&a.getExportData()};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderTimeSeriesChart",["AnalyticsChartSize","AnalyticsDashboardTimeSeriesChart","AnalyticsDateRangeStore","AnalyticsErrorBoundary","AnalyticsQueryCurrency","CurrentAnalyticsEntity","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getExportData=function(){var a=this.$1;return a&&a.getExportData&&a.getExportData()};d.render=function(){var a=this,c=this.props.chart,d=c.getEventQueries();if(d.length===0)return null;var e=d[0].getDateRange();e={analyticsEntityID:b("CurrentAnalyticsEntity").getID(),chartSize:b("AnalyticsChartSize").LARGE,currency:b("AnalyticsQueryCurrency").get(),inheritedDateRange:e.getDateRangeInUTC(),inheritedDateRangeType:e.getType(),inheritedFilterSet:this.props.globalFilterSetListing.getFilterSet(),timezoneID:b("AnalyticsDateRangeStore").getTimezoneID()};d={chart_type:"TIME_SERIES",goal:c.getGoal(),id:null,name:"",queries:d.map(function(a){return{aggregation_period:a.getAggregationPeriod(),breakdowns:a.getBreakdowns(),date_range:a.getDateRange(),event_name:a.getEventName(),filter_set_listing:a.getFilterSetListing(),limit:a.getLimit(),metric:a.getMetric(),metric_params:a.getMetricParams(),ordering_columns:a.getOrderingColumns(),ordering_type:a.getOrderingType()}}),segment_behavior:c.getSegmentBehavior()};return b("React").createElement(b("AnalyticsErrorBoundary"),{cardKey:"universal_builder_time_series_chart"},b("React").createElement(b("AnalyticsDashboardTimeSeriesChart"),babelHelpers["extends"]({},e,{cardKey:"universal_builder_time_series_chart",chart:d,onDataLoaded:this.props.onLoad,ref:function(b){return a.$1=b},showLegendTitle:!1})))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderDebounceDataRenderer",["AnalyticsChartType","FalcorErrorNotice","FBASegmentBuilderFeatureLoggerSuccessProxy","FBAUniversalBuilderBarChart","FBAUniversalBuilderBreakdownTableChart","FBAUniversalBuilderCohortChart","FBAUniversalBuilderDonutChart","FBAUniversalBuilderEmptyState","FBAUniversalBuilderFeatureLogger","FBAUniversalBuilderFunnelChart","FBAUniversalBuilderKPITileChart","FBAUniversalBuilderOverlapChart","FBAUniversalBuilderTimeSeriesChart","React","debounce"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=(a={},a[b("AnalyticsChartType").BAR_CHART]=b("FBAUniversalBuilderBarChart"),a[b("AnalyticsChartType").BREAKDOWN_TABLE]=b("FBAUniversalBuilderBreakdownTableChart"),a[b("AnalyticsChartType").COHORT]=b("FBAUniversalBuilderCohortChart"),a[b("AnalyticsChartType").COHORT_HEATMAP]=b("FBAUniversalBuilderCohortChart"),a[b("AnalyticsChartType").DONUT_CHART]=b("FBAUniversalBuilderDonutChart"),a[b("AnalyticsChartType").FUNNEL]=b("FBAUniversalBuilderFunnelChart"),a[b("AnalyticsChartType").KPI_TILE]=b("FBAUniversalBuilderKPITileChart"),a[b("AnalyticsChartType").OVERLAP_CHART]=b("FBAUniversalBuilderOverlapChart"),a[b("AnalyticsChartType").TIME_SERIES]=b("FBAUniversalBuilderTimeSeriesChart"),a);c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.state={globalFilterSetListing:d.props.globalFilterSetListing,metaChartConfig:d.props.metaChartConfig,sessionLoggerID:d.props.sessionLoggerID},d.$2=b("debounce")(function(a){return d.setState(a)},250),d.getExportData=function(){return d.$1&&d.$1.getExportData&&d.$1.getExportData()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidUpdate=function(a){this.props!==a&&this.$2({globalFilterSetListing:this.props.globalFilterSetListing,metaChartConfig:this.props.metaChartConfig,sessionLoggerID:this.props.sessionLoggerID})};d.componentWillUnmount=function(){this.$2.reset()};d.render=function(){__p&&__p();var a=this,c=this.state,d=c.metaChartConfig;c=c.sessionLoggerID;var e=d.getChart(),f=e.getChartType(),h=d.getConfigurationErrorInfo();if(e.getQueries().length==0)return b("React").createElement(b("FBAUniversalBuilderEmptyState"),{chartType:f});else if(h)return b("React").createElement(b("FalcorErrorNotice"),{message:h.message,style:{height:300}});else{h=g[f];if(h)return b("React").createElement(h,{chart:e,globalFilterSetListing:this.state.globalFilterSetListing,metaChartConfig:d,onLoad:this.$3,sessionLoggerID:c,onChangeDO_NOT_USE:this.props.onChangeDO_NOT_USE,ref:function(b){return a.$1=b}});else return null}};d.$3=function(){b("FBASegmentBuilderFeatureLoggerSuccessProxy").chartUpdated(),b("FBAUniversalBuilderFeatureLogger").success()};return c}(b("React").PureComponent);e.exports=c}),null);
__d("FBAUniversalBuilderEventMetricOptionRenderer",["FBAUniversalBuilderMetaEventUtils","FBAUniversalBuilderSubheaderOptionSelector","FlexLayout.react","React","SUIBusinessTheme","SUISelectorOption.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a=d.props.option.update(a);b("FBAUniversalBuilderMetaEventUtils").logSelectorOnChangeEvent(d.props.option,a);d.props.onChange(a)},d.$3=function(){b("FBAUniversalBuilderMetaEventUtils").logSelectorOnOpenEvent(d.props.option)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.option,c=a.hidden;if(c)return null;c=a.getCurrentMetric();var d=a.getSupportedMetrics();return b("React").createElement(b("FlexLayout.react"),null,this.$1(c,d,a.disabled))};d.$1=function(a,c,d){c=c.map(function(a){return b("React").createElement(b("SUISelectorOption.react"),{key:a.metric,value:a.metric},a.label)});return b("React").createElement(b("FBAUniversalBuilderSubheaderOptionSelector"),{disabled:d,onChange:this.$2,onOpen:this.$3,theme:b("SUIBusinessTheme"),value:a},c)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderEventSelector",["ix","cssVar","cx","fbt","AnalyticsLoadingSpinner","AnalyticsSegmentUtils","ContextualLayerAutoFlip","CornerEnum","CustomEventStore","FBAChartConst","FBAChartEventDisplayStyle","FBAMetaChartRuleUtils","FBAUniversalBuilderAddItemButton","FDSText.react","FlexLayout.react","FluxContainer","GriffinEventRefinementSegmentBuilderDrawer","GriffinParameterBuilderDrawer","GriffinSegmentRules","Image.react","Link.react","React","SearchableEntry","SUIAnalyticsGriffinUniversalBuilderTheme","SUICloseButton.react","SUISearchableSelector.react","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogFooter.react","XUIContextualDialogTitle.react","XUIDialogButton.react","XUIDialogCloseButton.react","asset","emptyFunction","immutable","joinClasses","nullthrows","suiMargin"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a=b("FBAChartConst").CUSTOM_EVENT;var k=b("FBAChartConst").PREDEFINED_EVENT,l=b("FBAMetaChartRuleUtils").createEventRuleSegment,m=b("GriffinSegmentRules").Types,n=j._("Selected").toString();function o(a,b){if(a===n)return-1;if(b===n)return 1;if(a===k)return-1;return b===k?1:0}var p={areCategoriesCollapsible:!0,buttonRoundedCorners:b("CornerEnum").values,dropdownWidth:"auto",hasCategories:!0,initiallyExpandedCategories:[k,a,n],theme:b("SUIAnalyticsGriffinUniversalBuilderTheme")},q=j._("Refine");c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a,c,e){return c||e?b("React").createElement(b("Link.react"),{className:"_3-99",display:"block",onMouseDown:function(a){d.props.onRefineToggle(!0)}},b("React").createElement(b("FDSText.react"),{color:"highlight",textAlign:"right",weight:"bold"},q," ",b("React").createElement(b("Image.react"),{src:g("542674")}))):null},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CustomEventStore")]};c.calculateState=function(a,c){var d=!b("CustomEventStore").isInitialized();if(a==null)return{editedEventSegment:c.canRefine&&c.index!=null?b("AnalyticsSegmentUtils").toGraphAPISegment(c.selectedEventSegments[c.index]):null,eventSegmentFromProps:c.index!=null?c.selectedEventSegments[c.index]:null,isLoadingCustomEvents:d};var e=c.index!=null?c.selectedEventSegments[c.index]:null;return e!==a.eventSegmentFromProps?{editedEventSegment:c.canRefine&&e?b("AnalyticsSegmentUtils").toGraphAPISegment(e):null,eventSegmentFromProps:e,isLoadingCustomEvents:d}:babelHelpers["extends"]({},a,{isLoadingCustomEvents:d})};var d=c.prototype;d.render=function(){__p&&__p();if(this.state.isLoadingCustomEvents)return b("React").createElement(b("AnalyticsLoadingSpinner"),null);var a=this.props,c=a.canRefine,d=a.canRemove,e=a.canRepeat,f=a.className,g=a.disabled,h=a.displayStyle,i=a.index,k=a.onChange,m=a.onOpen,q=a.onRefineToggle,r=a.selectedEventSegments;a=r.map(function(a){return a.event_rules[0].event_rule.event_name});var s=null,t=null,u=null,v=this.props.searchSource,w=null;if(i!=null){s=a[i];var x=r[i],y=x.event_rules[0].event_rule.parameters.length+x.demographic_rules.length+x.device_rules.length+x.user_property_rules.length+x.web_param_rules.length;w=v.find(s);w=new(b("SearchableEntry"))({title:w?w.getTitle():b("CustomEventStore").getAppEventDisplayName(s),type:n,uniqueID:s});v=v.update(s,w);x=h===b("FBAChartEventDisplayStyle").FUNNEL&&x.event_rules[0].name||w.getTitle();t=b("React").createElement("span",{className:g?"":"_7oaf"},x+(y>0?" ("+y+")":""));u=h===b("FBAChartEventDisplayStyle").FUNNEL?j._("{=[index] .}",[j._param("=[index] .",b("React").createElement("span",{className:"_1eae _6asy"},j._({"*":"{index}."},[j._param("index",i+1,[0])])))]):null}x=e?new Set():new Set(a);x["delete"](s);return b("React").createElement(b("FlexLayout.react"),{align:"center",className:b("joinClasses")("_1eaf",f),direction:"horizontal",justify:"center",key:(y=i)!=null?y:"add"},u,b("React").createElement(b("SUISearchableSelector.react"),babelHelpers["extends"]({},p,{buttonUniformOverride:this.$1(),categoriesCompare:o,customLabel:t,disabledEntryIDs:x,getRightContentForEntry:c?this.$2:void 0,isDisabled:g,onChange:function(a){var b=r.slice();a=a.getUniqueID();if(i==null)b.push(l(a)),k(b,"add");else{if(a===s)return;b[i]=l(a);k(b,"change")}},onOpened:m,placeholder:this.$3(),ref:"selector",searchSource:v,value:w})),d&&i!=null?b("React").createElement(b("FlexLayout.react"),{align:"center",className:"_1eag",justify:"center"},b("React").createElement(b("SUICloseButton.react"),{onClick:function(a){a=r.slice();a.splice(i,1);q(!1);k(a,"remove")},theme:b("SUIAnalyticsGriffinUniversalBuilderTheme")})):null,this.renderLayers())};d.$1=function(){return this.props.selectedEventSegments.length===0?{use:{"default":{active:{background:"#1D3C78",color:"white"},normal:{background:"#3578E5",color:"white"}}}}:null};d.$3=function(){var a=this.props.selectedEventSegments.length===0;return b("React").createElement(b("FBAUniversalBuilderAddItemButton"),{className:(a?"_2pi9":"")+(a?"":" _2pi7"),iconOnly:!a,placeholder:this.props.placeholder})};d.renderLayers=function(){__p&&__p();var a=this,c=this.props,d=c.canEditAlias,e=c.canRefine,f=c.displayStyle,g=c.index,h=c.onChange,i=c.selectedEventSegments;if(!e||g==null||this.props.refineIndex!==g)return null;var k=b("nullthrows")(this.state.editedEventSegment);return b("React").createElement(b("XUIContextualDialog.react"),{behaviors:{ContextualLayerAutoFlip:b("ContextualLayerAutoFlip")},contextRef:function(){return a.refs.selector},hideOnBlur:!0,hideOnEscape:!0,offsetY:-10,onToggle:this.props.onRefineToggle,position:"below",shown:!0,width:770},b("React").createElement(b("XUIContextualDialogTitle.react"),null,q),b("React").createElement(b("XUIContextualDialogBody.react"),{className:"_6kjv"},f===b("FBAChartEventDisplayStyle").FUNNEL?b("React").createElement(b("GriffinEventRefinementSegmentBuilderDrawer"),{anchor:null,enabledRuleTypes:b("immutable").Set([m.APP_EVENT,m.TECHNOLOGY,m.DEMOGRAPHIC,m.WEB_PARAMS,m.USER_PROPERTY]),enableEventRuleRename:d,key:g,onChangeHeight:b("emptyFunction"),onChangeSegment:function(b){return a.setState({editedEventSegment:b})},segment:k}):b("React").createElement(b("GriffinParameterBuilderDrawer"),{anchor:null,eventRule:((c=k.event_rules)!=null?c:[])[0],onChangeEventRule:function(b){a.setState({editedEventSegment:babelHelpers["extends"]({},k,{event_rules:[b]})})}})),b("React").createElement(b("XUIContextualDialogFooter.react"),null,b("React").createElement(b("XUIDialogCloseButton.react"),{onClick:function(){return a.props.onRefineToggle(!1)},use:"default"}),b("React").createElement(b("XUIDialogButton.react"),{label:j._("Apply"),onClick:function(){var c=i.slice();c[g]=b("AnalyticsSegmentUtils").toSegment(k);h(c,"change");a.props.onRefineToggle(!1)},use:"confirm"})))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(c,{withProps:!0})}),null);
__d("FBAUniversalBuilderEventNameOptionRenderer",["cx","fbt","ActiveSectionStore","AnalyticsKeywordSearchSource","CSS","FalcorCommonViews","FBAChartConst","FBAChartEventDisplayStyle","FBAUniversalBuilderEventSelector","FBAUniversalBuilderMetaEventUtils","FlexLayout.react","GriffinNUX","GriffinOrderableList.react","GriffinSections","React","ReactDOM","SearchableEntry","SimpleNUXMessage","SimpleNUXMessageTypes","uuid"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FBAChartConst").CUSTOM_EVENT,j=b("FBAChartConst").PREDEFINED_EVENT;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={refineIndex:null,searchSource:new(b("AnalyticsKeywordSearchSource"))([])},d.$6=function(a,c){__p&&__p();a=d.props.option.update(a);switch(c){case"add":b("FBAUniversalBuilderMetaEventUtils").logAddEventMetaEvent(d.props.option);break;case"change":b("FBAUniversalBuilderMetaEventUtils").logSelectorOnChangeEvent(d.props.option,a);break;case"move":b("FBAUniversalBuilderMetaEventUtils").logMoveEventMetaEvent(d.props.option);break;case"remove":b("FBAUniversalBuilderMetaEventUtils").logRemoveEventMetaEvent(d.props.option);break}d.props.onChange(a)},d.$7=function(){b("FBAUniversalBuilderMetaEventUtils").logSelectorOnOpenEvent(d.props.option)},d.$2=function(){var a=b("ReactDOM").findDOMNode(d.refs.container);a instanceof Element&&b("CSS").addClass(a,"_6m9g")},d.$3=function(a){d.$6(a.map(function(a){return a.item}),"move");a=b("ReactDOM").findDOMNode(d.refs.container);a instanceof Element&&b("CSS").removeClass(a,"_6m9g")},d.$4=function(a){return a.addEvent?d.$8():null},d.$5=function(a,b,c){return d.$9(b,c.map(function(a){a=a.item;return a}))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidUpdate=function(a,c){this.state.refineIndex!=c.refineIndex&&b("FBAUniversalBuilderMetaEventUtils").logToggleRefineMetaEvent(this.props.option,this.state.refineIndex!=null)};d.render=function(){var a=this.props.option,c=a.hidden,d=a.maxEvents,e=a.displayStyle;if(c)return null;c=a.getCurrentEventStages();a=!a.disabled&&c.length<d;d=b("ActiveSectionStore").getActiveSectionName();d=(b("ActiveSectionStore").getActiveSectionName()===b("GriffinSections").OVERLAP||(d===b("GriffinSections").BREAKDOWN_TABLE||d===b("GriffinSections").COHORTS||d===b("GriffinSections").FUNNELS)&&b("ActiveSectionStore").getView()!==b("FalcorCommonViews").CREATE)&&!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").ANALYTICS_UNIVERSAL_BUILDER_BREAKDOWN_SECTION_CONTROLS);return b("React").createElement(b("FlexLayout.react"),{className:"_1ip3"+(a?"":" _3-91")+(a?" _3-90":""),ref:"container"},b("React").createElement(b("GriffinNUX"),{canShow:d,contextRef:"breakdownSectionOptionMenuNUX",nuxKey:b("SimpleNUXMessageTypes").ANALYTICS_UNIVERSAL_BUILDER_BREAKDOWN_SECTION_CONTROLS,offsetX:15,offsetY:30,position:"below",title:h._("Explore your data by changing the configuration of this chart. Click on the blue text to modify."),width:"normal"},b("React").createElement("span",null)),e!==b("FBAChartEventDisplayStyle").FUNNEL?this.$1(a):b("React").createElement(b("GriffinOrderableList.react"),{auxiliaryItems:[{addEvent:a}],items:c.map(function(a,c){return{item:a,key:b("uuid")()}}),onDragStart:this.$2,onDrop:this.$3,renderAuxiliaryItem:this.$4,renderItem:this.$5,renderPlaceholder:this.$5}))};c.getDerivedStateFromProps=function(a){a=a.option;if(a.hidden)return null;a=a.getSupportedEvents().map(function(a){return new(b("SearchableEntry"))({title:a.label,type:a.isPredefined?j:i,uniqueID:a.eventName})});return{searchSource:new(b("AnalyticsKeywordSearchSource"))(a)}};d.$8=function(){var a=this,c=this.props.option,d=c.canEditAlias,e=c.canRefineEvent,f=c.disabled,g=c.hidden,h=c.repetition,i=c.displayStyle,j=c.placeholder;if(g)return null;var k=c.getCurrentEventStages();g=k.length?"add":"add-first";return b("React").createElement("span",{key:g},b("React").createElement(b("FBAUniversalBuilderEventSelector"),{canEditAlias:d,canRefine:e,canRemove:!1,canRepeat:h,disabled:f,displayStyle:i,index:null,key:g,onChange:this.$6,onOpen:this.$7,onRefineToggle:function(b){return a.setState({refineIndex:b?k.length:null})},placeholder:j,searchSource:this.state.searchSource,selectedEventSegments:k}))};d.$9=function(a,c){var d=this,e=this.props.option,f=e.canEditAlias,g=e.canRefineEvent,h=e.disabled,i=e.repetition,j=e.minEvents,k=e.displayStyle;e=e.placeholder;j=!h&&c.length>j;var l=a<c.length-1&&k!==b("FBAChartEventDisplayStyle").COHORT;return b("React").createElement(b("FBAUniversalBuilderEventSelector"),{canEditAlias:f,canRefine:g,canRemove:j,canRepeat:i,className:(l&&!j?"_3-92":"")+(l&&j?" _3-90":""),disabled:h,displayStyle:k,index:a,key:a,onChange:this.$6,onOpen:this.$7,onRefineToggle:function(b){return d.setState({refineIndex:b?a:null})},placeholder:e,refineIndex:this.state.refineIndex,searchSource:this.state.searchSource,selectedEventSegments:c})};d.$1=function(a){var c=this,d=this.props.option.getCurrentEventStages(),e=d.map(function(a,b){return c.$9(b,d)});this.props.option.displayStyle===b("FBAChartEventDisplayStyle").COHORT&&e.length===2&&e.splice(1,0,b("React").createElement("span",{className:"_4yra _3-8t",key:"separator"},h._("to")));a&&e.push(this.$8());return e};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderFilterSetOptionRenderer",["cx","fbt","AnalyticsDateRangeType","AnalyticsFilterSetListingControllerQueryRenderer","FBADateRange","FBAEmptyFilterSetListing","FBAMetaChartRuleUtils","FBAUniversalBuilderMetaEventUtils","React","SUIBusinessTheme","SUICard.react","SUICardBody.react","SUICardHeader.react","SUICardTitle.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FBAMetaChartRuleUtils").getFirstDateRangeFromChart;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$3=function(a){a=d.props.option.updateFilter((a=a)!=null?a:b("FBAEmptyFilterSetListing"));b("FBAUniversalBuilderMetaEventUtils").logSelectorOnChangeEvent(d.props.option,a);d.props.onChange(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props,c=a.option,d=a.metaChartConfig;a=a.shouldUseNewDesign;c=c.hidden;if(c)return null;d=((d=i(d.getChart()))!=null?d:new(b("FBADateRange"))({range:b("AnalyticsDateRangeType").LAST_28_DAYS})).getDateRangeInUTC();return b("React").createElement("div",{className:(this.props.showAnimation&&a!==!0?"_6jwx":"")+(c?" _6jwy":"")+(a===!0?" _7rte":"")+(a!==!0?" _6jwt":"")},a===!0?this.$1(d):this.$2(d))};d.$1=function(a){return b("React").createElement("div",null,b("React").createElement(b("AnalyticsFilterSetListingControllerQueryRenderer"),{appliedFilterSetListing:this.props.option.getCurrentFilter(),clearMetadataOnEdit:!0,comparisonIsSupported:!1,disabled:this.props.shouldDisableFilterPill,isInHeader:!1,onChangeAppliedFilterSetListing:this.$3,shouldUseNewDesign:this.props.shouldUseNewDesign,showActionButton:!1,useWholeScreenWidth:!1,visibleDateRange:a}))};d.$2=function(a){return b("React").createElement(b("SUICard.react"),{theme:b("SUIBusinessTheme")},b("React").createElement(b("SUICardHeader.react"),null,b("React").createElement(b("SUICardTitle.react"),null,h._("Filters"))),b("React").createElement(b("SUICardBody.react"),null,b("React").createElement("div",{className:"_6_hk"},b("React").createElement(b("AnalyticsFilterSetListingControllerQueryRenderer"),{appliedFilterSetListing:this.props.option.getCurrentFilter(),clearMetadataOnEdit:!0,comparisonIsSupported:!1,isInHeader:!1,onChangeAppliedFilterSetListing:this.$3,showActionButton:!1,useWholeScreenWidth:!1,visibleDateRange:a}))))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderFunnelTimeConstraintOptionRenderer",["FBAUniversalBuilderMetaEventUtils","FlexLayout.react","GriffinTimeConstraintSelector","React","suiMargin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){a=d.props.option.update(a);b("FBAUniversalBuilderMetaEventUtils").logSelectorOnChangeEvent(d.props.option,a);d.props.onChange(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.option,c=a.hidden;return c?null:b("React").createElement(b("FlexLayout.react"),{className:"_3-90"},b("React").createElement(b("GriffinTimeConstraintSelector"),{daysInRange:a.getDaysInRange(),onTimeConstraintChange:this.$1,theme:"UNIVERSAL_BUILDER",timeConstraintInSeconds:a.getCurrentTimeConstraint()}))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderOptionTransitionItem",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return this.props.children};return b}(b("React").Component);e.exports=a}),null);
__d("FBAUniversalBuilderOptionTransitionGroup",["cx","AnalyticsLoadingSpinner","CustomEventStore","FBAUniversalBuilderOptionTransitionItem","FlexLayout.react","FluxContainer","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=.7;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){var c=d.state.animationOrder,e=a.props.option;c=e!=null&&e in c?c[e]:-1;return b("React").createElement("div",{className:c!==-1?"_4s4o":"",style:{animationDelay:h*c+"s"}},a)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CustomEventStore")]};c.calculateState=function(a,c){a=(a=a)!=null?a:{animationOrder:{},isLoadingCustomEvents:!1};var d=a.animationOrder,e={},f=0;b("React").Children.forEach(c.children,function(a){a=a.props.option;e[a]=a==null||a in d?-1:f++});return{animationOrder:e,isLoadingCustomEvents:!b("CustomEventStore").isInitialized()}};var d=c.prototype;d.render=function(){return this.state.isLoadingCustomEvents?b("React").createElement(b("AnalyticsLoadingSpinner"),null):b("React").createElement(b("FlexLayout.react"),{align:this.props.shouldAlignAtStart===!0?"start":"center",className:this.props.className},b("React").Children.map(this.props.children,this.$1))};return c}(b("React").Component);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("FBAUniversalBuilderToast",["ix","cx","fbt","Animation","FDSText.react","FlexLayout.react","Image.react","Link.react","React","ReactDOM","SUIAnalyticsGriffinTheme","SUICloseButton.react","asset","suiMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j="20px",k="-5px";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isClickable:!1},d.$1=null,d.$4=function(){d.setState({isClickable:!1});if(!d.$1)return;var a=b("ReactDOM").findDOMNode(d.$1);a instanceof HTMLElement&&(a.style.opacity="0",a.style.top=j)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this.props.message;a!=null&&a!==""&&this.$2()};d.componentDidUpdate=function(a){var b=this.props.message;a.message!==b&&b!=null&&b!==""&&this.$2()};d.render=function(){var a=this,c=this.props.message;return c==null||c===""?null:b("React").createElement(b("FlexLayout.react"),{align:"center",direction:"vertical",className:(this.state.isClickable?"":"_884z")+" _3jrl"},b("React").createElement(b("FlexLayout.react"),{align:"center",className:"_3jrp",ref:function(b){return a.$1=b}},b("React").createElement("div",{style:{height:16}},b("React").createElement(b("Image.react"),{className:"_3-91",src:g("380536")})),b("React").createElement(b("FDSText.react"),{size:"body1",color:"white"},this.props.message),this.$3(),b("React").createElement(b("SUICloseButton.react"),{onClick:this.$4,shade:"light",style:{marginLeft:12},theme:b("SUIAnalyticsGriffinTheme")})))};d.$3=function(){var a=this,c=this.props.onUndo;return!c?null:b("React").createElement(b("Link.react"),{style:{marginLeft:12,height:"18px"},onClick:function(){a.$4(),c()}},b("React").createElement(b("FDSText.react"),{size:"body1",palette:"dark"},i._("Undo?")))};d.$2=function(){if(!this.$1)return;var a=b("ReactDOM").findDOMNode(this.$1);this.setState({isClickable:!0});new(b("Animation"))(a).from("top",j).from("opacity",0).to("top",k).to("opacity",1).duration(500).go()};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBAUniversalBuilderUtils",["FBAMetaChartConfigs","FBAMetaChartRules","FBAMetaChartRuleUtils","areEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBAMetaChartRules").ApplyDateRangeRule,h=b("FBAMetaChartRuleUtils").getFirstDateRangeFromChart;a={getDerivedStateFromProps:function(a,c){__p&&__p();var d=c.metaChartConfig.getChart(),e=a.defaultChartConfig;e&&(!c.currentDefaultChartConfig||!c.currentDefaultChartConfig.equals(e))&&!d.equals(e)&&(d=e);var f=a.dateRangeOverride;if(f){var i=h(d);i=!i||i.equals(f);i||(d=new g(f).apply(d))}i={};i.currentDefaultChartConfig=e||null;f=d!==c.metaChartConfig.getChart();e=!b("areEqual")(a.chartContext,c.metaChartConfig.getContext());(f||e)&&(i.metaChartConfig=b("FBAMetaChartConfigs").getMetaChartConfig(d,a.chartContext));f&&(i.prevMetaChartConfig=null);return i}};e.exports=a}),null);
__d("FBAUniversalBuilder",["cx","AnalyticsChartSegmentBehavior","AnalyticsChartType","AnalyticsExportUtils","AnalyticsFDSCard","AnalyticsOnlyModeCardContents","FBAChartConfig","FBAMetaChartConfigs","FBAMetaChartOptionPlacement","FBAMetaChartOptionTypes","FBAUniversalBuilderActionRenderer","FBAUniversalBuilderAggregationPeriodOptionRenderer","FBAUniversalBuilderBreakdownOptionRenderer","FBAUniversalBuilderChartNameOptionRenderer","FBAUniversalBuilderChartTypeOptionRenderer","FBAUniversalBuilderCohortCollationIntervalOptionRenderer","FBAUniversalBuilderCohortMetricOptionRenderer","FBAUniversalBuilderDateRangeOptionRenderer","FBAUniversalBuilderDebounceDataRenderer","FBAUniversalBuilderEventMetricOptionRenderer","FBAUniversalBuilderEventNameOptionRenderer","FBAUniversalBuilderFilterSetOptionRenderer","FBAUniversalBuilderFunnelTimeConstraintOptionRenderer","FBAUniversalBuilderOptionTransitionGroup","FBAUniversalBuilderOptionTransitionItem","FBAUniversalBuilderToast","FBAUniversalBuilderUtils","FDSSection.react","FlexLayout.react","LeftRight.react","Link.react","React","SUIAnalyticsGriffinTheme","SUIButton.react","SUIToggleButtonGroup.react","suiMargin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.state={currentDefaultChartConfig:d.props.defaultChartConfig,debugMode:!1,metaChartConfig:b("FBAMetaChartConfigs").getMetaChartConfig(d.props.defaultChartConfig||new(b("FBAChartConfig"))({chartType:b("AnalyticsChartType").TIME_SERIES,segmentBehavior:b("AnalyticsChartSegmentBehavior").USE_GLOBAL}),d.props.chartContext),prevMetaChartConfig:null},d.$11=function(){var a=d.$1&&d.$1.getExportData();a&&b("AnalyticsExportUtils").exportDataFromChart(a,d.state.metaChartConfig.getChart())},d.$10=function(a){if(d.state.metaChartConfig.getChart().equals(a))return;var c=b("FBAMetaChartConfigs").getMetaChartConfig(a,d.props.chartContext);d.setState(function(a){return{metaChartConfig:c,prevMetaChartConfig:a.metaChartConfig}});d.props.onChange&&d.props.onChange(c)},d.$4=function(){d.setState(function(a){return{debugMode:!a.debugMode}})},d.$12=function(a){__p&&__p();var c=d.state,e=c.debugMode;c=c.metaChartConfig;var f=c.getChart(),g=null;if(!a.hidden)switch(a.type){case b("FBAMetaChartOptionTypes").BREAKDOWN:g=b("React").createElement(b("FBAUniversalBuilderBreakdownOptionRenderer"),{onChange:d.$10,option:a});break;case b("FBAMetaChartOptionTypes").CHART_TYPE:g=b("React").createElement(b("FBAUniversalBuilderChartTypeOptionRenderer"),{onChange:d.$10,option:a});break;case b("FBAMetaChartOptionTypes").EVENT_NAME:g=b("React").createElement(b("FBAUniversalBuilderEventNameOptionRenderer"),{onChange:d.$10,option:a});break;case b("FBAMetaChartOptionTypes").FUNNEL_TIME_CONSTRAINT:g=b("React").createElement(b("FBAUniversalBuilderFunnelTimeConstraintOptionRenderer"),{onChange:d.$10,option:a});break;case b("FBAMetaChartOptionTypes").COHORT_METRIC:g=b("React").createElement(b("FBAUniversalBuilderCohortMetricOptionRenderer"),{onChange:d.$10,option:a});break;case b("FBAMetaChartOptionTypes").COHORT_COLLATION_INTERVAL:g=b("React").createElement(b("FBAUniversalBuilderCohortCollationIntervalOptionRenderer"),{onChange:d.$10,option:a});break;case b("FBAMetaChartOptionTypes").EVENT_METRIC:g=b("React").createElement(b("FBAUniversalBuilderEventMetricOptionRenderer"),{onChange:d.$10,option:a});break;case b("FBAMetaChartOptionTypes").AGGREGATION_PERIOD:g=b("React").createElement(b("FBAUniversalBuilderAggregationPeriodOptionRenderer"),{onChange:d.$10,option:a});break;case b("FBAMetaChartOptionTypes").DATE_RANGE:g=b("React").createElement(b("FBAUniversalBuilderDateRangeOptionRenderer"),{onChange:d.$10,option:a});break;case b("FBAMetaChartOptionTypes").CHART_NAME:g=b("React").createElement(b("FBAUniversalBuilderChartNameOptionRenderer"),{metaChartConfig:c,option:a,shouldUseNewDesign:d.props.shouldUseNewDesign});break;case b("FBAMetaChartOptionTypes").SEGMENT:g=b("React").createElement(b("FBAUniversalBuilderFilterSetOptionRenderer"),{metaChartConfig:c,onChange:d.$10,option:a,ref:"segmentOption",shouldDisableFilterPill:d.props.shouldUseNewDesign===!0&&f.getQueries().length===0,shouldUseNewDesign:d.props.shouldUseNewDesign,showAnimation:d.refs.root&&!d.refs.segmentOption});break}c=g?a.type:null;f=a.getConfigurationErrorInfo();return b("React").createElement(b("FBAUniversalBuilderOptionTransitionItem"),{key:a.type,option:c},e?b("React").createElement("div",{className:"_6j2f"},b("React").createElement("div",null,a.title),b("React").createElement("div",null,"Error: "+String(f?f.message:"")),g):g)},c)||babelHelpers.assertThisInitialized(d)}c.getDerivedStateFromProps=function(a,c){return b("FBAUniversalBuilderUtils").getDerivedStateFromProps(a,c)};var d=c.prototype;d.render=function(){var a=this.state.metaChartConfig.getChart();return this.props.shouldUseNewDesign===!0?this.$2(a):this.$3(a)};d.$2=function(a){var c=this;return b("React").createElement(b("AnalyticsFDSCard"),null,b("React").createElement(b("FDSSection.react"),null,null,b("React").createElement("div",{className:this.state.debugMode?"_41_o":""},b("React").createElement(b("FBAUniversalBuilderToast"),{message:this.state.metaChartConfig.getSanitizationWarning(),onUndo:this.state.prevMetaChartConfig?function(){return c.$5(c.state)}:null}),b("React").createElement(b("FlexLayout.react"),{className:"_7qna"},b("React").createElement("div",{className:"_82xx"},this.$6(b("FBAMetaChartOptionPlacement").CHART_NAME)),this.$7())),b("React").createElement("div",null,b("React").createElement(b("FlexLayout.react"),{className:"_82xy"},this.$6(b("FBAMetaChartOptionPlacement").CHART_TYPE),b("React").createElement(b("FBAUniversalBuilderOptionTransitionGroup"),{className:"_28q8",shouldAlignAtStart:!0},this.$6(b("FBAMetaChartOptionPlacement").HEADER)))),b("React").createElement("div",null,this.$6(b("FBAMetaChartOptionPlacement").OVERHEAD_LEFT)),b("React").createElement("div",{className:"_7rt5"},this.$8(),this.props.analyticsOnlyModeWithDemo?b("React").createElement(b("AnalyticsOnlyModeCardContents"),null):b("React").createElement(b("FlexLayout.react"),{align:"stretch",className:a.getChartType()!==b("AnalyticsChartType").BREAKDOWN_TABLE?"_3ygw":"",direction:"vertical"},this.$9()))))};d.$7=function(){var a;return b("React").createElement(b("FlexLayout.react"),null,(a=this.props.chartBuilderButtons)!=null?a:null,b("React").createElement(b("FBAUniversalBuilderActionRenderer"),{chartContext:this.props.chartContext,config:this.state.metaChartConfig,globalFilterSetListing:this.props.globalFilterSetListing,onChange:this.$10,onExportData:this.$11}))};d.$3=function(a){var c=this;return b("React").createElement("div",null,this.props.canChangeSegmentBehavior?b("React").createElement("div",null,"Segment Behavior:",b("React").createElement(b("SUIToggleButtonGroup.react"),{display:"inline",margin:"_3-9a _3-96",onChange:function(b){return c.$10(a.update({segmentBehavior:b}))},theme:b("SUIAnalyticsGriffinTheme"),value:a.getSegmentBehavior()},Object.keys(b("AnalyticsChartSegmentBehavior")).map(function(a){return b("React").createElement(b("SUIButton.react"),{key:a,label:a,value:a})}))):null,null,this.$6(b("FBAMetaChartOptionPlacement").OVERHEAD_LEFT),b("React").createElement("div",{className:(this.state.debugMode?"_41_o":"")+" _1kuz",ref:"root"},b("React").createElement(b("FBAUniversalBuilderToast"),{message:this.state.metaChartConfig.getSanitizationWarning(),onUndo:this.state.prevMetaChartConfig?function(){return c.$5(c.state)}:null}),b("React").createElement(b("FlexLayout.react"),{className:"_14nk",justify:"all"},this.$6(b("FBAMetaChartOptionPlacement").CHART_TYPE),b("React").createElement(b("FBAUniversalBuilderOptionTransitionGroup"),{className:"_28q8"},this.$6(b("FBAMetaChartOptionPlacement").HEADER)),b("React").createElement(b("FBAUniversalBuilderActionRenderer"),{chartContext:this.props.chartContext,config:this.state.metaChartConfig,globalFilterSetListing:this.props.globalFilterSetListing,onChange:this.$10,onExportData:this.$11})),this.$8(),this.props.analyticsOnlyModeWithDemo?b("React").createElement(b("AnalyticsOnlyModeCardContents"),null):b("React").createElement(b("FlexLayout.react"),{align:"stretch",className:a.getChartType()!==b("AnalyticsChartType").BREAKDOWN_TABLE?"_3ygw":"",direction:"vertical"},this.$9())))};d.$8=function(){var a=this.$6(b("FBAMetaChartOptionPlacement").SUBHEADER_LEFT),c=this.$6(b("FBAMetaChartOptionPlacement").SUBHEADER_RIGHT);return!a.length&&!c.length?null:b("React").createElement(b("LeftRight.react"),{className:"_1ipy"},b("React").createElement(b("FlexLayout.react"),null,a),b("React").createElement(b("FlexLayout.react"),null,c))};d.$5=function(a){a=(a.prevMetaChartConfig||a.metaChartConfig).getChart();a=b("FBAMetaChartConfigs").getMetaChartConfig(a,this.props.chartContext);this.setState({metaChartConfig:a,prevMetaChartConfig:null});this.props.onChange&&this.props.onChange(a)};d.$6=function(a){var b=this.state,c=b.metaChartConfig,d=b.debugMode;return c.getOptions().filter(function(b){return b.placement===a&&(!b.hidden||d)}).map(this.$12)};d.$9=function(){var a=this,c=this.state,d=c.debugMode;c=c.metaChartConfig;return b("React").createElement(b("React").Fragment,null,d?b("React").createElement("div",{style:{whiteSpace:"pre"}},JSON.stringify(c.getChart(),null,4)):null,b("React").createElement("div",{style:{margin:"auto",width:"100%"}},b("React").createElement(b("FBAUniversalBuilderDebounceDataRenderer"),{globalFilterSetListing:this.props.globalFilterSetListing,metaChartConfig:c,onChangeDO_NOT_USE:this.$10,ref:function(b){return a.$1=b},sessionLoggerID:this.props.sessionLoggerID})))};return c}(b("React").Component);a.defaultProps={analyticsOnlyModeWithDemo:!1,canChangeSegmentBehavior:!1,chartContext:babelHelpers["extends"]({},void 0)};e.exports=a}),null);